"use strict";(self.webpackChunk_postman_app_renderer=self.webpackChunk_postman_app_renderer||[]).push([[80],{"../../node_modules/@postman/aether/esmLib/src/components/Illustration/page-illustrations/NoAccess.js":function(e,t,s){s.r(t);var o=s("../../node_modules/react/index.js"),a=s("../../node_modules/@postman/aether/esmLib/src/components/Illustration/Illustration.js");t.default=function(){return o.createElement(a.default,{name:"page-illustration-no-access"})}},"./collaboration/components/workspace/WorkspaceForbidden.js":function(e,t,s){s.r(t);var o=s("../../node_modules/react/index.js"),a=s("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),n=s("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),r=s("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/NoPermission.js"),l=s("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),c=s("../../node_modules/mobx/lib/mobx.module.js"),i=s("./growth/foundation/public/amplitude/AmplitudeService.js"),d=s("./js/components/base/Buttons.js"),u=s("./js/services/NavigationService.js"),m=s("./collaboration/constants/workspace.js"),p=s("./apinetwork/navigation/constants.js"),E=s("./collaboration/navigation/constants.js"),f=s("./appsdk/utils/PublicWorkspaceUtils.js"),_=s("./collaboration/workspace/components/workspace-request-access/WorkspaceRFA.tsx"),k=s("./js/services/CurrentUserDetailsService.js"),w=s("./billing/stores/PlanFeaturesStore.js"),h=s("./js/stores/StoreManager.js"),g=s("./js/stores/CurrentUserStore.js"),b=s("./collaboration/workspace/service/AccessRequestService.ts"),v=s("./collaboration/workspace/types/WorkspaceTypes.ts"),S=s("./js/navigation/active-mode/constants.js"),j=s("./node_modules/lodash/lodash.js");const y=1e4,I=(0,l.default)(a.default)`
  margin-top: 25vh;
`,A=l.default.div`
  position: absolute;
  top: 50%;
  left: 50%;
`,x=(0,l.default)(d.Button)`
  margin: var(--spacing-l) 0;
`;function N(){const e=(0,f.isServedFromPublicWorkspaceDomain)()?p.OPEN_EXPLORE_HOME_IDENTIFIER:E.ALL_WORKSPACES_IDENTIFIER;u.default.transitionTo(e)}function P(){return u.default.transitionTo(S.HOME_DEFAULT)}t.default=({workspaceId:e})=>{const[t,s]=(0,o.useState)(!0),[a,l]=(0,o.useState)(!1),[p,E]=(0,o.useState)(!1),[S,T]=(0,o.useState)(!1),[R,C]=(0,o.useState)(!1);(0,o.useEffect)((()=>{let t=u.default.getActiveQueryParams().get();"share"===j.get(t,"action")&&i.Ampli.shareEntityLinkError({entity_type:"collection",error_type:"workspaceForbidden"});const o=async()=>{try{await w.default.onPlanFeaturesLoad({timeout:y})}catch(e){pm.logger.error("WorkspaceForbidden~checkPrivateWorkspacesPlan: Error while loading plan features",e)}return j.get(w.default,["plan","features","private_team_workspaces_enabled","value"],!0)},a=async()=>(await(0,c.when)((()=>(0,h.resolveStoreInstance)(g.default).userStoreInitialised),{timeout:y}),Boolean((0,h.resolveStoreInstance)(g.default).isCurrentUserPartner)),n=async()=>(await(0,c.when)((()=>(0,h.resolveStoreInstance)(g.default).userStoreInitialised),{timeout:y}),Boolean((0,h.resolveStoreInstance)(g.default).isCurrentUserGuest));(async()=>{try{let[t,r,c]=await Promise.all([a(),n(),o()]),i=!1;t||r||!c||(i=await(async()=>{const t=await b.default.getConfig({model:v.MODEL.workspace,modelId:e});return j.get(t,"requestForAccessEnabled")})()),T(r),E(t),l(c),C(i)}catch(e){pm.logger.error("WorkspaceForbidden~fetchAndSetState: Error while fetching state variables",e)}finally{s(!1)}})()}),[]);const F=k.default.teamId,L=e&&R&&a&&!p&&!S&&F&&"0"!==F;return t?o.createElement(A,null,o.createElement(n.default,null)):L?o.createElement(I,{justifyContent:"center"},o.createElement(_.default,{workspaceId:e})):o.createElement("div",{className:"workspace-forbidden"},o.createElement(r.default,null),S?o.createElement(o.Fragment,null,o.createElement("div",{className:"workspace-forbidden__title"},m.WORKSPACE_FORBIDDEN_PAGE_TITLE_GUEST),o.createElement("div",{className:"workspace-forbidden__description"},m.WORKSPACE_FORBIDDEN_PAGE_DESCRIPTION_GUEST),o.createElement(x,{type:"primary",className:"workspace-forbidden__go-home-btn",onClick:P,size:"small"},"Go Home")):o.createElement(o.Fragment,null,o.createElement("div",{className:"workspace-forbidden__title"},m.WORKSPACE_FORBIDDEN_PAGE_TITTLE),o.createElement("div",{className:"workspace-forbidden__description"},m.WORKSPACE_FORBIDDEN_PAGE_DESCRIPTION),o.createElement(d.Button,{type:"primary",className:"workspace-forbidden__view-workspaces-btn",onClick:N},(0,f.isServedFromPublicWorkspaceDomain)()?"Explore Public Workspaces":"View All Workspaces")))}},"./collaboration/components/workspace/WorkspaceNotFound.js":function(e,t,s){s.r(t);var o=s("../../node_modules/react/index.js"),a=s("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/PageNotFound.js"),n=s("./growth/foundation/public/amplitude/AmplitudeService.js"),r=s("./js/components/base/Buttons.js"),l=s("./js/services/NavigationService.js"),c=s("./collaboration/constants/workspace.js"),i=s("./apinetwork/navigation/constants.js"),d=s("./collaboration/navigation/constants.js"),u=s("./appsdk/utils/PublicWorkspaceUtils.js"),m=s("./js/services/PageMetadataService.js"),p=s("./node_modules/lodash/lodash.js");function E(){const e=(0,u.isServedFromPublicWorkspaceDomain)()?i.OPEN_EXPLORE_HOME_IDENTIFIER:d.ALL_WORKSPACES_IDENTIFIER;l.default.transitionTo(e)}t.default=()=>((0,o.useEffect)((()=>{m.default.setPageAs404();let e=l.default.getActiveQueryParams().get();"share"===p.get(e,"action")&&n.Ampli.shareEntityLinkError({entity_type:"collection",error_type:"workspaceNotFound"})}),[]),o.createElement("div",{className:"workspace-not-found"},o.createElement(a.default,null),o.createElement("div",{className:"workspace-not-found__title"},c.WORKSPACE_NOT_FOUND_PAGE_TITTLE),o.createElement("div",{className:"workspace-not-found__description"},c.WORKSPACE_NOT_FOUND_PAGE_DESCRIPTION),o.createElement(r.Button,{type:"primary",className:"workspace-not-found__view-workspaces-btn",onClick:E},(0,u.isServedFromPublicWorkspaceDomain)()?"Explore Public Workspaces":"View All Workspaces")))},"./collaboration/workspace/components/workspace-request-access/WorkspaceRFA.tsx":function(e,t,s){s.r(t);var o=s("../../node_modules/react/index.js"),a=s("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),n=s("../../node_modules/@postman/aether/esmLib/src/components/Toast/ToastManager.js"),r=s("../../node_modules/@postman/aether/esmLib/src/components/BlankState/BlankState.js"),l=s("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),c=s("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/NoPermission.js"),i=s("../../node_modules/@postman/aether/esmLib/src/components/Illustration/page-illustrations/NoAccess.js"),d=s("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),u=s("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),m=s("../../node_modules/@postman/aether/esmLib/src/components/TextArea/TextArea.js"),p=s("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),E=s("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),f=s("./node_modules/lodash/lodash.js"),_=s.n(f),k=s("./collaboration/workspace/controller/AccessRequestController.ts"),w=s("./collaboration/workspace/service/AccessRequestService.ts"),h=s("./collaboration/workspace/types/WorkspaceTypes.ts"),g=s("./collaboration/workspace/types/AccessRequestTypes.ts"),b=s("./js/services/NavigationService.js"),v=s("./js/navigation/active-mode/constants.js"),S=s("./js/services/CurrentUserDetailsService.js"),j=s("./collaboration/workspace/components/workspace-request-access/WorkspaceRFASkeleton.tsx"),y=s("./collaboration/workspace/constants/accessRequests.ts"),I=function(e,t,s,o){return new(s||(s=Promise))((function(a,n){function r(e){try{c(o.next(e))}catch(e){n(e)}}function l(e){try{c(o.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,l)}c((o=o.apply(e,t||[])).next())}))};const A=(0,E.default)(a.default)`
  margin-left: 64px;
`;t.default=e=>{const[t,s]=(0,o.useState)(""),[E,f]=(0,o.useState)(!0),[x,N]=(0,o.useState)(!1),[P,T]=(0,o.useState)(!1),{addToast:R}=(0,n.default)(),C=()=>{b.default.transitionTo(v.HOME)};return(0,o.useEffect)((()=>{I(void 0,void 0,void 0,(function*(){const{userId:t}=S.default;try{const s=yield w.default.find({model:h.MODEL.workspace,modelId:e.workspaceId,requesterId:t,state:[g.ACCESS_REQUEST_STATES.pending]});f(!1),T(!_().isEmpty(s))}catch(e){pm.logger.error("WorkspaceRFA~findPendingRequests: Failed to fetch pending access requests",e)}}))}),[e.workspaceId]),P?o.createElement(r.default,{title:y.ACCESS_REQUEST_PENDING_HEADING,description:y.ACCESS_REQUEST_PENDING_SUBHEADING,secondaryAction:o.createElement(l.default,{type:"outline",text:"Go to Homepage",onClick:C})},o.createElement(c.default,null)):E?o.createElement(j.default,null):o.createElement(a.default,{direction:"row",alignItems:"flex-start"},o.createElement(i.default,null),o.createElement(A,{direction:"column",gap:"spacing-s"},o.createElement(d.default,{type:"h2",text:y.ACCESS_REQUEST_HEADING}),o.createElement(a.default,{direction:"column",gap:"spacing-l"},o.createElement(u.default,{type:"body-medium",color:"content-color-secondary"},y.ACCESS_REQUEST_SUBHEADING),o.createElement(m.default,{placeholder:"A short note that will help workspace admins approve your request...",value:t,maxLength:500,validationStatus:t.length>=500&&"error",label:o.createElement(p.default,{text:"Add note",fieldType:"optional"}),onChange:e=>{var t;s(null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.value)}}),o.createElement(a.default,{direction:"row",gap:"spacing-s"},o.createElement(l.default,{type:"primary",text:"Request Access",onClick:()=>I(void 0,void 0,void 0,(function*(){N(!0);const s={model:h.MODEL.workspace,modelId:e.workspaceId};t&&_().set(s,"notes",t);try{yield k.default.createRequest(s),R({title:"Request sent",status:"success",description:"You'll be notified of the workspace admin's response."}),C()}catch(e){R({title:"Couldn't send request",status:"error",description:"Just a faulty wire. Try again."})}finally{N(!1)}})),isLoading:x,isDisabled:t.length>=500,"data-testid":"createRequestBtn"}),o.createElement(l.default,{type:"secondary",text:"Cancel",isDisabled:x,onClick:C,"data-testid":"cancelRequestBtn"})))))}},"./collaboration/workspace/components/workspace-request-access/WorkspaceRFASkeleton.tsx":function(e,t,s){s.r(t);var o=s("../../node_modules/react/index.js"),a=s("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),n=s("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),r=s("./collaboration/workspace/components/common/SkeletonUnit.tsx");const l=(0,n.default)(a.default)`
  margin-left: 64px;
  width: 432px;
`;t.default=()=>o.createElement(a.default,{direction:"row",alignItems:"center"},o.createElement(r.default,{width:"320px",height:"240px"}),o.createElement(l,{direction:"column",gap:"spacing-l"},o.createElement(a.default,{direction:"column",gap:"spacing-s"},o.createElement(r.default,{height:"22px",width:"60%"}),o.createElement(r.default,{height:"20px",width:"90%"})),o.createElement(a.default,{direction:"column",gap:"spacing-s"},o.createElement(a.default,{justifyContent:"space-between"},o.createElement(r.default,{height:"16px",width:"150px"}),o.createElement(r.default,{height:"16px",width:"55px"})),o.createElement(r.default,{height:"70px",width:"100%"})),o.createElement(a.default,{gap:"spacing-s"},o.createElement(r.default,{height:"32px",width:"118px"}),o.createElement(r.default,{height:"32px",width:"64px"}))))}}]);