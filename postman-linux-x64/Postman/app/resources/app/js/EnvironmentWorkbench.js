(self.webpackChunk_postman_app_renderer=self.webpackChunk_postman_app_renderer||[]).push([[30],{"../../node_modules/node-polyfill-webpack-plugin/node_modules/timers-browserify/main.js":function(e,t,n){var i=void 0!==n.g&&n.g||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;function s(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new s(o.call(setTimeout,i,arguments),clearTimeout)},t.setInterval=function(){return new s(o.call(setInterval,i,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},s.prototype.unref=s.prototype.ref=function(){},s.prototype.close=function(){this._clearFn.call(i,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n("../../node_modules/setimmediate/setImmediate.js"),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==n.g&&n.g.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==n.g&&n.g.clearImmediate||this&&this.clearImmediate},"../../node_modules/setimmediate/setImmediate.js":function(e,t,n){var i=n("../../node_modules/process/browser.js");!function(e,t){"use strict";if(!e.setImmediate){var n,o,s,r,a,l=1,c={},d=!1,u=e.document,m=Object.getPrototypeOf&&Object.getPrototypeOf(e);m=m&&m.setTimeout?m:e,"[object process]"==={}.toString.call(e.process)?n=function(e){i.nextTick((function(){h(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((s=new MessageChannel).port1.onmessage=function(e){h(e.data)},n=function(e){s.port2.postMessage(e)}):u&&"onreadystatechange"in u.createElement("script")?(o=u.documentElement,n=function(e){var t=u.createElement("script");t.onreadystatechange=function(){h(e),t.onreadystatechange=null,o.removeChild(t),t=null},o.appendChild(t)}):n=function(e){setTimeout(h,0,e)}:(r="setImmediate$"+Math.random()+"$",a=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(r)&&h(+t.data.slice(r.length))},e.addEventListener?e.addEventListener("message",a,!1):e.attachEvent("onmessage",a),n=function(t){e.postMessage(r+t,"*")}),m.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),i=0;i<t.length;i++)t[i]=arguments[i+1];var o={callback:e,args:t};return c[l]=o,n(l),l++},m.clearImmediate=p}function p(e){delete c[e]}function h(e){if(d)setTimeout(h,0,e);else{var t=c[e];if(t){d=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{p(e),d=!1}}}}}("undefined"==typeof self?void 0===n.g?this:n.g:self)},"./api-dev/components/api-version/context-bar/api-source-control/APISourceControlContextBarView/APISourceControlContextBarIcon.js":function(e,t,n){"use strict";n.r(t);var i=n("../../node_modules/react/index.js"),o=n("./node_modules/prop-types/index.js"),s=n.n(o),r=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),a=n("./node_modules/classnames/index.js"),l=n.n(a),c=n("./api-dev/navigation/constants.js"),d=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),u=n("./api-dev/stores/api-repository/PollingRemoteHeadDetailsStore.js"),m=n("./js/stores/StoreManager.js"),p=n("./js/services/NavigationService.js"),h=n("./api-dev/interfaces/APIInterface.js"),v=n("./node_modules/lodash/lodash.js");const f="contextBar",b=i.forwardRef((({handleShowTooltip:e,handleHideTooltip:t,apiRepositoryStore:n},o)=>{var s;const r=v.get(n,"sourceControlStore"),a=v.get(r,"shouldShowContextBarIconIndicator",!1),b=p.default.getCurrentURL(),g=null===p.default||void 0===p.default||null===(s=p.default.getCurrentRouteParams())||void 0===s?void 0:s.apiId;return(0,i.useEffect)((()=>{const e=(0,m.resolveStoreInstance)(u.default);return async function(){const t=g&&await(0,h.isAPIGitLinked)(g),n=g&&await(0,h.hasAPIMigrated)(g);g&&t&&n&&e.startPolling(g,f)}(),()=>{e.stopPolling(g,f)}}),[b]),i.createElement("div",{className:`tabs__${c.SOURCE_CONTROL_NAV} icon-container`,ref:o,onMouseEnter:e,onMouseLeave:t},i.createElement(d.default,{name:"icon-descriptive-branch-stroke",className:(E=a,l()({"api-source-control__context-bar-icon--unread":E}))}));var E}));b.propTypes={handleShowTooltip:s().func.isRequired,handleHideTooltip:s().func.isRequired,apiRepositoryStore:s().object.isRequired},t.default=(0,r.observer)(b)},"./api-dev/stores/api-repository/PollingRemoteHeadDetailsStore.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var i,o,s,r,a,l=n("./js/stores/StoreManager.js"),c=n("./api-dev/stores/APIListStore.js"),d=n("../../node_modules/node-polyfill-webpack-plugin/node_modules/timers-browserify/main.js"),u=n("./onboarding/src/common/LaunchDarkly.js"),m=n("../../node_modules/mobx/lib/mobx.module.js"),p=n("./node_modules/lodash/lodash.js");function h(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function v(e,t,n,i,o){var s={};return Object.keys(i).forEach((function(e){s[e]=i[e]})),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),s),o&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(o):void 0,s.initializer=void 0),void 0===s.initializer&&(Object.defineProperty(e,t,s),s=null),s}const f="store";let b=(o=v((i=class{constructor(){h(this,"activePollingAPI",o,this),h(this,"timerObject",s,this),h(this,"apiSourceMap",r,this),h(this,"startPollingForAPI",a,this)}setActivePollingAPI(e){this.activePollingAPI=e}setTimerObject(e){this.timerObject=e}setSource(e,t){const n=this.apiSourceMap[e]||[];p.includes(n,t)||(n.push(t),this.apiSourceMap[e]=n)}clearSource(e,t){const n=this.apiSourceMap[e]||[];-1!==n.indexOf(t)&&(this.apiSourceMap[e]=p.filter(n,(e=>e!==t)))}clearAPIAndSources(e){delete this.apiSourceMap[e]}clear(){this.setTimerObject(null),this.setActivePollingAPI(null)}stopPolling(e,t){if(e&&t)if(this.activePollingAPI===e){const n=this.apiSourceMap[e];t===f||p.isEmpty(n)||1===p.size(n)&&n[0]===t?((0,d.clearInterval)(this.timerObject),this.clear(),this.clearAPIAndSources(e),pm.logger.info(`APIPollingStore~stopPolling: Stopped Polling for ${e}`)):this.clearSource(e,t)}else this.clearSource(e,t)}startPolling(e,t){e&&t&&(this.setSource(e,t),e!==this.activePollingAPI&&this.startPollingForAPI(e,t))}}).prototype,"activePollingAPI",[m.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=v(i.prototype,"timerObject",[m.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),r=v(i.prototype,"apiSourceMap",[m.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),v(i.prototype,"setActivePollingAPI",[m.action],Object.getOwnPropertyDescriptor(i.prototype,"setActivePollingAPI"),i.prototype),v(i.prototype,"setTimerObject",[m.action],Object.getOwnPropertyDescriptor(i.prototype,"setTimerObject"),i.prototype),v(i.prototype,"setSource",[m.action],Object.getOwnPropertyDescriptor(i.prototype,"setSource"),i.prototype),v(i.prototype,"clearSource",[m.action],Object.getOwnPropertyDescriptor(i.prototype,"clearSource"),i.prototype),v(i.prototype,"clearAPIAndSources",[m.action],Object.getOwnPropertyDescriptor(i.prototype,"clearAPIAndSources"),i.prototype),v(i.prototype,"clear",[m.action],Object.getOwnPropertyDescriptor(i.prototype,"clear"),i.prototype),v(i.prototype,"stopPolling",[m.action],Object.getOwnPropertyDescriptor(i.prototype,"stopPolling"),i.prototype),a=v(i.prototype,"startPollingForAPI",[m.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return p.debounce((e=>{this.activePollingAPI&&this.stopPolling(this.activePollingAPI,f);const t=u.launchDarkly.getFlag("api-git-sync-status-pull-delay",0);if(0!==t){var n;this.setActivePollingAPI(e);const i=(0,l.resolveStoreInstance)(c.default).find(this.activePollingAPI),o=null===(n=p.head(i.childEntities.values))||void 0===n?void 0:n.id,s=i.childEntities.find(o);this.apiRepositoryStore=p.get(s,"apiRepositoryStore"),pm.logger.info(`APIPollingStore~startPolling: Started Polling for ${e}`),this.apiRepositoryStore.sourceControlStore.init();const r=(0,d.setInterval)((()=>{p.isFunction(this.apiRepositoryStore.sourceControlStore.getLatestRemoteHead)&&this.apiRepositoryStore.sourceControlStore.getLatestRemoteHead()}),t);this.setTimerObject(r)}}),2e3)}}),v(i.prototype,"startPolling",[m.action],Object.getOwnPropertyDescriptor(i.prototype,"startPolling"),i.prototype),i)},"./appsdk/contextbar/ContextBar.js":function(e,t,n){"use strict";n.r(t),n.d(t,{ContextBarPane:function(){return y}});var i,o=n("../../node_modules/react/index.js"),s=n("./appsdk/contextbar/ContextBarService.js"),r=n("./appsdk/contextbar/ContextBarHeader.js"),a=n("./js/constants/Panes.js"),l=n("./js/components/base/Panes.js"),c=n("./node_modules/classnames/index.js"),d=n.n(c),u=n("./js/components/empty-states/AetherCrashHandler.js"),m=n("./js/components/base/XPaths/XPath.js"),p=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),h=n("./js/constants/AppSettingsDefaults.js"),v=n("../../node_modules/mobx/lib/mobx.module.js"),f=n("./appsdk/contextbar/ContextBarUtil.js"),b=n("./js/stores/StoreManager.js"),g=n("./js/stores/ActiveWorkspaceSessionStore.js"),E=n("./node_modules/lodash/lodash.js");const S="auto";let y=(0,p.observer)(i=class extends l.Pane{constructor(e){super(e),this.contextBarService=new s.ContextBarService,this.handleSelect=this.handleSelect.bind(this),this.handleContextChange=this.handleContextChange.bind(this),this.handleClose=this.handleClose.bind(this),this.state={...this.state,collapsedX:!0},this.isOpen=!1}getContextForUrlIdentifier(e){return this.props.allowedContexts.find((t=>this.contextBarService.getConfig(t).urlIdentifier===e))}getUrlIdentifierForContext(e){return this.contextBarService.getConfig(e).urlIdentifier}getDimensions(e){return super.getDimensions({...e,width:{collapsedByDefault:true,shouldResistResize:true,default:440,collapsed:48,uncollapsed:440,min:h.default.ui.CONTEXT_BAR_MIN_WIDTH,max:S}})}componentDidMount(){let e=this.getContextForUrlIdentifier(this.contextBarService.activeContextUrlIdentifier)||this.props.allowedContexts&&this.props.allowedContexts[0];this.lastActive=e;let t=E.get(this.props,"collapsedByDefault",!0),n=(0,b.resolveStoreInstance)(g.default).activeEditor;!t&&this.props.editorId===n&&(0,f.updateContextQueryParams)(this.getUrlIdentifierForContext(e)),this.activeContextAutoRun=(0,v.autorun)((()=>{const e=this.contextBarService.getContextBarQueryParam(this.props.editorId);let t=this.getContextForUrlIdentifier(e);t!==this.state.activeContext&&this.setContext(t,!!t)}))}componentWillUnmount(){this.props.allowedContexts.forEach((e=>{this.contextBarService.willDestroy(e)})),this.activeContextAutoRun&&this.activeContextAutoRun()}componentDidUpdate(){this.contextBarService.pruneControllers(this.props.allowedContexts),this.isOpen&&this.state.collapsedX?(this.isOpen=!this.state.collapsedX,(0,f.removeContextQueryParams)()):this.isOpen||this.state.collapsedX||(this.isOpen=!this.state.collapsedX,this.state.activeContext||(0,f.updateContextQueryParams)(this.getUrlIdentifierForContext(this.lastActive)))}handleSelect(e){this.setContext(e,!0)}handleContextChange(e){(0,f.updateContextQueryParams)(this.getUrlIdentifierForContext(e))}setContext(e,t=!1){let n=this.state.activeContext;return new Promise((i=>{this.setState({activeContext:e},(()=>Promise.all([this.contextBarService.getControllerFor(e,this.props.contextData),this.contextBarService.getViewFor(e)]).then((([t,o])=>{e===this.state.activeContext&&this.setState({activeController:t,ActiveView:o},(()=>(this.contextBarService.didDeactivate(n),this.contextBarService.didActivate(this.state.activeContext),i())))})).then((()=>{this.state.activeContext&&(this.lastActive=this.state.activeContext),t?this.unCollapse("x"):this.collapse("x")}))))}))}handleClose(){this.collapse("x"),this.props.onClose&&this.props.onClose()}render(){let e=this.state.ActiveView,t=this.props.allowedContexts||this.props.visibleContexts,n=this.contextBarService.getConfig(this.state.activeContext),i=this.state.activeController;const s=d()({pane:!0,resizableX:this.isResizable("x"),resizableY:this.isResizable("y"),collapsedX:this.state.collapsedX,collapsedY:this.state.collapsedY},"right-context-bar"),c={height:this.state.height,width:this.state.width,...this.props.style||{}};return o.createElement(m.default,{identifier:"contextBar"},o.createElement("div",{className:s,style:c,"data-testid":"context-bar"},o.createElement(u.default,null,o.createElement(l.PaneHeader,{defaultLayout:a.PANE_LAYOUT_VERTICAL,verticalComponent:o.createElement(r.ContextBarHeader,{visibleContexts:t,onSelect:this.handleContextChange,contextBarService:this.contextBarService,activeContext:this.state.activeContext,width:this.state.width,contextData:this.props.contextData}),isCollapsedX:this.state.collapsedX,isCollapsedY:this.state.collapsedY,onCollapseToggle:this.handleCollapseToggle}),o.createElement(l.PaneContent,{isCollapsedX:this.state.collapsedX,isCollapsedY:this.state.collapsedY},this.state.width?o.createElement("div",{className:"right-context-bar-content-container"},e&&n&&o.createElement(u.default,{onClose:this.handleClose},o.createElement(e,{contextData:this.props.contextData,title:n.title,onClose:this.handleClose,controller:i,editorId:this.props.editorId}))):null))))}})||i;y.defaultProps={width:{collapsedByDefault:true,shouldResistResize:true,default:440,collapsed:48,uncollapsed:440,min:350,max:S}}},"./appsdk/contextbar/ContextBarHeader.js":function(e,t,n){"use strict";n.r(t),n.d(t,{ContextBarHeader:function(){return f}});var i,o=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),r=n("./js/components/base/Tooltips.js"),a=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("./node_modules/classnames/index.js"),c=n.n(l),d=n("./js/components/base/XPaths/XPath.js"),u=n("./growth/foundation/public/amplitude/AmplitudeService.js"),m=n("./api-dev/navigation/constants.js"),p=n("./api-dev/components/api-version/context-bar/api-source-control/APISourceControlContextBarView/APISourceControlContextBarIcon.js"),h=n("../../packages/api-observability/live-collections/index.ts"),v=n("./node_modules/lodash/lodash.js");let f=(0,a.observer)(i=class extends o.Component{constructor(e){super(e),this.state={},this.tooltipTargets={},this.handleShowTooltip=this.handleShowTooltip.bind(this),this.handleHideTooltip=this.handleHideTooltip.bind(this)}componentWillUnmount(){clearTimeout(this.titleTooltip)}handleShowTooltip(e){this.titleTooltip=setTimeout((()=>{this.setState({[e]:!0})}),500)}handleHideTooltip(e){clearTimeout(this.titleTooltip),this.state[e]&&this.setState({[e]:!1})}render(){let e=this.props.visibleContexts;const t=e=>e.name===m.SOURCE_CONTROL_NAV?o.createElement(p.default,{ref:t=>{this.tooltipTargets[e.name]=t},apiRepositoryStore:v.get(this.props,"contextData.apiRepositoryStore")||v.get(this.props,"contextData.model.apiRepositoryStore"),handleShowTooltip:this.handleShowTooltip.bind(null,e.name),handleHideTooltip:this.handleHideTooltip.bind(null,e.name)}):e.name===h.LIVE_COLLECTION_CTX_BAR.IDENTIFIER?o.createElement(h.LiveCollectionContextBarIcon,{liveRef:t=>{this.tooltipTargets[e.name]=t},handleShowTooltip:()=>this.handleShowTooltip(e.name),handleHideTooltip:()=>this.handleHideTooltip(e.name)}):o.createElement("div",{className:`tabs__${e.name} icon-container`,ref:t=>{this.tooltipTargets[e.name]=t},onMouseEnter:this.handleShowTooltip.bind(null,e.name),onMouseLeave:this.handleHideTooltip.bind(null,e.name)},o.createElement(s.default,{name:e.icon}));return o.createElement("div",{className:"right-context-bar-options"},o.createElement("ul",null,e.map((e=>{let n=this.props.contextBarService.getConfig(e);return n?o.createElement(d.default,{key:n.name,identifier:n.name},o.createElement("li",{key:n.name,onClick:()=>{this.props.onSelect(n.name),u.Ampli.contextBarListItemClicked({item_name:n.name,...(0,u.getAmpliCTAProperties)({ctaType:"other"})})},className:c()({active:n.name===this.props.activeContext&&this.props.width>300}),"data-testid":`context-bar-${n.name}`},o.createElement(o.Fragment,{key:n.name},t(n),o.createElement(r.Tooltip,{show:n&&this.state[n.name],target:n&&this.tooltipTargets[n.name],placement:"left",immediate:!0},o.createElement(r.TooltipBody,null,n&&n.title))))):null}))))}})||i},"./appsdk/contextbar/ContextBarService.js":function(e,t,n){"use strict";n.r(t),n.d(t,{ContextBarService:function(){return m}});var i,o=n("./appsdk/contextbar/ContextBarRegistry.js"),s=n("./js/services/NavigationService.js"),r=n("../../node_modules/mobx/lib/mobx.module.js"),a=n("./js/utils/NavigationUtil.js"),l=n("./appsdk/contextbar/ContextBarUtil.js"),c=(n("./js/containers/scratchpad/ContextBarScratchPadSignInPromptContainer.js"),n("./appsdk/workbench/WorkbenchService.js")),d=n("./node_modules/lodash/lodash.js"),u=n("../../node_modules/console-browserify/index.js");let m=(p=(i=class{constructor(){this._contextBarRegistry=o.default,this._controllerCache=new Map}get activeContextUrlIdentifier(){let e=s.default.currentURL.get(),{queryString:t}=(0,a.getUrlParts)(e);const n=(0,a._getQueryStringParams)(t);return n&&n[l.CONTEXT_BAR_QUERY_STRING_KEY]?n[l.CONTEXT_BAR_QUERY_STRING_KEY]:null}getContextBarQueryParam(e){return c.default.getTabController(e).contextBarQueryParam}pruneControllers(e){let t=new Set(e);for(let e of this._controllerCache.keys())t.has(e)||(this.willDestroy(e),this._controllerCache.delete(e))}getConfig(e){return this._contextBarRegistry._store.get(e)}getControllerFor(e,t){if(this._controllerCache.has(e))return this._controllerCache.get(e);let n=this.getConfig(e);if(!n)return;let i=n.getController;return i&&d.isFunction(i)?i().then((n=>{let i=new(0,n.default);this._controllerCache.set(e,i);try{i.didCreate&&i.didCreate(t)}catch(t){u.warn("ContextBarService: There was an error in the didCreate lifecycle of "+e)}return i})):void 0}getViewFor(e){let t=this.getConfig(e);return t&&t.getView().then((e=>e.default))}didActivate(e){this._triggerLifecycleMethod("didActivate",e)}didDeactivate(e){this._triggerLifecycleMethod("didDeactivate",e)}willDestroy(e){this._triggerLifecycleMethod("willDestroy",e)}_triggerLifecycleMethod(e,t){let n=this._controllerCache.get(t);if(n)try{n[e]&&n[e]()}catch(n){u.warn(`ContextBarService: There was an error in the ${e} lifecycle of ${t}`)}}}).prototype,h="activeContextUrlIdentifier",v=[r.computed],f=Object.getOwnPropertyDescriptor(i.prototype,"activeContextUrlIdentifier"),b=i.prototype,g={},Object.keys(f).forEach((function(e){g[e]=f[e]})),g.enumerable=!!g.enumerable,g.configurable=!!g.configurable,("value"in g||g.initializer)&&(g.writable=!0),g=v.slice().reverse().reduce((function(e,t){return t(p,h,e)||e}),g),b&&void 0!==g.initializer&&(g.value=g.initializer?g.initializer.call(b):void 0,g.initializer=void 0),void 0===g.initializer&&(Object.defineProperty(p,h,g),g=null),i);var p,h,v,f,b,g},"./js/containers/scratchpad/ContextBarScratchPadSignInPromptContainer.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var i=n("../../node_modules/react/index.js"),o=n("./appsdk/contextbar/ContextBarViewHeader.js"),s=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),r=n("./js/components/base/Text.js"),a=n("./js/components/base/Buttons.js"),l=n("./js/services/ScratchpadService.js");class c extends i.Component{handleWorkspaceSwitch(){l.default.switchToWorkspace()}render(){return i.createElement("div",null,i.createElement(o.ContextBarViewHeader,{title:this.props.title,onClose:this.props.onClose}),i.createElement("div",{className:"contextbar-signin-prompt-state"},i.createElement("div",{className:"contextbar-signin-prompt-state__icon-container"},i.createElement(s.default,{className:"contextbar-signin-prompt-state__icon",size:"large",color:"content-color-tertiary",name:this.props.icon})),i.createElement("div",{className:"contextbar-signin-prompt-state__title"},i.createElement("h4",null,"Switch to a workspace to use this feature")),i.createElement("div",{className:"contextbar-signin-prompt-state__body"},i.createElement(r.default,{type:"body-medium",value:"This is an online feature and is only available in workspaces."})),i.createElement(a.Button,{className:"contextbar-signin-prompt-state__switch-action",size:"large",onClick:this.handleWorkspaceSwitch,type:"primary"},"Switch to Workspaces")))}}},"./runtime-repl/_common/ConflictResolutionHelper.js":function(e,t,n){var i=n("./node_modules/lodash/lodash.js");e.exports={detectConflict:function(e={},t={},n,o){if(!i.isFunction(o))return pm.logger.warn("ConflictResolutionHelper~detectConflict: Callback to process conflict state is required");if(!n||i.isEmpty(e)||i.isEmpty(t))return o(!1);const s=i([]).concat(i.keys(e)).concat(i.keys(t)).uniq().value();let r;for(r of s)if(i.has(e,r)&&i.has(t,r)&&!i.isEqual(e[r],t[r]))return o(!0);return o(!1)},getUpdates:function(e={},t={}){const n={},o=i([]).concat(i.keys(e)).concat(i.keys(t)).uniq().value();return i.forEach(o,(o=>{i.isEqual(e[o],t[o])||(n[o]=t[o])})),n}}},"./runtime-repl/_common/WorkbenchStatusConstants.js":function(e,t,n){"use strict";n.r(t),n.d(t,{API_NO_PERMISSION:function(){return c},API_REDIRECT_CONSUMER_ENTITY:function(){return d},DELETED:function(){return r},ERROR:function(){return s},LOADING:function(){return o},NO_TAB_MODE:function(){return a},READY:function(){return i},TAB_MODE:function(){return l}});const i="ready",o="loading",s="error",r="deleted",a="no-tab-mode",l="tab-mode",c="api-no-permission",d="api-redirect"},"./runtime-repl/_common/components/EntityTabEmptyShell/EntityTabEmptyShell.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var i=n("../../node_modules/react/index.js");function o(){return i.createElement("div",{className:"entity-tab-empty-shell"},i.createElement("div",{className:"entity-tab-empty-shell__left_editor"},i.createElement("div",{className:"entity-tab-empty-shell__header-wrapper"},i.createElement("div",{className:"entity-tab-empty-shell__header-wrapper__content"},i.createElement("div",{className:"entity-tab-empty-shell__header-wrapper__content__name-strip block"}),i.createElement("div",{className:"entity-tab-empty-shell__header-wrapper__content__actions"},i.createElement("div",{className:"box block"}),i.createElement("div",{className:"box block"}),i.createElement("div",{className:"box block"})))),i.createElement("div",{className:"entity-tab-empty-shell__body-wrapper"},i.createElement("div",{className:"entity-tab-empty-shell__body-wrapper__content"},i.createElement("div",{className:"tab-strip"},i.createElement("div",{className:"tab xl block"}),i.createElement("div",{className:"tab s block"}),i.createElement("div",{className:"tab xs block"}),i.createElement("div",{className:"tab md block"})),i.createElement("div",{className:"entity-tab-empty-shell__body-wrapper__content__primary block"}),i.createElement("div",{className:"entity-tab-empty-shell__body-wrapper__content__secondary block"})))),i.createElement("div",{className:"entity-tab-empty-shell__right-context-bar"},i.createElement("div",{className:"context-bar-options"},i.createElement("div",{className:"box block"}),i.createElement("div",{className:"box block"}),i.createElement("div",{className:"box block"}),i.createElement("div",{className:"box block"}),i.createElement("div",{className:"box block"})),i.createElement("div",{className:"context-bar-body"},i.createElement("div",{className:"context-bar-header"}),i.createElement("div",{className:"context-bar-close-icon"}))))}},"./runtime-repl/environment/workbench/EnvironmentActionsDropdown.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var i,o=n("../../node_modules/react/index.js"),s=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("./node_modules/prop-types/index.js"),a=n.n(r),l=n("./js/stores/SyncStatusStore.js"),c=n("./js/stores/ActiveWorkspaceStore.js"),d=n("./js/stores/CurrentUserStore.js"),u=n("./js/stores/StoreManager.js"),m=n("./collaboration/workspace/model/ActiveWorkspacePermissionStore.ts"),p=n("./collaboration/workspace/types/PermissionTypes.ts"),h=n("./runtime-repl/_common/components/compound.js"),v=n("./runtime-repl/environment/EnvironmentActionsConstant.js"),f=n("./collaboration/workspace/types/WorkspaceTypes.ts"),b=n("./node_modules/lodash/lodash.js");let g=(0,s.observer)(i=class extends o.Component{constructor(e){super(e),this.getDisabledText=this.getDisabledText.bind(this),this.handleActions=this.handleActions.bind(this)}getDisabledText(e,t){if(!e)return;const n="You do not have permissions to perform this action.",i=(0,u.resolveStoreInstance)(m.default),o=i&&i.permissions;switch(t){case v.ACTION_TYPE_SET_ACTIVE:return"This environment is already active.";case v.ACTION_MANAGE_ROLES:{const{team:e}=(0,u.resolveStoreInstance)(d.default),t=(0,u.resolveStoreInstance)(c.default);return e||t.visibilityStatus===f.VISIBILITY_STATUS.public?n:"You need to be signed-in to a team to perform this action."}case v.ACTION_REMOVE_FROM_WORKSPACE:return b.get(o,p.WORKSPACE_PERMISSIONS.REMOVE_ENVIRONMENT_FROM_WORKSPACE,!0)?"Get online to perform this action.":n;case v.ACTION_TYPE_DOWNLOAD:return"Sign in to take this action";case v.ACTION_TYPE_PULL_REQUEST:case v.ACTION_TYPE_MERGE:return b.get(this.props,"model.environmentItem.isForked")?"Get online to perform this action.":"This environment is not a fork.";case v.ACTION_TYPE_PULL_CHANGES:return(0,u.resolveStoreInstance)(l.default).isSocketConnected?b.get(this.props,"model.environmentItem.isForked")?"No changes to pull.":"This environment is not a fork.":"Get online to perform this action.";default:return n}}getKeymapHandlers(){return{duplicate:pm.shortcuts.handle("duplicate",this.handleShortcutSelect.bind(this,v.ACTION_TYPE_DUPLICATE)),fork:pm.shortcuts.handle("fork",this.handleShortcutSelect.bind(this,v.ACTION_TYPE_FORK)),delete:pm.shortcuts.handle("delete",this.handleShortcutSelect.bind(this,v.ACTION_TYPE_DELETE))}}handleActions(e){this.props.model.handleActions(e)}handleShortcutSelect(e){this.props.model.handleActions(e,{origin:"keyboard"})}render(){return o.createElement(h.EntityActionsDropdown,{actions:this.props.model.getActions(),keymapHandlers:this.getKeymapHandlers(),onSelect:this.handleActions,getDisabledText:this.getDisabledText})}})||i;g.propTypes={model:a().object.isRequired}},"./runtime-repl/environment/workbench/EnvironmentEditor/EnvironmentEditor.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return B}});var i,o=n("../../node_modules/react/index.js"),s=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("./node_modules/prop-types/index.js"),a=n.n(r),l=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),c=n("./js/components/base/Panes.js"),d=n("./js/components/base/XPaths/XPath.js"),u=n("./js/stores/SyncStatusStore.js"),m=n("./js/stores/StoreManager.js"),p=n("./js/stores/OnlineStatusStore.js"),h=n("./js/stores/CurrentUserStore.js"),v=n("./js/constants/AppSettingsDefaults.js"),f=n("./js/constants/Panes.js"),b=n("./js/services/NavigationService.js"),g=n("./js/components/base/Buttons.js"),E=n("./runtime-repl/_common/variable-sync-settings/Store/VariableSyncSettingsStore.js"),S=n("./api-dev/util/navigationHelper.js"),y=n("./runtime-repl/_common/components/RequestPermissionInfoBar/RequestPermissionInfoBar.js"),I=n("./runtime-repl/_common/components/VariablesEditor/VariablesEditor.js"),C=n("./runtime-repl/_common/components/keyvalue-editor/KeyValueEditorAnalyticsConstants.ts"),_=n("./runtime-repl/_common/components/molecule.js"),j=n("./appsdk/contextbar/ContextBar.js"),T=n("./runtime-repl/environment/workbench/EnvironmentActionsDropdown.js"),O=n("./runtime-repl/environment/workbench/EnvironmentMetaIcons.js"),k=n("./runtime-repl/environment/workbench/EnvironmentWorkbenchModel.js"),A=n("./version-control/constants.js"),P=n("./runtime-repl/environment/EnvironmentActionsConstant.js"),x=n("./runtime-repl/_common/ContextBarIdentifiers.js"),w=n("./runtime-repl/_common/ModelConstant.js"),N=n("./runtime-repl/_common/ScratchpadConstants.js"),R=n("./runtime-repl/_common/DisabledTooltipConstants.js"),D=n("./collaboration/navigation/constants.js"),M=n("./version-control/components.js"),U=n("./runtime-repl/_common/WorkspaceHelpers.js"),V=n("./node_modules/lodash/lodash.js");let B=(0,s.observer)(i=class extends o.Component{constructor(e){super(e),this.handleSave=this.handleSave.bind(this),this.handleShare=this.handleShare.bind(this),this.renderActions=this.renderActions.bind(this),this.renderDecorators=this.renderDecorators.bind(this),this.handleNameUpdate=this.handleNameUpdate.bind(this),this.handleValuesChange=this.handleValuesChange.bind(this),this.handleRequestForAccess=this.handleRequestForAccess.bind(this),this.handleMaskingChange=this.handleMaskingChange.bind(this),this.handleBreadCrumbItemClick=this.handleBreadCrumbItemClick.bind(this),this.handleSortChange=this.handleSortChange.bind(this)}componentDidMount(){const{model:e}=this.props;V.get(e,"additionalContext.rename")&&(e&&V.isFunction(e.unsetContext)&&e.unsetContext("rename"),this.entityTabHeaderRef&&this.entityTabHeaderRef.handleEditName())}getTooltipForSave(e,t){return e?t?R.DISABLED_TOOLTIP_IS_OFFLINE:"Save environment":"No new changes to save."}getTooltipForShare(e,t){return t?R.DISABLED_TOOLTIP_IS_OFFLINE:e?R.DISABLED_TOOLTIP_NO_PERMISSION:"Share environment"}handleRequestForAccess(){b.default.transitionTo(D.ACCESS_REQUEST_CREATE_BUILD_IDENTIFIER,null,{entityType:w.ENVIRONMENT,entityId:this.props.model.environmentUid,type:"grant_role",entityName:this.props.model.name})}handleShare(){this.props.model.handleActions(P.ACTION_TYPE_SHARE)}handleNameUpdate(e){this.props.model.handleActions(P.ACTION_TYPE_RENAME,{name:e})}handleValuesChange(e,t){this.props.model.set("values",e),e.length>this.props.model.maskValuesMap.length&&this.props.model.pushMaskValue(),V.isFunction(t)&&t()}handleMaskingChange(e){this.props.model.toggleMaskValue(e)}handleSave(){this.props.model.requestSave&&this.props.model.requestSave()}handleSortChange(e,t){this.props.model.setSortConfig({activeSortColumn:e,activeSortDirection:t})}handleBreadCrumbItemClick(e){var t;if(!e||null==e||!e.type)return;const n=(null===(t=b.default.getActiveQueryParams())||void 0===t?void 0:t.get())||{},{type:i}=e,o={};return i===w.API_ENTITY?(null!=n&&n.version&&(o.version=null==n?void 0:n.version),null!=n&&n.branch&&(o.branch=null==n?void 0:n.branch),(0,S.transitionToAPI)({apiId:e.id},o)):void 0}renderActions(){const{environmentItem:e,apiId:t}=this.props.model,{userCanSave:n}=(0,m.resolveStoreInstance)(p.default),i=V.get(e,"permissions.share",!0),s=!(0,m.resolveStoreInstance)(u.default).isSocketConnected;return o.createElement(o.Fragment,null,!t&&o.createElement(M.ForkButton,{modelId:this.props.model.environmentUid,model:"environment",origin:"tab",disabled:s,disabledTooltip:s?"Get online to create a fork or view existing forks.":N.DISABLED_IN_SCRATCHPAD_TOOLTIP}),o.createElement(d.default,{identifier:"environmentEditorSaveAction"},o.createElement(g.Button,{type:"tertiary",className:"environment-editor__action-save",disabled:!n||!this.props.model.isDirty||this.props.model.isSaving,tooltip:this.getTooltipForSave(this.props.model.isDirty,!n),onClick:this.handleSave},o.createElement(l.default,{name:"icon-action-save-stroke"}),this.props.model.isSaving?"Saving...":"Save")),!t&&o.createElement(g.Button,{type:"tertiary",className:"environment-editor__action",tooltip:this.getTooltipForShare(!i,s),onClick:this.handleShare,disabled:s},o.createElement(l.default,{name:"icon-action-share-stroke"}),"Share"),o.createElement(T.default,{model:this.props.model}))}renderDecorators(){return o.createElement(O.default,{environment:this.props.model&&this.props.model.environmentItem})}render(){const{model:e}=this.props,t=e&&e.environmentItem,n=V.get(t,"permissions.edit",!0),i=(0,U.canRequestAccess)(),s=V.get(this.props,"model.environmentUid"),r=V.get((0,m.resolveStoreInstance)(h.default),"isCurrentUserPartner",!1),a=V.get((0,m.resolveStoreInstance)(h.default),"isCurrentUserGuest",!1),l=E.default.getSettingsSync();return o.createElement(c.PaneGroup,{defaultLayout:f.PANE_LAYOUT_HORIZONTAL},o.createElement(c.Pane,{width:{min:v.default.ui.WORKBENCH_MIN_WIDTH}},o.createElement(c.PaneContent,{className:"environment-editor"},o.createElement(_.EntityTabHeader,{ref:e=>{this.entityTabHeaderRef=e},name:e.name,path:[e],placeholder:"Environment Name",isEntityEditable:n,onSubmit:this.handleNameUpdate,onBreadCrumbItemClick:this.handleBreadCrumbItemClick,renderActions:this.renderActions,renderDecorators:this.renderDecorators,onRequestForAccess:this.handleRequestForAccess,entityType:"environment",entityUID:s}),o.createElement("div",{className:"environment-editor__content"},!n&&i&&!r&&!a&&o.createElement(y.default,{message:"Request access to edit the initial values of these variables. You can edit the current value.",onRequestForAccess:this.handleRequestForAccess}),o.createElement(I.default,{entityType:"environment",enableSensitiveVariableCreation:n,values:e.values,maskStatesMap:e.maskValuesMap,reorderMaskValue:e.reorderMaskValue,deleteMaskValues:e.deleteMaskValues,toggleMaskValue:this.handleMaskingChange,isEntityEditable:n,canRequestAccess:i,onChange:this.handleValuesChange,bleed:!0,enableFiltering:!0,enableVirtualization:!0,isDirty:e.isDirty,showAddNewRowOption:!0,sortConfig:e.sortConfig||null,onSortChange:this.handleSortChange,className:"environment-editor__content__variables-editor",disableSecretVariablesSync:n&&l.disableSecretVariablesSync,disableAllVariablesSync:n&&l.disableAllVariablesSync,disablePersistActionTooltip:n&&(l.disableAllVariablesSync||l.disableSecretVariablesSync)&&"Current values can’t persist as sync is disabled by admin.",disableResetActionTooltip:n&&(l.disableAllVariablesSync||l.disableSecretVariablesSync)&&"Current values can’t be reset as initial value is disabled.",analyticEventCategory:C.default.ENVIRONMENT_VARIABLES})))),o.createElement(j.ContextBarPane,{allowedContexts:[A.PULL_REQUEST_LIST,A.FORK_LIST,x.ENVIRONMENT_INFO],contextData:{id:e.environmentId,model:"environment",name:e.name,uid:e.environmentUid},width:v.default.ui.CONTEXT_BAR_WIDTH_CONFIG,editorId:this.props.editorId}))}})||i;B.propTypes={model:a().instanceOf(k.default).isRequired,editorId:a().string.isRequired}},"./runtime-repl/environment/workbench/EnvironmentWorkbenchController.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return O}});var i,o,s,r=n("../../node_modules/mobx/lib/mobx.module.js"),a=n("./js/stores/StoreManager.js"),l=n("./js/stores/ActiveWorkspaceStore.js"),c=n("./runtime-repl/_common/VariableSessionHelper.js"),d=n("./js/modules/services/DBResourceWatcher.js"),u=n("./runtime-repl/_common/VariableSessionService.js"),m=n("./js/services/EditorService.js"),p=n("./js/utils/uid-helper.js"),h=n("./runtime-repl/_common/variable-sync-settings/Store/VariableSyncSettingsStore.js"),v=n("./runtime-repl/_common/_api/RuntimeCurrentSessionPreferenceInterface.ts"),f=n("./runtime-repl/environment/workbench/EnvironmentWorkbenchModel.js"),b=n("./appsdk/workbench/BaseWorkbenchController.js"),g=n("./runtime-repl/environment/_api/EnvironmentBufferedStore.ts"),E=n("./runtime-repl/environment/_api/EnvironmentStoreV2.js"),S=n("./runtime-repl/_common/ConflictResolutionHelper.js"),y=n("./runtime-repl/_common/ModelConstant.js"),I=n("./runtime-repl/_common/WorkbenchStatusConstants.js"),C=n("./node_modules/lodash/lodash.js");function _(e,t,n,i,o){var s={};return Object.keys(i).forEach((function(e){s[e]=i[e]})),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),s),o&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(o):void 0,s.initializer=void 0),void 0===s.initializer&&(Object.defineProperty(e,t,s),s=null),s}const j="Conflict",T="This environment has been modified since you last opened the tab.";let O=((s=class extends b.default{constructor(){var e,t,n,i;super(),this.type=y.ENVIRONMENT,this.model=null,this.environmentId=null,this.environmentUid=null,this.sessionId=null,this.bufferedItemStore=null,this.environmentWatcherId=null,this.sessionWatcherId=null,e=this,t="status",i=this,(n=o)&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0}),this.handleResourceChangedDebounced=C.debounce(this.handleResourceChanged,100)}setWorkbenchStatus(e){this.status=e,e!==I.READY&&e!==I.ERROR||this.setLoading(!1)}handleResourceChanged(e,t){const n=this.model.transform&&this.model.transform(e,t),i=(0,S.getUpdates)(this.model.initialState,n),o=this.model.updates;(0,S.detectConflict)(i,o,this.model.isDirty,(n=>{n?this.setStatus(j,T):(this.clearStatus(),this.model.handleIncomingUpdates(e,t))}))}restoreEnvironmentState(){const e=this.getPersistedTrackedState();e&&e.isDirty&&this.model&&(this.model._trackedEnvironment.set((0,r.toJS)(e.updates)),(0,S.detectConflict)(this.model.initialState,e.initialState,this.model.isDirty,(t=>{t&&(this.model._trackedEnvironment.setInitialState((0,r.toJS)(e.initialState)),this.setStatus(j,T))})))}handleEnvironmentChanged(e){this.model&&this.sessionId?(0,u.getSessionFor)(this.sessionId,e).then((t=>this.handleResourceChangedDebounced(e,t))).catch((e=>pm.logger.error("EnvironmentWorkbenchController~handleEnvironmentChanged: Error in fetching the session",e))):pm.logger.warn("EnvironmentWorkbenchController~handleEnvironmentChanged: Model or Session not found")}handleSessionChanged(e){this.model?Promise.resolve(this.bufferedItemStore.getItem()).then((t=>this.handleResourceChangedDebounced(t,e))).catch((e=>pm.logger.error("EnvironmentWorkbenchController~handleSessionChanged: Error in fetching the environment",e))):pm.logger.warn("EnvironmentWorkbenchController~handleSessionChanged: Model not found")}handleEnvironmentDeleted(e,t){if("SYNC_CLIENT"===t)return this.setWorkbenchStatus(I.DELETED),void this.cleanUp();m.default.close({id:this._tabId},{force:!0})}startWatching(){this.environmentWatcherId||(this.updateHandlerDisposer=this.bufferedItemStore&&this.bufferedItemStore.onUpdate(this.handleEnvironmentChanged.bind(this)),this.updateFailHandlerDisposer=this.bufferedItemStore&&this.bufferedItemStore.onUpdateFail(((e,t)=>{pm.logger.error("EnvironmentWorkbenchController~startWatching: Error in updating environment:",e),this.model&&this.model.resetUpdates&&this.model.resetUpdates(t)})),this.greedyDeleteReactionDisposer&&this.greedyDeleteReactionDisposer(),this.greedyDeleteReactionDisposer=(0,r.when)((()=>this.model.environmentItem&&this.model.environmentItem.isDeleting),(()=>this.handleEnvironmentDeleted({id:this.model.environmentItem.id}))),this.environmentWatcherId=d.default.watch({model:y.ENVIRONMENT,modelId:this.environmentId},{onDeleted:this.handleEnvironmentDeleted.bind(this)})),!this.sessionWatcherId&&(this.sessionWatcherId=d.default.watch({model:y.SESSION,modelId:this.sessionId},{onChanged:this.handleSessionChanged.bind(this)}))}setSortConfig(){const e=v.default.getPreference({id:this.model.environmentUid,type:y.ENVIRONMENT},v.RUNTIME_PREFERENCE_KEYS.SORT_CONFIG);e&&this.model.setSortConfig(e)}stopWatching(){this.updateHandlerDisposer&&this.updateHandlerDisposer(),this.updateFailHandlerDisposer&&this.updateFailHandlerDisposer(),this.bufferedItemStore&&g.default.unsubscribe(this.bufferedItemStore),this.greedyDeleteReactionDisposer&&this.greedyDeleteReactionDisposer(),this.environmentWatcherId&&d.default.unwatch({model:y.ENVIRONMENT,modelId:this.environmentId},this.environmentWatcherId),this.sessionWatcherId&&d.default.unwatch({model:y.SESSION,modelId:this.sessionId},this.sessionWatcherId),this.environmentWatcherId=null,this.sessionWatcherId=null}didCreate({routeParams:e,additionalContext:t}){const{eid:n,apiId:i}=e||{};this.environmentId=(0,p.decomposeUID)(n).modelId,this.environmentUid=n,this.parentApiId=i,this.setWorkbenchStatus(I.LOADING),(0,E.subscribeOne)(n,{permissions:this.constructor.environmentPermissions}).then((e=>(null!=e&&e.isForked&&this.setIcon("icon-entity-forkedEnvironment-stroke"),e))).then((e=>h.default.getSettings().then((()=>e)).catch((e=>(pm.logger.error(e),Promise.reject(new Error("EnvironmentWorkbenchController~didCreate: Could not fetch Variable Sync Settings"))))))).then((e=>e?(this.environmentId=(0,p.decomposeUID)(e.id).modelId,this.sessionId=(0,c.getSessionId)(y.ENVIRONMENT,this.environmentId,(0,a.resolveStoreInstance)(l.default).id),(0,u.getSessionFor)(this.sessionId,e).then((t=>t?{environment:e,session:t}:(this.sessionId=null,Promise.reject(new Error(`EnvironmentWorkbenchController~didCreate: Session for environment '${Uint8ClampedArray}' not found`)))))):Promise.reject(new Error(`EnvironmentWorkbenchController~didCreate: Environment '${n}' not found`)))).then((({environment:e,session:n})=>{this.model=new f.default(e,n,{rename:C.get(t,"rename"),apiId:this.parentApiId}),this.model.isEditorActive=!0,this.bufferedItemStore=g.default.createBufferedItem(e),this.attachTrackedState(this.model._trackedEnvironment,this.model.save.bind(this.model,(e=>this.bufferedItemStore&&this.bufferedItemStore.update(e))),{persist:!0}),this.nameReactionDisposer=(0,r.reaction)((()=>this.model.name),(e=>this.setTitle(e)),{fireImmediately:!0}),this.setConflictOptions({entityType:"environment"}),this.restoreEnvironmentState(),this.startWatching(),this.setSortConfig(),this.setWorkbenchStatus(I.READY)})).catch((e=>{pm.logger.error("EnvironmentWorkbenchController~didCreate: Error in loading environment or its session",e),this.setWorkbenchStatus(I.ERROR),e.status&&404===e.status||pm.logger.error("Availability~EnvironmentWorkbenchController","Environment workbench loading error",e,{},{crash:!0,meta:{domain:"engineering-foundation",category:"availability"}})}))}cleanUp(){this.stopWatching(),this.model&&this.model.unsubscribe(),this.nameReactionDisposer&&this.nameReactionDisposer(),this.detachTrackedState(),this.model=null}didDeactivate(){this.model.isEditorActive=!1,this.model.setMaskedValuesDefaults()}didActivate(){this.model.isEditorActive=!0}beforeDestroy(){this.cleanUp()}}).editableProperties=["values"],s.environmentPermissions=["edit","delete","share"],o=_((i=s).prototype,"status",[r.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return I.LOADING}}),_(i.prototype,"setWorkbenchStatus",[r.action],Object.getOwnPropertyDescriptor(i.prototype,"setWorkbenchStatus"),i.prototype),i)},"./runtime-repl/environment/workbench/EnvironmentWorkbenchModel.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return X}});var i,o,s,r,a,l,c,d,u,m,p,h=n("../../node_modules/mobx/lib/mobx.module.js"),v=n("./runtime-repl/environment/datastores/ActiveEnvironmentStore.js"),f=n("./collaboration/workspace/model/ActiveWorkspacePermissionStore.ts"),b=n("./js/stores/CurrentUserStore.js"),g=n("./js/stores/ActiveWorkspaceStore.js"),E=n("./js/stores/OnlineStatusStore.js"),S=n("./js/stores/StoreManager.js"),y=n("./js/stores/ActiveWorkspaceSessionStore.js"),I=n("./js/modules/services/AnalyticsService.js"),C=n("./js/modules/model-event.js"),_=n("./js/modules/pipelines/user-action.js"),j=n("./runtime-repl/_common/VariableSessionHelper.js"),T=n("./js/services/EditorService.js"),O=n("./runtime-repl/_common/uid-helper.ts"),k=n("./js/modules/services/ManageRolesModalService.js"),A=n("./js/modules/services/ShareModalService.js"),P=n("./js/services/conversion/promisifiedConverter.js"),x=n("./collaboration/workspace/types/PermissionTypes.ts"),w=n("./runtime-repl/_common/constants/sensitiveDataConstants.js"),N=n("./runtime-repl/_common/variable-sync-settings/Store/VariableSyncSettingsStore.js"),R=n("./collaboration/utils/workspace.js"),D=n("./js/services/NavigationService.js"),M=n("./runtime-repl/_common/_api/RuntimeCurrentSessionPreferenceInterface.ts"),U=n("./universe/utils/UniverseExperimentSignupUtil.js"),V=n("./appsdk/tracked-state/ObservableTrackedState.js"),B=n("./runtime-repl/_common/ModelConstant.js"),L=n("./runtime-repl/_common/ToastHelpers.js"),F=n("./runtime-repl/environment/_api/EnvironmentInterface.js"),W=n("./runtime-repl/environment/EnvironmentActionsConstant.js"),Y=n("./runtime-repl/collection/CollectionActionsConstants.js"),z=n("./version-control/services/VersionControlNetworkService.js"),H=n("./runtime-repl/_common/WorkspaceHelpers.js"),q=n("./node_modules/lodash/lodash.js");function G(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function K(e,t,n,i,o){var s={};return Object.keys(i).forEach((function(e){s[e]=i[e]})),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),s),o&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(o):void 0,s.initializer=void 0),void 0===s.initializer&&(Object.defineProperty(e,t,s),s=null),s}let X=(i=h.action.bound,o=h.action.bound,s=h.action.bound,(p=class{constructor(e,t,n){this.environmentId=null,this.environmentUid=null,this._trackedEnvironment=null,G(this,"name",a,this),G(this,"maskedValuesMap",l,this),G(this,"isOutOfSync",c,this),G(this,"is",d,this),G(this,"isSaving",u,this),this._isEditorActive=!1,this.checkOutOfSyncStatus=async()=>{if(q.get(this.environmentItem,"isForked")){const e=await(0,z.isEnvironmentForkOutOfSync)(q.get(this.environmentItem,"id"),"environment");this.setOutOfSyncStatus(e.isOutOfSync)}},G(this,"_sortConfig",m,this),this.environmentId=(0,O.decomposeUID)(e.id).modelId,this.environmentUid=(0,O.composeUID)(e.id,e.owner),this.additionalContext=n,this.environmentItem=e,this.apiId=null==n?void 0:n.apiId,this.set("name",e.name),this._trackedEnvironment=new V.ObservableTrackedState(this.transform(e,t)),this.setMaskedValuesDefaults(),this.checkOutOfSyncStatus()}set values(e){this._trackedEnvironment.set({values:e})}get values(){return this._trackedEnvironment.get("values")}get isEditorActive(){return this._isEditorActive}set isEditorActive(e){this._isEditorActive=e}get isDirty(){return this._trackedEnvironment.isDirty}get initialState(){return this._trackedEnvironment.initialState}get updates(){return this._trackedEnvironment.updates}get maskValuesMap(){return this.maskedValuesMap}get actionMenuContext(){return{canEditEntity:q.get(this.environmentItem,"permissions.edit",!0)}}toggleMaskValue(e){const t=this.maskedValuesMap[e];this.maskedValuesMap[e]=!t}pushMaskValue(){this.maskedValuesMap.push(q.last(this.values).type===w.SECRET)}setMaskedValuesDefaults(){q.forEach(this.values,((e,t)=>{this.maskedValuesMap[t]=e.type===w.SECRET}))}reorderMaskValue(e,t,n){const i=this.maskedValuesMap[e];this.maskedValuesMap.splice(e,1),this.maskedValuesMap.splice(t+("after"===n),0,i)}deleteMaskValues(e){this.maskedValuesMap=q.filter(this.maskedValuesMap,((t,n)=>-1===e.indexOf(n)))}handleIncomingUpdates(e,t){e&&t&&(0,h.transaction)((()=>{this.set("name",e.name),this._trackedEnvironment.setInitialState(this.transform(e,t)),this.setMaskedValuesDefaults()}))}setOutOfSyncStatus(e){this.isOutOfSync=e}unsubscribe(){this.environmentItem&&this.environmentItem.unsubscribe&&this.environmentItem.unsubscribe()}resetUpdates(){}resetTracking(){this._trackedEnvironment.reset({values:this.values})}get sortConfig(){return this._sortConfig}setSortConfig(e){(0,h.runInAction)((()=>{this._sortConfig=e})),M.default.setPreference({id:this.environmentUid,type:B.ENVIRONMENT},M.RUNTIME_PREFERENCE_KEYS.SORT_CONFIG,e)}transform(e,t){if(e&&t)return{values:(0,j.zipVariables)(e.values,t.values)};pm.logger.warn("EnvironmentWorkbenchModel~transform: Environment or its Session not found")}get environment(){return q.pick(this,this.constructor.editableKeys)}setSavingState(e){this.isSaving=e}set(e,t){this[e]=t}sanitizeForDisabledSync(){const{disableSecretVariablesSync:e,disableAllVariablesSync:t}=N.default.getSettingsSync();(t||e)&&(this.values=t?q.map(this.values,(e=>({...e,value:""}))):q.map(this.values,(e=>e.type===w.SECRET?{...e,value:""}:e)))}requestSave(){(0,H.isLoggedIn)()||!(0,U.isUniverseExperimentModalEnabled)()?T.default.requestSave({id:(0,S.resolveStoreInstance)(y.default).activeEditor}):(0,U.openUniverseExperimentSignupModal)({action:"save",entity:this.name||"environment",entityType:"environment",entityId:this.environmentId})}save(e){if(!this.isDirty)return Promise.resolve();if(!(0,S.resolveStoreInstance)(E.default).userCanSave)return(0,L.showOfflineActionDisabledToast)();if(!this.environmentId)return pm.logger.error("EnvironmentWorkbenchController~save: Environment id not found"),Promise.reject(new Error("Environment id not found"));this.sanitizeForDisabledSync();const{variables:t,sessionVariables:n}=(0,j.unzipVariables)(this.values);return Promise.resolve().then((()=>{if(!q.get(this.environmentItem,"permissions.edit",!0))return Promise.resolve();this.setSavingState(!0),e({id:this.environmentId,values:t}).finally((()=>this.setSavingState(!1))).catch((e=>{pm.logger.error("Error while updating environment",e),pm.toasts.error("Something went wrong while saving the environment.",{dedupeId:"environment-tab-save"})}))})).then((()=>this.resetTracking())).then((()=>{const e=(0,S.resolveStoreInstance)(g.default).id,t=(0,C.createEvent)("update",B.SESSION,{id:(0,j.getSessionId)(B.ENVIRONMENT,this.environmentId,e),model:B.ENVIRONMENT,modelId:(0,O.decomposeUID)(this.environmentId).modelId,workspace:e,values:n});return(0,_.default)(t)})).catch((e=>(this.setSavingState(!1),pm.logger.error("Error while updating environment or it's session",e),pm.toasts.error("Something went wrong while saving the environment.",{dedupeId:"environment-tab-save"}),Promise.reject(new Error("Error while updating environment or it's session")))))}getActions(){const e=(0,S.resolveStoreInstance)(b.default),t=(0,S.resolveStoreInstance)(f.default),n=t&&t.permissions,{userCanSave:i,userCanSaveAndSync:o}=(0,S.resolveStoreInstance)(E.default),s=q.get(this.environmentItem,"isForked");return this.apiId?[{type:W.ACTION_TYPE_SET_ACTIVE,label:"Set as active environment",isEnabled:(0,S.resolveStoreInstance)(v.default).id!==this.environmentId}]:[{type:W.ACTION_TYPE_SET_ACTIVE,label:"Set as active environment",isEnabled:(0,S.resolveStoreInstance)(v.default).id!==this.environmentId},{type:W.ACTION_TYPE_MOVE,label:"Move",isEnabled:o&&q.get(n,x.WORKSPACE_PERMISSIONS.REMOVE_ENVIRONMENT_FROM_WORKSPACE,!0)&&!e.isCurrentUserPartner},{type:Y.ACTION_TYPE_DOWNLOAD,label:"Export",isEnabled:!0},{type:W.ACTION_TYPE_DUPLICATE,label:"Duplicate",shortcut:"duplicate",isEnabled:i&&q.get(n,x.WORKSPACE_PERMISSIONS.ADD_ENVIRONMENT_TO_WORKSPACE,!0)},{type:W.ACTION_TYPE_FORK,label:"Create a fork",shortcut:"fork",isEnabled:o,xpathLabel:"fork"},{type:W.ACTION_TYPE_PULL_REQUEST,label:"Create pull request",isEnabled:o&&s},{type:W.ACTION_TYPE_MERGE,label:"Merge changes",isEnabled:o&&s},{type:W.ACTION_TYPE_PULL_CHANGES,label:"Pull changes",isEnabled:o&&s&&this.isOutOfSync},{type:Y.ACTION_MANAGE_ROLES,label:"Manage Roles",isEnabled:o&&!!e.team&&!e.isCurrentUserGuest&&!(0,R.isPublicUserForWorkspace)()&&!e.isCurrentUserPartner},{type:Y.ACTION_TYPE_DELETE,label:"Delete",shortcut:"delete",isEnabled:i&&q.get(this.environmentItem,"permissions.delete",!0)}]}async handleActions(e,t={}){const n={name:this.name};if(!(0,F.canPerformAction)(this.environmentUid,e,!0,!0,n))return void pm.toasts.error("You do not have permissions to perform this action");if(this.apiId&&!F.ALLOWED_ENVIRONMENT_ACTIONS_FOR_API.includes(e))return void pm.logger.warn("EnvironmentWorkbenchModel~handleAction: Action not allowed for API sidebar",e);if(this.apiId&&e===Y.ACTION_TYPE_DELETE)return void pm.logger.warn("EnvironmentWorkbenchModel~handleAction: Action not allowed for API sidebar",e);const{userCanSave:i,userCanSaveAndSync:o}=(0,S.resolveStoreInstance)(E.default);if(e===W.ACTION_TYPE_SET_ACTIVE)return(0,F.setActiveEnvironment)(this.environmentUid);if(e===W.ACTION_TYPE_MOVE){if(!(0,S.resolveStoreInstance)(E.default).userCanSaveAndSync)return(0,L.showOfflineActionDisabledToast)();(0,A.moveEnvironment)(this.environmentUid,this.name,{origin:"sidebar",onPostMove:()=>{(0,F.closeAllEnvironmentTabs)(this.environmentUid)}})}if(e===Y.ACTION_TYPE_DOWNLOAD)return!(0,H.isLoggedIn)()&&(0,U.isUniverseExperimentModalEnabled)()?(0,U.openUniverseExperimentSignupModal)({action:"export",entity:this.name||"environment",entityType:"environment",entityId:this.environmentId}):(0,P.default)().then((e=>{e.saveEntity({id:this.environmentId},{type:"environment"})}));if(e===W.ACTION_TYPE_DUPLICATE)return i?(0,F.duplicateEnvironment)(this.environmentUid):(0,L.showOfflineActionDisabledToast)();if(e===Y.ACTION_MANAGE_ROLES)return(0,k.manageRolesOnEnvironment)(this.environmentUid,{origin:"tab"});if(e===Y.ACTION_TYPE_DELETE){if(!i)return(0,L.showOfflineActionDisabledToast)();await(0,F.deleteEnvironment)(this.environmentUid,{name:this.name})&&(0,F.closeAllEnvironmentTabs)(this.environmentUid)}if(e===Y.ACTION_TYPE_SHARE)return(0,A.shareEnvironment)(this.environmentUid,{origin:"tab",name:this.name});if(e===Y.ACTION_TYPE_RENAME)return i?(0,F.renameEnvironment)(this.environmentUid,t.name):(0,L.showOfflineActionDisabledToast)();if(e===W.ACTION_TYPE_FORK)return o?(0,F.forkEnvironment)(this.environmentUid,{origin:q.get(t,"origin")||"tab",name:this.name}):(0,L.showOfflineActionDisabledToast)();if(e===W.ACTION_TYPE_PULL_REQUEST)return(0,S.resolveStoreInstance)(E.default).userCanSaveAndSync?q.get(this.environmentItem,"isForked")?(I.default.addEventV2({category:"pullrequest",action:"initiate_merge",label:"workbench",entityType:"environment",entityId:q.get(this.environmentItem,"id")}),D.default.transitionTo("build.pullRequestCreate",{},{source:q.get(this.environmentItem,"id"),destination:q.get(this.environmentItem,"baseEnvironmentUid"),entityType:"environment",workspace:(0,S.resolveStoreInstance)(g.default).id})):void pm.toasts.error("You do not have permissions to perform this action"):(0,L.showOfflineActionDisabledToast)();if(e===W.ACTION_TYPE_MERGE)return(0,S.resolveStoreInstance)(E.default).userCanSaveAndSync?q.get(this.environmentItem,"isForked")?(I.default.addEventV2({category:"environment",action:"initiate_merge",entityType:"environment",entityId:q.get(this.environmentItem,"id")}),D.default.transitionTo("build.merge",{toId:q.get(this.environmentItem,"baseEnvironmentUid"),entityType:"environment"},{source:q.get(this.environmentItem,"id"),workspace:(0,S.resolveStoreInstance)(g.default).id})):void pm.toasts.error("You do not have permissions to perform this action"):(0,L.showOfflineActionDisabledToast)();if(e===W.ACTION_TYPE_PULL_CHANGES){if(!(0,S.resolveStoreInstance)(E.default).userCanSaveAndSync)return(0,L.showOfflineActionDisabledToast)();if(!q.get(this.environmentItem,"isForked"))return void pm.toasts.error("You do not have permissions to perform this action");D.default.transitionTo("build.merge",{toId:q.get(this.environmentItem,"id"),entityType:"environment"},{"pull-changes":!0,workflow:"sync",source:q.get(this.environmentItem,"baseEnvironmentUid")})}}unsetContext(e){this.additionalContext&&delete this.additionalContext[e]}}).editableKeys=["values"],a=K((r=p).prototype,"name",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),l=K(r.prototype,"maskedValuesMap",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),c=K(r.prototype,"isOutOfSync",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),d=K(r.prototype,"is",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=K(r.prototype,"isSaving",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),K(r.prototype,"values",[h.computed],Object.getOwnPropertyDescriptor(r.prototype,"values"),r.prototype),K(r.prototype,"isDirty",[h.computed],Object.getOwnPropertyDescriptor(r.prototype,"isDirty"),r.prototype),K(r.prototype,"initialState",[h.computed],Object.getOwnPropertyDescriptor(r.prototype,"initialState"),r.prototype),K(r.prototype,"updates",[h.computed],Object.getOwnPropertyDescriptor(r.prototype,"updates"),r.prototype),K(r.prototype,"maskValuesMap",[h.computed],Object.getOwnPropertyDescriptor(r.prototype,"maskValuesMap"),r.prototype),K(r.prototype,"actionMenuContext",[h.computed],Object.getOwnPropertyDescriptor(r.prototype,"actionMenuContext"),r.prototype),K(r.prototype,"toggleMaskValue",[i],Object.getOwnPropertyDescriptor(r.prototype,"toggleMaskValue"),r.prototype),K(r.prototype,"pushMaskValue",[h.action],Object.getOwnPropertyDescriptor(r.prototype,"pushMaskValue"),r.prototype),K(r.prototype,"setMaskedValuesDefaults",[h.action],Object.getOwnPropertyDescriptor(r.prototype,"setMaskedValuesDefaults"),r.prototype),K(r.prototype,"reorderMaskValue",[o],Object.getOwnPropertyDescriptor(r.prototype,"reorderMaskValue"),r.prototype),K(r.prototype,"deleteMaskValues",[s],Object.getOwnPropertyDescriptor(r.prototype,"deleteMaskValues"),r.prototype),K(r.prototype,"setOutOfSyncStatus",[h.action],Object.getOwnPropertyDescriptor(r.prototype,"setOutOfSyncStatus"),r.prototype),m=K(r.prototype,"_sortConfig",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K(r.prototype,"sortConfig",[h.computed],Object.getOwnPropertyDescriptor(r.prototype,"sortConfig"),r.prototype),K(r.prototype,"environment",[h.computed],Object.getOwnPropertyDescriptor(r.prototype,"environment"),r.prototype),K(r.prototype,"setSavingState",[h.action],Object.getOwnPropertyDescriptor(r.prototype,"setSavingState"),r.prototype),K(r.prototype,"set",[h.action],Object.getOwnPropertyDescriptor(r.prototype,"set"),r.prototype),K(r.prototype,"sanitizeForDisabledSync",[h.action],Object.getOwnPropertyDescriptor(r.prototype,"sanitizeForDisabledSync"),r.prototype),r)},"./runtime-repl/environment/workbench/EnvironmentWorkbenchView.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});var i,o=n("../../node_modules/react/index.js"),s=n("./node_modules/prop-types/index.js"),r=n.n(s),a=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("../../node_modules/mobx/lib/mobx.module.js"),c=n("./js/stores/StoreManager.js"),d=n("./js/stores/SyncStatusStore.js"),u=n("./js/components/network/NetworkTrouble.js"),m=n("./collaboration/workspace/model/ActiveWorkspaceBaseStore.ts"),p=n("../../packages/universe/universe-common/index.js"),h=n("./runtime-repl/environment/workbench/EnvironmentWorkbenchModel.js"),v=n("./runtime-repl/_common/components/molecule.js"),f=n("./runtime-repl/environment/workbench/EnvironmentEditor/EnvironmentEditor.js"),b=n("./runtime-repl/_common/WorkbenchStatusConstants.js"),g=n("./runtime-repl/_common/components/EntityTabEmptyShell/EntityTabEmptyShell.js"),E=n("./js/modules/services/AnalyticsService.js"),S=n("./node_modules/lodash/lodash.js");let y=(0,a.observer)(i=class extends o.Component{constructor(...e){super(...e),this.analyticsReactionDisposer=null}componentDidMount(){if(!this.props.controller)return;this.analyticsReactionDisposer=(0,l.reaction)((()=>this.props.controller.status),(e=>{[b.ERROR,b.READY].includes(e)&&E.default.addEventV2AndPublish({category:"workspace-load",action:"environment-workbench-view",label:e===b.ERROR?"error":"success"})}),{fireImmediately:!0});const e=(0,c.resolveStoreInstance)(m.default);"public"===e.visibilityStatus&&(0,p.getIndexStatus)("workspace",e.id).then((e=>{S.get(e,"index",!0)||S.invoke(this,"props.controller.setPublicEntityMetaData",{content:"noindex,nofollow"})})).catch((e=>{pm.logger.error("EnvironmentWorkbenchView~getIndexStatus: failed to set index status",e)}))}componentWillUnmount(){this.analyticsReactionDisposer&&this.analyticsReactionDisposer()}render(){const{model:e,status:t}=this.props.controller,n=this.props.id,i=e&&e.environmentItem;return(0,c.resolveStoreInstance)(d.default).isConsistentlyOffline&&!i?o.createElement(u.default,{origin:"workbench",entity:"environment"}):t===b.ERROR?o.createElement(v.EntityTabLoadingError,{type:"error",userFriendlyEntityName:"environment"}):t===b.DELETED?o.createElement(v.EntityTabLoadingError,{type:"deleted",userFriendlyEntityName:"environment"}):t===b.READY?o.createElement(f.default,{editorId:n,model:e}):o.createElement(g.default,null)}})||i;y.propTypes={controller:r().shape({model:r().instanceOf(h.default),status:r().oneOf([b.ERROR,b.DELETED,b.READY,b.LOADING])}).isRequired,id:r().string.isRequired}},"./version-control/components.js":function(e,t,n){"use strict";n.r(t),n.d(t,{ForkButton:function(){return i.default}});var i=n("./version-control/common/ForkButton/index.js")},"./version-control/services/VersionControlNetworkService.js":function(e,t,n){"use strict";n.r(t),n.d(t,{isCollectionForkInSync:function(){return s},isEnvironmentForkOutOfSync:function(){return r}});var i=n("./js/modules/services/RemoteSyncRequestService.js"),o=n("./node_modules/lodash/lodash.js");function s(e){return i.default.request(`/collection/fork/${e}/parent-sync-info`,{method:"get"}).then((({body:e})=>({userCanPullChanges:!0,isFork:!0,isOutOfSync:o.get(e,"data.outOfSync",!1)}))).catch((e=>e.error?{userCanPullChanges:"forbiddenError"!==e.error.name,isFork:"notForkError"!==e.error.name,isOutOfSync:!1}:Promise.reject(e)))}function r(e){return i.default.request("/ws/proxy",{method:"post",data:{service:"vcs",method:"get",path:`/v1/diverged/environment/${e}?divergence-type=fork`}}).then((({body:e})=>({isOutOfSync:o.get(e,"data.diverged",!1)}))).catch((e=>e.error?{isOutOfSync:!1}:Promise.reject(e)))}},"./runtime-repl/_common/BufferedItemStore.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{BufferedItemManager:function(){return d},BufferedItemStore:function(){return c}});var i=n("./node_modules/lodash/lodash.js"),o=n.n(i),s=n("../../node_modules/mobx/lib/mobx.module.js"),r=n("./runtime-repl/_common/promiseUtils.js"),a=function(e,t,n,i){var o,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,n,r):o(t,n))||r);return s>3&&r&&Object.defineProperty(t,n,r),r},l=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}))};class c{constructor(e){this.isUpdating=!1,this.updateCallbacks=[],this.updateFailCallbacks=[],this.pendingUpdatePromise=Promise.resolve(),this.baseItem=e,this.itemReactionDisposer=(0,s.reaction)((()=>this.propertiesToWatch.map((e=>o().get(this.baseItem,e)))),(()=>{var e,t;const n=null===(t=null===(e=this.baseItem)||void 0===e?void 0:e.toJSON)||void 0===t?void 0:t.call(e,["folders","requests"]);n&&!this.isUpdating&&this.updateItem(n)}),{fireImmediately:!0})}get isPendingUpdate(){return Boolean(this.pendingUpdate)}get uid(){return this.baseItem.id}getItem(){return this.bufferedItem}onUpdate(e){return this.updateCallbacks.push(e),e(this.bufferedItem),()=>{this.updateCallbacks=this.updateCallbacks.filter((t=>t!==e))}}onUpdateFail(e){return this.updateFailCallbacks.push(e),()=>{this.updateFailCallbacks=this.updateFailCallbacks.filter((t=>t!==e))}}updateItem(e){this.bufferedItem=e,this.updateCallbacks.forEach((t=>{try{t(e)}catch(e){}}))}setPendingUpdate(e){this.pendingUpdate?o().assign(this.pendingUpdate,e):this.pendingUpdate=e}update(e){return l(this,void 0,void 0,(function*(){this.setPendingUpdate(e);const t=Object.assign(Object.assign({},this.bufferedItem),e);this.updateItem(t),yield this.processUpdate()}))}processUpdate(e=!0){return l(this,void 0,void 0,(function*(){if(this.isUpdating)return this.pendingUpdatePromise;if(!this.isPendingUpdate)return;this.isUpdating=!0;const t=this.pendingUpdate;this.pendingUpdate=void 0;const{promise:n,resolve:i,reject:o}=(0,r.createPromiseObject)();return e&&(this.pendingUpdatePromise=n),this.dispatchUpdate(t).finally((()=>{this.isUpdating=!1})).catch((e=>{if(!this.isPendingUpdate)throw this.updateFailCallbacks.forEach((n=>{var i;try{n(null!==(i=null==e?void 0:e.message)&&void 0!==i?i:"Error updating entity",t)}catch(e){}})),e;this.pendingUpdate=Object.assign(Object.assign({},t),this.pendingUpdate)})).then((()=>this.processUpdate())).then(i,o),n}))}unsubscribe(){var e;null===(e=this.itemReactionDisposer)||void 0===e||e.call(this)}}a([s.computed],c.prototype,"uid",null);class d{constructor(){this.bufferedItemMap=new Map}createBufferedItem(e,t){return this.bufferedItemMap.has(e.id)&&!(null==t?void 0:t.forceNewInstance)||this.bufferedItemMap.set(e.id,this.createItemStoreInstance(e)),this.bufferedItemMap.get(e.id)}unsubscribe(){}}},"./runtime-repl/_common/_api/RuntimeCurrentSessionPreferenceInterface.ts":function(e,t,n){"use strict";function i(e,t){return`${e.type}:${e.id}:${t}`}n.r(t),n.d(t,{RUNTIME_PREFERENCE_KEYS:function(){return o}});const o={SORT_CONFIG:"sortConfig"};t.default=new class{constructor(){this._preferences=new Map,this.setPreference=this.setPreference.bind(this),this.getPreference=this.getPreference.bind(this)}setPreference(e,t,n){const o=i(e,t);this._preferences.set(o,n)}getPreference(e,t){const n=i(e,t);return this._preferences.get(n)}}},"./runtime-repl/_common/components/keyvalue-editor/KeyValueEditorAnalyticsConstants.ts":function(e,t,n){"use strict";n.r(t);t.default={COLLECTION_VARIABLES:"collection_variables",ENVIRONMENT_VARIABLES:"environment_variables",GLOBAL_VARIABLES:"global_variables"}},"./runtime-repl/environment/_api/EnvironmentBufferedStore.ts":function(e,t,n){"use strict";n.r(t);var i=n("./runtime-repl/_common/BufferedItemStore.ts"),o=n("./runtime-repl/environment/_api/EnvironmentInterfaceV2.ts");class s extends i.BufferedItemStore{dispatchUpdate(e){return(0,o.updateEnvironment)(this.uid,e)}get propertiesToWatch(){return s.propertiesToWatch}}s.propertiesToWatch=["name","values"];class r extends i.BufferedItemManager{createItemStoreInstance(e){return new s(e)}}t.default=new r}}]);