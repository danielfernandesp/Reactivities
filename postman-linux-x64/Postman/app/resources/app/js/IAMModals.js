"use strict";(self.webpackChunk_postman_app_renderer=self.webpackChunk_postman_app_renderer||[]).push([[36],{"./js/components/base/EditableTag.js":function(e,t,s){s.r(t);var n=s("../../node_modules/react/index.js"),o=s("./node_modules/prop-types/index.js"),r=s.n(o),i=s("./js/components/base/Icons/CloseIcon.js"),a=s("./node_modules/classnames/index.js"),l=s.n(a);const c=e=>{return n.createElement("div",{"data-testid":"editable-tag",onClick:e.onClick,className:(t=e.type,s=e.isSelected,l()({"editable-tag":!0,[`editable-tag-${t}`]:!0,"is-selected":s}))},e.content,n.createElement(i.default,{className:"tag-remove-btn",onClick:e.onClose,size:"xs"}));var t,s};c.propTypes={content:r().element,onClose:r().func,onClick:r().func,value:r().string,name:r().string,type:r().oneOf(["regular","error"])},c.defaultProps={onClose:()=>{},onClick:()=>{},type:"regular",name:"tag",value:""},t.default=c},"./js/components/base/Icons/MailIcon.js":function(e,t,s){s.r(t),s.d(t,{default:function(){return a}});var n=s("../../node_modules/react/index.js"),o=s("./js/components/base/Icons/Icon.js");function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},r.apply(this,arguments)}const i=n.createElement("svg",{width:"16",height:"10",viewBox:"0 0 16 16"},n.createElement("defs",null,n.createElement("path",{id:"mail",d:"M14.72 3H1.28C.576 3 0 3.563  0 4.25v7.5C0 12.438.576 13 1.28 13h13.44c.704 0 1.28-.563 1.28-1.25v-7.5C16 3.562 15.424 3 14.72 3zm-7.169 7.592l-5.3-4.824a.333.333 0 0 1-.017-.476l.052-.055a.333.333 0 0 1 .466-.017l4.8 4.361a.667.667 0 0 0 .896 0l4.8-4.361a.333.333 0 0 1 .466.017l.052.055a.333.333 0 0 1-.017.476l-5.3 4.824a.667.667 0 0 1-.898 0z"})),n.createElement("use",{fill:"#282828",fillRule:"evenodd",xlinkHref:"#mail"}));function a(e){return n.createElement(o.default,r({},e,{icon:i}))}},"./js/components/permissions/ManageRoles.js":function(e,t,s){s.r(t),s.d(t,{default:function(){return U}});var n,o=s("../../node_modules/react/index.js"),r=s("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),i=s("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),a=s("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),l=s("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/SingleSelect/SingleSelect.js"),c=s("../../node_modules/@postman/aether/esmLib/src/components/Banner/Banner.js"),d=s("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),u=s("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-descriptive-team-stroke.js"),m=s("./collaboration/workspace/components/common/WorkspaceList/WorkspaceListItem/WorkspaceListItem.tsx"),p=s("./js/stores/StoreManager.js"),h=s("./js/stores/CurrentUserStore.js"),g=s("./js/components/base/Icons/SuccessIcon.js"),E=s("./js/components/base/Icons/CloseIcon.js"),f=s("./js/components/base/LoadingIndicator.js"),R=s("./js/components/base/Dropdowns.js"),v=s("./js/components/base/Buttons.js"),_=s("./js/components/base/TeamLogo.js"),y=s("../../node_modules/mobx-react/dist/mobx-react.module.js"),T=s("./js/components/base/Icons/InformationIcon.js"),S=s("./version-control/pull-request/components/PullRequestSettings.js"),b=s("./js/external-navigation/ExternalNavigationService.js"),I=s("./js/constants/AppUrlConstants.js"),O=s("./js/constants/ShareFlowConstants.js"),N=s("./js/components/base/Avatar.js"),C=s("./js/utils/PluralizeHelper.js"),L=s("./js/components/permissions/RolesListV2.js"),M=s("./appsdk/components/link/Link.js"),A=s("./iam/constants.js"),j=s("./node_modules/lodash/lodash.js");const w={collection:e=>o.createElement(o.Fragment,null,"To change people’s roles and set conditions for merging pull requests on this ",e,","," ",o.createElement(M.default,{to:I.PRICING_LINK,target:"_blank"},o.createElement(r.default,{type:"link-default"},"upgrade your plan"))," to ",A.PLANS.PROFESSIONAL_PLAN_NAME," or ",A.PLANS.ENTERPRISE_PLAN_NAME,"."),default:e=>o.createElement(o.Fragment,null,"To change people’s roles on this ",e,","," ",o.createElement(M.default,{to:I.PRICING_LINK,target:"_blank"},o.createElement(r.default,{type:"link-default"},"upgrade your plan"))," to ",A.PLANS.PROFESSIONAL_PLAN_NAME," or ",A.PLANS.ENTERPRISE_PLAN_NAME,".")},k="group",P="team",x=e=>{const{type:t,label:s,id:n,details:a}=e;return o.createElement(i.default,{className:"user-suggestion",key:`${t}-${n}`,justifyContent:"center",alignItems:"center",alignSelf:"center",height:"48px"},t===k?o.createElement(d.default,{className:"user-suggestion__group-tag",name:"icon-descriptive-team-stroke",color:"content-color-secondary"}):o.createElement(N.default,{size:"medium",userId:n,linkProfile:!1,customPic:t===P?j.get((0,p.resolveStoreInstance)(h.default),"team.logo_url"):null}),o.createElement(i.default,{className:"user-suggestion-details",direction:"column",justifyContent:"center"},o.createElement(r.default,{className:"user-suggestion-details__name",isTruncated:!0},s),o.createElement(r.default,{className:"user-suggestion-details__email",color:"content-color-secondary"},a)))};let U=(0,y.observer)(n=class extends o.Component{constructor(e){super(e),this.state={searchQuery:"",searchResults:[]},this.handleSearch=this.handleSearch.bind(this),this.handleMemberSelect=this.handleMemberSelect.bind(this),this.getRolesListComponent=this.getRolesListComponent.bind(this)}handleSearch(e){const t=e.target.value,s=j.filter(this.props.suggestions,(e=>j.includes(j.lowerCase(e.name),j.lowerCase(t))||j.includes(j.lowerCase(e.email),j.lowerCase(t))));this.setState({searchQuery:t,searchResults:s})}handleMemberSelect(e){this.setState({searchQuery:" ",searchResults:[]}),e&&this.props.onAddMember(e)}getSelectedRole(e){let t=j.get(this.props.selectedUserRoles,`${e}.name`);return t?j.get(this.props.rolesList,`${t}.displayName`,"Select Role"):""}getSelectedTeamRole(){let e=j.get(this.props,"teamRole.name","");return{name:e,displayName:j.get(this.props.rolesList,`${e}.displayName`,"Select Role")}}renderRolesDropdown(e,t,s={}){let n=s.type||"secondary",r=s.dropdownStyle;return o.createElement(R.Dropdown,{onSelect:e},o.createElement(R.DropdownButton,{size:"small",type:n,dropdownStyle:r},o.createElement(v.Button,{type:n},t)),o.createElement(R.DropdownMenu,{className:"role-dropdown",fluid:!0},j.map(this.props.orderedRoleList,(e=>{if(!j.get(e,"state.isInvalid.status"))return o.createElement(R.MenuItem,{key:e.name,refKey:e.name,disabled:j.get(e,"state.isBlocked.status"),disabledText:j.get(e,"state.isBlocked.detail")},o.createElement("span",null,e.displayName))}))))}getTeamRole(){let{name:e,displayName:t}=this.getSelectedTeamRole();return!!e&&o.createElement("div",{className:"modify-permissions--main"},o.createElement(_.default,{className:"modify-permissions--main-image",imageUrl:j.get((0,p.resolveStoreInstance)(h.default),"team.logo_url")}),o.createElement("span",{className:"modify-permissions--main-title"},"Everyone in Team"),o.createElement("div",{className:"modify-permissions--main-roles"},this.renderRolesDropdown(this.props.onTeamRoleChange,o.createElement("span",{className:"modify-permissions--main-roles--name"},t))))}getAddMoreRolesIcon(){return o.createElement(T.default,{className:"modify-permissions-container--infobar__info-icon"})}getRolesListComponent(e){const t=j.map(this.props.suggestions,(e=>{let t=e.email;if(e.type===k){const s=j.size(e.members);t=`${s} ${C.default.pluralize({count:s,singular:"member",plural:"members"})}`}if(e.type===P){const s=j.size(e.members);t=`${s} ${C.default.pluralize({count:s,singular:"member",plural:"members"})}`}return{...e,value:`${e.type}-${e.id}-${e.email}`,label:e.name||e.username||e.email,details:t}}));return o.createElement("div",{className:"modify-permissions--editor"},o.createElement(a.default,{type:"h6",text:this.props.fromShareModal?"Manage roles":"Name, email, or group name",color:"content-color-secondary",className:"modify-permissions--editor--title"}),!this.props.isOffline&&!e&&this.props.canModifyMembers&&o.createElement("div",{className:"modify-permissions--search"},o.createElement("div",{className:"modify-permissions--search__input-container"},o.createElement(l.default,{placeholder:" ",options:t,customOptionComponent:x,menuMaxHeight:300,onChange:this.handleMemberSelect,value:this.state.searchQuery,emptyStateMessage:"No results found"}))),e&&o.createElement("div",null,e),!e&&o.createElement("div",{className:"modify-permissions--roles-container"},o.createElement(L.default,{isApiLinked:this.props.isApiLinked,fallbackRole:"Select Role",canModifyMembers:this.props.canModifyMembers,selectedUserRoles:this.props.selectedUserRoles,selectedUserGroupsRoles:this.props.selectedUserGroupsRoles,rolesList:this.props.rolesList,guestRoles:this.props.guestRoles,orderedRoleList:this.props.orderedRoleList,orderedGuestRoleList:this.props.orderedGuestRoleList,disabledRoleTooltipText:this.props.disabledRoleTooltipText,teamRole:this.props.teamRole,members:this.props.members,userGroups:this.props.userGroups,onChange:this.props.onChange,onChangeUserGroupRole:this.props.onChangeUserGroupRole,onTeamRoleChange:this.props.onTeamRoleChange,onRemoveMember:this.props.onRemoveMember,onRemoveUserGroup:this.props.onRemoveUserGroup,entityType:this.props.entityType,entityId:this.props.entityId,roleValidations:this.props.roleValidations}),j.size(this.props.guestUpgrades)>0&&o.createElement(i.default,{padding:{paddingBottom:"spacing-l"}},o.createElement(c.default,{title:"Guest will be converted to Developer in your team",status:"neutral",hideIcon:!0},o.createElement(r.default,null,"Only ",o.createElement(M.default,{to:"https://go.pstmn.io/da4b21ec",target:"_blank"},o.createElement(r.default,{type:"link-default"},"Developers"))," can edit collections. Once converted, they will get access to all team workspaces. Team Admins will review this change."))),this.props.enablePullRequestSettings&&o.createElement(o.Fragment,null,this.props.pullRequestSettingsLoading?o.createElement("div",{className:"pull-request-settings__is-loading"},o.createElement(f.default,null)):o.createElement(S.default,{pullRequestSettingsError:this.props.pullRequestSettingsError,onMergeCheckToggle:this.props.onMergeCheckToggle,onRadioSelect:this.props.onRadioSelect,mergeChecks:this.props.mergeChecks,activeMergeMembers:this.props.activeMergeMembers,upgradePullRequestSettings:this.props.upgradePullRequestSettings,disableTeamSuggestions:this.props.disableTeamSuggestions,suggestions:this.props.suggestions,tags:this.props.tags,handleTagsChange:this.props.handleTagsChange,renderTagContent:this.props.renderTagContent})),this.props.hideRolesList&&o.createElement("div",{className:"modify-permissions--editor"},o.createElement("div",{className:"modify-permissions--editor__information"},o.createElement(u.default,{className:"modify-permissions--editor--information__icon"}),o.createElement(r.default,{className:"modify-permissions--editor--information__text"},"Everyone on your team can view and make changes to this ",O.MODEL_NAME[this.props.entityType],". To manage access to ",O.MODEL_NAME[this.props.entityType],"s, upgrade to the ",A.PLANS.PROFESSIONAL_PLAN_NAME," or ",A.PLANS.ENTERPRISE_PLAN_NAME," plan.",o.createElement(v.Button,{className:"modify-permissions--editor--information__plan-link",type:"text",onClick:()=>(0,b.openExternalLink)(I.PRICING_LINK)},"View Plans.")))),this.props.showAddMoreRolesBanner&&o.createElement("div",{className:"modify-permissions--roles-container__infobar"},o.createElement(c.default,{status:"info"},o.createElement(r.default,{color:"content-color-primary"},w[this.props.entityType]&&w[this.props.entityType](O.MODEL_NAME[this.props.entityType])||w.default(O.MODEL_NAME[this.props.entityType]))))))}getAlreadySharedInWorkspaceList(){return j.map(this.props.alreadySharedIn,(e=>("private-team"===e.visibilityStatus&&(e.visibilityStatus="private"),"only-me"===e.visibilityStatus&&(e.visibilityStatus="personal"),o.createElement(m.default,{key:e.id,workspace:e}))))}render(){if(this.props.isFetchingRoles)return o.createElement("div",{className:"modify-permissions is-loading"},o.createElement(f.default,null));let e=j.get(this.props,"permissionError.message");return o.createElement("div",{className:"modify-permissions-body"},this.props.showBanner&&o.createElement("div",{className:"modify-permissions--banner"},o.createElement(g.default,{className:"modify-permissions--banner-success",size:"xs"}),o.createElement("p",{className:"modify-permissions--banner-text"},this.props.text),o.createElement(E.default,{className:"modify-permissions--banner-close",size:"xs",onClick:this.props.handleBannerClose})),o.createElement("div",{className:"modify-permissions"},this.getRolesListComponent(e),!O.SHARE_UNSUPPORTED_ENTITIES.includes(this.props.entityType)&&j.size(this.props.alreadySharedIn)>1&&o.createElement(o.Fragment,null,o.createElement("div",{className:"modify-permissions--separator"}),o.createElement("div",{className:"modify-permissions--workspaces"},o.createElement("div",{className:"modify-permissions--workspaces__shared-in"},o.createElement(a.default,{type:"h6",text:"Currently exists in",color:"content-color-secondary",className:"modify-permissions--workspaces__shared-in--title"}),this.props.isFetchingWorkspaces?o.createElement("div",{className:"modify-permissions--workspaces__shared-in__is-loading"},o.createElement(f.default,null)):this.getAlreadySharedInWorkspaceList())))))}})||n;U.defaultProps={onAddMember:()=>{}}},"./js/components/permissions/ManageRolesContainer.js":function(e,t,s){s.r(t),s.d(t,{supportedEntities:function(){return X}});var n,o=s("../../node_modules/react/index.js"),r=s("./js/stores/FeatureFlagsStore.js"),i=s("./collaboration/workspace/model/ActiveWorkspaceBaseStore.ts"),a=s("./collaboration/workspace/model/WorkspaceDefaultRolesStore.ts"),l=s("./billing/stores/PlanFeaturesStore.js"),c=s("./js/stores/TeamStore.js"),d=s("./js/stores/SyncStatusStore.js"),u=s("./js/stores/StoreManager.js"),m=s("./js/stores/CurrentUserStore.js"),p=s("../../node_modules/mobx-react/dist/mobx-react.module.js"),h=s("./node_modules/classnames/index.js"),g=s.n(h),E=s("./js/utils/util.js"),f=s("./js/components/base/Avatar.js"),R=s("./js/components/base/Icons/MailIcon.js"),v=s("./js/components/permissions/ManageRoles.js"),_=s("./js/modules/services/RolesService.js"),y=s("./version-control/pull-request/services/PullRequestService.js"),T=s("../../node_modules/@postman/aether/esmLib/src/components/Modal/Modal.js"),S=s("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),b=s("../../node_modules/@postman/aether/esmLib/src/components/Banner/Banner.js"),I=s("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),O=s("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),N=s("../../node_modules/@postman/aether/esmLib/src/components/Toast/withToast.js"),C=s("./js/constants/ShareFlowConstants.js"),L=s("./js/modules/controllers/CurrentUserController.js"),M=s("./collaboration/workspace/controller/WorkspaceController.ts"),A=s("./js/modules/services/share-entities/ShareEntitiesService.js"),j=s("./js/components/permissions/PermissionError.js"),w=s("./js/modules/services/ShareModalService.js"),k=s("./version-control/config.js"),P=s("./js/services/NavigationService.js"),x=s("./collaboration/workspace/service/ShareElementService.ts"),U=s("./collaboration/workspace/utils/ShareElement.ts"),D=s("./collaboration/navigation/constants.js"),G=s("../../node_modules/mobx/lib/mobx.module.js"),F=s("./collaboration/utils/userGroups.js"),V=s("./collaboration/workspace/types/WorkspaceTypes.ts"),$=s("./runtime-repl/extensible-collection/helpers/EntityTypeHelper.ts"),B=s("./api-dev/services/APIDevService.js"),H=s("./js/modules/services/ManageRolesModalService.js"),Y=s("./iam/src/common/utils/index.js"),q=s("./collaboration/workspace/components/common/PlanUpgradeButton.tsx"),W=s("./node_modules/lodash/lodash.js"),z=s("../../node_modules/console-browserify/index.js");const K={entityId:"",entityName:"",rolesList:{},guestRoles:{},currentRoles:{},isFetchingRoles:!0,guestUpgrades:{},selectedUserRoles:{},selectedUserGroupsRoles:{},defaultRole:"",isLoading:!1,activeMergeMembers:"",mergeMemberTags:[],mergersInfo:{},mergeChecks:[],pullRequestSettingsLoading:!1,pullRequestSettingsError:!1,alreadySharedIn:[],teamMembers:[],members:[],userGroups:[],defaultRoles:{team:"",user:"",guest:""},teamRole:{},groupRole:{},error:null,apiLinkedToEntity:null,isFetchingWorkspaces:!0,permissionError:{},roleValidations:{},isGuestRolePlanEnabled:!1},X=["collection",V.WORKSPACE_ELEMENTS_TYPE.extensibleCollection,"environment","api","mock","monitor"],Q=(V.WORKSPACE_ELEMENTS_TYPE.extensibleCollection,{collection:C.COLLECTION_MANAGE_ROLES_ERROR,[V.WORKSPACE_ELEMENTS_TYPE.extensibleCollection]:C.COLLECTION_MANAGE_ROLES_ERROR,environment:C.ENVIRONMENT_MANAGE_ROLES_ERROR,monitor:C.MONITOR_MANAGE_ROLES_ERROR,api:C.API_MANAGE_ROLES_ERROR,mock:C.MOCK_MANAGE_ROLES_ERROR}),J={collection:C.FETCH_ROLES_FAILED_COLLECTION,[V.WORKSPACE_ELEMENTS_TYPE.extensibleCollection]:C.FETCH_ROLES_FAILED_COLLECTION,environment:C.FETCH_ROLES_FAILED_ENVIRONMENT,monitor:C.FETCH_ROLES_FAILED_MONITOR,api:C.FETCH_ROLES_FAILED_API,mock:C.FETCH_ROLES_FAILED_MOCK},Z={collection:C.UPDATE_ROLES_FAILED_COLLECTION,[V.WORKSPACE_ELEMENTS_TYPE.extensibleCollection]:C.UPDATE_ROLES_FAILED_COLLECTION,environment:C.UPDATE_ROLES_FAILED_ENVIRONMENT,monitor:C.UPDATE_ROLES_FAILED_MONITOR,api:C.UPDATE_ROLES_FAILED_API,mock:C.UPDATE_ROLES_FAILED_MOCK,title:C.UPDATE_ROLES_FAILED_TITLE},ee={collection:C.COLLECTION_NOT_SHARED_ERROR,[V.WORKSPACE_ELEMENTS_TYPE.extensibleCollection]:C.COLLECTION_NOT_SHARED_ERROR,environment:C.ENVIRONMENT_NOT_SHARED_ERROR,monitor:C.MONITOR_NOT_SHARED_ERROR,api:C.API_NOT_SHARED_ERROR,mock:C.MOCK_NOT_SHARED_ERROR},te={collection:C.NO_ROLES_TO_MANAGE_COLLECTION,[V.WORKSPACE_ELEMENTS_TYPE.extensibleCollection]:C.NO_ROLES_TO_MANAGE_COLLECTION,environment:C.NO_ROLES_TO_MANAGE_ENVIRONMENT,monitor:C.NO_ROLES_TO_MANAGE_MONITOR,api:C.NO_ROLES_TO_MANAGE_API,mock:C.NO_ROLES_TO_MANAGE_MOCK},se={collection:"Collection",[V.WORKSPACE_ELEMENTS_TYPE.extensibleCollection]:"Collection",environment:"Environment",monitor:"Monitor",api:"API"},ne={collection:w.moveCollection,[V.WORKSPACE_ELEMENTS_TYPE.extensibleCollection]:w.moveExtensibleCollection,environment:w.moveEnvironment,api:w.moveAPI},oe=(C.FETCH_PULL_REQUEST_SETTINGS_FAILED_COLLECTION,"group"),re="user",ie="team";let ae=(0,p.observer)(n=class extends o.Component{constructor(e){super(e),this.state=K,this.handleOpen=this.handleOpen.bind(this),this.handleClose=this.handleClose.bind(this),this.handleRoles=this.handleRoles.bind(this),this.handleManageRoles=this.handleManageRoles.bind(this),this.handleAddMember=this.handleAddMember.bind(this),this.handleAddUserGroup=this.handleAddUserGroup.bind(this),this.handleAddTeam=this.handleAddTeam.bind(this),this.handleRemoveMember=this.handleRemoveMember.bind(this),this.handleRemoveUserGroup=this.handleRemoveUserGroup.bind(this),this.handleInfobarDismiss=this.handleInfobarDismiss.bind(this),this.handleTeamRole=this.handleTeamRole.bind(this),this.handleGroupRole=this.handleGroupRole.bind(this),this.handleUserGroupRole=this.handleUserGroupRole.bind(this),this.handleGuestRoles=this.handleGuestRoles.bind(this),this.handleError=this.handleError.bind(this),this.handleMergeCheckToggle=this.handleMergeCheckToggle.bind(this),this.handleMergeMemberTagsChange=this.handleMergeMemberTagsChange.bind(this),this.handleRadioSelect=this.handleRadioSelect.bind(this),this.handleOpenWorkspaceSettings=this.handleOpenWorkspaceSettings.bind(this),this.handleOpenApiRoleSettings=this.handleOpenApiRoleSettings.bind(this)}async componentDidMount(){let e=this.props.controller;if(!e)return;const t=e&&e.opts||{};l.default.onPlanFeaturesLoad().then((()=>{this.setState({isGuestRolePlanEnabled:W.get(l.default,"plan.features.guest_viewer_enabled.value",!1)})})),B.default.getApiLinkedToEntity(e.entityType,e.entityId).then((e=>this.setState({apiLinkedToEntity:e}))).catch((e=>{pm.logger.error("ManageRolesContainer~componentDidMount: Error while fetching API linked to entity ",e),this.setState({apiLinkedToEntity:null})})),(0,G.reaction)((()=>W.get((0,u.resolveStoreInstance)(m.default),"team.id")),(s=>{s&&this.handleOpen(e.entityType,e.entityId,t)}),{fireImmediately:!0})}isOffline(){return!(0,u.resolveStoreInstance)(d.default).isSocketConnected}setPullRequestSettings(e,t){this.isOffline()||(this.setState({pullRequestSettingsLoading:!0}),(0,y.fetchEntityPullRequestSettings)(e,t).then((({settings:e})=>{this.setState({pullRequestSettingsLoading:!1,mergeChecks:e,mergersInfo:{},mergeMemberTags:W.get(this.state,"mergersInfo.users")?(this.state.mergersInfo.users||[]).map((e=>({value:e.email,type:"regular"}))):[],activeMergeMembers:W.get(this.state.mergersInfo,"users",[]).length>0?"teammates":"collectionEditors"})})).catch((()=>{this.setState({pullRequestSettingsError:!0,pullRequestSettingsLoading:!1})})))}async setRoles(e,t,s=!1){if(!this.isOffline())try{const{rolesList:n,userCurrentRoles:o,defaultRoles:r,teamCurrentRole:i,groupCurrentRoles:a,rolesOrder:l,guestRoles:d}=await(0,_.fetchEntityRoles)(e,t,s),p=W.get((0,u.resolveStoreInstance)(m.default),"team.id"),h=F.default.formatUserGroups(W.get((0,u.resolveStoreInstance)(c.default),"allUserGroups")),{userGroupRoles:g,otherGroupRoles:E}=F.default.segregateGroupRoles(a,h);let f={};if(W.forEach({...o,...g,...i},(s=>{f[`${s.type}_${s.id}`]={entityId:s.id,entityType:s.type,objectId:t,objectType:e,role:s.name}})),!W.isEmpty(f))try{const e=await(0,_.validateRoleAssignment)(f);this.setState({roleValidations:e})}catch(e){pm.logger.error("ManageRolesContainer~setRoles: Error while fetching validations ",e)}this.setState({isFetchingRoles:!1,rolesList:n,guestRoles:d,rolesOrder:l,selectedUserRoles:o,selectedUserGroupsRoles:g,defaultRoles:r,teamRole:i[p]||{},groupRole:E,members:W.map(o,(({id:e})=>({id:e}))),userGroups:F.default.getUserGroupsFromRoles(g,h)})}catch(t){this.handleError(t,J[e])}}onWorkspaceJoin(e){this.setState((t=>({joinedWorkspaces:{...t.joinedWorkspaces,[e]:!0}})))}getTeamSuggestion(){if(!W.isEmpty(this.state.teamRole))return[];const e=(0,u.resolveStoreInstance)(m.default).team,t=(0,u.resolveStoreInstance)(i.default).visibilityStatus;return e&&t!==V.VISIBILITY_STATUS.private?[{type:ie,id:e.id,name:e.name,members:W.get(e,"team_users")}]:[]}getUserSuggestions(){const e=W.reduce(this.state.selectedUserRoles,((e,{id:t})=>(e[t]=!0,e)),{});return W.reduce(this.state.teamMembers,((t,s)=>(e[s.id]||t.push({...s,type:re}),t)),[])}getUserGroupsSuggestions(){if(!(0,u.resolveStoreInstance)(r.default).isEnabled("workspace:isUserGroupsEnabledForTeam"))return[];const e=W.get((0,u.resolveStoreInstance)(c.default),"allUserGroups"),t=this.state.selectedUserGroupsRoles;return W.reduce(e,((e,s)=>{const{id:n,name:o,members:r}=s;return t[n]||e.push({type:"group",id:W.toString(n),name:o,members:r}),e}),[])}getIdFromTags(e){const t=(0,u.resolveStoreInstance)(m.default);let s=[];return e.forEach((e=>{const n=E.default.findUserInTeam({email:e.value},t);n&&s.push(n.id)})),s}async setAlreadySharedInWorkspaces(e,t){let s=[],n={element:{type:e,id:t}},o=null;for(;W.isNull(o)||o;){const e=await M.default.findAll(n);s=W.concat(s,W.get(e,"data",[])),o=W.get(e,"meta.nextCursor"),n.cursor=o}this.setState({alreadySharedIn:s,isFetchingWorkspaces:!1})}async checkPermissions(e,t){let s=await(0,A.isEntityShared)(e,t),n=s&&await(0,A.canManageRolesOnEntity)(e,t),o={type:s?C.NO_PERMISSION:C.NOT_SHARED,message:s?Q[e]:ee[e]};return s&&n?Promise.resolve():Promise.reject(o)}async handleOpen(e,t,s={}){if(!e||!t)return z.warn(`ManageRolesContainer~handleOpen:\n      Unsupported entity '${e}' provided with ID: '${t}'`),pm.toasts.error("Something went wrong while managing roles."),void this.handleClose();if(this.isTeamUser()||this.handleClose(),(0,A.fetchEntityMeta)(e,t).then((e=>{this.setState({entityName:e.name})})),!(0,u.resolveStoreInstance)(m.default).team)return void this.setState({permissionError:{type:C.NO_TEAM,message:C.NO_TEAM_FOUND_BODY},entityId:t,entityType:e});let n=this.isOffline();n||this.checkPermissions(e,t).then((()=>{this.setRoles(e,t,this.state.isGuestRolePlanEnabled),this.setAlreadySharedInWorkspaces(e,t),W.get(pm.billing,["plan","features","pr_settings_access_allowed","value"])&&this.setPullRequestSettings(e,t)})).catch((e=>{this.setState({permissionError:e,isFetchingRoles:!1,isFetchingWorkspaces:!1})})),this.setState({isFetchingRoles:!n,entityId:t,entityType:e,guestUpgrades:{},teamMembers:(0,u.resolveStoreInstance)(c.default).allTeamMembers})}async isTeamUser(){const e=await L.default.get();return e?!(!e.organizations||!e.organizations[0])||(pm.toasts.error("You need to be signed-in to a team to perform this action."),pm.logger.error(new Error("IACNavigation~handleManageRoles: User is not part of a team.")),!1):(pm.logger.error(new Error("IACNavigation~roles.manage: User not found")),!1)}handleClose(){this.setState(K),this.props.close&&this.props.close()}handleError(e,t="",s=""){let n=W.get(e,"details.message",W.get(e,"message"));"teamMemberSlotsFull"===W.get(e,"errorName","")?(this.props.addToast({title:"Couldn't change role",status:"warning",description:o.createElement(o.Fragment,null,"Your team is full. "," ",o.createElement(q.default,{analyticsLabel:"entity_guest_upgrade"})," ","to add more team members."),isPersistent:!0}),n=null):n?(this.props.addToast({status:"error",title:s,description:n}),n=null):n=t||"Something went wrong",this.setState({isLoading:!1,error:n})}handleInfobarDismiss(){this.setState({error:null})}async setRoleAssignmentValidation(e,t,s){const n=`${e}_${t}`,o={[n]:{entityId:t,entityType:e,objectId:this.state.entityId,objectType:this.state.entityType,role:s}};this.setState({roleValidations:W.omit(this.state.roleValidations,n)});try{const e=await(0,_.validateRoleAssignment)(o);this.setState({roleValidations:{...this.state.roleValidations,...e}})}catch(e){pm.logger.error("ManageRolesContainer~setRoleAssignmentValidation: Error while fetching validations ",e)}}handleRoles(e,t,s){this.setState((n=>({selectedUserRoles:{...n.selectedUserRoles,[e]:{id:e,type:t,name:s}}}))),(0,Y.isUserGuest)({id:e})&&this.setState((n=>{let o;return o=W.get(this.state.defaultRoles,"guest")===s?W.omit(n.guestUpgrades,e):W.assign(n.guestUpgrades,{[e]:{id:e,type:t}}),{guestUpgrades:o}})),this.setRoleAssignmentValidation(t,e,s)}handleGroupRole(e,t,s){this.setState((n=>({groupRole:{...n.groupRole,[e]:{id:e,type:t,name:s}}})))}handleUserGroupRole(e,t,s){this.setState((n=>({selectedUserGroupsRoles:{...n.selectedUserGroupsRoles,[e]:{id:e,type:t,name:s}}}))),this.setRoleAssignmentValidation(t,e,s)}handleManageRoles(){if(this.isOffline())return;this.setState({isLoading:!0,error:null});let{entityType:e,selectedUserRoles:t,teamRole:s,entityId:n,entityName:o,mergeMemberTags:r,mergersInfo:i,mergeChecks:a,groupRole:l,selectedUserGroupsRoles:c,guestUpgrades:d}=this.state;t=W.omit(t,W.keys(d)),i.users=this.getIdFromTags(r);let u=a.map((e=>({id:e.id,enabled:e.enabled}))),m={...l,...c};const p=W.get(pm.billing,["plan","features","pr_settings_access_allowed","value"]),h=this.state.isGuestRolePlanEnabled;Promise.all([(0,_.updateEntityRoles)(e,n,t,s,m),p&&(0,y.updateEntityPullRequestSettings)(e,n,u),h&&this.handleGuestRoles()]).then((()=>{pm.eventBus.channel("manage-roles-updates").publish({entityType:e,entityId:n,prSettingsUpdate:p});let t="success",s="",o="Role Updated",r=W.size(this.state.guestUpgrades),i=r===W.size(this.state.selectedUserRoles)+W.size(c);r>0&&(t="info",s=i?"Role will be updated soon":"Role update acknowledged",o=i?"Team Admins are reviewing the role change from Guest to Developer.":"For Guest role change, Team Admins will review your request. "),this.props.addToast({status:t,title:s,description:o}),this.handleClose()})).catch((t=>{this.handleError({message:C.FAULTY_WIRE_MESSAGE,errorName:W.get(t,"error.name")},Z[e],Z.title)}))}async handleGuestRoles(){let{entityType:e,entityId:t,guestUpgrades:s}=this.state,n=W.values(s),o=(0,u.resolveStoreInstance)(a.default).defaultRoles,r={id:(0,u.resolveStoreInstance)(i.default).id,role:W.get(o,"user","")};if(!W.isEmpty(n)){let s=U.default.getActionTypeAndData({model:e,modelId:t,canUpdateRoles:!0,role:W.get(this.state.rolesOrder,[0],""),addWorkspaceContext:!0,workspaceDetails:r,sharePublicContext:!1});try{await x.default.shareElementWithTeamUser({invitees:n,...s,type:"guest"})}catch(e){return pm.logger.error("ManageRolesContainer~handleGuestRoles",e),Promise.reject(e)}}}handleAddMember(e){const{id:t,type:s}=e;return s===oe?this.handleAddUserGroup(e):s===ie?this.handleAddTeam(e):void(W.some(this.state.members,{id:t})||this.setState((e=>{const s=W.get(e.rolesList[W.get(e.teamRole,"name")],"isEnabled")?e.teamRole.name:e.defaultRoles.user;return this.setRoleAssignmentValidation(re,t,s),{members:[...e.members,{id:t}],selectedUserRoles:{...e.selectedUserRoles,[t]:{id:t,type:"user",name:s}}}})))}handleAddTeam(e){W.isEmpty(this.state.teamRole)&&this.setState((t=>(this.setRoleAssignmentValidation(ie,e.id,t.defaultRoles.team),{teamRole:{id:e.id,type:ie,name:t.defaultRoles.team}})))}handleAddUserGroup(e){const{id:t}=e;this.setState((s=>{const n=W.get(s.rolesList[W.get(s.teamRole,"name")],"isEnabled")?s.teamRole.name:s.defaultRoles.user;return this.setRoleAssignmentValidation(oe,t,n),{userGroups:{...s.userGroups,[t]:{...e}},selectedUserGroupsRoles:{...s.selectedUserGroupsRoles,[t]:{id:t,type:"group",name:n}}}}))}handleRemoveMember(e){this.setState((t=>({members:W.reject(t.members,{id:e}),selectedUserRoles:W.omit(t.selectedUserRoles,e)})))}handleRemoveUserGroup(e){this.setState((t=>({userGroups:W.omit(t.userGroups,e),selectedUserGroupsRoles:W.omit(t.selectedUserGroupsRoles,e)})))}handleTeamRole(e,t,s){this.setState({teamRole:{id:e,type:t,name:s}}),this.setRoleAssignmentValidation(t,e,s)}handleMergeCheckToggle(e){this.setState((t=>({mergeChecks:t.mergeChecks.map((t=>(t.id===e&&k.prSettingsConfig[e].enabled&&(t.enabled=!t.enabled),t)))})))}handleRadioSelect(e){this.setState({activeMergeMembers:e})}handleMergeMemberTagsChange(e){this.setState({mergeMemberTags:e})}getStyles(){return{marginTop:"10vh",height:"85vh",minWidth:"720px",maxHeight:"700px",width:"80vw"}}renderNoPermissionError(){let e={},{type:t}=this.state.permissionError,{entityType:s,entityId:n,entityName:r}=this.state,i="",a=C.MODEL_NAME[this.state.entityType]||this.state.entityType;return t===C.NOT_SHARED?(C.SHARE_UNSUPPORTED_ENTITIES.includes(s)||(e={label:`Move ${se[s]}`,onClick:()=>{ne[s](n,r,{origin:"manage-roles-empty"}),this.handleClose()}}),i=te[s]):t===C.NO_TEAM?i=C.NO_TEAM_FOUND_TITLE:t===C.NO_PERMISSION&&(i=C.REQUEST_ACCESS_TITLE,e={label:C.REQUEST_ACCESS_BUTTON_LABEL,onClick:()=>{P.default.transitionTo(D.ACCESS_REQUEST_CREATE_BUILD_IDENTIFIER,null,{entityType:$.serialize(s),entityId:n,type:"grant_role",entityName:r}),this.handleClose&&this.handleClose()}}),(0,u.resolveStoreInstance)(m.default).isCurrentUserPartner&&(e={}),o.createElement(T.Modal,{className:"modify-permissions-container",isOpen:this.props.isOpen,onClose:this.handleClose,size:"large"},o.createElement(T.ModalHeader,{heading:`Manage roles on ${this.state.entityName||a}`}),o.createElement(T.ModalContent,{className:"modify-permissions-container__no-access-content"},o.createElement(j.default,{thumbnail:t===C.NOT_SHARED,title:i,infoText:this.state.permissionError&&this.state.permissionError.infoText,error:this.state.permissionError.message,action:e})))}renderTagContent(e){const t=(0,u.resolveStoreInstance)(m.default),s=E.default.findUserInTeam({email:e.value},t),n=s?s.username:e.value;return o.createElement("div",{className:"invite-user-tag"},s?o.createElement(f.default,{size:"small",userId:s.id}):o.createElement(R.default,null),o.createElement("div",{title:n,className:"user-email"},n))}handleOpenWorkspaceSettings(){this.handleClose(),P.default.transitionTo("build.overview",null,{ctx:"settings"})}handleOpenApiRoleSettings(){this.state.apiLinkedToEntity&&(this.handleClose(),(0,H.manageRolesOnAPI)(this.state.apiLinkedToEntity.id))}getRolesOrder(){return W.reduce(this.state.rolesOrder,((e,t)=>{const s=W.get(this.state.rolesList,[t]);return s&&e.push(s),e}),[])}getGuestRolesOrder(){return W.reduce(this.state.rolesOrder,((e,t)=>{const s=W.get(this.state.guestRoles,[t]);return s&&e.push(s),e}),[])}getRolesCaption(){return null!==this.state.apiLinkedToEntity&&"api"!==this.state.entityType?o.createElement(o.Fragment,null,"People will inherit roles on this ",C.MODEL_NAME[this.state.entityType]," from the associated API and workspace."," ",o.createElement("span",{onClick:this.handleOpenApiRoleSettings},o.createElement(S.default,{type:"link-default"},"View roles"))):o.createElement(o.Fragment,null,"People will inherit roles on this ",C.MODEL_NAME[this.state.entityType]," from the workspace."," ",o.createElement("span",{onClick:this.handleOpenWorkspaceSettings},o.createElement(S.default,{type:"link-default"},"View workspace roles")))}render(){if(this.state.permissionError.message)return this.renderNoPermissionError();let e=this.isOffline(),t=e?C.SYNC_OFFLINE_MESSAGE_MANAGE:this.state.error,s=(0,u.resolveStoreInstance)(m.default),n=e||this.state.isLoading||this.state.isFetchingRoles||this.state.permissionError.message||s.isCurrentUserPartner,i=(E.default.isProUser(s),"EDIT"===(0,u.resolveStoreInstance)(r.default).get(`${this.state.entityType}:accessControlMode`)),a="collection"===this.state.entityType,l=this.getRolesOrder(),c=W.orderBy(l,["state.isBlocked.status"],["asc"]),d=this.getGuestRolesOrder(),p=W.orderBy(d,["state.isBlocked.status"],["asc"]),h=`You can only assign users an ${W.reduce(this.state.rolesList,((e,t)=>(t.isEnabled&&e.push(t.displayName),e)),[]).join(" ,")} role on this ${C.MODEL_NAME[this.state.entityType]}. Your plan doesn't include access management.`,f=C.MODEL_NAME[this.state.entityType]||this.state.entityType;return o.createElement(T.Modal,{className:"modify-permissions-container",isOpen:this.props.isOpen,onClose:this.handleClose,size:"medium"},o.createElement(T.ModalHeader,{isTruncatedHeader:!0,heading:`Manage roles on ${this.state.entityName||f}`}),o.createElement(T.ModalContent,{className:g()({"modify-permissions-container__content":!0,"modify-permissions-container__content--extend":W.size(this.state.alreadySharedIn)<=1})},t&&o.createElement("div",{className:g()({"modify-permissions-container__content__banner-container":W.size(this.state.alreadySharedIn)>1})},o.createElement(b.default,{status:e?"warning":"error",onDismiss:!e&&this.handleInfobarDismiss},t)),o.createElement(v.default,{isApiLinked:null!==this.state.apiLinkedToEntity,entityType:this.state.entityType,entityId:this.state.entityId,canModifyMembers:!0,isOffline:e,members:this.state.members,userGroups:this.state.userGroups,disabledRoleTooltipText:h,allTeamMembers:this.state.teamMembers,selectedUserRoles:this.state.selectedUserRoles,selectedUserGroupsRoles:this.state.selectedUserGroupsRoles,isFetchingRoles:this.state.isFetchingRoles,isFetchingWorkspaces:this.state.isFetchingWorkspaces,rolesList:this.state.rolesList,guestRoles:this.state.guestRoles,orderedRoleList:c,orderedGuestRoleList:p,onChange:this.handleRoles,onChangeUserGroupRole:this.handleUserGroupRole,alreadySharedIn:this.state.alreadySharedIn,onAddMember:this.handleAddMember,onRemoveMember:this.handleRemoveMember,onRemoveUserGroup:this.handleRemoveUserGroup,teamRole:this.state.teamRole,groupRole:this.state.groupRole,onTeamRoleChange:this.handleTeamRole,onGroupRoleChange:this.handleGroupRole,entityName:C.MODEL_NAME[this.state.entityType],showAddMoreRolesBanner:i,enablePullRequestSettings:a,upgradePullRequestSettings:!W.get(pm.billing,["plan","features","pr_settings_access_allowed","value"]),pullRequestSettingsLoading:this.state.pullRequestSettingsLoading,pullRequestSettingsError:this.state.pullRequestSettingsError,mergeChecks:this.state.mergeChecks,onMergeCheckToggle:this.handleMergeCheckToggle,onRadioSelect:this.handleRadioSelect,activeMergeMembers:this.state.activeMergeMembers,disableTeamSuggestions:!0,suggestions:W.concat(this.getTeamSuggestion(),this.getUserGroupsSuggestions(),this.getUserSuggestions()),tags:this.state.mergeMemberTags,handleTagsChange:this.handleMergeMemberTagsChange,renderTagContent:this.renderTagContent,roleValidations:this.state.roleValidations,guestUpgrades:this.state.guestUpgrades})),o.createElement(T.ModalFooter,null,o.createElement(I.default,{grow:1,shrink:1,justifyContent:"space-between",alignItems:"center"},o.createElement("div",null,!n&&o.createElement(S.default,{color:"content-color-secondary"},this.getRolesCaption())),o.createElement(I.default,{gap:"spacing-s"},o.createElement(O.default,{type:"secondary",text:"Cancel",onClick:this.handleClose}),o.createElement(O.default,{type:"primary",text:"Update Roles",onClick:this.handleManageRoles,isDisabled:n,isLoading:this.state.isLoading,className:"modify-permissions-container--action"})))))}})||n;t.default=(0,N.default)(ae)},"./js/components/permissions/ManageRolesController.js":function(e,t,s){s.r(t),s.d(t,{default:function(){return a}});var n=s("./appsdk/modals/BaseModalController.js"),o=s("./js/components/permissions/ManageRolesContainer.js"),r=s("./runtime-repl/extensible-collection/helpers/EntityTypeHelper.ts"),i=s("./node_modules/lodash/lodash.js");class a extends n.default{didCreate({queryParams:e,additionalContext:t}){this.opts=t,o.supportedEntities.forEach((t=>{i.has(e,t)&&(this.entityType=r.deserialize(t,e[t]),this.entityId=e[t])}))}}},"./js/components/permissions/PermissionError.js":function(e,t,s){s.r(t);var n=s("../../node_modules/react/index.js"),o=s("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/UnableToLoad.js"),r=s("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/NoPermission.js"),i=s("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),a=s("./node_modules/lodash/lodash.js");const l=e=>n.createElement("div",{className:"permission-error"},n.createElement("div",{className:"permission-error--illustration"},e.thumbnail?n.createElement(o.default,null):n.createElement(r.default,null)),e.title&&n.createElement("div",{className:"permission-error--title"},e.title),n.createElement("div",{className:"permission-error--description"},e.infoText&&n.createElement("p",null,e.infoText),n.createElement("p",null,e.error)),!a.isEmpty(e.action)&&n.createElement(i.default,{type:"primary",className:"permission-error--action",onClick:e.action.onClick,text:e.action.label}));t.default=l,l.defaultProps={action:{}}},"./js/components/permissions/RolesListItemV2.js":function(e,t,s){s.r(t),s.d(t,{default:function(){return b}});var n=s("../../node_modules/react/index.js"),o=s("./js/components/base/Avatar.js"),r=s("./js/components/base/Dropdowns.js"),i=s("./js/components/base/Tooltips.js"),a=s("./node_modules/classnames/index.js"),l=s.n(a),c=s("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),d=s("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),u=s("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),m=s("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),p=s("../../node_modules/@postman/aether/esmLib/src/components/Tooltip/Tooltip.js"),h=s("../../node_modules/@postman/aether/esmLib/src/components/Tag/Tag.js"),g=s("../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuButton.js"),E=s("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),f=s("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-state-info-stroke.js"),R=s("./js/external-navigation/ExternalNavigationService.js"),v=s("./js/stores/StoreManager.js"),_=s("./js/stores/TeamUserStore.js"),y=s("./js/utils/PluralizeHelper.js"),T=s("./node_modules/lodash/lodash.js");const S=({member:e})=>{const{id:t,name:s,username:r,email:i}=e||{},a=s||r||i;return n.createElement("div",{className:"permission-list-item__members-list__content__item"},n.createElement(o.default,{size:"medium",userId:t}),n.createElement("div",{className:"permission-list-item__members-list__content__item__name",title:a},a))};class b extends n.Component{constructor(e){super(e),this.state={isTooltipVisible:!1,isMembersListVisible:!1},this.handleSelect=this.handleSelect.bind(this),this.handleRemove=this.handleRemove.bind(this),this.handleOpenUserGroupPage=this.handleOpenUserGroupPage.bind(this),this.handleClickOutside=this.handleClickOutside.bind(this),this.toggleMemberListVisibility=this.toggleMemberListVisibility.bind(this),this.showTooltip=this.toggleTooltip.bind(this,!0),this.hideTooltip=this.toggleTooltip.bind(this,!1)}toggleTooltip(e){this.setState({isTooltipVisible:e})}handleSelect(e){let t="user";if("remove"===e)return this.handleRemove();this.props.isUserGroup&&(t="group"),this.props.isTeam&&(t="team"),this.props.onChange&&this.props.onChange(this.props.member.id,t,e)}handleRemove(){this.props.onRemoveMember&&this.props.onRemoveMember(this.props.member.id)}handleOpenUserGroupPage(){(0,R.openExternalLink)(`${pm.dashboardUrl}/team/group/${T.get(this.props,"member.id")}/edit`,"_blank"),this.toggleMemberListVisibility()}handleClickOutside(e){const t=T.get(e,"target");this.userGroupIconRef.contains(t)||this.memberNameRef.contains(t)||this.setState({isMembersListVisible:!1})}toggleMemberListVisibility(){this.props.isUserGroup&&this.setState((e=>({isMembersListVisible:!e.isMembersListVisible})))}getMembersListPopUp(e){if(!this.props.isUserGroup)return;const t=(0,v.resolveStoreInstance)(_.default),s=T.get(this.props,"member.name"),o=T.size(e),r=`${o} ${y.default.pluralize({count:o,singular:"member",plural:"members"})}`;return n.createElement(i.Tooltip,{immediate:!0,closeOnClickOutside:!0,placement:"left",className:"permission-list-item__members-list",show:this.state.isMembersListVisible,target:this.roleListItemRef,onClose:this.handleClickOutside},n.createElement(i.TooltipBody,null,n.createElement("div",{className:"permission-list-item__members-list__title"},n.createElement("div",{className:l()({"permission-list-item__members-list__title__group-name":!0,"permission-list-item__members-list__title__no-members":!o}),title:s},s)," ",o>0&&n.createElement("div",null,"(",r,")")),n.createElement("div",{className:l()({"permission-list-item__members-list__content":!0,"permission-list-item__members-list__no-members":!o})},o>0?T.map(e,(e=>{const s=t.find(T.toString(e));return n.createElement(S,{key:e,member:s})})):n.createElement("div",{className:"permission-list-item__members-list__content__no-members"},n.createElement(c.default,{type:"secondary",text:"No members in this group."}))),n.createElement(d.default,{type:"secondary",size:"medium",className:"permission-list-item__members-list__btn",onClick:this.handleOpenUserGroupPage,text:"View Group"})))}getClasses(e){return l()({"permissions-list-item--permissions":!0,"permission-list-item--user":!0,"can-remove":e})}render(){const e=this.props.canModifyMembers&&T.get(this.props,"member.canRemove",!0),t=!this.props.canUpdateRoles||!T.get(this.props,"member.canRemove",!0),s=e?T.concat([],this.props.orderedRoleList,[{displayName:"Remove",state:{isBlocked:{status:!1,detail:"You don't have permission to perform this action"}},isEnabled:!0,name:"remove",type:"remove"}]):this.props.orderedRoleList;return n.createElement("div",{className:"permission-list-item-v2",ref:e=>this.roleListItemRef=e},this.props.isUserGroup?n.createElement("div",{onClick:this.toggleMemberListVisibility,ref:e=>this.userGroupIconRef=e},n.createElement(E.default,{className:"permission-list-item__user-group",name:"icon-descriptive-team-stroke",color:"content-color-secondary"})):n.createElement(o.default,{size:"medium",userId:this.props.member.id,customPic:this.props.isTeam&&this.props.member.logoUrl?this.props.member.logoUrl:null}),n.createElement("div",{className:l()({"permission-list-item--name":!0,"permission-list-item--name__user-group":this.props.isUserGroup}),onClick:this.toggleMemberListVisibility,ref:e=>this.memberNameRef=e},n.createElement(u.default,{gap:"spacing-s",alignItems:"center"},n.createElement(m.default,{color:"content-color-primary",isTruncated:!0},this.props.member.name),this.props.isGuest&&n.createElement(p.default,{content:"Guests can only view collections shared with them.",placement:"right"},n.createElement("div",null,n.createElement(h.default,{text:"Guest",color:"grey"})))),this.props.subTitle&&n.createElement(m.default,{color:"content-color-secondary"},this.props.subTitle)),n.createElement(u.default,{padding:{paddingLeft:"spacing-s"}},this.props.infoText&&!this.props.hideRoles&&n.createElement("div",{className:"permission-list-item--info",ref:"info"},n.createElement(p.default,{content:this.props.infoText,maxWidth:300,placement:"left"},n.createElement(f.default,null))),!this.props.hideRoles&&n.createElement("div",{className:this.getClasses(e)},n.createElement(r.Dropdown,{onSelect:this.handleSelect},n.createElement(r.DropdownButton,{disabled:t,dropdownStyle:"nocaret"},n.createElement(g.default,{text:this.props.selectedRole,type:"tertiary",className:"permissions-list-item--role"})),n.createElement(r.DropdownMenu,{zIndex:"10000",className:"manage-role-dropdown","align-right":!0,fluid:!0},T.map(s,(e=>{if(!T.get(e,"state.isInvalid.status"))return n.createElement(r.MenuItem,{key:e.name,refKey:e.name,disabled:T.get(e,"state.isBlocked.status"),disabledText:T.get(e,"state.isBlocked.detail"),className:l()({"role-remove-button":"remove"===e.type})},n.createElement(u.default,{direction:"row",padding:{paddingTop:"spacing-s",paddingLeft:"spacing-l",paddingBottom:"spacing-s",paddingRight:"spacing-l"},alignItems:"flex-start",gap:"spacing-s",grow:1,"data-testid":"role-list-item",className:"role-list-item"},n.createElement(u.default,{direction:"column",className:"role-list-item-data","data-testid":"role-list-item-name"},n.createElement(m.default,{type:"body-medium"},e.displayName),e.description&&n.createElement(m.default,{type:"body-small",color:"content-color-secondary",maxLines:2},e.description))))}))))),this.getMembersListPopUp(T.get(this.props,"member.members"))))}}b.defaultProps={canUpdateRoles:!0,isGuest:!1}},"./js/components/permissions/RolesListV2.js":function(e,t,s){s.r(t),s.d(t,{default:function(){return m}});var n=s("../../node_modules/react/index.js"),o=(s("./collaboration/workspace/types/WorkspaceTypes.ts"),s("./js/stores/StoreManager.js")),r=s("./js/stores/CurrentUserStore.js"),i=s("./js/utils/PluralizeHelper.js"),a=s("./js/utils/util.js"),l=s("./js/components/permissions/RolesListItemV2.js"),c=s("./js/constants/ShareFlowConstants.js"),d=s("./iam/src/common/utils/index.js"),u=s("./node_modules/lodash/lodash.js");class m extends n.Component{constructor(e){super(e),this.currentUser=(0,o.resolveStoreInstance)(r.default),this.getMemberDetails=this.getMemberDetails.bind(this)}getMemberDetails({id:e,canRemove:t}){if((0,d.isUserGuest)({id:e})){let s=this.currentUser.guestMembersMap.get(e);return{id:e,name:u.get(s,"name")||u.get(s,"username")||u.get(s,"email"),email:u.get(s,"email",""),canRemove:t}}return{id:e,name:a.default.getUserNameForId(e,this.currentUser),email:u.get(a.default.findUserInTeam({id:e},this.currentUser),"email"),canRemove:t}}getUserGroupDetails({id:e,name:t,canRemove:s,members:n}){return{id:e,name:t,canRemove:s,members:n}}getSelectedRole(e){return u.get(this.props.selectedUserRoles,`${e}.name`)}getSelectedUserGroupRole(e){return u.get(this.props.selectedUserGroupsRoles,`${e}.name`)}getSelectedRoleName(e,t){const s=t?this.props.guestRoles:this.props.rolesList;return u.get(s,`${e}.displayName`,this.props.fallbackRole)}getInfoText(e,t){const s=`${e}_${t}`,{entityType:n,roleValidations:o,rolesList:r}=this.props;if(!u.get(o,[s,"valid"],!0)){u.get(o,[s,"data","conflictingRole"]);const t="user"===e;return this.props.isApiLinked?`This ${e} has edit permission on this ${c.MODEL_NAME[n]||n} which they are inheriting from\n          the associated API`:`This ${e} has edit permission on this ${c.MODEL_NAME[n]||n} which they are inheriting from\n          the workspace${t?" or a group.":"."}`}}render(){let e=u.map(this.props.members,this.getMemberDetails),t=u.map(this.props.userGroups,this.getUserGroupDetails),s=(0,o.resolveStoreInstance)(r.default),a=!u.isEmpty(this.props.teamRole)&&u.get(s,"team.name","Team Name"),c={id:u.get(this.props,"teamRole.id"),name:a,canRemove:!1,logoUrl:u.get(s,"team.logo_url"),totalMembers:u.get(s,"team.team_users.length")};if(this.props.currentUserId){let t=u.findIndex(e,{id:this.props.currentUserId});if(t>0){let s=e[t];e.splice(t,1),e.unshift(this.getMemberDetails({id:s.id,canRemove:s.canRemove}))}}return n.createElement("div",{className:"permission-list-v2-container"},n.createElement("div",{className:"permission-list"},!u.isEmpty(this.props.teamRole)&&n.createElement(l.default,{canUpdateRoles:this.props.canUpdateRoles,infoText:this.getInfoText("team",u.get(this.props,"teamRole.id")),selectedRole:this.getSelectedRoleName(u.get(this.props,"teamRole.name")),key:c.id,rolesList:this.props.rolesList,orderedRoleList:this.props.orderedRoleList,disabledRoleTooltipText:this.props.disabledRoleTooltipText,member:c,onChange:this.props.onTeamRoleChange,subTitle:`${c.totalMembers} team ${i.default.pluralize({count:c.totalMembers,singular:"member",plural:"members"})}`,isTeam:!0}),u.map(t,(e=>{let t=this.getSelectedUserGroupRole(e.id);return n.createElement(l.default,{hideRoles:this.props.hideRoles,infoText:this.getInfoText("group",e.id),canModifyMembers:this.props.canModifyMembers,canUpdateRoles:this.props.canUpdateRoles,selectedRole:this.getSelectedRoleName(t),key:e.id,rolesList:this.props.rolesList,orderedRoleList:this.props.orderedRoleList,disabledRoleTooltipText:this.props.disabledRoleTooltipText,member:e,onChange:this.props.onChangeUserGroupRole,onRemoveMember:this.props.onRemoveUserGroup,subTitle:`${e.members.length} group ${i.default.pluralize({count:e.members.length,singular:"member",plural:"members"})}`,isUserGroup:!0})})),u.map(e,(e=>{let t=(0,d.isUserGuest)({id:e.id}),s=this.getSelectedRole(e.id),o=t?this.props.orderedGuestRoleList:this.props.orderedRoleList;return n.createElement(l.default,{hideRoles:this.props.hideRoles,infoText:this.getInfoText("user",e.id),canModifyMembers:this.props.canModifyMembers,canUpdateRoles:this.props.canUpdateRoles,selectedRole:this.getSelectedRoleName(s,t),key:e.id,rolesList:this.props.rolesList,orderedRoleList:o,disabledRoleTooltipText:this.props.disabledRoleTooltipText,member:e,onChange:this.props.onChange,onRemoveMember:this.props.onRemoveMember,subTitle:e.email,isGuest:t,entityType:this.props.entityType,entityId:this.props.entityId})}))))}}},"./js/constants/ShareFlowConstants.js":function(e,t,s){s.r(t),s.d(t,{API_ENTITY_TYPE:function(){return a},API_MANAGE_ROLES_ERROR:function(){return K},API_NOT_SHARED_ERROR:function(){return H},API_NOT_SHARED_INFO_TEXT:function(){return V},API_NO_PERMISSION_ERROR:function(){return ee},COLLECTION_ENTITY_TYPE:function(){return c},COLLECTION_MANAGE_ROLES_ERROR:function(){return W},COLLECTION_NOT_SHARED_ERROR:function(){return $},COLLECTION_NOT_SHARED_INFO_TEXT:function(){return G},COLLECTION_NO_PERMISSION_ERROR:function(){return J},CORRECTION_FLOW_ENTITIES:function(){return Ne},ENTITY_NOT_FOUND:function(){return Te},ENVIRONMENT_ENTITY_TYPE:function(){return d},ENVIRONMENT_MANAGE_ROLES_ERROR:function(){return z},ENVIRONMENT_NOT_SHARED_ERROR:function(){return B},ENVIRONMENT_NOT_SHARED_INFO_TEXT:function(){return F},ENVIRONMENT_NO_PERMISSION_ERROR:function(){return Z},FAULTY_WIRE_MESSAGE:function(){return D},FETCH_FAILED_WORKSPACES:function(){return b},FETCH_PULL_REQUEST_SETTINGS_FAILED_COLLECTION:function(){return R},FETCH_ROLES_FAILED_API:function(){return y},FETCH_ROLES_FAILED_COLLECTION:function(){return v},FETCH_ROLES_FAILED_ENVIRONMENT:function(){return _},FETCH_ROLES_FAILED_MOCK:function(){return S},FETCH_ROLES_FAILED_MONITOR:function(){return T},FLAG_BASED_ACTIVITY_FEED_ENABLED_ENTITIES:function(){return Ce},MOCK_ENTITY_TYPE:function(){return u},MOCK_MANAGE_ROLES_ERROR:function(){return Q},MOCK_MOVE_ONLY_MULTIPLE_WS_INFO_TEXT:function(){return ye},MOCK_NOT_SHARED_ERROR:function(){return Y},MODEL_NAME:function(){return be},MONITOR_ENTITY_TYPE:function(){return l},MONITOR_MANAGE_ROLES_ERROR:function(){return X},MONITOR_NOT_SHARED_ERROR:function(){return q},MOVE_API_LABEL:function(){return fe},MOVE_API_TEXT:function(){return he},MOVE_COLLECTION_LABEL:function(){return ge},MOVE_COLLECTION_TEXT:function(){return me},MOVE_ENVIRONMENT_LABEL:function(){return Ee},MOVE_ENVIRONMENT_TEXT:function(){return pe},MOVE_FAILED_API:function(){return P},MOVE_FAILED_COLLECTION:function(){return w},MOVE_FAILED_ENVIRONMENT:function(){return k},MOVE_FAILED_MOCK:function(){return x},NOT_SHARED:function(){return m},NO_MANAGE_PERMISSION:function(){return g},NO_PERMISSION:function(){return p},NO_ROLES_TO_MANAGE:function(){return se},NO_ROLES_TO_MANAGE_API:function(){return oe},NO_ROLES_TO_MANAGE_COLLECTION:function(){return ne},NO_ROLES_TO_MANAGE_ENVIRONMENT:function(){return re},NO_ROLES_TO_MANAGE_MOCK:function(){return ie},NO_ROLES_TO_MANAGE_MONITOR:function(){return ae},NO_TEAM:function(){return h},NO_TEAM_FOUND_BODY:function(){return ce},NO_TEAM_FOUND_TITLE:function(){return le},ONLY_MOVE_SUPPORTED_ENTITIES:function(){return Oe},PERMISSION_DENIED_ERROR:function(){return te},PUBLIC_SHARE_LABEL:function(){return Se},REQUEST_ACCESS_BUTTON_LABEL:function(){return ue},REQUEST_ACCESS_TITLE:function(){return de},SHARE_API_LABEL:function(){return _e},SHARE_COLLECTION_LABEL:function(){return Re},SHARE_ENVIRONMENT_LABEL:function(){return ve},SHARE_FAILED_API:function(){return j},SHARE_FAILED_COLLECTION:function(){return M},SHARE_FAILED_ENVIRONMENT:function(){return A},SHARE_UNSUPPORTED_ENTITIES:function(){return Ie},SYNC_OFFLINE_MESSAGE_MANAGE:function(){return f},SYNC_OFFLINE_MESSAGE_SHARE:function(){return E},TEAM_ENTITY_TYPE:function(){return i},UPDATE_ROLES_FAILED_API:function(){return N},UPDATE_ROLES_FAILED_COLLECTION:function(){return I},UPDATE_ROLES_FAILED_ENVIRONMENT:function(){return O},UPDATE_ROLES_FAILED_MOCK:function(){return L},UPDATE_ROLES_FAILED_MONITOR:function(){return C},UPDATE_ROLES_FAILED_TITLE:function(){return U},USER_ENTITY_TYPE:function(){return r},WORKSPACE_ENTITY_TYPE:function(){return o}});var n=s("./runtime-repl/extensible-collection/types/ExtensibleCollectionTypes.ts");const o="workspace",r="user",i="team",a="api",l="monitor",c="collection",d="environment",u="mock",m="notShared",p="noPermission",h="noTeam",g="noManagePermission",E="Make sure you’re online if you want to share",f="Make sure you’re online if you want to manage roles",R="Something went wrong while fetching pull request settings for this collection",v="Something went wrong while fetching roles for this collection",_="Something went wrong while fetching roles for this environment",y="Something went wrong while fetching roles for this API",T="Something went wrong while fetching roles for this monitor",S="Something went wrong while fetching roles for this mock server",b="Something went wrong while fetching the workspaces.",I="Something went wrong while updating roles for this collection",O="Something went wrong while updating roles for this environment",N="Something went wrong while updating roles for this API",C="Something went wrong while updating roles for this monitor",L="Something went wrong while updating roles for this mock server",M="Something went wrong while sharing this collection",A="Something went wrong while sharing this environment",j="Something went wrong while sharing this API",w="Something went wrong while sharing this collection and removing from the workspace",k="Something went wrong while sharing this environment and removing from the workspace",P="Something went wrong while sharing this API and removing from the workspace",x="Something went wrong while moving this mock server from the workspace.",U="Couldn’t update role",D="Just a faulty wire. Please try again.",G="This collection is in your personal workspace, which only you can access.",F="This environment is in your personal workspace, which only you can access.",V="This API is in your personal workspace, which only you can access.",$="To let others access it, move the collection to a team, private, or a public workspace.",B="To let others access it, move the environment to a team, private, or a public workspace.",H="To let others access it, move the API to a team, private, or a public workspace.",Y="This mock server is in your personal workspace, which only you can access.",q="This monitor is in your personal workspace, which only you can access.",W="Get editor access to manage roles on this collection.",z="Get editor access to manage roles on this environment.",K="Get editor access to manage roles on this API.",X="Get editor access to manage roles on this monitor.",Q="You don’t have access to edit and manage roles on this mock server.",J="You do not have permission to share this collection",Z="You do not have permission to share this environment",ee="You do not have permission to share this API",te="You don’t have permission to perform this action",se="No roles to manage",ne="Only you have access to this collection",oe="Only you have access to this API",re="Only you have access to this environment",ie="Only you have access to this mock server",ae="Only you have access to this monitor",le="API is not shared yet",ce="Share this API to a team workspace to manage the roles",de="Looks like you don’t have access",ue="Request Access",me="This will also remove all associated monitors from this workspace.",pe="Mocks, monitors and integrations in this workspace using this environment may not work as expected.",he="The mock servers, documentation, environments, test suites and monitors linked to this API won't be affected.",ge="Share and remove collection from current workspace",Ee="Share and remove environment from current workspace",fe="Share and remove API from current workspace",Re="Share collection",ve="Share environment",_e="Share API",ye="Moving this mock server to the selected workspace will remove it from all other workspaces.",Te={collection:"You can't share this collection. This might be because the collection is still being synced or might've been deleted. Please wait some time and try again",[n.EXTENSIBLE_COLLECTION]:"You can't share this collection. This might be because the collection has been deleted. Please wait some time and try again",api:"You can't share this API. This might be because the API is still being synced or might've been deleted. Please wait some time and try again",monitor:"You can't share this monitor. This might be because the monitor is still being synced or might've been deleted. Please wait some time and try again",environment:"You can't share this environment. This might be because the environment is still being synced or might've been deleted. Please wait some time and try again",mock:"You can't move this mock server as it has been deleted."},Se={collection:"Sharing here will make the collection public",api:"Sharing here will make the API public",environment:"Sharing here will make the environment public",mock:"Moving here will make the mock server public."},be={collection:"collection",[n.EXTENSIBLE_COLLECTION]:"collection",environment:"environment",api:"API",monitor:"monitor",workspace:"workspace",mock:"mock server"},Ie=["mock","monitor","EXTENSIBLE_COLLECTION"],Oe=["mock"],Ne=["mock"],Ce=["mock"]},"./js/modules/services/RolesService.js":function(e,t,s){s.r(t),s.d(t,{fetchEntityRoles:function(){return I},getRolesData:function(){return S},getTeamDefaultRole:function(){return N},shouldOverrideRole:function(){return O},updateEntityRoles:function(){return b},validateRoleAssignment:function(){return C}});var n=s("./js/modules/services/SyncRemoteFetcherService.js"),o=s("./js/stores/StoreManager.js"),r=s("./js/stores/CurrentUserStore.js"),i=s("./js/constants/ShareFlowConstants.js"),a=s("./monitors/services/MonitorService.js"),l=s("./mocks/services/UpdateRolesService.js"),c=s("./js/modules/services/SyncRequestService.js"),d=s("./runtime-repl/extensible-collection/api/ExtensibleCollectionAPI.ts"),u=s("./runtime-repl/extensible-collection/types/ExtensibleCollectionTypes.ts"),m=s("./node_modules/lodash/lodash.js");const p="roles",h="collection",g="environment",E={collection:(e,t=!1)=>T(i.COLLECTION_ENTITY_TYPE,e,t),[u.EXTENSIBLE_COLLECTION]:e=>T(u.EXTENSIBLE_COLLECTION,e),environment:e=>T(i.ENVIRONMENT_ENTITY_TYPE,e),api:e=>T(i.API_ENTITY_TYPE,e),monitor:e=>T(i.MONITOR_ENTITY_TYPE,e),mock:e=>T(i.MOCK_ENTITY_TYPE,e),workspace:e=>e?T(i.WORKSPACE_ENTITY_TYPE,e):y(i.WORKSPACE_ENTITY_TYPE)};function f(e,t,s){let{type:n,id:o,name:r}=e;return n&&o&&r?{entityType:n,entityId:o,roles:{[r]:{objects:[{objectType:t,objectId:s}]}}}:(pm.logger.error(`RolesService~_generateRoleObject: Role has information missing - Type: ${n} Id: ${o} Name: ${r}`),null)}function R(e,t,s=!1){if(e){if(t)return n.default.remoteFetch(p,"object",{objectType:e,objectId:t,getGuestConfig:s}).then((e=>({roles:m.get(e,"listing",{})})));pm.logger.error("RolesService~fetchObjectRoles: No object ID provided")}else pm.logger.error("RolesService~fetchObjectRoles: No object type provided")}function v(e,t=!1){if(e)return n.default.remoteFetch(p,"objectType",{objects:[e],getGuestConfig:t}).then((e=>({roles:m.get(e,"objects",{}),rolesOrder:m.get(e,"roleOrder",{}),guestRoles:m.get(e,"wrapperData.guest",{})})));pm.logger.error("RolesService~fetchObjectTypeRoles: No object type provided")}function _(e,t=!1){if(e)return n.default.remoteFetch(p,"default",{objectType:e,getGuestConfig:t}).then((e=>({roles:m.get(e,"data.listing",{})})));pm.logger.error("RolesService~fetchObjectRoles: No object type provided")}async function y(e,t=!1){if(!e)return void pm.logger.error("RolesService~fetchRoles: No object type specified to fetch roles");let s=await Promise.all([_(e,t),v(e,t)]),n=m.get(s,"[0].roles"),i=m.get(s,`[1].roles.${e}`),a=m.get(s,`[1].rolesOrder.${e}`,[]).reverse(),l=m.get(s,`[1].guestRoles.${e}`),c=function(e,t){return m.reduce(t,((t,s,n)=>(t[n]=m.head(m.get(s,`${e}.roles`),[]),t)),{})}(e,n),d=function(e){if(m.isEmpty(e))return{};let t=m.transform(e,((e,t,s)=>{e[s]=m.map(m.get(t,"permissions",{}),"name")}),{});return m.transform(t,((e,s,n)=>{e[n]=m.transform(t,((e,t,o)=>{if(o===n)return e;m.isEmpty(m.difference(t,s))&&e.push(o)}),[])}),{})}(i),u=(0,o.resolveStoreInstance)(r.default),p=m.get(u,"id"),h=m.get(u,"team.id");return{rolesList:i,defaultRoles:c,superRoles:d,userCurrentRoles:{[p]:{type:"user",id:p,name:m.get(c,"user")}},teamCurrentRole:{[h]:{type:"team",id:h,name:m.get(c,"team")}},rolesOrder:a,guestRoles:l}}async function T(e,t,s=!1){if(!e||!t)return void pm.logger.error("RolesService~fetchAssociatedRoles: No object type or id specified to fetch roles");let n=await Promise.all([y(e,s),R(e,t,s)]),o=m.get(n,"0.rolesList",{}),r=m.get(n,"0.rolesOrder",{}),i=m.get(n,"1.roles",{}),a=m.get(n,"0.defaultRoles"),l=m.get(n,"0.superRoles"),c=m.get(n,"0.guestRoles");return{defaultRoles:a,rolesList:o,userCurrentRoles:m.reduce(m.get(i,"user"),((e,t,s)=>(e[s]={type:"user",id:s,name:m.get(t,"roles.0")},e)),{}),teamCurrentRole:m.reduce(m.get(i,"team"),((e,t,s)=>(e[s]={type:"team",id:s,name:m.get(t,"roles.0")},e)),{}),groupCurrentRoles:m.reduce(m.get(i,"group"),((e,t,s)=>(e[s]={type:"group",id:s,name:m.get(t,"roles.0")},e)),{}),superRoles:l,rolesOrder:r,guestRoles:c}}async function S(e,t,s,n,o={}){let r,i={roles:m.chain(e).map((e=>f(e,s,n))).compact().value()};if(m.isEmpty(o)||(r=m.chain(o).map((e=>f(e,s,n))).compact().value(),!m.isEmpty(r)&&(i.roles=m.concat(i.roles,r))),!m.isEmpty(t)){let e=f(t,s,n);!m.isEmpty(e)&&i.roles.push(e)}return i}async function b(e,t,s,o,r){switch(e){case"collection":return async function(e,t,s,o){let r={id:o,data:await S(e,t,h,o,s),model:h};return n.default.remoteFetch(p,"collection",r)}(s,o,r,t);case u.EXTENSIBLE_COLLECTION:return async function(e,t,s,n){let o=await S(e,t,u.EXTENSIBLE_COLLECTION,n,s);return d.default.updateRoles(n,o)}(s,o,r,t);case"api":return async function(e,t,s,o){let r={id:o,data:await S(e,t,"api",o,s),model:"apis"};return n.default.remoteFetch(p,"api",r)}(s,o,r,t);case"monitor":return async function(e,t,s,n){let o=await S(e,t,"monitor",n,s);const r={roles:m.map(o.roles,(e=>({entityType:e.entityType,entityId:e.entityId,role:m.keys(e.roles)[0]})))};await a.default.updateMonitorRoles(n,r).then((e=>Promise.resolve(e))).catch((e=>Promise.reject(m.get(e,"error",{}))))}(s,o,r,t);case"environment":return async function(e,t,s,o){let r={id:o,data:await S(e,t,g,o,s),model:g};return n.default.remoteFetch(p,"environment",r)}(s,o,r,t);case"mock":return async function(e,t,s,n){let o=await S(e,t,"mock",n,s);return(0,l.updateRoles)(n,o)}(s,o,r,t);default:return Promise.reject(new Error(`RolesService~updateEntityRoles: Unsupported entity provided of type ${e}`))}}async function I(e,t,s=!1){if(!E[e])return Promise.reject(new Error(`RolesService~updateEntityRoles: Unsupported entity provided of type ${e}`));let{defaultRoles:n,userCurrentRoles:o,teamCurrentRole:r,rolesList:i,superRoles:a,groupCurrentRoles:l,rolesOrder:c,guestRoles:d}=await E[e](t,s);return{rolesList:i,userCurrentRoles:o,teamCurrentRole:r,superRoles:a,defaultRoles:n,groupCurrentRoles:l,rolesOrder:c,guestRoles:d}}function O(e,t,s){return!(m.isEmpty(e)||!t||!s)&&m.includes(e[t],s)}function N(e){let t=m.get((0,o.resolveStoreInstance)(r.default),"team.id"),s=m.get(e,"team",{});return!t||m.isEmpty(e)||m.isEmpty(s)?{}:{[t]:{id:t,name:m.get(e,"team",""),type:"team"}}}async function C(e){try{const t=await(0,c.request)("/ws/proxy",{method:"POST",data:{service:"acs",method:"POST",path:"/api/validations/role-assignment",body:{validations:e}}});return m.get(t,"body.results")}catch(e){throw e}}},"./js/modules/services/share-entities/ShareEntitiesService.js":function(e,t,s){s.r(t),s.d(t,{canEntityBeShared:function(){return T},canManageRolesOnEntity:function(){return S},createTeamAndShareCollection:function(){return v},createTeamAndShareEnvironment:function(){return _},fetchEntityMeta:function(){return R},isEntityShared:function(){return y}});s("./js/modules/pipelines/user-action.js"),s("./js/modules/model-event.js");var n=s("./js/modules/controllers/UserController.js"),o=s("./js/modules/services/UserInvitationService.js"),r=s("./js/modules/services/SyncRemoteFetcherService.js"),i=s("./js/modules/services/PermissionRemoteFetchService.js"),a=s("./js/modules/services/RemoteSyncRequestService.js"),l=s("./monitors/services/MonitorService.js"),c=s("./mocks/services/FetchMockService.js"),d=s("./js/stores/StoreManager.js"),u=s("./js/stores/ActiveWorkspaceStore.js"),m=s("./js/constants/WorkspaceVisibilityConstants.js"),p=s("./runtime-repl/extensible-collection/api/ExtensibleCollectionAPI.ts"),h=s("./runtime-repl/extensible-collection/types/ExtensibleCollectionTypes.ts"),g=s("./node_modules/lodash/lodash.js");async function E(e){return new Promise(((t,s)=>{(0,o.shareEntitiesToStartTeam)(e,((e,n)=>{e?s(e):t(n)}))}))}async function f(e,t){let s=`/${e}/${t}?meta=true`;return a.default.request(s,{method:"get"}).then((({body:e})=>e.data)).catch((e=>Promise.reject(e)))}async function R(e,t){switch(e){case"environment":case"collection":return f(e,t);case h.EXTENSIBLE_COLLECTION:const s=await p.default.get(t);return{id:s.id,name:s.title};case"api":return f("apis",t);case"monitor":return g.get(await l.default.getMonitorConfiguration({monitorId:t}),"body.data",{});case"mock":return(0,c.fetchMock)(t)}}async function v(e,t){return E({dependencies:{collections:{$diff:!0,$add:[e]}},invitations:t})}async function _(e,t){return E({dependencies:{environments:{$diff:!0,$add:[e]}},invitations:t})}async function y(e,t){if(!e||!t)return Promise.reject(new Error(`ShareEntitiesService~isEntityShared: Unsupported entity of type ${e} provided with ID: ${t}`));switch(e){case"collection":return async function(e){let t=await n.default.get(),s=g.get(t,"organizations[0].id");return!!s&&r.default.remoteFetch("share","collection",{model:"collection",id:e}).then((e=>g.get(e,"data.team")===s))}(t);case h.EXTENSIBLE_COLLECTION:return async function(e){return(0,d.resolveStoreInstance)(u.default).visibilityStatus!==m.VISIBILITY.onlyMe}();case"api":return async function(e){let t=await n.default.get(),s=g.get(t,"organizations[0].id");return!!s&&r.default.remoteFetch("share","api",{model:"apis",id:e}).then((e=>g.get(e,"data.team")===s))}(t);case"monitor":return async function(e){let t=await n.default.get(),s=g.get(t,"organizations[0].id");if(!s)return!1;const o=(0,d.resolveStoreInstance)(u.default),r=await l.default.getMonitorConfiguration({monitorId:e}),i=g.get(r,"body.data",{});return o.visibilityStatus!==m.VISIBILITY.onlyMe&&i.team===Number(s)}(t);case"environment":return async function(e){let t=await n.default.get(),s=g.get(t,"organizations[0].id");return!!s&&r.default.remoteFetch("share","environment",{model:"environment",id:e}).then((e=>g.get(e,"data.team")===s))}(t);case"mock":return async function(e){let t=await n.default.get(),s=g.get(t,"organizations[0].id");return!!s&&a.default.request("/ws/proxy",{method:"post",data:{service:"mock",method:"get",body:{},path:`/mocks/${e}/team`}}).then((({body:e})=>g.get(e,"team")===s)).catch((e=>Promise.reject(e.error||{})))}(t);default:return Promise.reject(new Error(`ShareEntitiesService~isEntityShared: Unsupported entity of type ${e} provided with ID: ${t}`))}}async function T(e,t){if(!e||!t)return Promise.reject(new Error(`ShareEntitiesService~canEntityBeShared: Unsupported entity of type ${e} provided with ID: ${t}`));switch(e){case"collection":return g.get(await(0,i.fetchCollectionShare)(t),`${t}.allowed`,!1);case"api":return g.get(await(0,i.fetchAPIShare)(t),`${t}.allowed`,!1);case"environment":return g.get(await(0,i.fetchEnvironmentShare)(t),`${t}.allowed`,!1);case"mock":return g.get(await(0,i.fetchMockMove)(t),`${t}.allowed`,!1);default:return Promise.reject(new Error(`ShareEntitiesService~canEntityBeShared: Unsupported entity of type ${e} provided with ID: ${t}`))}}async function S(e,t){if(!e||!t)return Promise.reject(new Error(`ShareEntitiesService~canManageRolesOnEntity: Unsupported entity of type ${e} provided with ID: ${t}`));switch(e){case"collection":return g.get(await(0,i.fetchCollectionManageRole)(t),`${t}.allowed`,!1);case h.EXTENSIBLE_COLLECTION:return g.get(await(0,i.fetchExtensibleCollectionManageRole)(t),`${t}.allowed`,!1);case"api":return g.get(await(0,i.fetchAPIManageRole)(t),`${t}.allowed`,!1);case"monitor":return g.get(await(0,i.fetchMonitorManageRole)(t),`${t}.allowed`,!1);case"environment":return g.get(await(0,i.fetchEnvironmentManageRole)(t),`${t}.allowed`,!1);case"mock":return g.get(await(0,i.fetchMockManageRole)(t),`${t}.allowed`,!1);default:return Promise.reject(new Error(`ShareEntitiesService~canManageRolesOnEntity: Unsupported entity of type ${e} provided with ID: ${t}`))}}},"./mocks/services/FetchMockService.js":function(e,t,s){s.r(t),s.d(t,{fetchMock:function(){return o}});var n=s("./js/modules/services/RemoteSyncRequestService.js");function o(e,t={}){let s=`/mocks/${e}?returnObject=true`;return t&&t.populate&&(s+="&populate=true"),n.default.request("/ws/proxy",{method:"post",data:{service:"mock",method:"get",body:{},path:s}}).then((({body:e})=>Promise.resolve(e))).catch((({error:e})=>Promise.reject(e)))}},"./mocks/services/UpdateRolesService.js":function(e,t,s){s.r(t),s.d(t,{updateRoles:function(){return r}});var n=s("./js/modules/services/RemoteSyncRequestService.js"),o=s("./node_modules/lodash/lodash.js");function r(e,t){if(!e)return Promise.reject(new Error("UpdateRolesService~updateRoles: mockId not provided"));if(!t||o.isEmpty(t))return Promise.reject(new Error("UpdateRolesService~updateRoles: roles not provided"));let s=`/mocks/${e}/roles`;return n.default.request("/ws/proxy",{method:"post",data:{method:"put",service:"mock",path:s,body:t}}).then((e=>Promise.resolve(e))).catch((e=>Promise.reject(o.get(e,"error",{}))))}},"./version-control/config.js":function(e,t,s){s.r(t),s.d(t,{prSettingsConfig:function(){return n}});const n={editorApprovalRequired:{enabled:!0},approvalRequired:{enabled:!0},disableOutDatedMerge:{enabled:!1}}},"./version-control/pull-request/components/MergeUsers.js":function(e,t,s){s.r(t),s.d(t,{default:function(){return I}});var n=s("../../node_modules/react/index.js"),o=s("./node_modules/prop-types/index.js"),r=s.n(o),i=s("./node_modules/classnames/index.js"),a=s.n(i),l=s("./node_modules/@postman/sanitise-user-content/index.js"),c=s.n(l),d=s("./node_modules/react-contenteditable/lib/react-contenteditable.js"),u=s.n(d),m=s("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),p=s("./js/components/base/EditableTag.js"),h=s("./js/components/base/Dropdowns.js"),g=s("./js/components/base/Avatar.js"),E=s("./node_modules/lodash/lodash.js");const f="editing",R=27,v=8,_=46,y=40,T=38,S=13,b=32;class I extends n.Component{constructor(e){super(e),this.state={activeInput:{value:"",index:e.tags.length,isLastNode:!0},previousValue:"",containerFocused:!0,selectedTag:null},this.handleActiveInputChange=this.handleActiveInputChange.bind(this),this.handleActiveInputClick=this.handleActiveInputClick.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleContainerClick=this.handleContainerClick.bind(this),this.focusActiveInput=this.focusActiveInput.bind(this),this.handleSuggestionSelect=this.handleSuggestionSelect.bind(this),this.handleDelimiter=this.handleDelimiter.bind(this),this.renderTagContent=this.renderTagContent.bind(this)}componentDidMount(){this.focusActiveInput()}componentDidUpdate(e,t){!this.state.containerFocused||t.activeInput.index===this.state.activeInput.index&&e.tags.length===this.props.tags.length||this.focusActiveInput()}focusActiveInput(){E.invoke(this.refs,"contentEditable.htmlEl.focus")}getTagFromString(e){return{value:e,type:this.props.tagValidator(e)?"regular":"error"}}shouldRenderPlaceHolder(){return 1===this.props.tags.length&&0===this.state.activeInput.index&&!this.state.activeInput.value||!this.state.activeInput.value&&!this.props.tags.length}checkEmailExists(e=this.props.tags,t){for(let s=0;s<e.length;++s)if(e[s].value===t&&e[s].type!==f)return!0;return!1}handleContainerClick(e){e&&(this.state.containerFocused||this.setState({containerFocused:!0}),this.focusActiveInput());let{activeInput:t,previousValue:s}=this.state,{tags:n}=this.props,o={tags:n,activeInput:t,previousValue:s};o=this.saveActiveBadge(o),this.setState({activeInput:o.activeInput,previousValue:o.previousValue}),this.props.onTagsChange(o.tags)}handleRemove(e,t){t.stopPropagation();let s={tags:this.props.tags,activeInput:this.state.activeInput};s=this.removeEmail(s,e),this.setState({activeInput:s.activeInput}),this.props.onTagsChange(s.tags)}handleBackspaceAndDelete(e){if(!this.state.activeInput.value){if(this.state.selectedTag&&this.state.activeInput.index){let t={tags:this.props.tags,activeInput:this.state.activeInput};return t=this.removeEmail(t,e-1),this.setState({activeInput:t.activeInput,selectedTag:null}),void this.props.onTagsChange(t.tags)}this.state.activeInput.index&&this.setState({selectedTag:e})}}handleEscapeKey(e){if(!this.state.previousValue)return;let{previousValue:t}=this.state,{tags:s}=this.props,n=[...s.slice(0,e),this.getTagFromString(t),...s.slice(e+1)],o={value:"",index:n.length,isLastNode:!0};this.setState({activeInput:o,previousValue:""}),this.props.onTagsChange(n)}saveActiveBadge(e){let{tags:t,activeInput:s,previousValue:n}=e;if(!s.value||this.checkEmailExists(t,s.value)){if(!s.isLastNode){let e=[...t.slice(0,s.index),...t.slice(s.index+1)];return n="",{tags:e,activeInput:{value:"",isLastNode:!0,index:e.length},previousValue:n}}return{...e,activeInput:{...s,value:""},previousValue:""}}let o=[...t.slice(0,s.index),this.getTagFromString(s.value),...t.slice(s.index+1)];return{tags:o,activeInput:{...s,value:"",index:o.length,isLastNode:!0},previousValue:""}}editEmail(e,t){let{tags:s,activeInput:n}=e,o=s[t].value,r={...n,value:o,index:t,isLastNode:s.length-1===n.index};return s[t].type=f,{tags:s,activeInput:r,previousValue:o}}removeEmail(e,t){let{activeInput:s,tags:n}=e;return{tags:[...n.slice(0,t),...n.slice(t+1)],activeInput:{...s,index:t<s.index?s.index-1:s.index}}}handleTagClick(e,t){t.stopPropagation(),2!==t.detail||this.handleTagDoubleClick(e)}handleTagDoubleClick(e){let t={tags:this.props.tags,activeInput:this.state.activeInput,previousValue:this.state.previousValue},s=t.tags.length;t=this.saveActiveBadge(t),t.tags.length<s&&this.state.activeInput.index<e&&e--,t=this.editEmail(t,e),this.setState({activeInput:t.activeInput,previousValue:t.previousValue}),this.props.onTagsChange(t.tags)}handleDelimiter(){if(!this.state.activeInput.isLastNode||this.state.activeInput.value){let{activeInput:e,previousValue:t}=this.state,{tags:s}=this.props,n={tags:s,activeInput:e,previousValue:t};n=this.saveActiveBadge(n),this.setState({activeInput:n.activeInput,previousValue:n.previousValue}),this.props.onTagsChange(n.tags)}}handleKeyDown(e){let t=e&&e.keyCode;if(this.userSuggestionsRef)switch(t){case y:E.invoke(this.userSuggestionsRef,"focusNext");break;case T:E.invoke(this.userSuggestionsRef,"focusPrev");break;case S:e.preventDefault(),E.invoke(this.userSuggestionsRef,"selectItem")}else t!==R?t!==v&&t!==_?t!==S&&t!==b||e.preventDefault():this.handleBackspaceAndDelete(this.state.activeInput.index):this.handleEscapeKey(this.state.activeInput.index)}handleActiveInputChange(e){let t=e.target.value,s={...this.state.activeInput,value:t},n=t?E.filter(this.props.suggestions,(e=>{let s=e.email||"",n=e.name||"";return E.includes(E.toLower(s),E.toLower(t))||E.includes(E.toLower(n),E.toLower(t))})):null;this.setState({activeInput:s,suggestions:n,selectedTag:null})}handleActiveInputClick(e){e.stopPropagation()}handleSuggestionSelect(e){this.setState({activeInput:{...this.state.activeInput,value:e,isLastNode:!0}},this.handleDelimiter)}renderSuggestions(e){return!e||E.isEmpty(this.state.suggestions)?null:n.createElement(h.DropdownMenu,{fluid:!0,wrappedRef:e=>this.userSuggestionsRef=e,targetRef:this.refs.mergersInfo,onSelect:this.handleSuggestionSelect},E.map(this.state.suggestions,(e=>n.createElement(h.MenuItem,{className:"merge-user-suggestion",key:e.email,refKey:e.email},n.createElement(g.default,{size:"medium",userId:e.id}),n.createElement("div",{className:"user-suggestion-details"},n.createElement("div",{className:"user-suggestion__name"},e.name),n.createElement("div",{className:"user-suggestion__email"},e.email))))))}renderContentEditable(e,t){return n.createElement(n.Fragment,{key:t},n.createElement(u(),{ref:"contentEditable",className:"active-input",html:c()(e),onChange:this.handleActiveInputChange,onClick:this.handleActiveInputClick,onKeyDown:this.handleKeyDown}),!this.props.disableTeamSuggestions&&this.renderSuggestions(e))}renderTagContent(e,t){return this.props.renderTagContent({value:e,type:t})}render(){return n.createElement("div",{ref:"mergersInfo",onClick:this.handleContainerClick,className:a()(this.props.className,{"invite-component-focused":this.state.containerFocused},"user-invite-container")},this.shouldRenderPlaceHolder()&&n.createElement("div",{className:"user-invite-container__placeholder"},n.createElement(m.default,{name:"icon-action-search-stroke"}),n.createElement("span",{className:"user-invite-container__placeholder-text"},"Add Teammates")),this.props.tags.map(((e,t)=>e.type===f?this.renderContentEditable(this.state.activeInput.value,t):n.createElement(p.default,{content:this.renderTagContent(e.value,e.type),isSelected:t===this.state.selectedTag-1,key:t,name:"tag",value:e.value,type:e.type,onClick:this.handleTagClick.bind(this,t),onClose:this.handleRemove.bind(this,t)}))),this.state.activeInput.isLastNode&&this.renderContentEditable(this.state.activeInput.value))}}I.propTypes={onTagsChange:r().func.isRequired,tags:r().array,tagValidator:r().func,renderTagContent:r().func},I.defaultProps={tags:[],tagValidator:()=>!0,renderTagContent:function(e){return n.createElement("div",null,n.createElement("div",{className:"tag-text"},e.value))}}},"./version-control/pull-request/components/PullRequestSettings.js":function(e,t,s){s.r(t),s.d(t,{ENABLE_MERGER_ROLE:function(){return g},default:function(){return E}});var n,o=s("../../node_modules/react/index.js"),r=s("./node_modules/react-radio-group/lib/index.js"),i=s("../../node_modules/mobx-react/dist/mobx-react.module.js"),a=s("./js/components/base/Inputs.js"),l=s("./version-control/pull-request/components/MergeUsers.js"),c=s("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),d=s("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),u=s("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),m=s("./version-control/config.js"),p=s("./node_modules/lodash/lodash.js");const h="teammates",g=!1;let E=(0,i.observer)(n=class extends o.Component{constructor(e){super(e),this.handleToggleElement=this.handleToggleElement.bind(this)}handleToggleElement(e){this.props.onMergeCheckToggle(e)}render(){let e=this.props.mergeChecks||[];return this.props.upgradePullRequestSettings?null:this.props.pullRequestSettingsError?o.createElement("div",{className:"pull-request-settings__error"},o.createElement(u.default,{name:"icon-state-warning-stroke",size:"sm"}),o.createElement(c.default,{className:"pull-request-settings__error-text"},"Failed to load Pull Request settings. Please try again.")):o.createElement("div",{className:"pull-request-settings"},g&&o.createElement(o.Fragment,null,o.createElement("div",{className:"merge-user-heading"},"Select who can merge a pull request on this collection"),o.createElement(r.RadioGroup,{name:"mergeOptions",selectedValue:this.props.activeMergeMembers,onChange:e=>this.props.onRadioSelect(e)},o.createElement("label",{className:"list-selection-radio"},o.createElement(r.Radio,{value:"collectionEditors",className:"radio-button"}),o.createElement("span",{className:"option-text"},"Only collection editors")),o.createElement("label",{className:"list-selection-radio"},o.createElement(r.Radio,{value:h,className:"radio-button"}),o.createElement("span",{className:"option-text"},"Select Teammates"))),this.props.activeMergeMembers===h&&o.createElement("div",{className:"select-users"},o.createElement("div",{className:"select-users__hint"},"By default all the destination collection editors will be able to merge."),o.createElement(l.default,{disableTeamSuggestions:!1,suggestions:this.props.suggestions,tags:this.props.tags,onTagsChange:this.props.handleTagsChange,renderTagContent:this.props.renderTagContent,className:"mergers-selection"}))),o.createElement("div",{className:"merge-checks"},o.createElement("div",{className:"merge-checks__heading"},o.createElement(d.default,{type:"h6",text:"Set merge checks",color:"content-color-secondary"})),o.createElement("div",{className:"merge-checks__description"},o.createElement(c.default,{color:"content-color-secondary"},"A pull request on this collection can be merged when it's:")),p.map(e,((e,t)=>{if(m.prSettingsConfig[e.id]&&m.prSettingsConfig[e.id].enabled)return o.createElement("div",{key:t,className:"merge-checks__container"},o.createElement(a.Checkbox,{className:"checks-checkbox",checked:e.enabled,onChange:this.handleToggleElement.bind(this,e.id)}),o.createElement(c.default,{color:"content-color-primary",className:"checks-text"},e.description))}))))}})||n},"./node_modules/react-contenteditable/lib/react-contenteditable.js":function(e,t,s){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])},n(e,t)},function(e,t){function s(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,s=1,n=arguments.length;s<n;s++)for(var o in t=arguments[s])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},i=this&&this.__rest||function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&(s[n[o]]=e[n[o]])}return s},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)Object.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t.default=e,t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=a(s("../../node_modules/react/index.js")),d=l(s("./node_modules/react-contenteditable/node_modules/fast-deep-equal/index.js")),u=a(s("./node_modules/prop-types/index.js"));function m(e){return e&&e.replace(/&nbsp;|\u202F|\u00A0/g," ")}function p(e){if(e.nodeType===Node.TEXT_NODE)return e;for(var t=e.childNodes,s=t.length-1;s>=0;s--){var n=p(t[s]);if(null!==n)return n}return null}function h(e){var t=p(e);if(null!==t&&null!==t.nodeValue){var s=document.createRange(),n=window.getSelection();s.setStart(t,t.nodeValue.length),s.collapse(!0),n.removeAllRanges(),n.addRange(s),e instanceof HTMLElement&&e.focus()}}var g=function(e){function t(t){var s=e.call(this,t)||this;return s.htmlEl=null,s.emitChange=s.emitChange.bind(s),s.lastHtml=t.html,s}return o(t,e),t.prototype.render=function(){var e=this,t=this.props,s=t.tagName,n=t.html,o=i(t,["tagName","html"]);return c.createElement(s||"div",r({},o,{ref:function(t){return e.htmlEl=t},onInput:this.emitChange,onBlur:this.props.onBlur||this.emitChange,contentEditable:!this.props.disabled,dangerouslySetInnerHTML:{__html:n}}),this.props.children)},t.prototype.shouldComponentUpdate=function(e){var t=this.props,s=this.htmlEl;return!s||(m(e.html)!==m(s.innerHTML)||(t.disabled!==e.disabled||t.tagName!==e.tagName||t.className!==e.className||!d.default(t.style,e.style)))},t.prototype.componentDidUpdate=function(){null!==this.htmlEl&&(this.props.html!==this.htmlEl.innerHTML&&(this.htmlEl.innerHTML=this.lastHtml=this.props.html),h(this.htmlEl))},t.prototype.emitChange=function(e){if(this.htmlEl){var t=this.htmlEl.innerHTML;if(this.props.onChange&&t!==this.lastHtml){var s=Object.assign({},e,{target:{value:t}});this.props.onChange(s)}this.lastHtml=t}},t.propTypes={html:u.string.isRequired,onChange:u.func,onBlur:u.func,disabled:u.bool,tagName:u.string,className:u.string,style:u.object},t}(c.Component);t.default=g},"./node_modules/react-contenteditable/node_modules/fast-deep-equal/index.js":function(e){var t=Array.isArray,s=Object.keys,n=Object.prototype.hasOwnProperty;e.exports=function e(o,r){if(o===r)return!0;if(o&&r&&"object"==typeof o&&"object"==typeof r){var i,a,l,c=t(o),d=t(r);if(c&&d){if((a=o.length)!=r.length)return!1;for(i=a;0!=i--;)if(!e(o[i],r[i]))return!1;return!0}if(c!=d)return!1;var u=o instanceof Date,m=r instanceof Date;if(u!=m)return!1;if(u&&m)return o.getTime()==r.getTime();var p=o instanceof RegExp,h=r instanceof RegExp;if(p!=h)return!1;if(p&&h)return o.toString()==r.toString();var g=s(o);if((a=g.length)!==s(r).length)return!1;for(i=a;0!=i--;)if(!n.call(r,g[i]))return!1;for(i=a;0!=i--;)if(!e(o[l=g[i]],r[l]))return!1;return!0}return o!=o&&r!=r}},"./node_modules/react-radio-group/lib/index.js":function(e,t,s){Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},o=function(){function e(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,s,n){return s&&e(t.prototype,s),n&&e(t,n),t}}(),r=function(e,t,s){for(var n=!0;n;){var o=e,r=t,i=s;n=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,r);if(void 0!==a){if("value"in a)return a.value;var l=a.get;if(void 0===l)return;return l.call(i)}var c=Object.getPrototypeOf(o);if(null===c)return;e=c,t=r,s=i,n=!0,a=c=void 0}};function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=i(s("./node_modules/prop-types/index.js")),d=i(s("../../node_modules/react/index.js")),u=function(e){function t(){a(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return l(t,e),o(t,[{key:"render",value:function(){var e=this.context.radioGroup,t=e.name,s=e.selectedValue,o=e.onChange,r={};return void 0!==s&&(r.checked=this.props.value===s),"function"==typeof o&&(r.onChange=o.bind(null,this.props.value)),d.default.createElement("input",n({},this.props,{type:"radio",name:t},r))}}]),t}(d.default.Component);t.Radio=u,u.contextTypes={radioGroup:c.default.object};var m=function(e){function t(){a(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return l(t,e),o(t,[{key:"getChildContext",value:function(){var e=this.props;return{radioGroup:{name:e.name,selectedValue:e.selectedValue,onChange:e.onChange}}}},{key:"render",value:function(){var e=this.props,t=e.Component,s=(e.name,e.selectedValue,e.onChange,e.children),n=function(e,t){var s={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(s[n]=e[n]);return s}(e,["Component","name","selectedValue","onChange","children"]);return d.default.createElement(t,n,s)}}]),t}(d.default.Component);t.RadioGroup=m,m.defaultProps={Component:"div"},m.propTypes={name:c.default.string,selectedValue:c.default.oneOfType([c.default.string,c.default.number,c.default.bool]),onChange:c.default.func,children:c.default.node.isRequired,Component:c.default.oneOfType([c.default.string,c.default.func,c.default.object])},m.childContextTypes={radioGroup:c.default.object}},"./collaboration/workspace/service/ShareElementService.ts":function(e,t,s){s.r(t);var n=s("./js/utils/PostmanGatewayService.js"),o=function(e,t,s,n){return new(s||(s=Promise))((function(o,r){function i(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(i,a)}l((n=n.apply(e,t||[])).next())}))};t.default=new class{shareElementWithTeamUser(e){var t;return o(this,void 0,void 0,(function*(){try{let s=yield n.default.request("/ws/proxy",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({service:"collaboration",method:"post",body:e,path:"/invite-requests"})},{parsedResponse:!0});return null===(t=null==s?void 0:s.body)||void 0===t?void 0:t.data}catch(e){throw pm.logger.error("ShareElementService~shareElementWithTeamUser",e),e}}))}fetchInvites(e,t){return o(this,void 0,void 0,(function*(){try{let s=yield n.default.request("/ws/proxy",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({service:"collaboration",method:"get",path:`/invite-requests?model=${e}&modelId=${t}`})});return null==s?void 0:s.data}catch(e){throw pm.logger.error("ShareElementService~fetchInvites",e),e}}))}fetchShareableInviteLinkStatus(e,t){return o(this,void 0,void 0,(function*(){try{let s=yield n.default.request("/ws/proxy",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({service:"ums",method:"get",path:`/api/share/link/${e}/${t}`})},{parsedResponse:!0});return null==s?void 0:s.body}catch(e){throw pm.logger.error("ShareElementService~fetchShareableInviteLinkStatus",e),e}}))}toggleShareableInviteLink(e,t,s,r){return o(this,void 0,void 0,(function*(){try{return yield n.default.request("/ws/proxy",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({service:"ums",method:"post",body:r,path:`/api/share/link/${e}/${t}/${s}`})})}catch(e){throw pm.logger.error("ShareElementService~toggleShareableInviteLink",e),e}}))}}}}]);