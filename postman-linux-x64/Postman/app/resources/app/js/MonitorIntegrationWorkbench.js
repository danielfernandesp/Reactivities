"use strict";(self.webpackChunk_postman_app_renderer=self.webpackChunk_postman_app_renderer||[]).push([[44],{"../../node_modules/@postman/aether/esmLib/src/components/CheckBoxGroup/CheckboxGroup.js":function(e,t,n){n.r(t);var s=n("../../node_modules/react/index.js"),o=n("../../node_modules/prop-types/index.js"),i=n.n(o),r=n("../../node_modules/@postman/aether-design-tokens/esmLib/src/tokens.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/CheckBox/Checkbox.js");function p(e){var t=e.isHidden,n=e.direction,o=e.children,i=e.padding,r=e.label,p=e.helperText,u=e["data-testid"],g=e["data-click"],m=s.Children.map(o,(function(e){return(0,s.isValidElement)(e)&&e.type===c.default?e:null}));return s.createElement("div",{"data-testid":u,"data-click":g},r?s.createElement(l.default,{type:"h6",text:r}):"",p?s.createElement(a.default,{padding:"spacing-xs spacing-zero"},s.createElement(d.default,{type:"para"},p)):"",s.createElement(a.default,{hiddenFor:t?["mobile","tablet","computer"]:[],direction:n,padding:i,gap:"column"===n?"spacing-m":"spacing-l"},m))}t.default=p,p.defaultProps={label:"",isHidden:!1,direction:"column",padding:"spacing-s spacing-zero spacing-zero",helperText:"","data-testid":"aether-checkbox-group","data-click":""},p.propTypes={isHidden:i().bool,direction:i().oneOf(["row","column"]),children:i().oneOfType([i().arrayOf(i().node),i().node]).isRequired,padding:i().oneOfType([i().oneOf(Object.keys(r.globals.spacing)),i().shape({paddingTop:i().string,paddingBottom:i().string,paddingLeft:i().string,paddingRight:i().string}),i().string]),label:i().string,helperText:i().string,"data-testid":i().string,"data-click":i().string}},"../../node_modules/@postman/aether/esmLib/src/components/Dropdown/MultiSelect/CustomMultiSelectComponents.js":function(e,t,n){n.r(t),n.d(t,{DefaultMultiSelectMenuList:function(){return v},MultiSelectChip:function(){return h},MultiSelectChipCloseIcon:function(){return g},MultiSelectChipLabel:function(){return b},MultiSelectOption:function(){return p}});var s=n("../../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),o=n("../../node_modules/react/index.js"),i=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),r=n("../../node_modules/@postman/aether/node_modules/react-select/dist/index-c7a4d7ce.esm.js"),a=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-close-stroke-small.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),d=["isDisabled","isFocused","children"],c=i.default.div.withConfig({displayName:"CustomMultiSelectComponents__StyledMultiSelectOption",componentId:"sc-1e7h8n3-0"})(["display:flex;align-items:center;cursor:pointer;font-size:",";line-height:",";padding:",";border-radius:",";color:",";"," ",""],(function(e){return e.theme["text-size-m"]}),(function(e){return e.theme["line-height-m"]}),(function(e){return"".concat(e.theme["spacing-xs"]," ").concat(e.theme["spacing-m"],";")}),(function(e){return e.theme["border-radius-default"]}),(function(e){return e.theme["content-color-primary"]}),(function(e){return e.isFocused&&!e.isDisabled&&"background-color: ".concat(e.theme["highlight-background-color-primary"],";")}),(function(e){return e.isDisabled&&"\n      cursor: not-allowed;\n      color: ".concat(e.theme["content-color-tertiary"],";\n    ")}));function p(e){var t=e.isDisabled,n=e.isFocused,i=e.children,a=(0,s.default)(e,d);return o.createElement(r.c.Option,a,o.createElement(c,{isDisabled:t,isFocused:n},i))}var u=i.default.div.withConfig({displayName:"CustomMultiSelectComponents__StyledMultiSelectChipCloseIcon",componentId:"sc-1e7h8n3-1"})(["display:inline-flex;justify-content:center;align-items:center;cursor:pointer;height:",";width:",";margin-left:",";border-top-right-radius:",";border-bottom-right-radius:",";background-color:",";svg path{fill:",";}&:hover{background-color:",";svg path{fill:",";}}"],(function(e){return e.theme["size-s"]}),(function(e){return e.theme["size-s"]}),(function(e){return e.theme["spacing-xs"]}),(function(e){return e.theme["border-radius-default"]}),(function(e){return e.theme["border-radius-default"]}),(function(e){return e.theme["highlight-background-color-tertiary"]}),(function(e){return e.theme["content-color-secondary"]}),(function(e){return e.theme["highlight-background-color-tertiary"]}),(function(e){return e.theme["content-color-primary"]}));function g(e){return o.createElement(r.c.MultiValueRemove,e,o.createElement(u,{className:"aether-multiselect-dropdown__multi-value-chip--remove-icon"},o.createElement(a.default,null)))}var m=i.default.div.withConfig({displayName:"CustomMultiSelectComponents__StyledMultiSelectChip",componentId:"sc-1e7h8n3-2"})(["box-sizing:border-box;display:inline-flex;justify-content:center;align-items:center;height:",";padding:",";margin-bottom:",";margin-right:",";color:",";background-color:",";border-radius:",";"],(function(e){return e.theme["size-s"]}),(function(e){return"2px ".concat(e.theme["spacing-zero"]," 2px ").concat(e.theme["spacing-s"])}),(function(e){return e.theme["spacing-xs"]}),(function(e){return e.theme["spacing-xs"]}),(function(e){return e.theme["content-color-primary"]}),(function(e){return e.theme["highlight-background-color-tertiary"]}),(function(e){return e.theme["border-radius-default"]}));function h(e){var t=e.children;return o.createElement(m,{className:"aether-multiselect-dropdown__multi-select-chip"},t)}function b(e){var t=e.children;return o.createElement(l.default,{type:"body-medium"},t)}var f=(0,i.default)(r.c.MenuList).withConfig({displayName:"CustomMultiSelectComponents__StyledMenuList",componentId:"sc-1e7h8n3-3"})(["padding:8px;& .aether-multiselect-dropdown__group:not(:last-child){margin-bottom:12px;}& .aether-multiselect-dropdown__group:first-child{padding-top:4px;}"]);function v(e){var t=e.children;return o.createElement(f,e,t)}},"../../node_modules/@postman/aether/esmLib/src/components/Dropdown/MultiSelect/CustomMultiSelectStyles.js":function(e,t,n){n.r(t),n.d(t,{customBaseStyles:function(){return a},postmanSpecificStyles:function(){return r}});var s=n("../../node_modules/@babel/runtime/helpers/esm/defineProperty.js");function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,s.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var r=(0,n("../../node_modules/styled-components/dist/styled-components.browser.esm.js").css)(["& .aether-multiselect-dropdown__single-value{color:",";left:",";right:",";}& .aether-multiselect-dropdown__control{box-sizing:border-box;height:auto;min-height:32px;max-height:72px;overflow-x:hidden;overflow-y:auto;border:",";transition:border-color 0.2s ease-in-out,box-shadow 0.2s ease-in-out;background-color:",";& .aether-multiselect-dropdown__multi-value-chip--remove-icon{display:none;}& .aether-multiselect-dropdown__multi-select-chip{padding-right:",";}& .aether-multiselect-dropdown__value-container,& .aether-multiselect-dropdown__single-value{color:",";}&:hover{border-color:",";}&--is-focused{outline:none;border:",";box-shadow:",";&:hover{border:",";}& .aether-multiselect-dropdown__single-value{right:",";}& .aether-multiselect-dropdown__multi-select-chip{padding-right:",";}& .aether-multiselect-dropdown__multi-value-chip--remove-icon{display:inline-flex;}}&--is-disabled{user-select:none;cursor:not-allowed;background:",";border:",";color:",";& .aether-multiselect-dropdown__dropdown-indicator svg path{fill:",";}& .aether-multiselect-dropdown__multi-select-chip{color:",";}&:hover{border-color:",";}}","}& .aether-multiselect-dropdown__input{color:"," !important;caret-color:",";height:16px;}& .aether-multiselect-dropdown__placeholder{color:",";}& .aether-multiselect-dropdown__dropdown-indicator{svg path{fill:",";}padding:",";}& .aether-multiselect-dropdown__clear-indicator{padding:",";}"],(function(e){return e.theme["content-color-primary"]}),(function(e){return e.theme["spacing-m"]}),(function(e){return e.theme["spacing-xl"]}),(function(e){return"".concat(e.theme["border-width-default"]," ").concat(e.theme["border-style-solid"]," ").concat(e.theme["input-border-color-default"],";")}),(function(e){return e.theme["background-color-primary"]}),(function(e){return e.theme["spacing-s"]}),(function(e){return e.theme["content-color-primary"]}),(function(e){return e.theme["input-border-color-default"]}),(function(e){return"".concat(e.theme["border-width-default"]," ").concat(e.theme["border-style-solid"]," ").concat(e.theme["input-border-color-focus"],";")}),(function(e){return"0 0 0 2px ".concat(e.theme["input-shadow-focus"],";")}),(function(e){return"".concat(e.theme["border-width-default"]," ").concat(e.theme["border-style-solid"]," ").concat(e.theme["input-border-color-focus"],";")}),(function(e){return e.theme["spacing-xxxl"]}),(function(e){return e.theme["spacing-zero"]}),(function(e){return e.theme["input-background-color-disabled"]}),(function(e){return"".concat(e.theme["border-width-default"]," ").concat(e.theme["border-style-solid"]," ").concat(e.theme["border-color-strong"],";")}),(function(e){return e.theme["content-color-tertiary"]}),(function(e){return e.theme["content-color-tertiary"]}),(function(e){return e.theme["content-color-tertiary"]}),(function(e){return e.theme["border-color-strong"]}),(function(e){var t=e.validationState;return t.status?"\n          border-color: ".concat(e.theme["input-border-color-".concat(t.status)],";\n\n          &:hover {\n            border-color: ").concat(e.theme["input-border-color-".concat(t.status)],";\n          }\n\n          &--is-focused,\n          &--is-focused:hover {\n            border-color: ").concat(e.theme["input-border-color-focus"],";;\n          }\n        "):""}),(function(e){return e.theme["content-color-primary"]}),(function(e){return e.theme["content-color-primary"]}),(function(e){return e.theme["content-color-tertiary"]}),(function(e){return e.theme["content-color-secondary"]}),(function(e){return"".concat(e.theme["spacing-zero"]," ").concat(e.theme["spacing-s"],";")}),(function(e){return e.theme["spacing-zero"]})),a={container:function(e){return i(i({},e),{},{pointerEvents:"auto"})},multiValueRemove:function(){return{padding:0,":hover":{backgroundColor:"transparent"}}}}},"../../node_modules/@postman/aether/esmLib/src/components/Dropdown/MultiSelect/DefaultMultiSelect.js":function(e,t,n){n.r(t),n.d(t,{StyledCreatableReactSelect:function(){return f},StyledReactSelect:function(){return b},default:function(){return v}});var s=n("../../node_modules/@babel/runtime/helpers/esm/extends.js"),o=n("../../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=n("../../node_modules/react/index.js"),r=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),a=n("../../node_modules/@postman/aether/node_modules/react-select/dist/react-select.esm.js"),l=n("../../node_modules/@postman/aether/node_modules/react-select/creatable/dist/react-select.esm.js"),d=n("../../node_modules/prop-types/index.js"),c=n.n(d),p=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/Common/CustomComponents.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/MultiSelect/CustomMultiSelectComponents.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/MultiSelect/CustomMultiSelectStyles.js");function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=(0,r.default)(a.default).withConfig({displayName:"DefaultMultiSelect__StyledReactSelect",componentId:"sc-14ka43a-0"})(["",""],g.postmanSpecificStyles),f=(0,r.default)(l.default).withConfig({displayName:"DefaultMultiSelect__StyledCreatableReactSelect",componentId:"sc-14ka43a-1"})(["",""],g.postmanSpecificStyles);function v(e){var t=e["aria-label"],n=e["aria-labelledby"],o=e.id,r=e.isOpen,a=e.onChange,l=e.onCreateNewOption,d=e.onClose,c=e.onOpen,g=e.options,m=e.value,v=e.placeholder,S=e.emptyStateMessage,I=e.isDisabled,y=e.isLoading,E=e.isOptionDisabled,A=e.viaPortal,_=e.closeMenuOnSelect,w=e.validationState,j=e.allowCreateNewOption,C=e.customOptionComponent,P=e.menuMaxHeight,D=e.triggerWidth,T=e.containerWidth,M=e.className;function x(e,t){var n=t.action,s=t.option;"create-option"===n&&l&&l(s),a(e,{action:n,option:s})}return i.createElement(i.Fragment,null,j?i.createElement(f,(0,s.default)({isMulti:!0,inputId:o,menuIsOpen:r},A&&{menuPortalTarget:document.getElementById("aether-dropdown-portal")},{onChange:x,onMenuClose:d,onMenuOpen:c},m&&{value:m},{options:g,placeholder:v,isDisabled:I,closeMenuOnSelect:_,"aria-label":t,"aria-labelledby":n},E&&{isOptionDisabled:E},{emptyStateMessage:S,formatOptionLabel:!y&&C,validationState:w,classNamePrefix:"aether-multiselect-dropdown",className:M,maxMenuHeight:P,styles:{container:function(e){return h(h({},e),{},{pointerEvents:"auto"})},control:function(e){return h(h({},e),{},{width:D})},input:function(e){return h(h({},e),{},{margin:0,padding:0,height:"20px",lineHeight:"normal"})},multiValueRemove:function(){return{padding:0,":hover":{backgroundColor:"transparent"}}},group:function(e){return h(h({},e),{},{padding:0,margin:0})},groupHeading:function(e){return h(h({},e),{},{userSelect:"none",fontSize:"11px",fontWeight:600,lineHeight:"16px",marginBottom:"4px",padding:"0px 12px",textTransform:"none"})},menu:function(e){return h(h({},e),{},{width:T,paddingLeft:"0",paddingRight:"0",border:"none",zIndex:1e3})},menuList:function(e){return h(h({},e),{},{paddingTop:"8px",paddingBottom:"8px"})},menuPortal:function(e){return h(h({},e),{},{zIndex:1e3})},noOptionsMessage:function(e){return h(h({},e),{},{padding:"0"})},option:function(e){return h(h({},e),{},{padding:"0",":active":{backgroundColor:"transparent"}})},placeholder:function(e){return h(h({},e),{},{position:"absolute",top:"50%",transform:"translateY(-50%)",fontSize:"12px",lineHeight:"20px",left:"6px",right:"16px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"})},valueContainer:function(e){return h(h({},e),{},{display:"flex",position:"static",height:"100%",paddingInline:"4px",padding:"4px 4px 0px 4px",fontSize:"12px"})}},components:{DropdownIndicator:null,ClearIndicator:null,NoOptionsMessage:p.EmptyState,Option:u.MultiSelectOption,Menu:p.Menu,MenuList:y?p.StaticLoader:u.DefaultMultiSelectMenuList,MultiValueContainer:u.MultiSelectChip,MultiValueLabel:u.MultiSelectChipLabel,MultiValueRemove:u.MultiSelectChipCloseIcon,IndicatorSeparator:null,GroupHeading:p.GroupHeading}})):i.createElement(b,(0,s.default)({isMulti:!0,inputId:o,menuIsOpen:r},A&&{menuPortalTarget:document.getElementById("aether-dropdown-portal")},{onChange:x,onMenuClose:d,onMenuOpen:c},m&&{value:m},{options:g,placeholder:v,isDisabled:I,closeMenuOnSelect:_,"aria-label":t,"aria-labelledby":n},E&&{isOptionDisabled:E},{emptyStateMessage:S,formatOptionLabel:!y&&C,validationState:w,classNamePrefix:"aether-multiselect-dropdown",className:M,maxMenuHeight:P,styles:{container:function(e){return h(h({},e),{},{pointerEvents:"auto"})},control:function(e){return h(h({},e),{},{width:D})},input:function(e){return h(h({},e),{},{margin:0,padding:0,height:"20px",lineHeight:"normal"})},multiValueRemove:function(){return{padding:0,":hover":{backgroundColor:"transparent"}}},group:function(e){return h(h({},e),{},{padding:0,margin:0})},groupHeading:function(e){return h(h({},e),{},{userSelect:"none",fontSize:"11px",fontWeight:600,lineHeight:"16px",marginBottom:"4px",padding:"0px 12px",textTransform:"none"})},menu:function(e){return h(h({},e),{},{width:T,paddingLeft:"0",paddingRight:"0",border:"none",zIndex:1e3})},menuList:function(e){return h(h({},e),{},{paddingTop:"8px",paddingBottom:"8px"})},menuPortal:function(e){return h(h({},e),{},{zIndex:1e3})},noOptionsMessage:function(e){return h(h({},e),{},{padding:"0"})},option:function(e){return h(h({},e),{},{padding:"0",":active":{backgroundColor:"transparent"}})},placeholder:function(e){return h(h({},e),{},{position:"absolute",top:"50%",transform:"translateY(-50%)",fontSize:"12px",lineHeight:"20px",left:"6px",right:"16px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"})},valueContainer:function(e){return h(h({},e),{},{display:"flex",position:"static",height:"100%",paddingInline:"4px",padding:"4px 4px 0px 4px",fontSize:"12px"})}},components:{DropdownIndicator:null,ClearIndicator:null,NoOptionsMessage:p.EmptyState,Option:u.MultiSelectOption,Menu:p.Menu,MenuList:y?p.StaticLoader:u.DefaultMultiSelectMenuList,MultiValueContainer:u.MultiSelectChip,MultiValueLabel:u.MultiSelectChipLabel,MultiValueRemove:u.MultiSelectChipCloseIcon,IndicatorSeparator:null,GroupHeading:p.GroupHeading}})))}v.defaultProps={isOpen:void 0,onClose:null,onCreateNewOption:null,onOpen:null,value:null,"aria-label":void 0,"aria-labelledby":void 0,placeholder:"Select option",emptyStateMessage:"No options found",menuMaxHeight:"auto",triggerWidth:"auto",containerWidth:"auto",className:"",isDisabled:!1,isLoading:!1,viaPortal:!1,isOptionDisabled:function(){},closeMenuOnSelect:!1,allowCreateNewOption:!1,customOptionComponent:null,validationState:{status:"",message:""}},v.propTypes={onChange:c().func.isRequired,options:c().arrayOf(c().shape({label:c().string,value:c().oneOfType([c().string,c().number])})).isRequired,id:c().string.isRequired,"aria-label":c().string,"aria-labelledby":c().string,value:c().array,isOpen:c().bool,onClose:c().func,onCreateNewOption:function(e){var t=e.allowCreateNewOption,n=e.onCreateNewOption;return!t&&n?new Error("MultiSelect: onCreateNewOption is only allowed to be used when the prop allowCreateNewOption is passed as true."):n&&"function"!=typeof n?new Error("MultiSelect: Expected the type of the onCreateNewOption to be a function."):null},onOpen:c().func,placeholder:c().string,emptyStateMessage:c().string,menuMaxHeight:c().oneOfType([c().number,c().string]),triggerWidth:c().oneOfType([c().number,c().string]),containerWidth:c().oneOfType([c().string,c().number]),className:c().string,isDisabled:c().bool,isLoading:c().bool,viaPortal:c().bool,isOptionDisabled:c().func,closeMenuOnSelect:c().bool,allowCreateNewOption:c().bool,customOptionComponent:c().func,validationState:c().shape({status:c().oneOf(["","success","error","warning"]),message:c().string})}},"../../node_modules/@postman/aether/esmLib/src/components/Dropdown/MultiSelect/MultiSelect.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return m}});var s=n("../../node_modules/@babel/runtime/helpers/esm/extends.js"),o=n("../../node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),i=n("../../node_modules/react/index.js"),r=n("../../node_modules/prop-types/index.js"),a=n.n(r),l=n("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/Common/DropdownContainer.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/Common/DropdownLabel.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/Common/DropdownValidationMessage.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/MultiSelect/DefaultMultiSelect.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/FilterSelect/FilterSelectContainer.js");function m(e){var t=(0,i.useRef)(null),n=(0,i.useState)(""),r=(0,o.default)(n,2),a=r[0],l=r[1],m=e.type,h=e.label,b=e.helperText,f=e.id,v=e.validationState,S=e["data-testid"],I=e["data-click"];return(0,i.useEffect)((function(){t.current&&(t.current.offsetWidth?l(t.current.offsetWidth):l("auto"))}),[]),"compact"===m?i.createElement(g.default,e):i.createElement(d.default,{ref:t,"data-aether-id":"aether-multiSelect","data-testid":S,"data-click":I},i.createElement(c.default,{id:f,label:h,helperText:b}),i.createElement(u.default,(0,s.default)({containerWidth:a},e)),i.createElement(p.default,{validationState:v}))}m.defaultProps={type:"default",id:"",label:"",helperText:"",validationState:{status:"",message:""},"data-testid":"aether-multi-select","data-click":""},m.propTypes={type:a().oneOf(["default","compact"]),id:a().string,label:function(e){var t=e.label;return t&&t.type!==l.default&&"string"!=typeof t?new Error("MultiSelect: label prop only accepts string or the Aether's Label component as valid value."):null},helperText:a().string,validationState:a().shape({status:a().oneOf(["","success","error","warning"]),message:a().string}),"data-testid":a().string,"data-click":a().string}},"../../node_modules/@postman/aether/esmLib/src/components/Stepper/Step.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return m}});var s=n("../../node_modules/react/index.js"),o=n("../../node_modules/prop-types/index.js"),i=n.n(o),r=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),a=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),p=r.default.span.withConfig({displayName:"Step__StyledStatusIndicator",componentId:"hb80lw-0"})(["width:12px;height:12px;box-sizing:border-box;border-radius:",";border:",";background-color:",";"],(function(e){return e.theme["border-radius-max"]}),(function(e){return"progress"!==e.status?"".concat(e.theme["border-width-default"]," ").concat(e.theme["border-style-solid"]," ").concat(e.theme["grey-40"]):""}),(function(e){return"progress"===e.status?e.theme["base-color-brand"]:e.theme["background-color-primary"]})),u=r.default.div.withConfig({displayName:"Step__StyledStepWrapper",componentId:"hb80lw-1"})(["display:inline;padding-left:",";& > .aether-step__label{& > .aether-button__text{color:",";&:hover{color:",";}}}"],(function(e){return e.theme["spacing-xs"]}),(function(e){return e.isDisabled?e.theme["content-color-secondary"]:e.theme["content-color-primary"]}),(function(e){return e.isDisabled?e.theme["content-color-secondary"]:e.theme["content-color-link"]})),g=(0,r.default)(c.default).withConfig({displayName:"Step__StyledCustomCurrentStepText",componentId:"hb80lw-2"})(["line-height:1.334;"]);function m(e){var t=e.label,n=e.status,o=e.isDisabled,i=e._stepIndex,r=e._onChange,c=e._isActive,m=e.className;return s.createElement(l.default,{basis:"0px",grow:1,shrink:1,alignItems:"center",className:m,padding:{paddingRight:"spacing-l"}},"completed"===n?s.createElement(a.default,{name:"icon-state-success-stroke-small",color:"content-color-primary",size:"small"}):s.createElement(p,{status:n}),s.createElement(u,{isDisabled:o},c?s.createElement(g,{color:"content-color-primary"},t):s.createElement(d.default,{className:"aether-step__label",isDisabled:o,text:t,type:"plain",onClick:function(){!o&&r&&r(i)}})))}m.defaultProps={className:"",status:"pending",isDisabled:!1,_isActive:!1,_stepIndex:0,_onChange:null},m.propTypes={label:i().string.isRequired,isDisabled:i().bool,_isActive:i().bool,status:i().oneOf(["pending","progress","completed"]),_stepIndex:i().number,_onChange:i().func,className:i().string}},"../../node_modules/@postman/aether/esmLib/src/components/Stepper/StepHeader.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return c}});var s=n("../../node_modules/react/index.js"),o=n("../../node_modules/prop-types/index.js"),i=n.n(o),r=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Stepper/Step.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),d=r.default.div.withConfig({displayName:"StepHeader__StyledProgressLine",componentId:"sc-1xnw5na-0"})(["position:relative;width:100%;height:2px;background-color:",";&:after{content:'';position:absolute;top:0;bottom:0;left:0;right:0;height:2px;width:",";max-width:100%;background-color:",";}"],(function(e){return e.theme["border-color-strong"]}),(function(e){return"".concat((e.activeStepIndex+1)/e.totalSteps*100,"%")}),(function(e){return e.theme["stepper-progress-line-background-color"]}));function c(e){var t=0,n=e._activeStepIndex,o=e._onChange,i=e.className,r=e.children,c=s.Children.map(r,(function(e){var i=e;return(0,s.isValidElement)(e)&&[a.default].includes(e.type)?(i=(0,s.cloneElement)(e,{_isActive:t===n,_stepIndex:t,_onChange:o}),t+=1,i):null}));return s.createElement(l.default,{gap:"spacing-s",className:i,direction:"column"},s.createElement(d,{activeStepIndex:n,totalSteps:c.length}),s.createElement(l.default,null,c))}c.defaultProps={className:"",_activeStepIndex:0,_onChange:null},c.propTypes={_activeStepIndex:i().number,_onChange:i().func,className:i().string,children:i().oneOfType([i().arrayOf(i().node),i().node]).isRequired}},"../../node_modules/@postman/aether/esmLib/src/components/Stepper/StepPanel.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return u}});var s=n("../../node_modules/react/index.js"),o=n("../../node_modules/prop-types/index.js"),i=n.n(o),r=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),p=r.default.div.withConfig({displayName:"StepPanel__StyledStepPanelElement",componentId:"sc-7pb8oz-0"})(["display:",";color:",";"],(function(e){return e._isActive?"block":"none"}),(function(e){return e.theme["content-color-primary"]}));function u(e){var t=e._isActive,n=e._index,o=e.heading,i=e.description,r=e.primaryAction,u=e.secondaryAction,g=e.className,m=e.children;return s.createElement(p,{_isActive:t,className:g,key:"STEP_CONTENT ".concat(n)},s.createElement(c.default,{direction:"column",gap:"spacing-xxl"},s.createElement(c.default,{direction:"column",gap:"spacing-l"},o||i?s.createElement(c.default,{direction:"column",gap:"spacing-s"},o?s.createElement(a.default,{type:"h3",text:o}):"",i?s.createElement(d.default,{type:"para"},i):""):"",m),s.createElement(c.default,{gap:"spacing-m",grow:1,shrink:1,justifyContent:"flex-end"},function(e){if(e&&e.type===l.default&&"secondary"===(e.props&&e.props.type))return e;return null}(u),function(e){if(e&&e.type===l.default&&"primary"===(e.props&&e.props.type))return e;return null}(r))))}u.defaultProps={_isActive:!1,heading:"",description:"",primaryAction:null,secondaryAction:null,className:"",_index:null},u.propTypes={_isActive:i().bool,_index:i().number,heading:i().string,description:i().string,primaryAction:function(e){var t=e.primaryAction;if(t){if(t.type!==l.default)return new Error("StepPanel: primaryAction prop only accepts Aether button component.");if("primary"!==(t.props&&t.props.type))return new Error("StepPanel: primaryAction prop only accepts button type primary.")}return null},secondaryAction:function(e){var t=e.secondaryAction;if(t){if(t.type!==l.default)return new Error("StepPanel: secondaryAction prop only accepts Aether button component.");if("secondary"!==(t.props&&t.props.type))return new Error("StepPanel: secondaryAction prop only accepts button type secondary.")}return null},className:i().string,children:i().oneOfType([i().arrayOf(i().node),i().node]).isRequired}},"../../node_modules/@postman/aether/esmLib/src/components/Stepper/StepPanels.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return d}});var s=n("../../node_modules/react/index.js"),o=n("../../node_modules/prop-types/index.js"),i=n.n(o),r=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Stepper/StepPanel.js"),l=r.default.div.withConfig({displayName:"StepPanels__StyledStepPanelContainer",componentId:"sc-1bky6oo-0"})(["padding-top:",";padding-bottom:",";"],(function(e){return e.theme["spacing-xl"]}),(function(e){return e.theme["spacing-xl"]}));function d(e){var t=0,n=e._activeStepIndex,o=e.className,i=e.children,r=s.Children.map(i,(function(e){var o=e;return(0,s.isValidElement)(e)&&[a.default].includes(e.type)?(o=(0,s.cloneElement)(e,{_isActive:t===n,_index:t}),t+=1,o):null}));return s.createElement(l,{className:o},r)}d.defaultProps={_activeStepIndex:0,className:""},d.propTypes={_activeStepIndex:i().number,className:i().string,children:i().oneOfType([i().arrayOf(i().node),i().node]).isRequired}},"../../node_modules/@postman/aether/esmLib/src/components/Stepper/Stepper.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return d}});var s=n("../../node_modules/react/index.js"),o=n("../../node_modules/prop-types/index.js"),i=n.n(o),r=n("../../node_modules/@postman/aether/esmLib/src/components/Stepper/StepHeader.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Stepper/StepPanels.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js");function d(e){var t=e.activeStepIndex,n=e.onChange,o=e.className,i=e.children,d=e["data-testid"],c=e["data-click"],p=s.Children.map(i,(function(e){if((0,s.isValidElement)(e)){if([r.default].includes(e.type))return(0,s.cloneElement)(e,{_activeStepIndex:t,_onChange:n});if([a.default].includes(e.type))return(0,s.cloneElement)(e,{_activeStepIndex:t})}return null}));return s.createElement(l.default,{className:o,direction:"column","data-aether-id":"aether-stepper","data-testid":d,"data-click":c,width:"100%"},p)}d.defaultProps={className:"",onChange:null,"data-testid":"aether-stepper","data-click":""},d.propTypes={activeStepIndex:i().number.isRequired,onChange:i().func,className:i().string,children:i().oneOfType([i().arrayOf(i().node),i().node]).isRequired,"data-testid":i().string,"data-click":i().string}},"./api-dev/components/api-repo-integration/OAuthLoadingView/OAuthLoadingView.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return a}});var s=n("../../node_modules/react/index.js"),o=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js");class a extends s.Component{constructor(e){super(e)}render(){const{serviceName:e,serviceFriendlyName:t,handleOnClose:n}=this.props;return s.createElement("div",{className:"connect-repo-tab","data-testId":"connect-repo-tab-loading"},s.createElement("div",{className:"api-repository-connecting"},s.createElement("div",{className:"api-repository-connecting__illustration_wrapper"},s.createElement("div",{className:`api-repository-connecting__illustration__${e}`})),s.createElement(o.default,{type:"h4",hasBottomSpacing:!0,text:`Connecting to ${t}…`}),s.createElement(i.default,{type:"para",hasBottomSpacing:!0},"This may take up to 60 seconds."),s.createElement(r.default,{type:"outline",onClick:n,text:"Cancel"})))}}},"./integrations/api-observability/components/base/CustomDropdown.js":function(e,t,n){n.r(t);var s=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/SingleSelect/SingleSelect.js");const o=(0,n("../../node_modules/styled-components/dist/styled-components.browser.esm.js").default)(s.default)`
  .aether-dropdown__value-container{
    >span {
      width: 100%;
    }
  }
`;t.default=o},"./integrations/components/CodeRepository/CodeRepositoryAuthenticating.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return a}});var s,o=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("./api-dev/components/api-repo-integration/OAuthLoadingView/OAuthLoadingView.js");let a=(0,i.observer)(s=class extends o.Component{constructor(e){super(e),this.oauthTimeout,this.waitingTextTimeoutInterval=4e3,this.waitingTextTimeout,this.state={waitingTextEnabled:!1},this.getServiceTitle=this.getServiceTitle.bind(this)}getServiceTitle(){let e=this.props.selectedServiceForAuthorization;switch(e){case"github":return"GitHub";case"gitlab":return"GitLab";case"azure":return"Azure DevOps";default:return e.charAt(0).toUpperCase()+e.slice(1)}}componentDidMount(){this.oauthTimeout=setTimeout((()=>{this.props.handleOauthTimeout()}),this.props.oauthTimeoutInterval),this.waitingTextTimeout=setTimeout((()=>{this.setState({waitingTextEnabled:!0},(()=>{clearTimeout(this.waitingTextTimeout)}))}),this.waitingTextTimeoutInterval)}componentWillUnmount(){clearTimeout(this.oauthTimeout)}render(){return o.createElement(r.default,{serviceName:this.props.selectedServiceForAuthorization,serviceFriendlyName:this.getServiceTitle(),handleOnClose:this.props.handleStop})}})||s},"./integrations/components/DeleteIntegrationModal.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return b}});var s,o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),i=n("../../node_modules/react/index.js"),r=n("./js/components/base/Modals.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),l=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),d=n("./js/services/NavigationService.js"),c=n("./js/stores/StoreManager.js"),p=n("./integrations/monitoring/stores/APMIntegrationStore.js"),u=n("./js/stores/IntegrationsStore.js"),g=n("./api-dev/constants/APISubViews.js"),m=n("./js/modules/services/AnalyticsService.js"),h=n("./integrations/utils/CommonHelperMethods.ts");let b=(0,o.observer)(s=class extends i.Component{constructor(e){super(e),this.state={isDeleting:!1},this.store=this.props.store,this.integrationsStore=(0,c.resolveStoreInstance)(u.default),this.apmIntegrationStore=(0,c.resolveStoreInstance)(p.default),this.handleReset=this.handleReset.bind(this)}handleReset(){let{payload:e,integrationId:t,category:n}=this.props;pm.windowEvents.emit(`${n}-integration-deleted`,{apiId:e.api_id,apiVersionId:e.executor,integrationId:t}),d.default.transitionTo("build.apiVersion",{apiId:e.api_id,versionId:e.executor},{tab:g.MONITORING})}render(){const{integrationId:e,ruleId:t,source:n,payload:s}=this.props,{isDeleting:o}=this.state;return i.createElement("div",null,i.createElement(r.Modal,{isOpen:this.props.isOpen,onRequestClose:this.props.handleCloseModal},i.createElement(r.ModalHeader,null,"Delete Integration"),i.createElement(r.ModalContent,null,"Deleting this integration will cease any actions it performs immediately.  Are you sure you wish to continue?"),i.createElement(r.ModalFooter,null,i.createElement(a.default,{text:"Delete Integration",isLoading:this.state.isDeleting,type:"destructive",disabled:o,onClick:()=>{this.setState({isDeleting:!0}),l.default.deleteIntegration(e).then((e=>{this.setState({isDeleting:!1}),200===e.status?(pm.toasts.success("Integration deleted successfully."),n&&m.default.addEventV2({category:"integrations",action:t+"_edited_integration",label:n,value:1}),this.props.handleCloseModal(),this.integrationsStore.refetchTeamIntegrations(),this.integrationsStore.setRuleSpecificTeamIntegrations(t,null),this.apmIntegrationStore.fetchIntegrationInstance("apiversion",s.executor),this.props.handleReset?this.props.handleReset():this.handleReset()):(pm.toasts.error("Something went wrong while deleting your integration. Please try again later."),pm.logger.error("Something went wrong while deleting your integration",e))})).catch((e=>{this.setState({isDeleting:!1}),pm.toasts.error((0,h.getErrorMessage)(e,"Something went wrong while deleting your integration.")),pm.logger.error("Error occurred while deleting integration",e)}))}})," ",i.createElement(a.default,{text:"Cancel",type:"secondary",onClick:this.props.handleCloseModal}))))}})||s},"./integrations/components/api-builder/DetailedViewContainer.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return I}});var s=n("../../node_modules/react/index.js"),o=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),i=n("./node_modules/prop-types/index.js"),r=n.n(i),a=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),d=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-direction-back.js");const c=o.default.div`
    overflow-y: auto;
    overflow-x: hidden;
  `,p=(0,o.default)(a.default)`
    z-index: 2;
    margin: var(--spacing-zero);
    padding: var(--spacing-zero) var(--spacing-s);
    min-height: 48px;
    box-shadow: inset 0px -1px 0px var(--border-color-strong);
  `,u=(0,o.default)(a.default)`
    margin:var(--spacing-s) var(--spacing-l);
  `,g=(0,o.default)(a.default)`
  `,m=(0,o.default)(a.default)`
  `,h=o.default.div`
    display: flex;
    align-items: center;
    cursor:pointer;
    padding:var(--spacing-s);
  `,b=(0,o.default)(a.default)`
    width: 65%;
    color: var(--content-color-secondary);
    font-size: var(--text-size-m);
    overflow: hidden;
    text-overflow: ellipsis;
  `,f=o.default.div`
    margin-left: var(--spacing-l);
  `,v=(0,o.default)(a.default)`
    margin-left: auto;
    width:30%;
  `,S=(0,o.default)(a.default)`
    margin: var(--spacing-m);
  `;class I extends s.Component{constructor(e){super(e)}render(){const{titleHeading:e,onBackButtonClick:t,titleSubheadingComponent:n,titleRightSideComponent:o,subtitleLeftSideComponent:i,subtitleRightSideComponent:r,bodyComponent:I}=this.props;return s.createElement(c,null,s.createElement(a.default,{direction:"column"},s.createElement(p,{alignItems:"center"},s.createElement(h,{onClick:()=>{t()}},s.createElement(d.default,null)),s.createElement(b,{alignItems:"center"},s.createElement(l.default,{type:"h4",text:e}),s.createElement(f,null,n)),s.createElement(v,{justifyContent:"flex-end",alignItems:"center"},o)),s.createElement(u,{justifyContent:"space-between"},s.createElement(g,null,i),s.createElement(m,{justifyContent:"flex-end"},r)),s.createElement(S,null,I)))}}I.propTypes={titleHeading:r().string.isRequired,titleSubheadingComponent:r().element,titleRightSideComponent:r().element,subtitleLeftSideComponent:r().element,subtitleRightSideComponent:r().element,bodyComponent:r().element,onBackButtonClick:r().func.isRequired}},"./integrations/components/base/EditIntegration.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return h}});var s,o=n("../../node_modules/react/index.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),r=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),a=n("./appsdk/workbench/TabService.js"),l=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),d=n("./js/modules/services/AnalyticsService.js"),c=n("./js/stores/StoreManager.js"),p=n("./js/stores/IntegrationsStore.js"),u=n("./integrations/monitoring/stores/APMIntegrationStore.js"),g=n("./node_modules/lodash/lodash.js");function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},m.apply(this,arguments)}let h=(0,l.observer)(s=class extends o.Component{constructor(e){super(e),this.store=this.props.store,this.state={isUpdating:!1},this.apmIntegrationStore=(0,c.resolveStoreInstance)(u.default)}render(){const{disabled:e,payload:t,integrationId:n,rule:s,service:l,route:u,client_category:h,redirect:b,alignLeft:f,generatePayload:v,...S}=this.props;return o.createElement("div",{className:"integrations-add-actions__button--container"},o.createElement(i.default,m({text:"Update",isLoading:this.state.isUpdating,type:"primary",isDisabled:e||this.state.isUpdating,tooltip:e?"Make sure that you have entered all the mandatory fields":"",onClick:()=>{this.setState({isUpdating:!0},(async()=>{let e=g.assign({},t);g.isFunction(v)&&(e=await v(t)),r.default.updateIntegration(n,e).then((e=>{200===e.status&&e.body.model_id?(pm.toasts.success(`You updated the ${g.get(e.body,"data.name")} integration`,{noIcon:!0,title:"Changes Saved"}),(0,c.resolveStoreInstance)(p.default).setRuleSpecificTeamIntegrations(s,null),this.apmIntegrationStore.fetchIntegrationInstance("apiversion",t.executor),d.default.addEventV2({category:"integrations",action:s+"_edited_integration",label:"team_integrations_edit_forms",value:1}),pm.windowEvents.emit(`${h}-integration-edited`,{apiId:t.api_id,apiVersionId:t.executor,integrationId:n}),a.default.closeByRoute(u,{apiId:t.api_id,integrationId:n}),b&&b()):(pm.toasts.error("Looks like this isn't working right now. Please try again later.",{noIcon:!0,title:"Unable to save changes"}),this.setState({isUpdating:!1}))})).catch((e=>{pm.toasts.error(e.error.details&&e.error.details.message||e.error.message||"Looks like this isn't working right now. Please try again later.",{noIcon:!0,title:"Unable to save changes"}),pm.logger.error("Something went wrong while updating a new integration",e)}))}))}},S)))}})||s},"./integrations/components/base/IntegrationCreateDataFormatWrapper.js":function(e,t,n){n.r(t),n.d(t,{IntegrationCreateDataFormatWrapper:function(){return g}});var s,o=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("./node_modules/lodash/lodash.js"),a=n.n(r),l=n("./js/components/base/LoadingIndicator.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationClassService.js"),c=n("./integrations/components/error-states/ErrorIntegrations.js");function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},p.apply(this,arguments)}const u=(0,n("./integrations/utils/CommonHelperMethods.ts").getErrorContextObject)("Create Form Data Format Wrapper");let g=(0,i.observer)(s=class extends o.Component{constructor(e){super(e),this.state={loading:!1,classData:null,error:null},this.fetchClassData=this.fetchClassData.bind(this)}fetchClassData(e){this.setState({loading:!0},(()=>{d.default.fetchIntegrationClassDetails(e).then((e=>{const t=a().get(e,"body.data");a().isEmpty(e)||200!==e.status||a().isEmpty(t)?(pm.logger.error("Error in fetching class details for create form",e,{context:u}),this.setState({loading:!1,error:{status:a().get(e,"status"),body:a().get(e,"body","Empty response")}})):this.setState({loading:!1,error:null,classData:t})})).catch((e=>{pm.logger.error("Error in fetching class details for create form",e,{context:u}),this.setState({loading:!1,error:e})}))}))}componentDidMount(){return this.fetchClassData(this.props.rule)}render(){const{FormComponent:e,rule:t,service:n,postCreationAction:s}=this.props,{classData:i,loading:r,error:d}=this.state,u=a().find(a().get(i,"inputs"),(e=>a().has(["postman-monitor","postman-collection","postman-api","postman-apiversion","postman-team","postman-user","postman-uptimeMonitor"],a().get(e,"key")))),g=function(e){const{apiId:t,apiVersionId:n,workspaceId:s}=e,o=[];return s&&o.push({entityType:"workspace",entityId:s,force:!0}),t&&o.push({entityType:"api",entityId:t,force:!0}),n&&o.push({entityType:"apiversion",entityId:n,force:!0}),o}(this.props);return r?o.createElement(l.default,null):d?o.createElement(c.default,{error:{title:"Something went wrong",message:"Something went wrong while loading the integration creation form. Please close the tab and try again."}}):o.createElement(e,p({},this.props,{classData:i,classId:t,serviceId:n,preferredEntities:g,redirect:e=>a().isFunction(s)&&s({rule:t,executor:(a().find(e.inputs,["key",u])||{}).value})}))}})||s},"./integrations/components/base/IntegrationEditDataFormatWrapper.js":function(e,t,n){n.r(t),n.d(t,{IntegrationEditDataFormatWrapper:function(){return g}});var s,o=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("./node_modules/lodash/lodash.js"),a=n.n(r),l=n("./js/components/base/LoadingIndicator.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationClassService.js"),c=n("./integrations/components/error-states/ErrorIntegrations.js");function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},p.apply(this,arguments)}const u=(0,n("./integrations/utils/CommonHelperMethods.ts").getErrorContextObject)("Edit Form Data Format Wrapper");let g=(0,i.observer)(s=class extends o.Component{constructor(e){super(e),this.state={loading:!1,classData:null,error:null},this.fetchClassData=this.fetchClassData.bind(this)}fetchClassData(){this.setState({loading:!0},(()=>{d.default.fetchIntegrationClassDetails(a().get(this.props,"integrationData.class",this.props.rule)).then((e=>{const t=a().get(e,"body.data");200!==e.status||a().isEmpty(t)?(pm.logger.error("Error in fetching class details for edit form",e,{context:u}),this.setState({loading:!1,error:{status:a().get(e,"status"),body:a().get(e,"body","Empty response")}})):this.setState({loading:!1,error:null,classData:t})})).catch((e=>{pm.logger.error("Error in fetching class details for edit form",e,{context:u}),this.setState({loading:!1,error:e})}))}))}componentDidMount(){this.fetchClassData()}render(){const{FormComponent:e,rule:t,integrationId:n,integrationData:s,postEditAction:i}=this.props,{classData:r,loading:d,error:u}=this.state,g=s.class||t,m=a().find(a().get(r,"inputs"),(e=>a().has(["postman-monitor","postman-collection","postman-api","postman-apiversion","postman-team","postman-user","postman-uptimeMonitor"],a().get(e,"key")))),h=function(e){const{apiId:t,apiVersionId:n,workspaceId:s}=e,o=[];return s&&o.push({entityType:"workspace",entityId:s,force:!0}),t&&o.push({entityType:"api",entityId:t,force:!0}),n&&o.push({entityType:"apiversion",entityId:n,force:!0}),o}(this.props);return d?o.createElement(l.default,null):u||!r?o.createElement(c.default,{error:{title:"Something went wrong",message:"Something went wrong while loading the integration edit form. Please close the tab and try again."}}):o.createElement(e,p({},this.props,{classData:r,classId:g,integrationData:s,integrationId:n,preferredEntities:h,redirect:e=>a().isFunction(i)&&i({classId:g,executor:(a().find(e.inputs,["key",m])||{}).value})}))}})||s},"./integrations/components/base/MonitorSelector.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return E}});var s,o=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("./js/stores/ActiveWorkspaceStore.js"),a=n("./js/stores/StoreManager.js"),l=n("./js/stores/IntegrationsStore.js"),d=n("../../node_modules/mobx/lib/mobx.module.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/SingleSelect/SingleSelect.js"),p=n("./js/modules/services/RemoteSyncRequestService.js"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),g=n("./monitors/services/MonitorService.js"),m=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/DropdownOption.js"),h=n("./integrations/monitoring/constants.js"),b=n("./integrations/constants/integrationsConstants.ts"),f=n("./node_modules/lodash/lodash.js"),v=n.n(f),S=n("./node_modules/prop-types/index.js"),I=n.n(S);const y={collections:"Please select a collection",monitors:"Please select a monitor",apis:"Please select an API",apiversions:"Please select an API version"};let E=(0,i.observer)(s=class extends o.Component{constructor(e){super(e),this.state={entities:[],entityVersions:[],loading:!1,error:!1,firstLoad:!0},this.store=(0,a.resolveStoreInstance)(l.default),this.workspaceStore=(0,a.resolveStoreInstance)(r.default),this.fetchAndAssignConstraints=this.fetchAndAssignConstraints.bind(this),this.fetchMonitorsLinkedToAPIVersion=this.fetchMonitorsLinkedToAPIVersion.bind(this),this.performEntityChecks=this.performEntityChecks.bind(this),this.fetchMonitors=this.fetchMonitors.bind(this),this.getEmptyStateError=this.getEmptyStateError.bind(this),this.updateSelectedEntity=this.updateSelectedEntity.bind(this),this.getFormattedResponse=this.getFormattedResponse.bind(this),this.customDropdownOption=this.customDropdownOption.bind(this)}componentDidMount(){let{selectedWorkspace:e}=this.props;e&&this.fetchMonitors(e.value),(0,d.reaction)((()=>this.workspaceStore.dependencies),(()=>{this.fetchMonitors(e.value)}))}getFormattedResponse(e){let t=!1,n=[];return n=e.map((e=>e.name&&e.id?{...e,label:v().get(e,"name"),value:v().get(e,"id")}:(t=!0,{}))),{newEntities:n,malformedResponse:t}}fetchMonitors(e){this.setState({loading:!0}),e?g.default.getJobTemplatesByWorkspace({workspaceId:e}).then((e=>{const t=v().get(e,"body.data",[]),{newEntities:n,malformedResponse:s}=this.getFormattedResponse(t);if(s)throw new Error("Malformed response");return n})).then((e=>{if(!this.props.integrationClassId||!this.props.mode)return e;return this.fetchAndAssignPermissions(e,this.props.integrationClassId,"monitor",this.props.mode)})).then((e=>v().map(e,(e=>v().omit(e,["options"]))))).then((e=>this.performEntityChecks(e))).then((e=>{this.store.selectedEntity&&this.updateSelectedEntity(e),this.setState({entities:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load monitors",loading:!1}),pm.toasts.error("Something went wrong while fetching monitors"),pm.logger.error("Error ocurred while fetching monitors",e)})):this.setState({loading:!1})}fetchAndAssignPermissions(e,t,n,s){return new Promise(((s,o)=>{const i=e.map((e=>({id:v().get(e,"id")})));let r=null;b.INTEGRATION_FORM_MODE.ADD,r=u.default.fetchCreatePermissions,r(t,n,i).then((t=>(v().forEach(v().zip(e,t.body),(e=>{const[t,n]=e;t.disabled=!n.hasPermission})),s(e)))).catch((e=>{pm.logger.error(e),o(e)}))}))}updateSelectedEntity(e){this.store.setSelectedEntity(v().find(e,{value:this.store.selectedEntity.value}))}fetchAndAssignConstraints(e,t,n){let s=`/apis/${t}/versions/${n}/relations/monitor/constraint-checks`,o=[];return o=v().map(e,(e=>e.id)),p.default.request(s,{method:"post",timeout:6e4,data:{entityIds:o}}).then((({body:t})=>(v().each(e,(e=>{let n=v().find(t.data,{entityId:e.id});e.disabled=!n.allowed,e.disabled&&(e.disabledMessage="This monitor is already linked to another API version.")})),Promise.resolve(e)))).catch((t=>(pm.logger.error("Error in fetching relation constraints.",t),Promise.resolve(e))))}fetchMonitorsLinkedToAPIVersion(e,t,n){let s=`/apis/${t}/versions/${n}/monitor`;return p.default.request(s,{method:"get"}).then((t=>{if(t&&200===t.status){let n=v().get(t.body,"data.monitor");return v().each(e,(e=>{v().find(n,{id:e.id})&&(e.disabled=!1)})),Promise.resolve(e)}throw t&&t.body||{error:"serverError",message:"Something went wrong while fetching the linked monitors"}})).catch((t=>(pm.logger.error("Error in fetching linked monitors",t),Promise.resolve(e))))}performEntityChecks(e){return this.fetchAndAssignConstraints(e,this.props.apiId,this.props.apiVersionId).then((e=>this.fetchMonitorsLinkedToAPIVersion(e,this.props.apiId,this.props.apiVersionId))).then((e=>(v().each(e,(e=>{e.disabled||v().find(this.props.configuredIntegrations,{executor:e.id,rule:this.props.integrationClassId})&&(e.disabled=!0,e.disabledMessage="Integration is already configured on this monitor.")})),e))).then((e=>{let t;return v().each(e,(async e=>{e.disabled||(t=await u.default.getConfiguredIntegrationsByEntityAndClientCategory(h.ENTITY,e.id,[h.API_MONITORING],!0).catch((e=>pm.logger.error("MonitorSelector~Error occurred while fetching the configured integrations",e))),t=v()(t).flatMap((e=>Object.values(e))).value(),v().find(t,{rule:this.props.integrationClassId})&&(e.disabled=!0,e.disabledMessage="Integration is already configured on this monitor."))})),Promise.resolve(e)}))}customDropdownOption(e){return o.createElement(m.default,{option:e,entityType:b.entityTypes.MONITORS,tooltipMessage:e.disabledMessage||this.props.tooltipMessage})}getEmptyStateError(){return y[b.entityTypes.MONITORS]?y[b.entityTypes.MONITORS]:""}render(){let{executor:e,onTargetSelect:t,title:n,description:s,disabled:i,optional:r,selectedWorkspace:a}=this.props,{selectedEntity:l}=this.store,{entities:d,loading:p,firstLoad:u,error:g}=this.state,m=!p&&d.length>0&&!l&&!u&&this.getEmptyStateError();return o.createElement("div",{className:"integrations-add-card__segment"},o.createElement("div",{className:"integrations-add-card__label-title-v2"},n," ",r?o.createElement("span",null,"(optional)"):""),o.createElement("div",{className:"integrations-add-card__label-description"},s),o.createElement("div",{className:"integrations-add-card__input"},o.createElement(c.default,{onChange:t,options:d,value:e,isLoading:p,isDisabled:i,emptyStateMessage:"No monitors found",customOptionComponent:this.customDropdownOption,isOptionDisabled:e=>e.disabled}),m?o.createElement("span",{className:"integrations-add-card__error"},m):g?o.createElement("span",{className:"integrations-add-card__error"},g+". ",o.createElement("span",{onClick:()=>{a&&this.fetchMonitors(a.value)},className:"integrations-add-card__error__btn"},"Retry")):""))}})||s;E.propTypes={executor:I().object.isRequired,selectedWorkspace:I().object.isRequired,title:I().string.isRequired,description:I().string.isRequired,disabled:I().bool.isRequired,onTargetSelect:I().func.isRequired,apiId:I().string.isRequired,apiVersionId:I().string.isRequired,configuredIntegrations:I().array.isRequired,integrationClassId:I().string.isRequired,mode:I().string.isRequired}},"./integrations/components/error-states/ErrorIntegrations.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return d}});var s,o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),i=n("../../node_modules/react/index.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/InternalServerError.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/PageNotFound.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/UnauthorizedError.js");let d=(0,o.observer)(s=class extends i.Component{constructor(e){super(e),this.state={error:{}}}componentDidMount(){let{error:e}=this.props;e?this.setState({statusCode:e.statusCode,title:e.title,message:e.message}):this.setState({title:"Something went wrong",message:"Something went wrong while performing this action. Please refresh the page and try again."})}render(){let{statusCode:e,title:t,message:n}=this.state;return i.createElement("div",null,i.createElement("div",{className:"team-integrations-error-state"},i.createElement("div",{className:"team-integrations-error-state__illustration-wrapper team-integrations-error-state__illustration-wrapper--collections"},(!e||e>499&&e<600)&&i.createElement(r.default,null),404===e&&i.createElement(a.default,null),e>399&&e<500&&404!==e&&i.createElement(l.default,null)),i.createElement("div",{className:"team-integrations-error-state__title"},t),i.createElement("div",{className:"team-integrations-error-state__subtitle"},n)))}})||s},"./integrations/components/error-states/IntegrationNotSupported.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return u}});var s=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),o=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),i=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/error-states/ErrorState.js"),r=n("../../node_modules/react/index.js"),a=n("./integrations/utils/CommonHelperMethods.ts"),l=n("./js/services/NavigationService.js"),d=n("./js/external-navigation/ExternalNavigationService.js"),c=n("./integrations/constants/integrationsConstants.ts");function p(e){let{apiId:t,apiVersionId:n,tab:o}=e,i={apiId:t,versionId:n},p={tab:o},u=(0,a.getURLFromBasePathAndRoute)(pm.artemisUrl,l.default.getURLForRoute("build.apiVersion",i,p));return r.createElement("div",{className:"unsupported-integrations-error-cta__subtitle"},"browser"===window.SDK_PLATFORM?r.createElement("span",null,c.INTEGRATION_NOT_SUPPORTED_SUBTITLE_WEB_APP):r.createElement("div",null,r.createElement("span",null,c.INTEGRATION_NOT_SUPPORTED_SUBTITLE_DESKTOP),r.createElement("span",{onClick:()=>(0,d.openExternalLink)(u||"#","_blank"),className:"unsupported-integrations-error-cta__subtitle__link"},r.createElement(s.default,{type:"link-primary",isExternal:!0},"web app"))))}function u(e){let t={title:"browser"===window.SDK_PLATFORM?c.INTEGRATION_NOT_SUPPORTED_TITLE_WEB_APP:c.INTEGRATION_NOT_SUPPORTED_TITLE_DESKTOP,subtitle:p(e)};return r.createElement("div",{className:"unsupported-integrations-error-cta"},r.createElement(o.default,{direction:"column",justifyContent:"center",alignItem:"center",alignSelf:"center"},r.createElement(i.default,{errorDetails:t})))}},"./integrations/monitoring/add/Datadog/Datadog.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return P}});var s,o=n("./node_modules/lodash/lodash.js"),i=n.n(o),r=n("../../node_modules/react/index.js"),a=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("./js/stores/IntegrationsStore.js"),d=n("./integrations/monitoring/stores/APMIntegrationStore.js"),c=n("./js/stores/StoreManager.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Stepper/Stepper.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/Stepper/StepHeader.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/Stepper/Step.js"),h=n("../../node_modules/@postman/aether/esmLib/src/components/Stepper/StepPanels.js"),b=n("../../node_modules/@postman/aether/esmLib/src/components/Stepper/StepPanel.js"),f=n("./integrations/navigation/constants.js"),v=n("./integrations/monitoring/constants.js"),S=n("./api-dev/constants/APISubViews.js"),I=n("./js/services/NavigationService.js"),y=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationInstanceService.ts"),E=n("./appsdk/workbench/TabService.js"),A=n("./js/modules/services/AnalyticsService.js"),_=n("./integrations/monitoring/add/Datadog/DatadogMonitorSetupForm.js"),w=n("./integrations/monitoring/add/Datadog/DatadogAPMSetupForm.js"),j=n("./integrations/monitoring/containers/helpers/DatadogAPMUtils.js"),C=n("./integrations/utils/CommonHelperMethods.ts");let P=(0,a.observer)(s=class extends r.Component{constructor(e){super(e),this.state={nickname:"",activeStepIndex:0,stepperStatuses:["progress","pending"],isCreatingIntegration:!1,errorNickname:"",monitor:"",dashboardGuids:[],datadogAPM:{environments:j.default.getEmptyEnvironmentsList(),datadogAuthInfo:{apiKey:"",appKey:"",errorApiKey:!1,errorAppKey:!1,region:"us1"},datadogDashboardGuids:[]},monitorIntegrationStates:[{nickname:v.MONITOR_RUN_DATADOG_INTEGRATION_NAME,errorNickname:"",apiKey:"",errorApiKey:!1,executor:null,region:"us1",metrics:!0,events:!0}]},this.integrationsStore=(0,c.resolveStoreInstance)(l.default),this.apmIntegrationsStore=(0,c.resolveStoreInstance)(d.default),this.setActiveStepIndex=this.setActiveStepIndex.bind(this),this.renderSkipButton=this.renderSkipButton.bind(this),this.renderConnectButton=this.renderConnectButton.bind(this),this.client_category=v.API_MONITORING,this.setDatadogAPMEnvs=this.setDatadogAPMEnvs.bind(this),this.setDatadogAPMAuthInfo=this.setDatadogAPMAuthInfo.bind(this),this.setDatadogAPMDashboardGuids=this.setDatadogAPMDashboardGuids.bind(this),this.createDatadogAPMIntegrationInstance=this.createDatadogAPMIntegrationInstance.bind(this),this.getAPMSetupForm=this.getAPMSetupForm.bind(this),this.createIntegrationInstanceBulk=this.createIntegrationInstanceBulk.bind(this),this.prepareMonitorSetupPayload=this.prepareMonitorSetupPayload.bind(this),this.getMonitorSetupForm=this.getMonitorSetupForm.bind(this)}componentDidMount(){const e=i().find(this.apmIntegrationsStore.getConfiguredIntegrations(),{rule:v.DATADOG_APM_CLASS_ID}),t=!i().isEmpty(e);this.setActiveStepIndex(t?1:0)}setActiveStepIndex(e){let{stepperStatuses:t}=this.state,n=i().find(this.apmIntegrationsStore.getConfiguredIntegrations(),{rule:v.DATADOG_APM_CLASS_ID});t=i().map(t,((t,n)=>"completed"===t?"completed":n===e?"progress":"pending")),i().isEmpty(n)||(t[0]="completed"),this.setState({stepperStatuses:t,activeStepIndex:e})}renderSkipButton(e){let{apiId:t,apiVersionId:n,controller:s}=this.props;return r.createElement(p.default,{className:"integrations-add-actions__button--cancel",type:"secondary",text:v.SKIP_BUTTON_TEXT[e],onClick:()=>{"configureAPM"===e?this.setState({stepperStatuses:["pending","progress"],activeStepIndex:1}):(E.default.closeByRoute(f.V10_API_ADD_APM_INTEGRATION_URL,{apiId:t}),I.default.transitionTo("build.apiVersion",{apiId:t,versionId:n},{tab:S.MONITORING}))}})}renderConnectButton(e,t){let n,{isCreatingIntegration:s,datadogAPM:o,monitorIntegrationStates:a}=this.state,{controller:l}=this.props,{postman_api_id:d,apiversion:c}=t.inputs,{environments:u}=o,g=j.default.areEnvironmentsValid(u),{apiKey:m,appKey:h,region:b,errorApiKey:v,errorAppKey:y}=o.datadogAuthInfo;return"configureAPM"===e?n=s||!(m&&h&&b)||!g||v||y:i().forEach(a,(e=>{(i().isEmpty(e.apiKey)||i().isEmpty(e.executor)||!e.events&&!e.metrics)&&(n=!0)})),r.createElement(p.default,{type:"primary",text:"Connect",className:"integrations-add-actions__button--proceed",isLoading:s,isDisabled:n,tooltip:n&&"Fill in the details to continue",onClick:()=>{if("configureAPM"===e)this.setState({isCreatingIntegration:!0}),this.createDatadogAPMIntegrationInstance(t).then((()=>{this.setState({stepperStatuses:["completed","progress"],activeStepIndex:1,isCreatingIntegration:!1})})).catch((()=>{this.setState({isCreatingIntegration:!1})}));else{let e=this.prepareMonitorSetupPayload();this.setState({isCreatingIntegration:!0}),this.createIntegrationInstanceBulk(e).then((()=>{this.setState({isCreatingIntegration:!1}),E.default.closeByRoute(f.V10_API_ADD_APM_INTEGRATION_URL,{apiId:d}),I.default.transitionTo("build.apiVersion",{apiId:d,versionId:c},{tab:S.MONITORING})})).catch((()=>{this.setState({isCreatingIntegration:!1})}))}}})}setDatadogAPMDashboardGuids(e){this.setState((t=>({datadogAPM:{...t.datadogAPM,datadogDashboardGuids:e}})))}setDatadogAPMAuthInfo(e,t){const n=this.state.datadogAPM.datadogAuthInfo;n[e]=t,this.setState((e=>({datadogAPM:{...e.datadogAPM,datadogAuthInfo:n}})))}setDatadogAPMEnvs(e){this.setState((t=>({datadogAPM:{...t.datadogAPM,environments:e}})))}createDatadogAPMIntegrationInstance(e){const t=(0,C.getErrorContextObject)("Datadog APM Integration");let{name:n,inputs:s}=e,{postman_api_id:o,apiversion:i}=s;return new Promise(((e,r)=>{y.default.createIntegrationInstance(v.DATADOG_APM_CLASS_ID,n,s).then((t=>{200===t.status&&t.body.model_id?(pm.toasts.success("Added a new integration"),A.default.addEventV2({category:"integrations",action:v.DATADOG_APM_CLASS_ID+"_created_integration",label:"api_workbench_monitoring_tab",value:1}),pm.windowEvents.emit(`${v.API_MONITORING}-integration-added`,{apiId:o,apiVersionId:i}),this.apmIntegrationsStore.fetchIntegrationInstance("apiversion",i),e(t.body)):(pm.toasts.error("Something went wrong while adding a new integration"),this.setState({isCreatingIntegration:!1}),r(t&&t.body))})).catch((e=>{pm.toasts.error(e.error.details&&e.error.details.message||e.error.message||"Something went wrong while adding a new integration"),pm.logger.error("Monitoring Tab Add Form ~ Something went wrong while adding a new integration",e,{context:t}),this.setState({isCreatingIntegration:!1}),r(e)}))}))}getAPMSetupForm(){return r.createElement(w.default,{apiId:this.props.apiId,apiVersionId:this.props.apiVersionId,rule:v.DATADOG_APM_CLASS_ID,datadogAPM:this.state.datadogAPM,setDatadogAPMEnvs:this.setDatadogAPMEnvs,setDatadogAPMAuthInfo:this.setDatadogAPMAuthInfo,setDatadogAPMDashboardGuids:this.setDatadogAPMDashboardGuids})}createIntegrationInstanceBulk(e){const t=(0,C.getErrorContextObject)("Datadog Monitor Integration");return new Promise(((n,s)=>{y.default.createIntegrationInstanceBulk(e).then((t=>{200===t.status?(pm.toasts.success(`Added ${e.length} new integrations.`),A.default.addEventV2({category:"integrations",action:v.DATADOG_MONITOR_CLASS_ID+"_created_integration",label:"api_workbench_monitoring_tab",value:e.length}),n(t.body)):(pm.toasts.error("Something went wrong while adding a new integration"),this.setState({isCreatingIntegration:!1}),s(t&&t.body))})).catch((e=>{pm.toasts.error(e.error.details&&e.error.details.message||e.error.message||"Something went wrong while adding a new integration"),pm.logger.error("Monitoring Tab Add Form ~ Something went wrong while adding a new integration",e,{context:t}),this.setState({isCreatingIntegration:!1}),s(e)}))}))}prepareMonitorSetupPayload(){let e,{monitorIntegrationStates:t}=this.state;return e=i().map(t,(e=>{let t=e.events,n=e.metrics;return{name:e.nickname,class:v.DATADOG_MONITOR_CLASS_ID,inputs:[{key:"api_key",value:e.apiKey},{key:"region",value:e.region},{key:"monitor",value:i().get(e,"executor.value")},{key:"new_metric",value:!0},{key:"options",value:(t&&n?"both":t&&"events")||n&&"metrics"}]}})),e}getMonitorSetupForm(){return r.createElement(_.default,{selectedWorkspace:this.props.selectedWorkspace,apiId:this.props.apiId,apiVersionId:this.props.apiVersionId,controller:this.props.controller,setMonitorIntegrationStates:e=>{this.setState({monitorIntegrationStates:e})},monitorIntegrationStates:this.state.monitorIntegrationStates})}render(){const{activeStepIndex:e,stepperStatuses:t,datadogAPM:n}=this.state,{rule:s,apiId:o,apiVersionId:a}=this.props,{environments:l,datadogDashboardGuids:d,datadogAuthInfo:c}=n,{apiKey:p,appKey:f,region:S}=c,I=t[0],y=t[1];let E={name:v.APM_DATADOG_INTEGRATION_NAME,class:v.DATADOG_APM_CLASS_ID,inputs:{api_key:p,app_key:f,region:S,environments:i().map(l,(e=>({name:e.name,services:e.services}))),postman_api_id:o,apiversion:a,dashboard_guids:d}};return r.createElement(u.default,{activeStepIndex:e,onChange:this.setActiveStepIndex},r.createElement(g.default,null,r.createElement(m.default,{label:"Monitor API performance",status:I,isDisabled:"completed"===I}),r.createElement(m.default,{label:"Post monitoring results",status:y})),r.createElement(h.default,null,r.createElement(b.default,{className:"add-integration-step-panel",heading:"Monitor API Performance from Postman",description:"View Datadog metrics and graphs directly from Postman.",primaryAction:this.renderConnectButton("configureAPM",E),secondaryAction:this.renderSkipButton("configureAPM")},this.getAPMSetupForm()),r.createElement(b.default,{className:"add-integration-step-panel",heading:"Post monitoring results",description:"Send your Postman monitor run metrics and events to Datadog.",primaryAction:this.renderConnectButton("configureMonitoring",E),secondaryAction:this.renderSkipButton("configureMonitoring")},this.getMonitorSetupForm())))}})||s},"./integrations/monitoring/add/Datadog/DatadogAPMSetupForm.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return I}});var s,o=n("./node_modules/lodash/lodash.js"),i=n.n(o),r=n("../../node_modules/react/index.js"),a=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("./js/stores/StoreManager.js"),d=n("./js/stores/IntegrationsStore.js"),c=n("./integrations/monitoring/services/index.js"),p=n("./integrations/monitoring/constants.js"),u=n("./node_modules/prop-types/index.js"),g=n.n(u),m=n("./node_modules/uuid/index.js"),h=n.n(m),b=n("./integrations/monitoring/containers/helpers/DatadogAPMUtils.js"),f=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/DatadogAPM/DatadogCommonConfigs.js"),v=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/DatadogAPM/DatadogDashboardsAndEnvironments.js");const S=(0,n("./integrations/utils/CommonHelperMethods.ts").getErrorContextObject)("Datadog APM Integration");let I=(0,a.observer)(s=class extends r.Component{constructor(e){super(e),this.state={nickname:"",isCreatingIntegration:!1,authenticationFailed:!1,errorNickname:"",apiKey:"",appKey:"",errorApiKey:!1,errorAppKey:!1,selectedDashboards:[],availableDashboards:[],errorDashboards:!1,loadingDashboards:!1,region:"us1"},this.integrationsStore=(0,l.resolveStoreInstance)(d.default),this.onRegionSelectorChange=this.onRegionSelectorChange.bind(this),this.onServiceSelect=this.onServiceSelect.bind(this),this.handleApiKeyInput=this.handleApiKeyInput.bind(this),this.handleAppKeyInput=this.handleAppKeyInput.bind(this),this.onDashboardSelect=this.onDashboardSelect.bind(this),this.listDashboards=this.listDashboards.bind(this),this.resetSelectedDashboardsAndServices=this.resetSelectedDashboardsAndServices.bind(this),this.client_category=p.API_MONITORING,this.removeEnvironmentSelector=this.removeEnvironmentSelector.bind(this)}onServiceSelect(e){if(!i().isArray(e))return;let t=i().map(e,"value");this.setState({selectedServices:e,serviceNames:t})}onDashboardSelect(e){if(!i().isArray(e))return;let t=i().map(e,(e=>({label:e.title,link:e.url})));this.setState({selectedDashboards:e},(()=>{this.props.setDatadogAPMDashboardGuids(t)}))}onRegionSelectorChange(e){this.setState((t=>{if(e!==t.region)return this.props.setDatadogAPMAuthInfo("region",e),this.resetForm(),{region:e,apiKey:"",appKey:"",errorApiKey:!1,errorAppKey:!1}}))}resetForm(){this.props.setDatadogAPMAuthInfo("apiKey",""),this.props.setDatadogAPMAuthInfo("appKey",""),this.resetSelectedDashboardsAndServices()}resetSelectedDashboardsAndServices(){this.setState({selectedDashboards:[],availableDashboards:[],errorDashboards:!1,loadingDashboards:!1},(()=>{this.props.setDatadogAPMDashboardGuids([]),this.props.setDatadogAPMEnvs(b.default.getEmptyEnvironmentsList())}))}handleApiKeyInput(e){let t={apiKey:e.trim(),errorApiKey:!1};if(i().isEmpty(e.trim()))return t.errorApiKey=!0,this.setState(t),this.resetSelectedDashboardsAndServices(),void this.props.setDatadogAPMAuthInfo("apiKey",t.apiKey);t.apiKey!==i().get(this.props.datadogAPM,"datadogAuthInfo.apiKey")&&this.resetSelectedDashboardsAndServices(),this.props.setDatadogAPMAuthInfo("apiKey",t.apiKey),this.setState(t,(()=>{this.listDashboards()}))}handleAppKeyInput(e){let t={appKey:e.trim(),errorAppKey:!1};if(i().isEmpty(e.trim()))return t.errorAppKey=!0,this.setState(t),this.resetSelectedDashboardsAndServices(),void this.props.setDatadogAPMAuthInfo("appKey",t.appKey);t.appKey!==i().get(this.props.datadogAPM,"datadogAuthInfo.appKey")&&this.resetSelectedDashboardsAndServices(),this.props.setDatadogAPMAuthInfo("appKey",t.appKey),this.setState(t,(()=>{this.listDashboards()}))}removeEnvironmentSelector(e){const{environments:t}=this.props.datadogAPM;let n=i().cloneDeep(t);i()(n).splice(e,1).value(),this.props.setDatadogAPMEnvs(n)}async listDashboards(){this.integrationsStore.integrationClass||await this.integrationsStore.getIntegrationClassDetails(p.DATADOG_APM_CLASS_ID);const{rule:e}=this.props,{datadogDashboardGuids:t}=this.props.datadogAPM,{apiKey:n,appKey:s,region:o}=this.state,r=i().find(this.integrationsStore.integrationClass.inputs,{key:"dashboard_guids"}),a=i().get(r,"options.serviceActionId"),l=i().get(r,"id");if(i().isEmpty(n)||i().isEmpty(s)||!o)return void this.setState({authenticatingApiKey:!1,authenticationFailed:!1,errorApiKey:!i().isEmpty(s),errorAppKey:!i().isEmpty(n),errorDashboards:!1,loadingDashboards:!1,availableDashboards:[],selectedDashboards:[]});this.setState({authenticatingApiKey:!0,authenticationFailed:!1,errorApiKey:!1,errorAppKey:!1,loadingServices:!0,errorServices:!1,loadingDashboards:!0});const d={rule:e,api_key:n,app_key:s,region:o};c.default[e].listDashboards(d,null,a,l).then((e=>{this.setState({authenticatingApiKey:!1,errorApiKey:!1,errorAppKey:!1,loadingServices:!1});let n=i().map(i().get(e,"dashboards"),(e=>({...e,label:e.title,value:`${b.default.getDatadogHostname(o)}${e.url}`}))),s=i().filter(n,(e=>i().includes(i().map(t,"link"),e.url)));this.setState({availableDashboards:n,loadingDashboards:!1,selectedDashboards:s})})).catch((e=>{pm.logger.error("DatadogAPMSetupForm ~ Monitoring Tab Add Form ~ Error occurred while listing dashboards",e,{context:S}),this.resetSelectedDashboardsAndServices(),this.setState({authenticatingApiKey:!1,authenticationFailed:!0,errorApiKey:!0,errorAppKey:!0,errorDashboards:!1,loadingDashboards:!1,availableDashboards:[],selectedDashboards:[]}),pm.toasts.error("Double check if your API key and region are correct.",{title:"Authentication failed"})}))}render(){const{apiKey:e,appKey:t,region:n,errorApiKey:s,errorAppKey:o,loadingDashboards:a,selectedDashboards:l,availableDashboards:d,errorDashboards:c,authenticationFailed:u}=this.state,{environments:g}=this.props.datadogAPM,m=b.default.areEnvironmentsValid(g);return r.createElement(r.Fragment,null,r.createElement(f.default,{mode:p.ADD_MODE,handleOnApiKeyChange:e=>{this.setState({apiKey:e.target.value})},handleOnApiKeyBlur:()=>{this.handleApiKeyInput(e)},apiKey:e,apiKeyValidationStatus:s&&(u?"error":null),apiKeyValidationMessage:s&&(u?"Invalid API Key or APP key":i().isEmpty(e.trim())&&"Please enter the API key"),handleOnAppKeyChange:e=>{this.setState({appKey:e.target.value})},handleOnAppKeyBlur:()=>{this.handleAppKeyInput(t)},appKey:t,appKeyValidationStatus:o&&(u?"error":null),appKeyValidationMessage:o&&(u?"Invalid API Key or APP key":i().isEmpty(t.trim())&&"Please enter the Application key"),region:n,handleOnRegionChange:e=>{this.onRegionSelectorChange(e)}}),r.createElement(v.default,{mode:p.ADD_MODE,apiKey:e,appKey:t,selectedDashboards:l,availableDashboards:d,handleDashboardsChange:this.onDashboardSelect,isLoadingDashboards:a,errorDashboards:c,environments:g,rule:p.DATADOG_APM_CLASS_ID,onSelectEnvironmentServices:(e,t,n)=>{let s=g;s[n]={id:i().get(g[n],"id"),name:e,services:t},this.props.setDatadogAPMEnvs(s)},region:n,removeEnvironmentSelector:this.removeEnvironmentSelector,handleAddEnvironmentButtonClick:()=>{let e=g;g.push({name:"",services:[],id:h().v4()}),this.props.setDatadogAPMEnvs(e)},isAddEnvironmentButtonDisabled:!m}))}})||s;I.propTypes={apiId:g().string.isRequired,apiVersionId:g().string.isRequired,rule:g().string.isRequired,datadogAPM:g().object.isRequired,setDatadogAPMEnvs:g().func.isRequired,setDatadogAPMAuthInfo:g().func.isRequired,setDatadogAPMDashboardGuids:g().func.isRequired}},"./integrations/monitoring/add/Datadog/DatadogMonitorSetupForm.js":function(e,t,n){n.r(t),n.d(t,{APIKeyInputWrapper:function(){return P},default:function(){return D}});var s,o=n("./node_modules/lodash/lodash.js"),i=n.n(o),r=n("../../node_modules/react/index.js"),a=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("./js/stores/StoreManager.js"),d=n("./js/stores/IntegrationsStore.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/TextInput/TextInput.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),h=n("../../node_modules/@postman/aether/esmLib/src/components/RadioGroup/RadioGroup.js"),b=n("../../node_modules/@postman/aether/esmLib/src/components/Radio/Radio.js"),f=n("../../node_modules/@postman/aether/esmLib/src/components/CheckBoxGroup/CheckboxGroup.js"),v=n("../../node_modules/@postman/aether/esmLib/src/components/CheckBox/Checkbox.js"),S=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-clear-stroke-small.js"),I=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-add-stroke-small.js"),y=n("./integrations/monitoring/constants.js"),E=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/ExternalLink.js"),A=n("./integrations/constants/integrationsConstants.ts"),_=n("./integrations/components/base/MonitorSelector.js"),w=n("./node_modules/prop-types/index.js"),j=n.n(w),C=n("./integrations/monitoring/containers/helpers/DatadogAPMUtils.js");const P=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js").default.div`
  display: flex;
  margin-bottom: var(--spacing-zero) !important;
`;let D=(0,a.observer)(s=class extends r.Component{constructor(e){super(e),this.state={nickname:"",errorNickname:"",errorApiKey:!1},this.integrationsStore=(0,l.resolveStoreInstance)(d.default),this.toggle=this.toggle.bind(this),this.renderMonitorSetupForm=this.renderMonitorSetupForm.bind(this),this.addMonitorSetupForm=this.addMonitorSetupForm.bind(this),this.renderAddMonitorButton=this.renderAddMonitorButton.bind(this),this.onMonitorDataChange=this.onMonitorDataChange.bind(this),this.removeMonitorSetupForm=this.removeMonitorSetupForm.bind(this),this.getAPIKeyTextInput=this.getAPIKeyTextInput.bind(this)}toggle(e){this.setState((t=>({[e]:!t[e]})))}getAPIKeyTextInput(e,t,n,s,o,a){return r.createElement(c.default,{id:"datadog-api-key",type:"password",value:e,label:r.createElement(p.default,{text:"Datadog API Key",fieldType:"required"}),helperText:r.createElement(u.default,null,"Enter the API Key provided by Datadog or  ",r.createElement(E.default,{extUrl:`${C.default.getDatadogHostname(t)}/organization-settings/api-keys`},"generate one here.")),onChange:e=>{n[a]=i().merge(s,{apiKey:e.target.value,errorApiKey:!1}),this.props.setMonitorIntegrationStates(n)},onBlur:()=>{n[a]=i().merge(s,{apiKey:e.trim(),errorApiKey:i().isEmpty(e.trim())}),this.props.setMonitorIntegrationStates(n)},validationStatus:o?"error":null,validationMessage:o?"Please enter an API key":""})}getInitialMonitorState(){return{nickname:y.MONITOR_RUN_DATADOG_INTEGRATION_NAME,errorNickname:"",apiKey:"",errorApiKey:!1,executor:"",region:"us1",metrics:!0,events:!0}}onMonitorDataChange(e,t,n){let s=this.props.monitorIntegrationStates,o=s[e],r={};r[t]=n,s[e]=i().merge(o,r),this.props.setMonitorIntegrationStates(s)}renderMonitorSetupForm(e){let{selectedWorkspace:t,apiId:n,apiVersionId:s,controller:o}=this.props,a=this.props.monitorIntegrationStates,l=a[e],{apiKey:d,executor:c,events:I,metrics:E,region:w}=l,j=i().get(a[e],"errorApiKey");return r.createElement(r.Fragment,null,a.length>1&&r.createElement(g.default,{justifyContent:"space-between",alignItems:"center"},r.createElement(u.default,{type:"strong"}," Setup Postman monitor to send run metrics "),r.createElement(m.default,{type:"tertiary",onClick:()=>this.removeMonitorSetupForm(e),text:"Remove",icon:r.createElement(S.default,null)})),r.createElement(h.default,{name:"Select Datadog site",value:w,direction:"column",onChange:t=>{this.onMonitorDataChange(e,"region",t),a[e]=i().merge(l,{apiKey:"",errorApiKey:!1}),this.props.setMonitorIntegrationStates(a)},label:r.createElement(p.default,{text:"Select Datadog region",type:"primary"}),helperText:"This helps us know what Datadog region to use."},r.createElement(b.default,{label:"US1 (datadoghq.com)",value:"us1"}),r.createElement(b.default,{label:"US3 (us3.datadoghq.com)",value:"us3"}),r.createElement(b.default,{label:"US5 (us5.datadoghq.com)",value:"us5"}),r.createElement(b.default,{label:"EU1 (datadoghq.eu)",value:"eu1"}),r.createElement(b.default,{label:"US1-FED (ddog-gov.com)",value:"us1-fed"})),this.getAPIKeyTextInput(d,w,a,l,j,e),r.createElement(_.default,{executor:c,selectedWorkspace:t,title:"Choose Monitor",description:"The results of the selected monitor will be sent to Datadog.",disabled:!t,onTargetSelect:t=>{this.onMonitorDataChange(e,"executor",t)},apiId:n,apiVersionId:s,configuredIntegrations:o.monitorIntegrationStore.getConfiguredIntegrations(),integrationClassId:y.DATADOG_MONITOR_CLASS_ID,mode:A.INTEGRATION_FORM_MODE.ADD}),r.createElement(g.default,{direction:"column",gap:"spacing-s"},r.createElement(f.default,{label:r.createElement(p.default,{type:"primary",text:"Datadog Events and Metrics"}),helperText:"Select at least one of the following options"},r.createElement(v.default,{label:"Send events for completed runs",isChecked:I,onChange:()=>{this.toggle("events"),this.onMonitorDataChange(e,"events",!l.events)}}),r.createElement(v.default,{label:"Send metrics for each run",isChecked:E,onChange:()=>{this.onMonitorDataChange(e,"metrics",!l.metrics)}}))))}addMonitorSetupForm(){let e=this.props.monitorIntegrationStates;e.push(this.getInitialMonitorState()),this.props.setMonitorIntegrationStates(e)}removeMonitorSetupForm(e){let t=this.props.monitorIntegrationStates;i()(t).splice(e,1).value(),this.props.setMonitorIntegrationStates(t)}renderAddMonitorButton(){let e,t=this.props.monitorIntegrationStates;return i().forEach(t,(t=>{(i().isEmpty(t.nickname)||i().isEmpty(t.apiKey)||i().isEmpty(t.executor)||!t.metrics&&!t.events)&&(e=!0)})),r.createElement(g.default,{width:"fit-content"},r.createElement(m.default,{type:"tertiary",onClick:()=>this.addMonitorSetupForm(),text:"Configure for another monitor",icon:r.createElement(I.default,null),isDisabled:e,tooltip:e&&"Fill in the details to add a new monitor",fullWidth:!1}))}render(){const e=this.props.monitorIntegrationStates;return r.createElement(r.Fragment,null,i().map(e,((e,t)=>this.renderMonitorSetupForm(t))),this.renderAddMonitorButton())}})||s;D.propTypes={controller:j().object.isRequired,apiId:j().string.isRequired,apiVersionId:j().string.isRequired,selectedWorkspace:j().string.isRequired,monitorIntegrationStates:j().array.isRequired,setMonitorIntegrationStates:j().func.isRequired}},"./integrations/monitoring/add/MonitoringSetup.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return _}});var s,o=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("../../node_modules/mobx/lib/mobx.module.js"),a=n("./integrations/monitoring/add/index.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),c=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),p=n("./js/stores/StoreManager.js"),u=n("./integrations/monitoring/stores/APMIntegrationStore.js"),g=n("./js/components/base/LoadingIndicator.js"),m=n("./js/components/base/Tabs.js"),h=n("./integrations/monitoring/constants.js"),b=n("./api-dev/constants/APISubViews.js"),f=n("./integrations/components/CodeRepository/CodeRepositoryAuthenticating.js"),v=n("./integrations/components/error-states/ErrorIntegrations.js"),S=n("./integrations/components/error-states/IntegrationNotSupported.js"),I=n("./integrations/monitoring/customComponents.js"),y=n("./integrations/utils/CommonHelperMethods.ts"),E=n("./js/stores/IntegrationsStore.js"),A=n("./node_modules/lodash/lodash.js");let _=(0,i.observer)(s=class extends o.Component{constructor(e){super(e),this.setActiveTab=e=>this.setState({activeTab:e}),this.store=(0,p.resolveStoreInstance)(u.default),this.integrationsStore=(0,p.resolveStoreInstance)(E.default),this.state={loading:!0,error:!1,errorDetails:"",description:"",authType:"",selectedClassData:{},selectedServiceName:this.store.selectedServiceName,selectedAPI:e.controller.apiId,selectedAPIVersion:e.controller.version,activeTab:"authenticate"},this.setActiveTab=this.setActiveTab.bind(this),this.populateRuleDetails=this.populateRuleDetails.bind(this)}componentDidMount(){const{selectedAPI:e,selectedAPIVersion:t}=this.state;t||(0,y.getAPIDetails)(e).then((e=>{const t=A.get(e,"version.id");this.props.controller.setAPIVersion(t),this.setState({selectedAPIVersion:t})})),this.populateRuleDetails()}setSelectedClassData(e,t){const n=A.find(e,(e=>e.id===t))||{};this.setState({selectedClassData:n})}async populateRuleDetails(){await(0,r.when)((()=>!A.isEmpty(this.store.selectedRule)));const{selectedRule:e}=this.store;let t=this.integrationsStore.getIntegrationClasses();A.isEmpty(t)&&(await(0,r.when)((()=>!this.integrationsStore.loadingIntegrationClasses)),t=this.integrationsStore.getIntegrationClasses()),this.setSelectedClassData(t,e)}render(){const{selectedAPI:e,selectedAPIVersion:t,activeTab:n,selectedClassData:s}=this.state,i=A.get(s,"meta.authType"),r=A.get(s,"description",""),p=this.integrationsStore.loadingIntegrationClasses,{selectedService:u,selectedRule:y}=this.store,E=A.has(I.serviceBasedCustomComponents,u),_=A.get(s,"clientCategories",[]),{controller:w}=this.props;return A.isEmpty(u)||E?p||w.isHydratingStore||A.isEmpty(s)?o.createElement("div",{className:"integrations-page-container"},o.createElement(g.default,null)):w.oauthStatus===h.AUTH_STATES.AUTHORISING?o.createElement("div",{className:"integrations-page-container"},o.createElement("div",{className:"integrations-add"},o.createElement("div",{className:"integrations-add-card"},o.createElement(f.default,{connecting:!0,selectedServiceForAuthorization:u,handleStop:()=>{w.handleOauthStop()},handleOauthTimeout:()=>{w.handleOauthTimeout()},oauthTimeoutInterval:w.OAUTH_TIMEOUT_INTERVAL})))):w.oauthStatus===h.AUTH_STATES.FAILED?o.createElement(v.default,{error:{title:"Something went wrong",message:"Something went wrong while authorising the user. Please close the tab and try again."}}):o.createElement("div",{className:"integrations-page-container"},o.createElement("div",{className:"integrations-add"},o.createElement("div",{className:"integrations-add-card"},o.createElement(l.default,{type:"h1",text:`Connect to ${h.RULE_TO_TITLE[y]}`}),!A.isEmpty(r)&&o.createElement(d.default,{type:"lead",className:"monitor-integration-description"},r),"basic_auth"!==i&&"token"!==i||A.some(_,(e=>{const t=A.get(e,"key");return t===h.API_MONITORING||t===h.API_PERFORMANCE_INTEGRATION}))?o.createElement(a.default,{rule:y,service:u,apiId:e,apiVersionId:t,controller:w,source:h.CREATE_SOURCE}):o.createElement(o.Fragment,null,o.createElement("div",{className:"integrations-add-card__auth-tabs"},o.createElement(m.Tabs,{activeRef:n,className:"integrations-add-card__auth-tabs-wrapper",defaultActive:"authenticate",type:"primary"},o.createElement(m.Tab,{className:"integrations-add-card__auth-tabs-tab",refKey:"authenticate",disabled:"configure"===n},o.createElement("div",{className:"integrations-add-card__auth-tabs-tab-title"},o.createElement("div",{className:"integrations-add-card__auth-tabs-tab-title__label"},"1. Authenticate","configure"===n?o.createElement(c.default,{name:"icon-state-success-stroke",color:"content-color-primary",className:"integrations-add-card__authenticated-icon"}):""))),o.createElement(m.Tab,{className:"integrations-add-card__auth-tabs-tab",refKey:"configure",disabled:"authenticate"===n},o.createElement("div",{className:"integrations-add-card__auth-tabs-tab-title"},o.createElement("div",{className:"integrations-add-card__auth-tabs-tab-title__label"},"2. Configure"))))),o.createElement(a.default,{rule:y,service:u,apiId:e,apiVersionId:t,setActiveTab:e=>{this.setActiveTab(e)},controller:w,source:h.CREATE_SOURCE}))))):o.createElement(S.default,{apiId:e,apiVersionId:t,tab:b.MONITORING})}})||s},"./integrations/monitoring/add/NewRelic.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return W}});var s,o=n("./node_modules/lodash/lodash.js"),i=n.n(o),r=n("../../node_modules/react/index.js"),a=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("./js/stores/IntegrationsStore.js"),d=n("./js/stores/StoreManager.js"),c=n("./integrations/monitoring/stores/APMIntegrationStore.js"),p=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),u=n("./integrations/components/base/MonitorSelector.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/Stepper/Stepper.js"),h=n("../../node_modules/@postman/aether/esmLib/src/components/Stepper/StepHeader.js"),b=n("../../node_modules/@postman/aether/esmLib/src/components/Stepper/Step.js"),f=n("../../node_modules/@postman/aether/esmLib/src/components/Stepper/StepPanels.js"),v=n("../../node_modules/@postman/aether/esmLib/src/components/Stepper/StepPanel.js"),S=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/MultiSelect/MultiSelect.js"),I=n("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),y=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),E=n("../../node_modules/@postman/aether/esmLib/src/components/RadioGroup/RadioGroup.js"),A=n("../../node_modules/@postman/aether/esmLib/src/components/Radio/Radio.js"),_=n("../../node_modules/@postman/aether/esmLib/src/components/CheckBox/Checkbox.js"),w=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-clear-stroke-small.js"),j=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-add-stroke-small.js"),C=n("./integrations/monitoring/services/index.js"),P=n("./integrations/navigation/constants.js"),D=n("./integrations/monitoring/constants.js"),T=n("./api-dev/constants/APISubViews.js"),M=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/ExternalLink.js"),x=n("./js/services/NavigationService.js"),N=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationInstanceService.ts"),O=n("./appsdk/workbench/TabService.js"),k=n("./js/modules/services/AnalyticsService.js"),R=n("./integrations/utils/CommonHelperMethods.ts"),L=n("./integrations/constants/integrationsConstants.ts"),V=n("./integrations/monitoring/components/NewRelic/AddComponents.js"),F=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/ConnectedAccounts/IntegrationForms/FormHeader/ConnectedAccountsIntegrationFormHeader.js"),U=n("./integrations/services/AuthenticationInstanceService.ts"),H=n("./js/stores/CurrentUserStore.js"),K=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/UserService.ts"),B=n("./js/services/CurrentUserDetailsService.js");const G=pm.logger.getContext("NewRelicAdd","integrations");let W=(0,a.observer)(s=class extends r.Component{constructor(e){super(e),this.state={nickname:"",apiKey:"",activeStepIndex:0,stepperStatuses:["progress","pending"],isCreatingIntegration:!1,authenticationFailed:!1,addNewRelicToTeam:!1,errorNickname:"",errorApiKey:"",monitor:"",region:D.NEW_RELIC_REGIONS.US,dashboardGuids:[],monitorIntegrationStates:[{nickname:D.MONITOR_RUN_NR_INTEGRATION_NAME,errorNickname:"",apiKey:"",errorApiKey:"",executor:""}],monitorIntegrationsToBeCreated:[],authenticationInstances:[],loadingAuthenticationInstances:!0,isUsingApiKeyInput:!1,installedAppFeatureFlag:!1},this.store=(0,d.resolveStoreInstance)(c.default),this.integrationsStore=(0,d.resolveStoreInstance)(l.default),this.toggle=this.toggle.bind(this),this.onRegionSelectorChange=this.onRegionSelectorChange.bind(this),this.onServiceSelect=this.onServiceSelect.bind(this),this.handleApiKeyInput=this.handleApiKeyInput.bind(this),this.listServices=this.listServices.bind(this),this.onDashboardSelect=this.onDashboardSelect.bind(this),this.setActiveStepIndex=this.setActiveStepIndex.bind(this),this.authenticateApiKey=this.authenticateApiKey.bind(this),this.renderSkipButton=this.renderSkipButton.bind(this),this.authenticateApiKeyDebounced=i().debounce(this.authenticateApiKey,1e3),this.renderMonitorSetupForm=this.renderMonitorSetupForm.bind(this),this.addMonitorSetupForm=this.addMonitorSetupForm.bind(this),this.prepareMonitorSetupPayload=this.prepareMonitorSetupPayload.bind(this),this.renderAddMonitorButton=this.renderAddMonitorButton.bind(this),this.onMonitorSelect=this.onMonitorSelect.bind(this),this.createNewRelicAPMIntegrationInstance=this.createNewRelicAPMIntegrationInstance.bind(this),this.removeMonitorSetupForm=this.removeMonitorSetupForm.bind(this),this.fetchAuthenticationInstances=this.fetchAuthenticationInstances.bind(this),this.reauthenticate=this.reauthenticate.bind(this),this.client_category=D.API_MONITORING,this.createAuthenticationInstance=this.createAuthenticationInstance.bind(this)}componentDidMount(){let{stepperStatuses:e}=this.state,t=i().find(this.store.getConfiguredIntegrations(),{rule:D.NEW_RELIC_APM_CLASS_ID}),n=(0,D.isFeatureFlagEnabled)(D.NEW_RELIC_APM_CLASS_ID);i().isEmpty(t)||(e[1]="progress",e[0]="completed",this.setState({stepperStatuses:e,activeStepIndex:1,isCreatingIntegration:!1,configuredAPMIntegration:t,hasAPMIntegrationConfigured:!0,region:i().get(t,"variables.region","us")})),n?(this.setState({installedAppFeatureFlag:n}),this.fetchAuthenticationInstances()):this.setState({isUsingApiKeyInput:!0,loadingAuthenticationInstances:!1})}fetchAuthenticationInstances(){const e=(0,d.resolveStoreInstance)(H.default);this.setState({loadingAuthenticationInstances:!0}),U.default.listAuthenticationInstances({scope:[{type:D.AUTHENTICATION_INSTANCE_SCOPES.TEAM,id:e.teamId}],authenticationClass:[D.AUTHENTICATION_CLASSES.NEW_RELIC_USER],service:[D.NEW_RELIC_SERVICE_ID]}).then((({body:e})=>{if(i().isNil(e.data))return pm.logger.error("BrowseIntegrations-AddNewRelic~Error loading authentication instances! Received null response!",{body:e},{context:G}),this.setState({loadingAuthenticationInstances:!1});if(i().isEmpty(e.data))return this.setState({isUsingApiKeyInput:!0,authenticationInstances:[],loadingAuthenticationInstances:!1});const t=i().head(e.data);K.default.fetchUserInfo(t.createdBy,((n,s)=>(n&&pm.logger.error("Error occurred while fetching user meta for authentication instance",n),t.createdByDetails=i().get(s,["body","users",t.createdBy]),this.setState({authenticationInstances:e.data,isUsingApiKeyInput:!1,loadingAuthenticationInstances:!1},(()=>{this.listServices(),this.listDashboards()})))))})).catch((e=>(pm.logger.error("APIBuilder-AddNewRelic~Error loading authentication instances!",e,{context:G}),this.setState({isUsingApiKeyInput:!0,loadingAuthenticationInstances:!1}))))}toggle(e){this.setState((t=>({[e]:!t[e]})))}onServiceSelect(e){if(!i().isArray(e))return;let t=i().map(e,(e=>e.value));this.setState({selectedService:e,serviceGuids:t})}onDashboardSelect(e){if(!i().isArray(e))return;let t=i().map(e,(e=>e.value));this.setState({selectedDashboard:e,dashboardGuids:t})}onRegionSelectorChange(e){this.setState({region:e})}handleApiKeyInput(e){this.setState({apiKey:e.trim(),errorApiKey:i().isEmpty(e.trim())?"Please enter an API key":""},(()=>{this.listServices(),this.listDashboards()}))}listServices(){const{rule:e}=this.props,{apiKey:t,region:n,isUsingApiKeyInput:s,authenticationInstances:o}=this.state,r={rule:e,type:"listServices"};s?(r.api_key=t,r.region=n):r.serviceAuth=i().head(o).id,this.setState({loadingServices:!0,errorServices:!1}),C.default[e].listServices(r).then((e=>{const t=i().map(i().get(e,"data.actor.entitySearch.results.entities"),(e=>({label:e.name,value:e.guid,...e})));this.setState({availableServices:t,loadingServices:!1})})).catch((e=>{this.setState({errorServices:!0,loadingServices:!1,availableServices:[],selectedService:[]})}))}listDashboards(){const{rule:e}=this.props,{apiKey:t,region:n,isUsingApiKeyInput:s,authenticationInstances:o}=this.state,r={rule:e,type:"listDashboards"};s?(r.api_key=t,r.region=n):r.serviceAuth=i().head(o).id,this.setState({loadingDashboards:!0,errorDashboards:!1}),C.default[e].listServices(r).then((e=>{let t=i().map(i().get(e,"data.actor.entitySearch.results.entities"),(e=>({label:e.name,value:e.guid,...e})));this.setState({availableDashboards:t,loadingDashboards:!1})})).catch((e=>{this.setState({errorDashboards:!0,loadingDashboards:!1,availableDashboards:[],selectedDashboard:[]})}))}createAuthenticationInstance(){const{apiKey:e,region:t}=this.state,n=[{type:D.AUTHENTICATION_INSTANCE_SCOPES.TEAM,id:B.default.teamId}],s={user_key:e,region:t},o=D.AUTHENTICATION_CLASSES.NEW_RELIC_USER;return new Promise(((e,t)=>{U.default.createAuthenticationInstance(o,n,s).then((n=>{const s=i().get(n,"body.data[0].id");s?e(s):t(n&&n.body)})).catch((e=>{t(e)}))}))}authenticateApiKey(){const{rule:e}=this.props,{apiKey:t,region:n}=this.state;this.setState({authenticatingApiKey:!0,authenticationFailed:!1,errorApiKey:!1,loadingServices:!0,errorServices:!1}),C.default[e].authenticateApiKey({rule:e,type:"getUserInfo",api_key:t,region:n}).then((e=>{this.setState({authenticatingApiKey:!1,errorApiKey:!1,loadingServices:!1},(()=>{this.listServices(),this.listDashboards()}))})).catch((e=>{this.setState({authenticatingApiKey:!1,authenticationFailed:!0,errorApiKey:!0,loadingServices:!1}),pm.toasts.error("Double check if your API key and region are correct.",{title:"Authentication failed"})}))}setActiveStepIndex(e){let{apmSetupStatus:t,monitorSetupStatus:n,hasAPMIntegrationConfigured:s}=this.state,o=[t,n];o=i().map(o,((t,n)=>"completed"===t?"completed":n===e?"progress":"pending")),s&&(o[0]="completed"),this.setState({stepperStatuses:o,activeStepIndex:e})}renderSkipButton(e){let{apiId:t,apiVersionId:n}=this.props;return r.createElement(g.default,{className:"integrations-add-actions__button--cancel",type:"secondary",text:D.SKIP_BUTTON_TEXT[e],onClick:()=>{"configureAPM"===e?this.setState({stepperStatuses:["pending","progress"],activeStepIndex:1}):(O.default.closeByRoute(P.V10_API_ADD_APM_INTEGRATION_URL,{apiId:t}),x.default.transitionTo("build.apiVersion",{apiId:t,versionId:n},{tab:T.MONITORING}))}})}createNewRelicAPMIntegrationInstance(e){let{name:t,inputs:n}=e,{postman_api_id:s,apiversion:o}=n;return new Promise(((e,i)=>{N.default.createIntegrationInstance(D.NEW_RELIC_APM_CLASS_ID,t,n).then((t=>{200===t.status&&t.body.model_id?(pm.toasts.success("Added a new integration"),k.default.addEventV2({category:"integrations",action:D.NEW_RELIC_APM_CLASS_ID+"_created_integration",label:"api_workbench_monitoring_tab",value:1}),pm.windowEvents.emit(`${D.API_MONITORING}-integration-added`,{apiId:s,apiVersionId:o}),(0,R.postAddIntegrationActions)(D.NEW_RELIC_APM_CLASS_ID,c.default,{enitityType:"apiversion",entityId:o}),e(t.body)):(pm.toasts.error("Something went wrong while adding a new integration"),this.setState({isCreatingIntegration:!1}),i(t&&t.body))})).catch((e=>{pm.toasts.error(e.error.details&&e.error.details.message||e.error.message||"Something went wrong while adding a new integration"),pm.logger.error("Something went wrong while adding a new integration",e),this.setState({isCreatingIntegration:!1}),i(e)}))}))}createIntegrationInstanceBulk(e){return new Promise(((t,n)=>{N.default.createIntegrationInstanceBulk(e).then((s=>{200===s.status?(pm.toasts.success(`Added ${e.length} new integrations.`),k.default.addEventV2({category:"integrations",action:D.NEW_RELIC_MONITOR_CLASS_ID+"_created_integration",label:"api_workbench_monitoring_tab",value:e.length}),t(s.body)):(pm.toasts.error("Something went wrong while adding a new integration"),this.setState({isCreatingIntegration:!1}),n(s&&s.body))})).catch((e=>{pm.toasts.error(e.error.details&&e.error.details.message||e.error.message||"Something went wrong while adding a new integration"),pm.logger.error("Something went wrong while adding a new integration",e),this.setState({isCreatingIntegration:!1}),n(e)}))}))}async handleConnectAPMClick(e,t){let n;if(this.setState({isCreatingIntegration:!0}),t)try{n=await this.createAuthenticationInstance(),e.inputs.auth=n,delete e.inputs.api_key,delete e.inputs.region}catch(e){return this.setState({isCreatingIntegration:!1}),e.name===D.TEAM_AUTH_FORBIDDEN_ERROR?pm.toasts.error(D.ADD_NEW_RELIC_TO_TEAM_FORBIDDEN):pm.toasts.error(D.ERROR_ADDING_NEW_RELIC_TO_TEAM),void pm.logger.error("Error while adding authentication instance for New Relic",e,G)}this.createNewRelicAPMIntegrationInstance(e).then((()=>{this.setState({stepperStatuses:["completed","progress"],activeStepIndex:1,isCreatingIntegration:!1})})).catch((()=>{this.setState({isCreatingIntegration:!1})}))}handleConnectMonitoringClick(e){const{postman_api_id:t,apiversion:n}=e.inputs;let s=this.prepareMonitorSetupPayload();this.setState({isCreatingIntegration:!0}),this.createIntegrationInstanceBulk(s).then((()=>{this.setState({isCreatingIntegration:!1}),O.default.closeByRoute(P.V10_API_ADD_APM_INTEGRATION_URL,{apiId:t}),x.default.transitionTo("build.apiVersion",{apiId:t,versionId:n},{tab:T.MONITORING})})).catch((()=>{this.setState({isCreatingIntegration:!1})}))}renderConnectButton(e,t){let n,{apiKey:s,region:o,isCreatingIntegration:a,serviceGuids:l,monitorIntegrationStates:d,addNewRelicToTeam:c}=this.state,{auth:p}=t.inputs,u=!1;return(p||!i().isEmpty(s)&&o)&&(u=!0),"configureAPM"===e?n=a||!u||i().isEmpty(l):i().forEach(d,(e=>{(i().isEmpty(e.apiKey)||i().isEmpty(e.executor))&&(n=!0)})),r.createElement(g.default,{type:"primary",text:"Connect",className:"integrations-add-actions__button--proceed",isLoading:a,isDisabled:n,tooltip:n&&"Fill in the details to continue",onClick:async()=>{"configureAPM"===e?await this.handleConnectAPMClick(t,c):"configureMonitoring"===e&&this.handleConnectMonitoringClick(t)}})}renderMonitorSetupForm(e){let{monitorIntegrationStates:t}=this.state,{selectedWorkspace:n,apiId:s,apiVersionId:o,controller:a}=this.props,l=t[e],{nickname:d,errorNickname:c,apiKey:m,errorApiKey:h,executor:b}=l;return r.createElement(r.Fragment,null,e>0&&r.createElement(r.Fragment,null,r.createElement(V.MonitorSetupSectionSeparator,null),r.createElement(V.MonitoringSetupFormTitleContainer,null,r.createElement(V.MonitoringSetupFormTitle,null,`Monitor (${e+1}) Setup`),r.createElement(V.RemoveButtonContainer,null,r.createElement(g.default,{type:"tertiary",onClick:()=>this.removeMonitorSetupForm(e),text:"Remove",icon:r.createElement(w.default,null)})))),r.createElement(p.WorkspaceSelectorV2,{description:"Select the workspace to which your monitor belongs to",selectedWorkspace:n}),r.createElement(p.SensitiveFieldSegmentV2,{title:"New Relic API Key",description:"Enter the Ingest-Licence Key provided by New Relic or ",customLink:r.createElement(M.default,{extUrl:"https://go.pstmn.io/docs-newrelic-insights-key"},"generate one here"),id:"new-relic-key",value:m,error:i().get(t[e],"errorApiKey"),onChange:n=>{t[e]=i().merge(l,{apiKey:n.target.value,errorApiKey:""}),this.setState({monitorIntegrationStates:t})},onBlur:()=>{t[e]=i().merge(l,{apiKey:m.trim(),errorApiKey:i().isEmpty(m.trim())?"Please enter an API key":""}),this.setState({monitorIntegrationStates:t})}}),r.createElement(u.default,{executor:b,selectedWorkspace:n,title:"Choose Monitor",description:"The results of the selected monitor will be sent to New Relic",disabled:!n,onTargetSelect:t=>{this.onMonitorSelect(e,t)},apiId:s,apiVersionId:o,configuredIntegrations:a.monitorIntegrationStore.getConfiguredIntegrations(),integrationClassId:D.NEW_RELIC_MONITOR_CLASS_ID,mode:L.INTEGRATION_FORM_MODE.ADD}))}addMonitorSetupForm(){this.setState((e=>{let{monitorIntegrationStates:t}=e;return t.push({nickname:D.MONITOR_RUN_NR_INTEGRATION_NAME,errorNickname:"",apiKey:"",errorApiKey:"",executor:""}),{monitorIntegrationStates:t}}))}removeMonitorSetupForm(e){this.setState((t=>{let{monitorIntegrationStates:n}=t;return i()(n).splice(e,1).value(),{monitorIntegrationStates:n}}))}prepareMonitorSetupPayload(){let e,{monitorIntegrationStates:t,region:n}=this.state;return e=i().map(t,(e=>({name:e.nickname,class:D.NEW_RELIC_MONITOR_CLASS_ID,inputs:[{key:"api_key",value:e.apiKey},{key:"region",value:n},{key:"monitor",value:i().get(e,"executor.value")}]}))),e}onMonitorSelect(e,t){this.setState((n=>{let{monitorIntegrationStates:s}=n,o=s[e];return s[e]=i().merge(o,{executor:t}),{monitorIntegrationStates:s}}))}renderAddMonitorButton(){let e,{monitorIntegrationStates:t}=this.state;return i().forEach(t,(t=>{(i().isEmpty(t.nickname)||i().isEmpty(t.apiKey)||i().isEmpty(t.executor))&&(e=!0)})),r.createElement(r.Fragment,null,r.createElement(V.MonitorSetupSectionSeparator,null),r.createElement(V.AddMonitorButtonContainer,null,r.createElement(g.default,{type:"tertiary",onClick:()=>this.addMonitorSetupForm(),text:"Add Monitor",icon:r.createElement(j.default,null),isDisabled:e,tooltip:e&&"Fill in the details to add a new monitor"})))}reauthenticate(){this.setState({isUsingApiKeyInput:!0,availableDashboards:[],loadingDashboards:!1,availableServices:[],loadingServices:!1,selectedService:[],selectedDashboard:[]})}render(){const{apiKey:e,region:t,errorApiKey:n,availableServices:s,selectedService:o,loadingServices:a,loadingDashboards:l,selectedDashboard:d,availableDashboards:c,serviceGuids:u,dashboardGuids:g,errorServices:w,errorDashboards:j,activeStepIndex:C,stepperStatuses:P,authenticationFailed:T,monitorIntegrationStates:x,authenticationInstances:N,loadingAuthenticationInstances:O,isUsingApiKeyInput:k,addNewRelicToTeam:R,installedAppFeatureFlag:L}=this.state,{rule:V,apiId:U,apiVersionId:H}=this.props,K=P[0],B=P[1];let G={name:D.APM_NR_INTEGRATION_NAME,class:V,inputs:{...k?{api_key:e,region:t}:{auth:N.length>0?i().head(N).id:""},postman_api_id:U,apiversion:H,service_guids:u,dashboard_guids:g}};return r.createElement(m.default,{activeStepIndex:C,onChange:this.setActiveStepIndex},r.createElement(h.default,null,r.createElement(b.default,{label:"Monitor API performance",status:K,isDisabled:"completed"===K}),r.createElement(b.default,{label:"Post monitoring results",status:B})),r.createElement(f.default,null,r.createElement(v.default,{className:"add-integration-step-panel",heading:"Monitor API Performance from Postman",description:"View New Relic metrics and statuses directly from Postman",primaryAction:this.renderConnectButton("configureAPM",G),secondaryAction:this.renderSkipButton("configureAPM")},k?r.createElement(p.SensitiveFieldSegmentV2,{title:"New Relic API Key",description:"Enter the User Key provided by New Relic or ",customLink:r.createElement(M.default,{extUrl:"https://go.pstmn.io/docs-newrelic-insights-key"},"generate one here"),id:"new-relic-key",value:e,error:n&&(T?"Invalid API Key":i().isEmpty(e.trim())&&"Please enter the API key"),onChange:e=>{this.setState({apiKey:e.target.value,errorApiKey:!1},(()=>this.authenticateApiKeyDebounced()))},onBlur:()=>{this.setState({apiKey:e.trim(),errorApiKey:!!i().isEmpty(e.trim()),authenticationFailed:!i().isEmpty(e.trim())})}}):r.createElement(F.default,{connectedAccount:i().head(N),isLoading:O,isUsingPersonalCredentials:k,reauthenticateCallback:this.reauthenticate,primarySuccessText:"Connected to an account on New Relic by "+i().get(i().head(N),"createdByDetails.name","your team member"),primaryOrphanedText:"Connected New Relic account was removed",reauthenticateText:"Connect to different New Relic account"}),r.createElement(S.default,{menuMaxHeight:"36vh",value:o,options:s,placeholder:"Select New Relic Services",label:r.createElement(I.default,{text:"Services",infoText:"New Relic Charts will be fetched via a public URL."}),onChange:this.onServiceSelect,isLoading:a,error:w&&"Unable to load services",emptyStateMessage:"No services found"}),r.createElement(S.default,{menuMaxHeight:"28vh",value:d,options:c,placeholder:"Select Dashboards",label:r.createElement(I.default,{text:"Link Dashboards (Optional)"}),onChange:this.onDashboardSelect,isLoading:l,error:j&&"Unable to load dashboards",emptyStateMessage:"No dashboards found"}),k?r.createElement(r.Fragment,null,r.createElement("div",{className:"push-double--bottom__add-to-team"},r.createElement(I.default,{text:"New Relic region",type:"primary"}),r.createElement(y.default,{type:"para"},"This helps us know what New Relic region to use"),r.createElement(E.default,{name:"Select New Relic site",value:this.state.region,direction:"column",onChange:e=>{this.onRegionSelectorChange(e)}},r.createElement(A.default,{label:"US (.com)",value:"us"}),r.createElement(A.default,{label:"EU (.eu)",value:"eu"}))),L&&!O&&i().isEmpty(N)?r.createElement("div",null,r.createElement(_.default,{isChecked:R,label:D.ADD_NEW_RELIC_TO_TEAM.LABEL,helperText:D.ADD_NEW_RELIC_TO_TEAM.HELPER_TEXT,onChange:()=>{this.setState({addNewRelicToTeam:!R})}})):null):null),r.createElement(v.default,{className:"add-integration-step-panel",heading:"Post monitoring results",description:"Send your monitor run metrics to New Relic.",primaryAction:this.renderConnectButton("configureMonitoring",G),secondaryAction:this.renderSkipButton("configureMonitoring")},i().map(x,((e,t)=>this.renderMonitorSetupForm(t))),this.renderAddMonitorButton())))}})||s},"./integrations/monitoring/add/index.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return g}});var s=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx/lib/mobx.module.js"),i=n("./appsdk/workbench/TabService.js"),r=n("./integrations/navigation/constants.js"),a=n("./integrations/monitoring/customComponents.js"),l=n("./integrations/components/base/IntegrationCreateDataFormatWrapper.js"),d=n("./node_modules/lodash/lodash.js");function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},c.apply(this,arguments)}let p;function u(e,t){i.default.closeByRoute(r.V10_API_ADD_APM_INTEGRATION_URL,{apiId:p.apiId})}function g(e){const{service:t,source:n}=e,i=d.get(e,"controller.apiVersionItemStore.apiName"),r=d.get(e,"controller.apiVersionItemStore.name"),g=d.get(a.serviceBasedCustomComponents,[t,"customCreateComponent"]);return p=e.controller,g?d.get(a.serviceBasedCustomComponents,[t,"useLegacyDataFormat"],!1)?s.createElement(g,c({},e,{apiName:i,apiVersionName:r,integrationFormActions:u,selectedWorkspace:(0,o.toJS)(p.currentWorkspace),source:n})):s.createElement(l.IntegrationCreateDataFormatWrapper,c({},e,{FormComponent:g,workspaceId:d.get((0,o.toJS)(p.currentWorkspace),"value"),postCreationAction:u})):s.createElement("div",null)}},"./integrations/monitoring/components/DatadogMonitorStatus.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return b}});var s=n("../../node_modules/react/index.js"),o=n("../../node_modules/@postman/aether/esmLib/src/components/Badge/Badge.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),a=(n("./js/external-navigation/ExternalNavigationService.js"),n("./integrations/monitoring/constants.js")),l=n("./node_modules/prop-types/index.js"),d=n.n(l);const{ALERT:c,WARN:p,NO_DATA:u,OK:g,NO_MONITORS:m,UNAVAILABLE:h}=a.DATADOG_MONITOR_STATUSES;function b(e){const t=e.numMonitors?`${e.numMonitors} `:"",n={[p]:s.createElement(o.default,{status:"warning",text:`${t+p}`,className:"health-status-badge"}),[c]:s.createElement(o.default,{status:"critical",text:`${t+c}`,className:"health-status-badge"}),[g]:s.createElement(o.default,{status:"success",text:`${t+g}`,className:"health-status-badge"}),[u]:s.createElement(o.default,{status:"neutral",text:`${t+u}`,className:"health-status-badge"}),[m]:s.createElement(i.default,{type:"para"},"No Monitors"),[h]:s.createElement(r.default,{size:"small"})};return n[e.alertSeverity]||n[m]}b.defaultProps={alertSeverity:m,numMonitors:0},b.propTypes={alertSeverity:d().string,numMonitors:d().number}},"./integrations/monitoring/components/DatadogTriggeredMonitorsTable.js":function(e,t,n){n.r(t);var s=n("../../node_modules/react/index.js"),o=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Table/Table.js"),a=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),l=n("./node_modules/lodash/lodash.js"),d=n.n(l),c=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),p=n("./appsdk/components/link/Link.js"),u=n("./integrations/monitoring/constants.js"),g=n("./js/modules/services/AnalyticsService.js"),m=n("./js/external-navigation/ExternalNavigationService.js"),h=n("./integrations/monitoring/components/DatadogMonitorStatus.js"),b=n("./integrations/monitoring/containers/helpers/DatadogAPMUtils.js");t.default=(0,c.observer)((e=>{const[t,n]=(0,s.useState)(d().isEmpty(e.data)&&!e.loadingTriggeredMonitors);(0,s.useEffect)((()=>{n(d().isEmpty(e.data)&&!e.loadingTriggeredMonitors)}),[e.data,e.loadingTriggeredMonitors]);const l=[{Header:()=>s.createElement(o.default,{inline:!0,gap:"spacing-xs"},s.createElement(i.default,{type:"strong"},"Name")),cellWidth:"180px",id:"name",accessor:e=>[d().get(e,"name"),e],Cell:({value:t})=>{const[n,r]=t;return s.createElement(p.default,{onClick:t=>{t.preventDefault(),(t=>{const n=`${b.default.getDatadogHostname(e.region)}/monitors/${t}`;n&&(0,m.openExternalLink)(n,"_blank"),g.default.addEventV2({category:"apm-integration",action:"view-triggered-monitor",label:u.DATADOG_APM_CLASS_ID,value:1})})(r.id)}},s.createElement(i.default,{type:"link-subtle",isTruncated:!0},s.createElement(o.default,null,n,s.createElement("div",null,s.createElement(a.default,{name:"icon-action-openWeb-stroke",color:"content-color-primary"})))))},align:"left"},{Header:()=>s.createElement(o.default,{inline:!0,gap:"spacing-xs"},s.createElement(i.default,{type:"strong"},"Opened at")),cellWidth:"42px",id:"opened_at",accessor:e=>[d().get(e,"timestamp")],Cell:({value:e})=>{const[t]=e;return s.createElement(i.default,{isTruncated:!0},t)},align:"left"},{Header:()=>s.createElement(o.default,{inline:!0,gap:"spacing-xs"},s.createElement(i.default,{type:"strong"},"Status")),cellWidth:"42px",id:"status",accessor:e=>[d().get(e,"status"),e],Cell:({value:e})=>{const[t,n]=e;return s.createElement(h.default,{alertSeverity:t})},align:"left"}];return s.createElement(o.default,{className:"apm-services-table",width:"100%",direction:"column",gap:"spacing-m"},s.createElement(r.default,{data:e.data,columns:l,blankState:{isEmpty:t,component:s.createElement(o.default,{padding:{paddingLeft:"spacing-s"}},s.createElement(i.default,{type:"para"},"No monitors were triggered for current service."))},loader:{isLoading:e.loadingTriggeredMonitors}}))}))},"./integrations/monitoring/components/HealthStatus.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return p}});var s=n("../../node_modules/react/index.js"),o=n("../../node_modules/@postman/aether/esmLib/src/components/Badge/Badge.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Popover/Popover.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),l=n("./appsdk/components/link/Link.js"),d=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-state-info-stroke-small.js");const c={CRITICAL:s.createElement(o.default,{status:"critical",text:"Critical",className:"health-status-badge"}),WARNING:s.createElement(o.default,{status:"warning",text:"Warning",className:"health-status-badge"}),NOT_ALERTING:s.createElement(o.default,{status:"success",text:"Healthy",className:"health-status-badge"}),NOT_CONFIGURED:s.createElement(i.default,{triggerEvent:"click",placement:"bottom-start",padding:"spacing-s",trigger:s.createElement(r.default,{type:"muted-plain",text:"Alerts not configured",icon:s.createElement(d.default,null)})},s.createElement("div",{className:"alert-config-info-popover"},s.createElement(a.default,{type:"para",color:"content-color-primary"},"Learn how to configure ",s.createElement(l.default,{to:"https://docs.newrelic.com/docs/alerts-applied-intelligence/new-relic-alerts/alert-policies/create-edit-or-find-alert-policy/",target:"_blank"},s.createElement(a.default,{type:"link-default",isExternal:!0},"alert policy")))))};function p(e){return c[e.alertSeverity]||c.NOT_CONFIGURED}},"./integrations/monitoring/components/NewRelic/AddComponents.js":function(e,t,n){n.r(t),n.d(t,{AddMonitorButtonContainer:function(){return a},MonitorSetupSectionSeparator:function(){return r},MonitoringSetupFormTitle:function(){return i},MonitoringSetupFormTitleContainer:function(){return o},MultiSelectContainer:function(){return c},MultiSelectDiv:function(){return p},MultiSelectWrapper:function(){return d},RadioButtonDiv:function(){return u},RemoveButtonContainer:function(){return l}});var s=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js");const o=s.default.div`
  display: flex;
  margin-bottom: var(--spacing-zero) !important;
`,i=s.default.div`
  color: var(--content-color-primary);
  font-weight: var(--text-weight-medium);
  font-size: var(--text-size-m);
  line-height: var(--line-height-m);
`,r=s.default.div`
  border-top: var(--border-width-default) var(--border-style-solid) var(--border-color-default);
`,a=s.default.div`width: fit-content;`,l=s.default.div`width: fit-content; float: right; margin-left: auto;`,d=s.default.div`display: flex; flex-direction: column; padding-right: 10px; padding-top: 16px`,c=s.default.div`display: flex; flex-direction: column`,p=s.default.div`padding: 10px`,u=s.default.div`margin-bottom: var(--spacing-l); padding-top: var(--spacing-l)`},"./integrations/monitoring/components/StatsListItem.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return a}});var s,o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),i=n("../../node_modules/react/index.js"),r=(n("./js/services/NavigationService.js"),n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/integrationRunsListing/utils/utils.js"),n("./node_modules/lodash/lodash.js"));let a=(0,o.observer)(s=class extends i.Component{constructor(e){super(e),this.statusClassnames={CRITICAL:"monitoring-services-table-row-cell-status-critical",WARNING:"monitoring-services-table-row-cell-status-warning",openedAt:"monitoring-services-table-row-cell-opened-at",closedAt:"monitoring-services-table-row-cell-closed-at",label:"monitoring-services-table-row-cell-event-name"},this.getClassnames=this.getClassnames.bind(this)}getClassnames(e,t){return this.statusClassnames[e]?this.statusClassnames[e]:this.statusClassnames[t]?this.statusClassnames[t]:void 0}render(){const{stats:e}=this.props;return i.createElement("div",{className:"monitoring-services-table-row"},r.map(r.keys(e),(t=>i.createElement("div",{className:`monitoring-services-table-row-cell-stats ${this.getClassnames(r.get(e,t),t)}`},r.get(e,t)||"-"))))}})||s},"./integrations/monitoring/components/helpers/APMChartContainer.js":function(e,t,n){n.r(t);var s=n("../../node_modules/react/index.js"),o=n("./js/components/base/LoadingIndicator.js"),i=n("./node_modules/prop-types/index.js"),r=n.n(i),a=n("./node_modules/lodash/lodash.js");const l=/width=\d+/,d=e=>{const[t,n]=(0,s.useState)(e.graphURL),[i,r]=(0,s.useState)(e.loadingChartUrls),[d,c]=(0,s.useState)("");return(0,s.useEffect)((()=>{const e=document.querySelector(".datadog-apm-metric-chart-iframe-wrapper"),t=new ResizeObserver((e=>{(e=>{const t=a.get(e[0],"contentRect.width");c(parseInt(t))})(e)}));return t.observe(e),()=>{t.unobserve(e)}}),[]),(0,s.useEffect)((()=>{r(e.loadingChartUrls),n(e.graphURL)}),[e.loadingChartUrls,e.graphURL]),s.createElement("div",{className:"datadog-apm-metric-chart-iframe-wrapper"},i&&s.createElement(o.default,{className:"iframe-loading-indicator"}),"browser"===window.SDK_PLATFORM?!i&&s.createElement("iframe",{className:"metric-chart",frameBorder:"0",id:e.graphName,name:`datadog-${e.graphName}_iframe`,sandbox:"allow-same-origin allow-scripts allow-popups",style:{display:"block"},src:a.replace(t,l,`width=${parseInt(d)}`)}):!i&&e.renderWebview(a.replace(t,l,`width=${parseInt(d)}`)))};t.default=d,d.propTypes={loadingChartUrls:r().bool.isRequired,graphName:r().string.isRequired,selectedService:r().object.isRequired,renderWebview:r().func.isRequired}},"./integrations/monitoring/components/helpers/APMDashboardTitleBar.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return h}});var s,o=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/SingleSelect/SingleSelect.js"),d=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-direction-back.js"),c=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-refresh-stroke.js"),p=n("./integrations/monitoring/components/helpers/MoreOptions.js"),u=n("./node_modules/prop-types/index.js"),g=n.n(u),m=n("./node_modules/lodash/lodash.js");let h=(0,i.observer)(s=class extends o.PureComponent{constructor(e){super(e)}render(){let{integration:e,dropdownGroupedOptions:t,availableTimeFrames:n,selectedTimeFrame:s,canEditIntegration:i,payload:u,availableServices:g,selectedService:h,selectedAPIVersion:b,selectedAPI:f}=this.props;return o.createElement(r.default,{padding:"spacing-s spacing-l spacing-s spacing-s",border:{borderBottom:"border-width-default"},className:"apm-titlebar-wrapper",justifyContent:"space-between",grow:0,shrink:1,wrap:"wrap"},o.createElement(r.default,{alignItems:"center",padding:{paddingRight:"spacing-xxl"}},o.createElement(a.default,{icon:o.createElement(d.default,null),onClick:this.props.onBackPressed,type:"tertiary"}),!m.isEmpty(g)&&o.createElement(o.Fragment,null,o.createElement(l.default,{className:"apm-service-selector",onChange:this.props.handleServiceSelect,options:t,value:h,placeholder:"Select a service",isClearable:!1,isSearchable:!1,triggerWidth:"inherit",triggerType:"tertiary",menuMaxWidth:"auto"}),m.get(h,"healthStatus")&&o.createElement("div",{className:"monitoring-service-selector-health-status"},m.get(h,"healthStatus.component")))),o.createElement(r.default,{gap:"spacing-xs",alignItems:"center",grow:1,justifyContent:"flex-end"},h&&o.createElement(r.default,{padding:{paddingRight:"spacing-xs"}},o.createElement(a.default,{type:"secondary",onClick:this.props.handleViewOnAPMSite,text:`View on ${this.props.serviceProvider} ↗`})),!m.isEmpty(g)&&o.createElement(l.default,{onChange:this.props.onSelectTimeFrame,options:n,value:s,isClearable:!1,isSearchable:!1,triggerWidth:"auto",triggerType:"tertiary",menuMinWidth:"160px"}),o.createElement(a.default,{type:"tertiary",icon:o.createElement(c.default,null),onClick:this.props.bootstrap}),o.createElement(p.default,{integration:e,payload:u,canEditIntegration:i,apiVersionId:b,selectedAPI:f})))}})||s;h.propTypes={onBackPressed:g().func.isRequired,handleServiceSelect:g().func.isRequired,handleViewOnAPMSite:g().func.isRequired,onSelectTimeFrame:g().func.isRequired,bootstrap:g().func.isRequired,integration:g().object.isRequired,selectedAPIVersion:g().string.isRequired,selectedAPI:g().string.isRequired,availableTimeFrames:g().array.isRequired,selectedTimeFrame:g().object.isRequired,canEditIntegration:g().bool.isRequired,payload:g().object.isRequired,dropdownGroupedOptions:g().array.isRequired,serviceProvider:g().string.isRequired}},"./integrations/monitoring/components/helpers/MoreOptions.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return E}});var s,o=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/Menu.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuButton.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuList.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuItem.js"),p=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-options-stroke.js"),u=n("./node_modules/prop-types/index.js"),g=n.n(u),m=n("./integrations/monitoring/constants.js"),h=n("./integrations/api-observability/constants.ts"),b=n("./integrations/components/DeleteIntegrationModal.js"),f=n("./js/stores/StoreManager.js"),v=n("./integrations/monitoring/stores/APMIntegrationStore.js"),S=n("./js/services/NavigationService.js"),I=n("./integrations/navigation/constants.js"),y=n("./node_modules/lodash/lodash.js");let E=(0,i.observer)(s=class extends o.PureComponent{constructor(e){super(e),this.store=(0,f.resolveStoreInstance)(v.default),this.state={showDeleteModal:!1},this.handleDeleteModalAction=this.handleDeleteModalAction.bind(this),this.handleEditIntegration=this.handleEditIntegration.bind(this)}handleDeleteModalAction(){let e=!this.state.showDeleteModal;this.setState({showDeleteModal:e})}handleEditIntegration(){let{integration:e,selectedAPI:t}=this.props;S.default.transitionTo(I.V10_API_EDIT_APM_INTEGRATION_NAV_IDENTIFIER,{apiId:t,integrationId:y.get(e,"id")},{service:e.service||e.rule},{additionalContext:{origin:"services_container"}})}render(){const{showDeleteModal:e}=this.state,{payload:t,integration:n}=this.props;return o.createElement("div",{className:"api-monitoring-more-options"},o.createElement(r.default,null,o.createElement(a.default,null,o.createElement(l.default,{className:"api-monitoring-more-options-icon-wrapper",type:"tertiary",icon:o.createElement(p.default,null)})),this.props.canEditIntegration?o.createElement(d.default,null,o.createElement(c.default,{onClick:this.handleEditIntegration},"Edit Integration"),o.createElement(c.default,{onClick:this.handleDeleteModalAction,type:"destructive"},"Delete Integration")):o.createElement(d.default,null,o.createElement(c.default,{isDisabled:!0,tooltip:h.PERMISSION_ERROR},"Edit Integration"),o.createElement(c.default,{isDisabled:!0,tooltip:h.PERMISSION_ERROR,type:"destructive"},"Delete Integration"))),o.createElement(b.default,{size:"small",store:this.store,category:m.API_PERFORMANCE_INTEGRATION,payload:t,isOpen:e,handleCloseModal:this.handleDeleteModalAction,integrationId:y.get(n,"id"),ruleId:y.get(n,"rule")}))}})||s;E.propTypes={showDeleteModal:g().bool,payload:g().object.isRequired,canEditIntegration:g().bool.isRequired,integration:g().object.isRequired,apiVersionId:g().string.isRequired,selectedAPI:g().string.isRequired}},"./integrations/monitoring/containers/APMDashboard.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return O}});var s,o=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("../../node_modules/mobx/lib/mobx.module.js"),a=n("./js/stores/StoreManager.js"),l=n("./integrations/monitoring/stores/APMIntegrationStore.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/SingleSelect/SingleSelect.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),h=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-direction-back.js"),b=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-refresh-stroke.js"),f=n("./integrations/monitoring/components/StatsListItem.js"),v=n("./integrations/monitoring/services/index.js"),S=(n("./js/utils/NavigationUtil.js"),n("./integrations/monitoring/constants.js")),I=n("./js/services/NavigationService.js"),y=n("./appsdk/workbench/TabService.js"),E=n("./integrations/navigation/constants.js"),A=n("./integrations/components/error-states/ErrorIntegrations.js"),_=n("./js/external-navigation/ExternalNavigationService.js"),w=n("./integrations/monitoring/components/HealthStatus.js"),j=n("./js/modules/services/AnalyticsService.js"),C=n("./onboarding/src/common/LaunchDarkly.js"),P=n("./integrations/monitoring/components/helpers/MoreOptions.js"),D=n("./integrations/utils/CommonHelperMethods.ts"),T=(n("./integrations/constants/integrationsConstants.ts"),n("./js/stores/ActiveWorkspaceSessionStore.js")),M=n("./integrations/constants/v10IntegrationConstants.ts"),x=n("./node_modules/lodash/lodash.js");const N=(0,D.getErrorContextObject)("New Relic APM Integration");let O=(0,i.observer)(s=class extends o.Component{constructor(e){super(e),this.store=(0,a.resolveStoreInstance)(l.default),this.state={loadingServiceMetrics:!1,availableServices:[],selectedService:{},showDeleteModal:!1,isPopOverOpen:!1,isServiceSelectorOpen:!1,isTimelineSelectorOpen:!1,selectedAPI:e.controller.apiId,selectedAPIVersion:e.controller.version,loadingChartUrls:!0,loadingStatistics:!0,webTransactionChartLoading:!0,throughputChartLoading:!0,apdexChartLoading:!0,errorRateChartLoading:!0,bootstrapInProgress:!0,selectedTimeframe:{label:"Since 3 hours",value:"3 hours"},availableTimeframes:[{label:"Since 1 hour",value:"1 hour"},{label:"Since 3 hours",value:"3 hours"},{label:"Since 1 day",value:"1 day"},{label:"Since 3 days",value:"3 days"},{label:"Since 1 week",value:"1 week"}]},this.bootstrap=this.bootstrap.bind(this),this.handleServiceSelect=this.handleServiceSelect.bind(this),this.fetchChartUrls=this.fetchChartUrls.bind(this),this.fetchStatistics=this.fetchStatistics.bind(this),this.handleDeleteModalAction=this.handleDeleteModalAction.bind(this),this.fetchServiceMetrics=this.fetchServiceMetrics.bind(this),this.renderTitleBar=this.renderTitleBar.bind(this),this.onBackPressed=this.onBackPressed.bind(this),this.onSelectTimeframe=this.onSelectTimeframe.bind(this)}componentDidMount(){pm.windowEvents.addListener(`${S.API_MONITORING}-service-selected`,this.onServiceSelectEventCaptured.bind(this)),pm.windowEvents.addListener(`${S.API_MONITORING}-integration-deleted`,this.onIntegrationDelete.bind(this)),pm.windowEvents.addListener(`${S.API_MONITORING}-integration-edited`,this.onIntegrationUpdate.bind(this));const e=this.props.controller;this.loadIntegrationReaction=(0,r.reaction)((()=>e.loadingIntegrationData),(()=>{x.isEmpty(e.legacyIntegrationData)||this.setState({integration:x.get(e,"legacyIntegrationData"),executor:x.get(e.legacyIntegrationData,"executor"),selectedAPIVersion:x.get(e.legacyIntegrationData,"executor"),canEditIntegration:e.canEditIntegration||!1,variables:x.get(e.legacyIntegrationData,"data.variables"),rule:x.get(e.legacyIntegrationData,"rule"),integrationId:e.integrationId},(()=>{this.bootstrap()}))}))}componentWillUnmount(){x.isFunction(this.loadIntegrationReaction)&&this.loadIntegrationReaction()}bootstrap(){let e=this.state.integrationId||this.store.getSelectedIntegration()||x.get(this.props.controller,"integrationId"),t=x.isEmpty(this.state.availableServices)?this.store.getAvailableAPMServices():this.state.availableServices,n=x.isEmpty(this.state.selectedService)?this.store.getSelectedAPMService():this.state.selectedService,{rule:s}=this.state;this.setState({availableServices:t,selectedService:n,integrationId:e},(()=>{try{t?(this.fetchChartUrls(e,s),this.fetchStatistics(e,s)):this.fetchServiceMetrics(e,s)}catch(e){pm.logger.error("NewRelicAPMDashboard~ error fetching service metrics or statistics: ",e,{context:N})}}))}fetchChartUrls(e,t){let{selectedService:n,selectedTimeframe:s,bootstrapInProgress:o}=this.state;this.setState({errorChartUrl:!1,loadingChartUrls:!0}),v.default[t].fetchChartUrls(e,n.value,s.value,((e,t)=>{e&&(pm.toasts.error(x.get(e,"data.error.title")),this.setState({loadingChartUrls:!1,bootstrapInProgress:!1,errorChartUrl:!0,chartUrls:t})),this.setState({loadingChartUrls:!1,bootstrapInProgress:!1,chartUrls:t})}))}fetchStatistics(e,t){let{selectedService:n,selectedTimeframe:s,bootstrapInProgress:o}=this.state;this.setState({loadingStatistics:!0,errorStatistics:!1}),v.default[t].fetchStatistics(e,n.value,s.value,((e,t)=>{e&&(pm.toasts.error(x.get(e,"data.error.title")),this.setState({loadingStatistics:!1,bootstrapInProgress:!1,errorStatistics:!0,statistics:t})),this.setState({loadingStatistics:!1,bootstrapInProgress:!1,statistics:t})}))}handleServiceSelect(e){let{integration:t}=this.state;this.setState({selectedService:e,isServiceSelectorOpen:!1,bootstrapInProgress:!0,webTransactionChartLoading:!0,errorRateChartLoading:!0,apdexChartLoading:!0,throughputChartLoading:!0},(()=>{this.fetchChartUrls(t.id,t.rule),this.fetchStatistics(t.id,t.rule)}))}onSelectTimeframe(e){let{integration:t}=this.state;this.setState({selectedTimeframe:e,bootstrapInProgress:!0,webTransactionChartLoading:!0,errorRateChartLoading:!0,apdexChartLoading:!0,throughputChartLoading:!0},(()=>{this.fetchChartUrls(t.id,t.rule),this.fetchStatistics(t.id,t.rule)}))}handleDeleteModalAction(){let e=!this.state.showDeleteModal;this.setState({showDeleteModal:e,isPopOverOpen:!1})}fetchServiceMetrics(e,t){this.setState({loadingServiceMetrics:!0,errorServiceMetrics:!1}),v.default[t].fetchMetricsForLinkedServices(e).then((n=>{let s=x.map(x.get(n,"data.data.actor.entities"),(e=>({label:e.name,value:e.guid,serviceName:e.name,serviceGuid:e.guid,latency:`${x.round(1e3*x.get(e,"apmSummary.responseTimeAverage"),2)} ms`,errorRate:`${x.round(100*x.get(e,"apmSummary.errorRate"),2)}`,apdex:x.get(e,"apmSummary.apdexScore"),link:x.get(e,"permalink"),alertSeverity:x.get(e,"alertSeverity")})));this.store.setAvailableAPMServices(s),this.store.setSelectedAPMService(s[0]),this.setState({availableServices:s,selectedService:s[0],loadingServiceMetrics:!1},(()=>{this.fetchChartUrls(e,t),this.fetchStatistics(e,t)}))})).catch((e=>{pm.toasts.error(x.get(e,"data.error.title")),this.setState({loadingServiceMetrics:!1,errorServiceMetrics:!0})}))}onIntegrationDelete(e){let{integrationId:t,selectedAPIVersion:n,selectedAPI:s}=this.state;e.apiVersionId===n&&y.default.closeByRoute(E.V10_API_APM_INTEGRATION_DASHBOARD_URL,{apiId:s,integrationId:t})}onBackPressed(){let{selectedAPI:e}=this.state,t=(0,a.resolveStoreInstance)(T.default).activeEditor;I.default.transitionTo(E.API_OVERVIEW_IDENTIFIER,{apiId:e},{view:M.PERFORMANCE},{tabOptions:{openIn:t}})}onIntegrationUpdate(e){let{selectedAPIVersion:t}=this.state;e.apiVersionId===t&&this.setState({selectedService:{},availableServices:[]},(()=>{this.store.clearAvailableAPMServices(),this.store.clearSelectedAPMService(),this.bootstrap()}))}onServiceSelectEventCaptured(e){let{executor:t}=this.state;e.apiVersionId===t&&this.setState({selectedService:e.selectedService,bootstrapInProgress:!0},(()=>{this.setState({bootstrapInProgress:!1}),this.bootstrap()}))}handleViewOnNewRelic(e){e&&(0,_.openExternalLink)(e,"_blank"),j.default.addEventV2({category:"apm-integration",action:"view-on-newrelic",label:x.get(this.state.integration,"rule"),value:1})}renderTitleBar(e){let{isServiceSelectorOpen:t,selectedService:n,loadingServiceMetrics:s,availableServices:i,isTimelineSelectorOpen:r,selectedTimeframe:a,availableTimeframes:l,isPopOverOpen:u,showDeleteModal:g,integration:m,selectedAPI:f,selectedAPIVersion:v}=this.state,S={api_id:f,executor:v};return o.createElement(d.default,{padding:"spacing-s spacing-l spacing-s spacing-s",border:{borderBottom:"border-width-default"},className:"api-monitoring-titlebar-wrapper",justifyContent:"space-between",grow:0,shrink:1,wrap:"wrap"},o.createElement(d.default,{alignItems:"center",padding:{paddingRight:"spacing-xxl"}},o.createElement(c.default,{icon:o.createElement(h.default,null),onClick:()=>this.onBackPressed(),type:"tertiary"}),!x.isEmpty(i)&&o.createElement(o.Fragment,null,o.createElement(p.default,{className:"api-monitoring-service-selector",onChange:this.handleServiceSelect,options:[{label:"Select Service",options:i}],value:n,placeholder:"Select a service",isClearable:!1,isSearchable:!1,triggerWidth:"inherit",triggerType:"tertiary",menuMaxWidth:"auto"}),x.get(n,"serviceName")&&o.createElement("div",{className:"monitoring-service-selector-health-status"},o.createElement(w.default,{alertSeverity:x.get(n,"alertSeverity")})))),o.createElement(d.default,{gap:"spacing-xs",alignItems:"center",grow:1,justifyContent:"flex-end"},o.createElement(o.Fragment,null,n&&o.createElement(d.default,{padding:{paddingRight:"spacing-xs"}},o.createElement(c.default,{type:"secondary",onClick:()=>this.handleViewOnNewRelic(x.get(n,"link")),text:"View on New Relic ↗"}))),!x.isEmpty(i)&&o.createElement(p.default,{onChange:this.onSelectTimeframe,options:l,value:a,isClearable:!1,isSearchable:!1,triggerWidth:"auto",triggerType:"tertiary",menuMinWidth:"160px"}),o.createElement(c.default,{type:"tertiary",icon:o.createElement(b.default,null),onClick:this.bootstrap}),o.createElement(P.default,{integration:m,payload:S,canEditIntegration:this.state.canEditIntegration,apiVersionId:v,selectedAPI:f})))}renderWebview(e){return o.createElement("webview",{ref:e=>this.webview=e,style:{width:"100%",height:"100%"},src:e})}render(){let{chartUrls:e,loadingChartUrls:t,loadingStatistics:n,statistics:s,selectedService:i,webTransactionChartLoading:r,errorRateChartLoading:a,throughputChartLoading:l,apdexChartLoading:c,bootstrapInProgress:p,errorloadingIntegration:h,errorChartUrl:b,errorServiceMetrics:v,errorStatistics:S}=this.state;if(h){let e={...this.state.errorDetails};pm.logger.error("NewRelicAPMDashboard~ Error occurred while loading page",this.state.errorDetails,{context:N}),e&&"instanceNotFoundError"==x.get(e,"error.name")&&this.onBackPressed()}return p?o.createElement("div",{className:"api-monitoring-dashboard"},o.createElement("div",{className:"api-monitoring-dashboard-wrapper"},this.renderTitleBar(!0),o.createElement("div",{className:"api-monitoring-titlebar-divider"}),o.createElement(u.default,{className:"bootstrap-loading-indicator"}))):b||v||S||h?o.createElement("div",{className:"api-monitoring-dashboard"},o.createElement("div",{className:"api-monitoring-dashboard-wrapper"},this.renderTitleBar(!0),o.createElement("div",{className:"api-monitoring-titlebar-divider"}),o.createElement("div",{className:"observability-error"},o.createElement(A.default,null)))):o.createElement("div",{className:"api-monitoring-dashboard"},o.createElement("div",{className:"api-monitoring-dashboard-wrapper"},this.renderTitleBar(),p?o.createElement(u.default,{className:"bootstrap-loading-indicator"}):o.createElement(d.default,{direction:"column",padding:"spacing-xxl spacing-xxl",gap:"spacing-xxl",className:"api-monitoring-dashboard-wrapper__inner",shrink:1},C.launchDarkly.getFlag("charts-on-new-relic",!1)&&o.createElement("div",null,o.createElement("div",{className:"api-monitoring-chart-title-wrapper"},o.createElement("div",{className:"api-monitoring-chart-title"},"Web Transaction Time")),o.createElement("div",{className:"api-monitoring-web-transaction-chart"},o.createElement("div",{className:"api-monitoring-web-transaction-chart-iframe-wrapper"},t&&o.createElement(u.default,{className:"iframe-loading-indicator"}),"browser"===window.SDK_PLATFORM?!t&&o.createElement("iframe",{className:"web-transaction-chart",frameBorder:"0",id:"new_relic",name:"new_relic_iframe",sandbox:"allow-same-origin allow-scripts allow-popups",style:{display:r?"none":"block"},onLoad:()=>{this.setState({webTransactionChartLoading:!1})},src:`${x.get(e,"webTransactionsChartUrl")}?height=431px&timepicker=false`}):!t&&this.renderWebview(`${x.get(e,"webTransactionsChartUrl")}?height=431px&timepicker=false`))),o.createElement("div",{className:"api-monitoring-chart-title-wrapper"},o.createElement("div",{className:"api-monitoring-chart-title"},"Throughput"),o.createElement("div",{className:"api-monitoring-chart-title"},"Error Rate"),o.createElement("div",{className:"api-monitoring-chart-title"},"Apdex Score")),o.createElement("div",{className:"api-monitoring-chart-wrapper"},o.createElement("div",{className:"api-monitoring-web-throughput-chart-iframe-wrapper"},t&&o.createElement(u.default,{className:"iframe-loading-indicator"}),"browser"===window.SDK_PLATFORM?!t&&o.createElement("iframe",{className:"throughput-chart",frameBorder:"0",id:"new_relic",name:"new_relic_iframe",sandbox:"allow-same-origin allow-scripts allow-popups",style:{display:l?"none":"block"},onLoad:()=>{this.setState({throughputChartLoading:!1})},src:`${x.get(e,"throughputChartUrl")}?height=309px&timepicker=false`}):!t&&this.renderWebview(`${x.get(e,"throughputChartUrl")}?height=309px&timepicker=false`)),o.createElement("div",{className:"api-monitoring-web-error-rate-chart-iframe-wrapper"},t&&o.createElement(u.default,{className:"iframe-loading-indicator"}),"browser"===window.SDK_PLATFORM?!t&&o.createElement("iframe",{className:"error-rate-chart",frameBorder:"0",id:"new_relic",name:"new_relic_iframe",sandbox:"allow-same-origin allow-scripts allow-popups",style:{display:a?"none":"block"},onLoad:()=>{this.setState({errorRateChartLoading:!1})},src:`${x.get(e,"errorRateChartUrl")}?height=309px&timepicker=false`}):!t&&this.renderWebview(`${x.get(e,"errorRateChartUrl")}?height=309px&timepicker=false`)),o.createElement("div",{className:"api-monitoring-web-apdex-chart-iframe-wrapper"},t&&o.createElement(u.default,{className:"iframe-loading-indicator"}),"browser"===window.SDK_PLATFORM?!t&&o.createElement("iframe",{className:"apdex-chart",frameBorder:"0",id:"new_relic",name:"new_relic_iframe",sandbox:"allow-same-origin allow-scripts allow-popups",style:{display:c?"none":"block"},onLoad:()=>{this.setState({apdexChartLoading:!1})},src:`${x.get(e,"apdexScoreChartUrl")}?height=309px&timepicker=false`}):!t&&this.renderWebview(`${x.get(e,"apdexScoreChartUrl")}?height=309px&timepicker=false`)))),o.createElement("div",null,o.createElement(g.default,{type:"h4",text:"Violation Events",hasBottomSpacing:!0}),n?o.createElement(u.default,{className:"table-loading-indicator"}):o.createElement("div",null,0===x.get(s,"violationEvents").length?o.createElement(m.default,{type:"para"},`No alert conditions were violated by ‘${x.get(i,"label")}’.`):o.createElement("div",{className:"monitoring-services-table"},o.createElement("div",{className:"monitoring-services-table-success"},o.createElement("div",{className:"monitoring-services-table-header"},o.createElement("div",{className:"monitoring-services-table-header-cell-event-name"},o.createElement(g.default,{type:"h6",text:"Event name"})),o.createElement("div",{className:"monitoring-services-table-header-cell-opened-at"},o.createElement(g.default,{type:"h6",text:"Opened at"})),o.createElement("div",{className:"monitoring-services-table-header-cell-closed-at"},o.createElement(g.default,{type:"h6",text:"Closed at"})),o.createElement("div",{className:"monitoring-services-table-header-cell-severity"},o.createElement(g.default,{type:"h6",text:"Severity"}))),o.createElement("div",{className:"monitoring-services-table-row-wrapper"},x.map(x.get(s,"violationEvents"),(e=>o.createElement(f.default,{key:e.violationId,stats:x.pick(e,["label","openedAt","closedAt","alertSeverity"]),length:x.get(s,"violationEvents")})))))))),o.createElement("div",null,o.createElement(g.default,{type:"h4",text:"Slowest transactions by time",hasBottomSpacing:!0}),n?o.createElement(u.default,{className:"table-loading-indicator"}):o.createElement("div",null,0===x.get(s,"slowestTransactions").length?o.createElement(m.default,{type:"para"},"No transactions for the selected time range."):o.createElement("div",{className:"monitoring-services-table monitoring-services-table--wo_bleed"},o.createElement("div",{className:"monitoring-services-table-success"},o.createElement("div",{className:"monitoring-services-table-header"},o.createElement("div",{className:"monitoring-services-table-header-cell-stats"},o.createElement(g.default,{type:"h6",text:"Transaction name"})),o.createElement("div",{className:"monitoring-services-table-header-cell-stats"},o.createElement(g.default,{type:"h6",text:"Avg duration"})),o.createElement("div",{className:"monitoring-services-table-header-cell-stats"},o.createElement(g.default,{type:"h6",text:"Error rate"}))),o.createElement("div",{className:"monitoring-services-table-row-wrapper"},x.map(x.get(s,"slowestTransactions"),(e=>o.createElement(f.default,{key:e.name,stats:x.pick(e,["name","avg_time","error_rate"]),length:x.get(s,"slowestTransactions")})))))))),o.createElement("div",null,o.createElement(g.default,{type:"h4",text:"Deployments",hasBottomSpacing:!0}),n?o.createElement(u.default,{className:"table-loading-indicator"}):o.createElement("div",null,0===x.get(s,"deployments").length?o.createElement(m.default,{type:"para"},"No deployments yet."):o.createElement("div",{className:"monitoring-services-table"},o.createElement("div",{className:"monitoring-services-table-success"},o.createElement("div",{className:"monitoring-services-table-header"},o.createElement("div",{className:"monitoring-services-table-header-cell-stats"},o.createElement(g.default,{type:"h6",text:"Deployment name"})),o.createElement("div",{className:"monitoring-services-table-header-cell-stats"},o.createElement(g.default,{type:"h6",text:"Deployment date"}))),o.createElement("div",{className:"monitoring-services-table-row-wrapper"},x.map(x.get(s,"deployments"),(e=>o.createElement(f.default,{key:e.timestamp,stats:x.pick(e,["revision","timestamp"]),length:x.get(s,"deployments")})))))))))))}})||s},"./integrations/monitoring/containers/DatadogAPMDashboard.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return x}});var s,o=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("../../node_modules/mobx/lib/mobx.module.js"),a=n("./js/stores/StoreManager.js"),l=n("./integrations/monitoring/stores/APMIntegrationStore.js"),d=n("./integrations/monitoring/services/index.js"),c=n("./integrations/monitoring/constants.js"),p=n("./js/services/NavigationService.js"),u=(n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),n("./appsdk/workbench/TabService.js")),g=n("./integrations/navigation/constants.js"),m=n("./js/external-navigation/ExternalNavigationService.js"),h=n("./js/modules/services/AnalyticsService.js"),b=n("./integrations/monitoring/components/DatadogTriggeredMonitorsTable.js"),f=n("./integrations/monitoring/components/DatadogMonitorStatus.js"),v=n("./integrations/monitoring/containers/helpers/DatadogAPMUtils.js"),S=n("./integrations/monitoring/components/helpers/APMDashboardTitleBar.js"),I=n("./integrations/monitoring/components/helpers/APMChartContainer.js"),y=n("./integrations/utils/CommonHelperMethods.ts"),E=n("./node_modules/moment/moment.js"),A=n.n(E),_=(n("./integrations/constants/integrationsConstants.ts"),n("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js")),w=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),j=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),C=n("./js/stores/ActiveWorkspaceSessionStore.js"),P=n("./integrations/constants/v10IntegrationConstants.ts"),D=n("./node_modules/lodash/lodash.js");const T=(0,y.getErrorContextObject)("Datadog APM Integration"),{OK:M}=c.DATADOG_MONITOR_STATUSES;let x=(0,i.observer)(s=class extends o.Component{constructor(e){super(e),this.stringToHTML=function(e){return(new DOMParser).parseFromString(e,"text/html")},this.apmIntegrationsStore=(0,a.resolveStoreInstance)(l.default),this.datadogStore=this.apmIntegrationsStore.find(c.DATADOG_APM_CLASS_ID),this.state={canEditIntegration:!1,loadingServiceMetrics:!1,isServiceSelectorOpen:!1,loadingTriggeredMonitors:!1,isTimelineSelectorOpen:!1,selectedAPI:e.controller.apiId,selectedAPIVersion:e.controller.version,loadingChartUrls:!0,bootstrapInProgress:!0,violations:[],variables:{},selectedService:{},selectedTimeFrame:{label:"Since 1 hour",value:"1_hour"},availableTimeFrames:[{label:"Since 1 hour",value:"1_hour"},{label:"Since 4 hours",value:"4_hours"},{label:"Since 1 day",value:"1_day"},{label:"Since 2 days",value:"2_days"},{label:"Since 1 week",value:"1_week"}]},this.onBackPressed=this.onBackPressed.bind(this),this.bootstrap=this.bootstrap.bind(this),this.renderTitleBar=this.renderTitleBar.bind(this),this.onSelectTimeFrame=this.onSelectTimeFrame.bind(this),this.fetchGraphURLs=this.fetchGraphURLs.bind(this),this.handleServiceSelect=this.handleServiceSelect.bind(this),this.handleViewOnDatadog=this.handleViewOnDatadog.bind(this),this.renderWebview=this.renderWebview.bind(this),this.fetchServiceMonitorsStatusAndViolations=this.fetchServiceMonitorsStatusAndViolations.bind(this)}componentDidMount(){pm.windowEvents.addListener(`${c.API_MONITORING}-service-selected`,this.onServiceSelectEventCaptured.bind(this)),pm.windowEvents.addListener(`${c.API_MONITORING}-integration-deleted`,this.onIntegrationDelete.bind(this)),pm.windowEvents.addListener(`${c.API_MONITORING}-integration-edited`,this.onIntegrationUpdate.bind(this));const e=this.props.controller;this.loadIntegrationReaction=(0,r.reaction)((()=>e.loadingIntegrationData),(()=>{D.isEmpty(e.legacyIntegrationData)||this.setState({integration:D.get(e,"legacyIntegrationData"),executor:D.get(e.legacyIntegrationData,"executor"),selectedAPIVersion:D.get(e.legacyIntegrationData,"executor"),canEditIntegration:e.canEditIntegration||!1,variables:D.get(e.legacyIntegrationData,"data.variables"),rule:D.get(e.legacyIntegrationData,"rule"),integrationId:e.integrationId},(()=>{if(!this.datadogStore){let e={},t={};e[this.state.selectedAPIVersion]=[],t[this.state.selectedAPIVersion]={},this.apmIntegrationsStore.add({id:c.DATADOG_APM_CLASS_ID,availableAPMServices:e,selectedAPMService:t}),this.datadogStore=this.apmIntegrationsStore.find(c.DATADOG_APM_CLASS_ID)}this.bootstrap()}))}))}componentWillUnmount(){D.isFunction(this.loadIntegrationReaction)&&this.loadIntegrationReaction()}onServiceSelectEventCaptured(e){let{executor:t}=this.state;e.apiVersionId===t&&(this.datadogStore.setSelectedAPMService(t,e.selectedService),this.setState({selectedService:e.selectedService},(()=>{this.bootstrap()})))}onIntegrationUpdate(e){let t=this.state.selectedAPIVersion||this.apmIntegrationsStore.selectedAPIVersion;e.apiVersionId===t&&(this.datadogStore.setSelectedAPMService(t,{}),this.datadogStore.setAvailableAPMServices(t,[]),this.bootstrap())}onIntegrationDelete(e){let{integrationId:t,selectedAPI:n}=this.state,s=this.state.selectedAPIVersion||this.apmIntegrationsStore.selectedAPIVersion;e.apiVersionId===s&&u.default.closeByRoute(g.V10_API_APM_DATADOG_INTEGRATION_DASHBOARD_URL,{apiId:n,integrationId:t})}fetchServiceMonitorsStatusAndViolations(e,t,n){if(t!==c.DATADOG_APM_CLASS_ID)return;const s=this.datadogStore.getAvailableAPMServices(n);let o=this.datadogStore.getSelectedAPMService(n)||this.state.selectedService;this.setState({loadingTriggeredMonitors:!0}),d.default[t].fetchServiceMonitorsStatus(e,D.get(o,"label"),D.get(o,"environment")).then((e=>{const t=D.reduce(e.data.monitors,((e,t)=>(t.status!==M&&e.push({...t,timestamp:A()(D.get(t,"last_triggered_ts")).format(c.TIMESTAMP)}),e)),[]),o=D.reduce(e.data.counts.status,((e,{name:t,count:n})=>(e[t]=n,e)),{}),i=this.datadogStore.getSelectedAPMService(n),r=v.default.getDatadogMonitorHealthStatusObject(o),a=D.map(s,(e=>{if(e.value===i.value){let t=e;return t.healthStatus=r,t.serviceStatuses=o,this.datadogStore.setSelectedAPMService(n,t),t}return e}));this.datadogStore.setAvailableAPMServices(n,a),this.setState({violations:t,loadingServiceMetrics:!1,loadingTriggeredMonitors:!1})})).catch((e=>{this.setState({loadingTriggeredMonitors:!1}),pm.logger.error("DatadogAPMDashboard ~ Error occurred while fetching monitor statuses from datadog",e,{context:T})}))}fetchServiceMetrics(e,t,n){t===c.DATADOG_APM_CLASS_ID&&(this.setState({loadingServiceMetrics:!0}),d.default[t].fetchMetricsForLinkedServices(e).then((s=>{let i=[];D.forEach(s.servicesMetrics,((e,t)=>{const n=D.reduce(e,((e,n,s)=>{let i=`${Math.ceil(D.get(n,"rpm_score"))}`,r=`${parseFloat(D.get(n,"apdex_score")).toFixed(2)}`,a=`${(1e3*parseFloat(D.get(n,"latency"))).toFixed(2)}`,l=D.get(n,"error_rate_score");return e.push({label:s,value:s+t,environment:t,serviceName:s,metrics:{throughput:"NaN"===i?"-":`${i} hits/m`,errorRate:"NaN"===l?"-":`${l}%`,apdexScore:"NaN"===r?"-":r,latency:"NaN"===a?"-":`${a} ms`},embedGraphs:{apdex_graphs:{},error_rate_graphs:{},latency_graphs:{},throughput_graphs:{}},healthStatus:{status:"Unavailable",component:o.createElement(f.default,{alertSeverity:"Unavailable"})},link:`${v.default.getDatadogHostname(D.get(this.state,"variables.region"))}/apm/service/${s}/http.request?env=${t}&topGraphs=latency%3Alatency_by_version%2CbreakdownAs%3Apercentage%2Cerrors%3Acount%2Chits%3Acount&paused=false`}),e}),[]);i=D.concat(i,n)})),this.datadogStore.setAvailableAPMServices(n,i),this.datadogStore.setSelectedAPMService(n,i[0]),this.fetchServiceMonitorsStatusAndViolations(e,t,n),this.setState({loadingServiceMetrics:!1,selectedService:i[0]},(()=>{this.fetchGraphURLs(e,t,n)}))})).catch((e=>{pm.logger.error("DatadogAPMDashboard ~ Error occurred while fetching service metrics from datadog",e,{context:T}),this.setState({loadingServiceMetrics:!1})})))}handleServiceSelect(e){let{integration:t,selectedAPIVersion:n}=this.state;this.datadogStore.setSelectedAPMService(n,e),this.setState({selectedService:e,isServiceSelectorOpen:!1,bootstrapInProgress:!0},(()=>{this.fetchGraphURLs(t.id,t.rule,this.state.selectedAPIVersion||this.apmIntegrationsStore.selectedAPIVersion),this.fetchServiceMonitorsStatusAndViolations(t.id,t.rule,this.state.selectedAPIVersion||this.apmIntegrationsStore.selectedAPIVersion)})),h.default.addEventV2({category:"apm-integration",action:"switch-service",label:c.DATADOG_APM_CLASS_ID,value:1})}onSelectTimeFrame(e){let{integration:t}=this.state;this.setState({selectedTimeFrame:e,bootstrapInProgress:!0},(()=>{this.fetchGraphURLs(t.id,t.rule,this.state.selectedAPIVersion||this.apmIntegrationsStore.selectedAPIVersion)})),h.default.addEventV2({category:"apm-integration",action:"switch-time-frame",label:c.DATADOG_APM_CLASS_ID,value:1})}fetchGraphURLs(e,t,n){if(t!==c.DATADOG_APM_CLASS_ID)return;let{selectedTimeFrame:s}=this.state,o=this.datadogStore.getSelectedAPMService(n)||this.state.selectedService;this.setState({errorChartUrl:!1,loadingChartUrls:!0}),d.default[t].fetchGraphURLs(e,D.get(s,"value"),D.get(o,"label"),D.get(o,"environment"),((e,t)=>{if(e)return pm.logger.error("DatadogAPMDashboard ~ Error occurred while fetching graph urls from datadog",e,{context:T}),void this.setState({errorChartUrl:!0});const s=D.reduce(t,((e,t,n)=>{let s={},o=D.get(t,"html"),i=this.stringToHTML(o).getElementsByTagName("iframe")[0].attributes.src.value;return s.embedId=D.get(t,"embed_id"),s.graphURL=D.replace(i,"height=500","height=400"),e[n]=s,e}),{}),o=this.datadogStore.getAvailableAPMServices(n),i=this.datadogStore.getSelectedAPMService(n),r=D.map(o,(e=>e.value===i.value?{...e,embedGraphs:s}:e));this.datadogStore.setAvailableAPMServices(n,r),this.datadogStore.setSelectedAPMService(n,{...i,embedGraphs:s}),this.setState({loadingChartUrls:!1,bootstrapInProgress:!1,selectedService:{...i,embedGraphs:s}})}))}handleViewOnDatadog(e){e&&(0,m.openExternalLink)(e,"_blank"),h.default.addEventV2({category:"apm-integration",action:"view-on-datadog",label:D.get(this.state.integration,"rule"),value:1})}renderWebview(e){return o.createElement("webview",{ref:e=>this.webview=e,style:{width:"100%",height:"100%"},src:e})}bootstrap(){const e=this.state.integrationId||this.apmIntegrationsStore.getSelectedIntegration()||D.get(this.props.controller,"integrationId"),t=this.state.selectedAPIVersion||this.apmIntegrationsStore.selectedAPIVersion,n=this.apmIntegrationsStore.find(c.DATADOG_APM_CLASS_ID),s=n.getAvailableAPMServices(t),o=n.getSelectedAPMService(t)||{},{rule:i}=this.state,r={integrationId:e};D.isEmpty(s)?this.fetchServiceMetrics(e,i,t):(D.get(o,"embedGraphs.apdex_graphs.graphURL")&&D.get(o,"embedGraphs.error_rate_graphs.graphURL")&&D.get(o,"embedGraphs.latency_graphs.graphURL")&&D.get(o,"embedGraphs.throughput_graphs.graphURL")?r.loadingChartUrls=!1:this.fetchGraphURLs(e,i,t),this.fetchServiceMonitorsStatusAndViolations(e,i,t)),this.setState(r)}onBackPressed(){let{selectedAPI:e}=this.state,t=(0,a.resolveStoreInstance)(C.default).activeEditor;p.default.transitionTo(g.API_OVERVIEW_IDENTIFIER,{apiId:e},{view:P.PERFORMANCE},{tabOptions:{openIn:t}})}getGroupedServices(e){return D.map(D.groupBy(e,"environment"),((e,t)=>({label:`env:${t}`,options:e})))}renderTitleBar(){let{integration:e,selectedAPI:t,availableTimeFrames:n,selectedTimeFrame:s,canEditIntegration:i}=this.state,r=this.state.selectedAPIVersion||this.apmIntegrationsStore.selectedAPIVersion,a={api_id:t,executor:r},l=this.datadogStore&&this.datadogStore.getAvailableAPMServices(r),d=this.datadogStore&&this.datadogStore.getSelectedAPMService(r),c=l?this.getGroupedServices(l):[];return o.createElement(S.default,{onBackPressed:this.onBackPressed,handleServiceSelect:this.handleServiceSelect,handleViewOnAPMSite:()=>this.handleViewOnDatadog(D.get(d,"link")),onSelectTimeFrame:this.onSelectTimeFrame,bootstrap:this.bootstrap,integration:e,availableTimeFrames:n,selectedTimeFrame:s,canEditIntegration:i,payload:a,dropdownGroupedOptions:c,availableServices:l,selectedService:d,serviceProvider:"Datadog",selectedAPI:t,selectedAPIVersion:r})}render(){let{bootstrapInProgress:e,loadingChartUrls:t,selectedAPIVersion:n}=this.state,{loadingTriggeredMonitors:s,variables:i}=this.state,r=this.datadogStore&&this.datadogStore.getSelectedAPMService(n);return e?o.createElement("div",{className:"datadog-apm-dashboard"},o.createElement("div",{className:"datadog-apm-dashboard-wrapper"},this.renderTitleBar(),o.createElement(_.default,{className:"bootstrap-loading-indicator"}))):o.createElement("div",{className:"datadog-apm-dashboard"},o.createElement("div",{className:"datadog-apm-dashboard-wrapper"},this.renderTitleBar(),o.createElement("div",{className:"datadog-apm-dashboard-wrapper--inner"},e?o.createElement(_.default,{className:"bootstrap-loading-indicator"}):o.createElement(w.default,{direction:"column",shrink:1},o.createElement("div",{className:"datadog-apm-chart-wrapper"},o.createElement(I.default,{loadingChartUrls:t,graphName:"latency",graphURL:D.get(r,"embedGraphs.latency_graphs.graphURL"),renderWebview:this.renderWebview}),o.createElement(I.default,{loadingChartUrls:t,graphName:"throughput",graphURL:D.get(r,"embedGraphs.throughput_graphs.graphURL"),renderWebview:this.renderWebview})),o.createElement("div",{className:"datadog-apm-chart-wrapper"},o.createElement(I.default,{loadingChartUrls:t,graphName:"apdex",graphURL:D.get(r,"embedGraphs.apdex_graphs.graphURL"),renderWebview:this.renderWebview}),o.createElement(I.default,{loadingChartUrls:t,graphName:"error_rate",graphURL:D.get(r,"embedGraphs.error_rate_graphs.graphURL"),renderWebview:this.renderWebview}))),o.createElement(w.default,{direction:"column",padding:"spacing-xl spacing-xxl spacing-xxl spacing-xxl",gap:"spacing-s"},o.createElement(j.default,{type:"h4",text:"Triggered Monitors"}),o.createElement(b.default,{data:this.state.violations,loadingTriggeredMonitors:s,region:D.get(i,"region")})))))}})||s},"./integrations/monitoring/containers/helpers/DatadogAPMUtils.js":function(e,t,n){n.r(t);var s=n("../../node_modules/react/index.js"),o=n("./integrations/monitoring/components/DatadogMonitorStatus.js"),i=n("./integrations/monitoring/constants.js"),r=n("./node_modules/uuid/index.js"),a=n.n(r),l=n("./node_modules/lodash/lodash.js");t.default={getDatadogMonitorHealthStatusObject:function(e){const{ALERT:t,WARN:n,NO_DATA:r,OK:a,NO_MONITORS:d}=i.DATADOG_MONITOR_STATUSES;let c={status:d,component:s.createElement(o.default,{alertSeverity:d})};return l.get(e,t)>0?c={status:t,component:s.createElement(o.default,{numMonitors:l.get(e,t),alertSeverity:t})}:l.get(e,n)>0?c={status:n,component:s.createElement(o.default,{numMonitors:l.get(e,n),alertSeverity:n})}:l.get(e,r)>0?c={status:r,component:s.createElement(o.default,{numMonitors:l.get(e,r),alertSeverity:r})}:l.get(e,a)>0&&(c={status:a,component:s.createElement(o.default,{numMonitors:l.get(e,a),alertSeverity:a})}),c},getDatadogHostname:function(e){return"https://app.datadoghq"+("eu"===e?".eu":".com")},areEnvironmentsValid:function(e){const t=l.some(e,(e=>l.isEmpty(e.name)||l.isEmpty(e.services))),n=l(e).map("name").uniq().value().length!==e.length;return!t&&!n},getEmptyEnvironmentsList:function(){return[{name:"none",services:[],id:a().v4()}]}}},"./integrations/monitoring/controllers/APIMonitoringController.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return R}});var s,o,i,r,a,l,d,c,p,u,g,m,h,b=n("../../node_modules/mobx/lib/mobx.module.js"),f=n("./appsdk/workbench/BaseWorkbenchController.js"),v=n("./js/stores/IntegrationsStore.js"),S=n("./js/stores/SyncStatusStore.js"),I=n("./js/stores/ActiveWorkspaceStore.js"),y=n("./integrations/monitoring/stores/MonitorIntegrationStore.js"),E=n("./js/stores/StoreManager.js"),A=n("./integrations/monitoring/stores/APMIntegrationStore.js"),_=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),w=n("./integrations/services/OAuthService.js"),j=n("./js/services/NavigationService.js"),C=n("./appsdk/workbench/TabService.js"),P=n("./integrations/monitoring/constants.js"),D=n("./integrations/navigation/constants.js"),T=n("./js/services/PageMetadataService.js"),M=n("./integrations/utils/CommonHelperMethods.ts"),x=n("./api-dev/interfaces/APIInterface.js"),N=n("./node_modules/lodash/lodash.js");function O(e,t,n,s){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(s):void 0})}function k(e,t,n,s,o){var i={};return Object.keys(s).forEach((function(e){i[e]=s[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,s){return s(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}let R=(s=class extends f.default{constructor(...e){super(...e),O(this,"origin",o,this),O(this,"currentWorkspace",i,this),O(this,"selectedMonitorId",r,this),O(this,"authorisationState",a,this),O(this,"oauthSessionId",l,this),O(this,"OAUTH_INITIATOR_DETAILS",d,this),O(this,"OAUTH_TIMEOUT_INTERVAL",c,this),O(this,"apiId",p,this),O(this,"version",u,this),O(this,"editIntegrationData",g,this),O(this,"hydratingStore",m,this),O(this,"loadingIntegrationData",h,this),this.integrationId=void 0,this.legacyIntegrationData={},this.canEditIntegration=!1,this.store=(0,E.resolveStoreInstance)(A.default),this.relation={type:"monitor",model:"monitor"},this.STATES={AUTH:"AUTH",SESSION:"SESSION"}}setAPIVersion(e){this.version=e,this.store.setSelectedAPIVersion(e)}async didCreate({routeParams:e,queryParams:t,additionalContext:n}){this.monitorIntegrationStore=(0,E.resolveStoreInstance)(y.default),this.integrationsStore=(0,E.resolveStoreInstance)(v.default);let s=(0,E.resolveStoreInstance)(I.default);this.currentWorkspace={label:N.get(s,"name"),value:N.get(s,"id")};const o=N.get(e,"integrationId")||N.get(t,"integration_id"),i=N.get(t,"version"),r=N.get(t,"name");this.apiId=N.get(e,"apiId",null),this.integrationId=o,this.apiId&&(0,x.getAPI)(this.apiId),this.store.setSelectedIntegration(o),this.apiId&&this.store.setSelectedAPI(e.apiId),i?this.setAPIVersion(i):o||await(0,M.getAPIDetails)(this.apiId).then((e=>{this.setAPIVersion(N.get(e,"version.id"))})),t&&t.service&&this.store.setSelectedService(t.service),t&&t.rule&&this.store.setSelectedRule(t.rule),r&&(this.store.setSelectedServiceName(r),this.setTitle(`Connect to ${r}`)),this.origin=N.get(n,"origin",null),this.apiVersionItemStore=N.get(n,"apiVersionItemStore"),N.includes(P.OAUTH_ENABLED_RULES,t.rule)&&(this.OAUTH_INITIATOR_DETAILS={rule:t.rule,service:t.service},this.setState(this.STATES.AUTH,P.AUTH_STATES.AUTHORISING),this.handleInitiateOAuth(t.service,t.rule)),N.isNil(n)&&(this.setHydratingStatus(!0),this.store.initializeApmIntegrationStoreV2({apiId:this.apiId,apiVersionId:this.version,category:P.API_MONITORING}).then((()=>{this.setHydratingStatus(!1)})).catch((()=>{this.setHydratingStatus(!1)}))),await this.fetchIntegrationData(o)}async fetchIntegrationData(e){if(!e)return;let t={};try{if(t=await _.default.getIntegrationData(e),200===t.status){this.legacyIntegrationData=N.get(t,"body.data"),this.canEditIntegration=N.get(t,"body.meta.allowedActions.update");const e=this.legacyIntegrationData.executor;this.setAPIVersion(e),this.setLoadingIntegrationData(!1)}}catch(e){pm.logger.error("APIMonitoringController~~ Error loading integration data",e)}}setHydratingStatus(e){this.hydratingStore=e}get isHydratingStore(){return this.hydratingStore}isOnline(){return(0,E.resolveStoreInstance)(S.default).isSocketConnected}didQueryParamsChange(e){e&&e.version&&this.store.setSelectedAPIVersion(e.version),e&&e.integration_id&&this.store.setSelectedIntegration(e.integration_id),e&&e.service&&this.store.setSelectedService(e.service),e&&e.rule&&this.store.setSelectedRule(e.rule);const t=N.get(e,"name");t&&(this.store.setSelectedServiceName(t),this.setTitle(`Connect to ${t}`))}setTitle(e){this._editorModel&&(this._editorModel.setTitle&&this._editorModel.setTitle(e),this._editorModel.isActive&&T.default.setPageTitle(this._editorModel.getPageTitle&&this._editorModel.getPageTitle()))}handleInitiateOAuth(e,t){w.default.initiateAuthorization(e).then((n=>{let s,o=n.body;200!==n.status||N.isEmpty(o)?(pm.logger.warn("APIMonitoringController~handleInitiateOAuth: Something went wrong while opening authorization",n.body),pm.toasts.error("Something went wrong while initiating authorization"),this.setState(this.STATES.AUTH,P.AUTH_STATES.FAILED)):(s=`${window.postman_integrations_public_url}/oauth/authorize/${e}?sessionId=${o.sessionId}`,j.default.openURL(s,{target:"_blank"}),this.setState(this.STATES.SESSION,o.sessionId),this.pollForToken(e,t))})).catch((e=>{let t=!this.isOnline()?"You need to be online to complete the authorization ":"Something went wrong while initiating authorization";pm.logger.warn("IntegrationTypesPerService~handleInitiateOAuth: Something went wrong while opening authorization",e),pm.toasts.error(t),this.setState(this.STATES.AUTH,P.AUTH_STATES.FAILED)}))}pollForToken(e,t){let n=0,s=this.oauthSessionId;if(!s)return pm.logger.warn("APIMonitoringController~pollForToken: sessionId is required."),pm.toasts.error("Something went wrong while fetching authorization information"),void this.setState(this.STATES.AUTH,P.AUTH_STATES.FAILED);const o=async(i,r)=>{n++,w.default.getSession(s).then((s=>{let a=s.body;if(30===n)return pm.toasts.error("Service timed out while performing authorization"),this.setState(this.STATES.AUTH,P.AUTH_STATES.FAILED),r(new Error("Exceeded max attempts"));if(!a.token||N.isEmpty(a.token))setTimeout(o,2e3,i,r);else{if(a.error)return pm.logger.warn("IntegrationTypesPerService~pollForToken: Error while getting a session for the user",a.error),pm.toasts.error("Something went wrong while fetching authorization information"),this.setState(this.STATES.AUTH,P.AUTH_STATES.FAILED),r(new Error("Error while getting a session for the user"));if(a.token)return this.fetchAuthDetails(e,t,a),i("Fetched OAuth token successfully for service ",e)}})).catch((e=>{if(e.error){let t=!this.isOnline()?"You need to be online to complete the authorization ":"Something went wrong while fetching authorization information";return pm.logger.warn("IntegrationTypesPerService~pollForToken: Error while getting a session for the user",e.error),pm.toasts.error(t),this.setState(this.STATES.AUTH,P.AUTH_STATES.FAILED),r(e.error)}}))};return new Promise(o)}fetchAuthDetails(e,t,n){w.default.services[e].fetchAuthDetails(n,((t,n)=>{t?(pm.logger.warn(`IntegrationTypesPerService~fetchAuthDetails: Error while fetching service details for ${e} `,t),pm.toasts.error(`Something went wrong while fetching authorization information for ${e}`),this.setState(this.STATES.AUTH,P.AUTH_STATES.FAILED)):(this.integrationsStore.setAuthDetails(n),this.setState(this.STATES.AUTH,P.AUTH_STATES.AUTHORISED))}))}setState(e,t){switch(e){case"AUTH":this.authorisationState=t;break;case"SESSION":this.oauthSessionId=t}}get oauthStatus(){return this.authorisationState}setLoadingIntegrationData(e){this.loadingIntegrationData=e}handleOauthStop(){C.default.closeByRoute(D.V10_API_ADD_APM_INTEGRATION_URL,{apiId:this.apiId})}handleOauthTimeout(){C.default.closeByRoute(D.V10_API_ADD_APM_INTEGRATION_URL,{apiId:this.apiId}),pm.toasts.error(this.OAUTH_INITIATOR_DETAILS.service+" didn't respond in time. Try again.",{title:"Request Timeout"})}setSelectedMonitorId(e){this.selectedMonitorId=e}setIntegrationData(e){this.editIntegrationData=e}get integrationData(){return(0,b.toJS)(this.editIntegrationData)}beforeDestroy(){this.store=null}},o=k(s.prototype,"origin",[b.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),i=k(s.prototype,"currentWorkspace",[b.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),r=k(s.prototype,"selectedMonitorId",[b.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),a=k(s.prototype,"authorisationState",[b.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),l=k(s.prototype,"oauthSessionId",[b.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=k(s.prototype,"OAUTH_INITIATOR_DETAILS",[b.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c=k(s.prototype,"OAUTH_TIMEOUT_INTERVAL",[b.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 6e4}}),p=k(s.prototype,"apiId",[b.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=k(s.prototype,"version",[b.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=k(s.prototype,"editIntegrationData",[b.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=k(s.prototype,"hydratingStore",[b.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=k(s.prototype,"loadingIntegrationData",[b.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),k(s.prototype,"setAPIVersion",[b.action],Object.getOwnPropertyDescriptor(s.prototype,"setAPIVersion"),s.prototype),k(s.prototype,"setHydratingStatus",[b.action],Object.getOwnPropertyDescriptor(s.prototype,"setHydratingStatus"),s.prototype),k(s.prototype,"isHydratingStore",[b.computed],Object.getOwnPropertyDescriptor(s.prototype,"isHydratingStore"),s.prototype),k(s.prototype,"setState",[b.action],Object.getOwnPropertyDescriptor(s.prototype,"setState"),s.prototype),k(s.prototype,"oauthStatus",[b.computed],Object.getOwnPropertyDescriptor(s.prototype,"oauthStatus"),s.prototype),k(s.prototype,"setLoadingIntegrationData",[b.action],Object.getOwnPropertyDescriptor(s.prototype,"setLoadingIntegrationData"),s.prototype),k(s.prototype,"integrationData",[b.computed],Object.getOwnPropertyDescriptor(s.prototype,"integrationData"),s.prototype),s)},"./integrations/monitoring/customComponents.js":function(e,t,n){n.r(t),n.d(t,{serviceBasedCustomComponents:function(){return a}});var s=n("./integrations/monitoring/add/Datadog/Datadog.js"),o=n("./integrations/monitoring/add/NewRelic.js"),i=n("./integrations/monitoring/edit/Datadog.js"),r=n("./integrations/monitoring/edit/NewRelic.js");const a={datadog:{customCreateComponent:s.default,customEditComponent:i.default,useLegacyDataFormat:!0},apm_datadog:{customCreateComponent:s.default,customEditComponent:i.default,useLegacyDataFormat:!0},apm_new_relic:{customCreateComponent:o.default,customEditComponent:r.default,useLegacyDataFormat:!0}}},"./integrations/monitoring/edit/Datadog.js":function(e,t,n){n.r(t),n.d(t,{DatadogAPM:function(){return T},default:function(){return M}});var s,o,i=n("./node_modules/lodash/lodash.js"),r=n.n(i),a=n("../../node_modules/react/index.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),d=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),c=n("./js/stores/IntegrationsStore.js"),p=n("./js/stores/StoreManager.js"),u=n("./integrations/monitoring/stores/APMIntegrationStore.js"),g=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),m=n("./integrations/components/base/EditIntegration.js"),h=n("./integrations/monitoring/services/index.js"),b=n("./integrations/navigation/constants.js"),f=n("./integrations/monitoring/constants.js"),v=n("./js/components/base/Buttons.js"),S=n("./js/services/NavigationService.js"),I=n("./appsdk/workbench/TabService.js"),y=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/Datadog.js"),E=n("./node_modules/uuid/index.js"),A=n.n(E),_=n("./integrations/monitoring/containers/helpers/DatadogAPMUtils.js"),w=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/DatadogAPM/DatadogCommonConfigs.js"),j=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/DatadogAPM/DatadogDashboardsAndEnvironments.js"),C=n("./integrations/utils/CommonHelperMethods.ts"),P=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/FormUpdateChecker.ts");const D=(0,C.getErrorContextObject)("Datadog APM Integration");let T=(0,d.observer)(s=class extends a.Component{constructor(e){super(e),this.listDashboardsWithIntegrationId=async e=>{this.integrationsStore.integrationClass||await this.integrationsStore.getIntegrationClassDetails(f.DATADOG_APM_CLASS_ID);const{rule:t}=this.props,{apiKey:n,appKey:s,region:o,dashboardGuids:i}=this.state,a=r().find(this.integrationsStore.integrationClass.inputs,{key:"dashboard_guids"}),l=r().get(a,"options.serviceActionId"),d=r().get(a,"id");this.setState({loadingDashboards:!0,errorDashboards:!1});const c={rule:t,type:"listDashboards",...n?{api_key:n}:{},...s?{app_key:s}:{},region:o};h.default[t].listDashboardsWithIntegrationId(c,e,l,d).then((e=>{let t=r().map(r().get(e,"dashboards"),(e=>({...e,label:e.title,value:`${_.default.getDatadogHostname(o)}${e.url}`}))),n=r().filter(t,(e=>r().includes(r().map(i,"link"),e.url)));this.setState({errorDashboards:!1,availableDashboards:t,selectedDashboards:n,loadingDashboards:!1,errorApiKey:!1,errorAppKey:!1})})).catch((e=>{pm.logger.error("Monitoring Tab Edit Form ~ Error occurred while listing dashboards",e,{context:D}),this.setState({errorDashboards:!0,loadingDashboards:!1,errorApiKey:!0,errorAppKey:!0,selectedDashboards:[],availableDashboards:[],dashboardGuids:[],environments:_.default.getEmptyEnvironmentsList()})}))},this.state={nickname:"",apiKey:"",appKey:"",errorApiKey:!1,errorAppKey:!1,errorNickname:"",dashboardGuids:[],selectedDashboards:[],availableDashboards:[],loadingDashboards:!1,errorDashboards:!1,environments:_.default.getEmptyEnvironmentsList(),region:"us1"},this.store=(0,p.resolveStoreInstance)(u.default),this.integrationsStore=(0,p.resolveStoreInstance)(c.default),this.toggle=this.toggle.bind(this),this.handleApiKeyInput=this.handleApiKeyInput.bind(this),this.handleAppKeyInput=this.handleAppKeyInput.bind(this),this.listDashboardsWithIntegrationId=this.listDashboardsWithIntegrationId.bind(this),this.onRegionSelectorChange=this.onRegionSelectorChange.bind(this),this.onDashboardSelect=this.onDashboardSelect.bind(this),this.client_category=f.API_MONITORING,this.removeEnvironmentSelector=this.removeEnvironmentSelector.bind(this),this.getInitialData=this.getInitialData.bind(this)}componentDidMount(){let{variables:e,origin:t,nickname:n}=this.props;this.setState({apiKey:e.api_key,appKey:e.app_key,region:"us"==e.region?"us1":"eu"==e.region?"eu1":e.region,apiId:e.postman_api_id,dashboardGuids:e.dashboard_guids,environments:r().map(e.environments,(e=>({...e,id:A().v4()}))),errorApiKey:!1,errorAppKey:!1,nickname:n,origin:t},(()=>{this.listDashboardsWithIntegrationId(this.props.integrationId)}))}getInitialData(){const{variables:e,name:t,rule:n}=this.props.controller.integrationData;return{name:t,rule:n,variables:r().pick(e,["api_key","app_key","region","environments","dashboard_guids"])}}onRegionSelectorChange(e){this.setState((t=>{if(e!==t.region)return{region:e,apiKey:"",appKey:"",errorApiKey:!1,errorAppKey:!1,selectedDashboards:[],availableDashboards:[],dashboardGuids:[],loadingDashboards:!1,errorDashboards:!1,environments:_.default.getEmptyEnvironmentsList()}}))}removeEnvironmentSelector(e){this.setState((t=>{let{environments:n}=t;return r()(n).splice(e,1).value(),{environments:n}}))}onDashboardSelect(e){if(!r().isArray(e))return;let t=r().map(e,(e=>({label:e.title,link:e.url})));this.setState({selectedDashboards:e,dashboardGuids:t})}handleApiKeyInput(e){let t={apiKey:e.trim(),errorApiKey:!1,dashboardGuids:[],environments:_.default.getEmptyEnvironmentsList()};r().isEmpty(e.trim())?this.setState(t,(()=>{this.listDashboardsWithIntegrationId(this.props.integrationId)})):this.setState((n=>n.apiKey!==e.trim()?t:{apiKey:e.trim(),errorApiKey:!1}),(()=>{this.listDashboardsWithIntegrationId(this.props.integrationId)}))}handleAppKeyInput(e){let t={appKey:e.trim(),errorAppKey:!1,dashboardGuids:[],environments:_.default.getEmptyEnvironmentsList()};r().isEmpty(e.trim())?this.setState(t,(()=>{this.listDashboardsWithIntegrationId(this.props.integrationId)})):this.setState((n=>n.appKey!==e.trim()?t:{appKey:e.trim(),errorAppKey:!1}),(()=>{this.listDashboardsWithIntegrationId(this.props.integrationId)}))}toggle(e){this.setState((t=>({[e]:!t[e]})))}render(){const{apiKey:e,appKey:t,region:n,errorNickname:s,environments:o,loadingDashboards:i,selectedDashboards:d,availableDashboards:c,dashboardGuids:p,errorDashboards:u,nickname:h,errorApiKey:y,errorAppKey:E}=this.state,{rule:C,apiId:D,apiVersionId:T,integrationId:M,variables:x}=this.props,N=_.default.areEnvironmentsValid(o);let O={name:h,rule:C,api_id:D,entity:"apiversion",executor:T,variables:{...e?{api_key:e}:{},...t?{app_key:t}:{},region:n,dashboard_guids:p,environments:r().map(o,(e=>({name:e.name,services:e.services})))}};return a.createElement("div",null,a.createElement(g.NicknameFieldSegment,{id:"datadog-nickname",value:h,error:s,onBlur:()=>{this.setState({nickname:h.trim(),errorNickname:r().isEmpty(h.trim())?"Please enter a nickname":""})},onChange:e=>{this.setState({nickname:e,errorNickname:""})}}),a.createElement(l.default,{direction:"column",gap:"spacing-l",padding:{paddingTop:"spacing-l"}},a.createElement(w.default,{mode:f.EDIT_MODE,handleOnApiKeyChange:e=>{this.setState({apiKey:e.target.value,errorApiKey:!1})},handleOnApiKeyBlur:()=>{this.handleApiKeyInput(e)},apiKey:e,apiKeyValidationStatus:y?"error":null,apiKeyValidationMessage:y?"Invalid API Key or APP key":null,handleOnAppKeyChange:e=>{this.setState({appKey:e.target.value,errorAppKey:!1})},handleOnAppKeyBlur:()=>{this.handleAppKeyInput(t)},appKey:t,appKeyValidationStatus:E?"error":null,appKeyValidationMessage:E?"Invalid API Key or APP key":null,region:n,handleOnRegionChange:this.onRegionSelectorChange}),a.createElement(j.default,{mode:f.EDIT_MODE,apiKey:e,appKey:t,integrationId:M,selectedDashboards:d,availableDashboards:c,handleDashboardsChange:this.onDashboardSelect,isLoadingDashboards:i,errorDashboards:u,environments:o,region:n,rule:C,onSelectEnvironmentServices:(e,t,n)=>{this.setState((s=>(s.environments[n]={id:r().get(s.environments[n],"id"),name:e,services:t},s)))},removeEnvironmentSelector:this.removeEnvironmentSelector,handleAddEnvironmentButtonClick:()=>{this.setState((e=>(e.environments.push({name:"",services:[],id:A().v4()}),e)))},isAddEnvironmentButtonDisabled:!N})),a.createElement(m.default,{type:"primary",disabled:r().isEmpty(h.trim())||y||E||!N||s||i||!(0,P.isFormUpdated)(this.getInitialData(),O),payload:O,store:this.store,rule:C,client_category:this.client_category,route:b.V10_API_EDIT_APM_INTEGRATION_URL,integrationId:M,redirect:()=>{S.default.transitionTo(b.V10_API_APM_DATADOG_INTEGRATION_DASHBOARD_NAV_IDENTIFIER,{apiId:D,integrationId:M})}},"Update"),a.createElement("div",{className:"integrations-add-actions__button--container"},a.createElement(v.Button,{className:"integrations-add-actions__button--cancel",type:"secondary",size:"small",onClick:()=>{I.default.closeByRoute(b.V10_API_EDIT_APM_INTEGRATION_URL,{apiId:D,integrationId:M})}},"Cancel")))}})||s,M=(0,d.observer)(o=class extends a.Component{render(){let{rule:e}=this.props;return e===f.DATADOG_APM_CLASS_ID?a.createElement(T,this.props):e===f.DATADOG_MONITOR_CLASS_ID?a.createElement(y.default,this.props):void 0}})||o},"./integrations/monitoring/edit/MonitoringEdit.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return _}});var s,o=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("./js/stores/SyncStatusStore.js"),a=n("./js/stores/StoreManager.js"),l=n("./integrations/monitoring/stores/APMIntegrationStore.js"),d=n("./integrations/monitoring/edit/index.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),p=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),u=n("./js/components/base/LoadingIndicator.js"),g=n("./integrations/components/error-states/ErrorIntegrations.js"),m=n("./js/services/NavigationService.js"),h=n("./appsdk/workbench/TabService.js"),b=n("./integrations/navigation/constants.js"),f=n("./api-dev/constants/APISubViews.js"),v=n("./integrations/monitoring/constants.js"),S=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationInstanceService.ts"),I=n("./integrations/components/error-states/IntegrationNotSupported.js"),y=n("./integrations/monitoring/customComponents.js"),E=n("./integrations/constants/integrationsConstants.ts"),A=n("./node_modules/lodash/lodash.js");let _=(0,i.observer)(s=class extends o.Component{constructor(e){super(e),this.state={loading:!0,error:!1,errorDetails:"",description:"",authType:"",variables:{},integrationData:{},selectedService:"",apiVersion:A.get(this.props,"controller.version")},this.store=(0,a.resolveStoreInstance)(l.default),this.fetchIntegrationDetails=this.fetchIntegrationDetails.bind(this),this.handleTabSwitch=this.handleTabSwitch.bind(this)}componentDidMount(){this.setState({selectedService:this.store.selectedService},(()=>{this.fetchIntegrationDetails()}))}fetchIntegrationDetails(){const e=this.store.getSelectedIntegration();this.setState({loading:!0},(async()=>{await(0,a.resolveStoreInstance)(r.default).onSyncAvailable({timeout:8e3});const t=this.state.selectedService;A.get(y.serviceBasedCustomComponents,[t,"useLegacyDataFormat"],!1)?p.default.getIntegrationData(e).then((t=>{if(200===t.status){const n=A.get(t.body,"data.entity"),s=this.state.apiVersion,o=A.get(t.body,"data.executor"),i={selectedIntegrationId:e,executor:o,variables:A.get(t.body,"data.variables"),rule:A.get(t.body,"data.rule"),nickname:A.get(t.body,"data.name")};s||n!==E.INTEGRATION_API_VERSION_ENTITY_TYPE||(i.apiVersion=o,this.props.controller.setAPIVersion(o)),this.setState(i,(()=>{this.props.controller.setIntegrationData({...A.get(t.body,"data"),serviceId:this.store.selectedService}),this.setState({loading:!1})}))}else this.setState({error:!0,loading:!1,errorDetails:t.body})})).catch((e=>{this.setState({loading:!1,error:!0,errorDetails:e})})):S.default.fetchIntegrationInstanceDetails(e).then((e=>{if(200===e.status){const t=A.get(e,"body.data"),n=A.get(t,"inputs"),s=A.head(A.filter(n,{type:E.INTEGRATION_INSTANCE_INPUT_ENTITY_TYPES.APIVERSION})),o=A.get(s,"value"),i={loading:!1,integrationData:t};o&&!this.state.apiVersion&&(i.apiVersion=o,this.props.controller.setAPIVersion(o)),this.setState(i,(()=>{this.props.controller.setIntegrationData(t)}))}else this.setState({error:!0,loading:!1,errorDetails:A.get(e,"body")})})).catch((e=>{pm.logger.error("MonitoringEdit ~ Unable to fetch integration data",e),this.setState({loading:!1,error:!0,errorDetails:e})}))}))}handleTabSwitch(){const{selectedIntegrationId:e,apiVersion:t}=this.state;h.default.closeByRoute(b.V10_API_EDIT_APM_INTEGRATION_URL,{apiId:this.props.controller.apiId,integrationId:e}),m.default.transitionTo("build.apiVersion",{apiId:A.get(this.props,"controller.apiId",void 0),versionId:t},{tab:f.MONITORING})}render(){const{variables:e,selectedService:t,selectedIntegrationId:n,nickname:s,rule:i,apiVersion:r}=this.state,a=A.has(y.serviceBasedCustomComponents,[t,"customEditComponent"]),l=A.get(this.props,"controller.apiId"),p=r;if(!a)return o.createElement(I.default,{apiId:l,apiVersionId:p,tab:f.MONITORING});if(this.state.error){let e={...this.state.errorDetails};return pm.logger.error("Error occurred while loading page",this.state.errorDetails),e&&"instanceNotFoundError"==A.get(e,"error.name")&&(pm.toasts.error("The integration you are looking for does not exist!"),this.handleTabSwitch()),o.createElement("div",{className:"observability-error"},o.createElement(g.default,null))}return this.state.loading?o.createElement("div",{className:"integrations-page-container"},o.createElement(u.default,null)):o.createElement("div",{className:"integrations-page-container"},o.createElement("div",{className:"integrations-edit"},o.createElement("div",{className:"integrations-edit-card"},o.createElement(c.default,{type:"h1",text:"Edit Integration"}),o.createElement(d.default,{integrationId:n,nickname:s,apiId:l,apiVersionId:p,variables:e,rule:i,origin:this.props.controller.origin,controller:this.props.controller,service:t,additionalContext:this.props.controller.additionalContext,integrationData:this.state.integrationData,source:v.EDIT_SOURCE}))))}})||s},"./integrations/monitoring/edit/NewRelic.js":function(e,t,n){n.r(t),n.d(t,{NewRelicAPM:function(){return k},default:function(){return R}});var s,o,i=n("../../node_modules/react/index.js"),r=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),a=n("./js/stores/StoreManager.js"),l=n("./integrations/monitoring/stores/APMIntegrationStore.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),c=n("./integrations/components/base/EditIntegration.js"),p=n("./integrations/monitoring/services/index.js"),u=n("./integrations/monitoring/constants.js"),g=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/ExternalLink.js"),m=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/utils.js"),h=n("./js/components/base/Buttons.js"),b=n("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),f=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/MultiSelect/MultiSelect.js"),v=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),S=n("../../node_modules/@postman/aether/esmLib/src/components/RadioGroup/RadioGroup.js"),I=n("../../node_modules/@postman/aether/esmLib/src/components/Radio/Radio.js"),y=n("../../node_modules/@postman/aether/esmLib/src/components/CheckBox/Checkbox.js"),E=n("./js/services/NavigationService.js"),A=n("./appsdk/workbench/TabService.js"),_=n("./api-dev/constants/APISubViews.js"),w=n("./integrations/navigation/constants.js"),j=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/NewRelic.js"),C=n("./integrations/monitoring/components/NewRelic/AddComponents.js"),P=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/FormUpdateChecker.ts"),D=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/ConnectedAccounts/IntegrationForms/FormHeader/ConnectedAccountsIntegrationFormHeader.js"),T=n("./js/stores/CurrentUserStore.js"),M=n("./integrations/services/AuthenticationInstanceService.ts"),x=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/UserService.ts"),N=n("./node_modules/lodash/lodash.js");const O=pm.logger.getContext("NewRelicEdit","integrations");let k=(0,r.observer)(s=class extends i.Component{constructor(e){super(e),this.listDashboardsWithIntegrationId=e=>{const{rule:t}=this.props,{dashboardGuids:n}=this.state;this.setState({loadingDashboards:!0,errorDashboards:!1}),p.default[t].listDashboardsWithIntegrationId(e).then((e=>{let t=N.map(N.get(e,"data.actor.entitySearch.results.entities"),(e=>({label:e.name,value:e.guid,...e}))),s=N.map(t,(e=>{if(N.includes(n,e.value))return e}));s=N.compact(s),this.setState({availableDashboards:t,selectedDashboard:s,loadingDashboards:!1})})).catch((e=>{this.setState({errorDashboards:!0,loadingDashboards:!1,selectedDashboard:[],availableDashboards:[]})}))},this.listServiesWithIntegrationId=e=>{const{rule:t}=this.props,{serviceGuids:n}=this.state;this.setState({loadingServices:!0,errorServices:!1}),p.default[t].listSevicesWithIntegrationId(e).then((e=>{let t=N.map(N.get(e,"data.actor.entitySearch.results.entities"),(e=>({label:e.name,value:e.guid,...e}))),s=N.map(t,(e=>{if(N.includes(n,e.value))return e}));s=N.compact(s),this.setState({availableServices:t,selectedService:s,loadingServices:!1})})).catch((e=>{var t,n;this.setState({orphaned:403===(null===(t=e.error)||void 0===t?void 0:t.statusCode)&&"newRelicError"===(null===(n=e.error)||void 0===n?void 0:n.name),errorServices:!0,loadingServices:!1,selectedService:[],availableServices:[]})}))},this.state={nickname:"",apiKey:"",errorNickname:"",errorApiKey:"",monitor:"",region:u.NEW_RELIC_REGIONS.US,isUsingApiKeyInput:!0,loadingAuthenticationInstances:!0,authenticationInstances:[],addNewRelicToTeam:!1,installedAppFeatureFlag:!1,orphaned:!1,authToBeUsed:""},this.store=(0,a.resolveStoreInstance)(l.default),this.toggle=this.toggle.bind(this),this.onRegionSelectorChange=this.onRegionSelectorChange.bind(this),this.onServiceSelect=this.onServiceSelect.bind(this),this.handleApiKeyInput=this.handleApiKeyInput.bind(this),this.listServices=this.listServices.bind(this),this.onDashboardSelect=this.onDashboardSelect.bind(this),this.reauthenticate=this.reauthenticate.bind(this),this.client_category=u.API_MONITORING,this.getInitialState=this.getInitialState.bind(this),this.changeAuthenticationCallback=this.changeAuthenticationCallback.bind(this)}componentDidMount(){const{origin:e,variables:t}=this.props,n=(0,u.isFeatureFlagEnabled)(u.NEW_RELIC_APM_CLASS_ID);this.setState({...this.getInitialState(),isUsingApiKeyInput:!t.auth,installedAppFeatureFlag:n,origin:e},(()=>{this.listDashboardsWithIntegrationId(this.props.integrationId),this.listServiesWithIntegrationId(this.props.integrationId),n&&this.fetchAuthenticationInstance()}))}fetchAuthenticationInstance(){const e=(0,a.resolveStoreInstance)(T.default);this.setState({loadingAuthenticationInstances:!0}),M.default.listAuthenticationInstances({scope:[{type:u.AUTHENTICATION_INSTANCE_SCOPES.TEAM,id:e.teamId}],authenticationClass:[u.AUTHENTICATION_CLASSES.NEW_RELIC_USER],service:[u.NEW_RELIC_SERVICE_ID]}).then((({body:e})=>{if(N.isNil(e.data))return pm.logger.error("BrowseIntegrations-AddNewRelic~Error loading authentication instances! Received null response!",{body:e},{context:O}),this.setState({loadingAuthenticationInstances:!1});if(N.isEmpty(e.data))return this.setState({authenticationInstances:[],loadingAuthenticationInstances:!1});const t=N.head(e.data);x.default.fetchUserInfo(t.createdBy,((n,s)=>(n&&pm.logger.error("Error occurred while fetching user meta for authentication instance",n),t.createdByDetails=N.get(s,["body","users",t.createdBy]),this.setState({authenticationInstances:e.data,loadingAuthenticationInstances:!1}))))})).catch((e=>(pm.logger.error("APIBuilder-EditNewRelic~Error loading authentication instances!",e,{context:O}),this.setState({loadingAuthenticationInstances:!1}))))}getInitialState(){const{variables:e,nickname:t}=this.props;return{apiKey:e.api_key,region:e.region?e.region:u.NEW_RELIC_REGIONS.US,apiId:e.postman_api_id,serviceGuids:e.service_guids,dashboardGuids:e.dashboard_guids,nickname:t,addNewRelicToTeam:!1,authToBeUsed:e.auth}}toggle(e){this.setState((t=>({[e]:!t[e]})))}onServiceSelect(e){if(!N.isArray(e))return;let t=N.map(e,(e=>e.value));this.setState({selectedService:e,serviceGuids:t})}onDashboardSelect(e){if(!N.isArray(e))return;let t=N.map(e,(e=>e.value));this.setState({selectedDashboard:e,dashboardGuids:t})}onRegionSelectorChange(e){this.setState({region:e})}handleApiKeyInput(e){this.setState({apiKey:e.trim(),errorApiKey:N.isEmpty(e.trim())?"Please enter an API key":""},(()=>{this.listServices(),this.listDashboards()}))}listServices(){const{rule:e}=this.props,{apiKey:t,region:n,serviceGuids:s,isUsingApiKeyInput:o,authenticationInstances:i}=this.state,r={rule:e,type:"listServices"};o?(r.api_key=t,r.region=n):r.serviceAuth=N.head(i).id,this.setState({loadingServices:!0,errorServices:!1}),p.default[e].listServices(r).then((e=>{const t=N.map(N.get(e,"data.actor.entitySearch.results.entities"),(e=>({label:e.name,value:e.guid,...e})));let n=N.map(t,(e=>{if(N.includes(s,e.value))return e}));n=N.compact(n),this.setState({availableServices:t,selectedService:n,loadingServices:!1})})).catch((e=>{this.setState({errorServices:!0,loadingServices:!1,selectedService:[],availableServices:[]})}))}listDashboards(){const{rule:e}=this.props,{apiKey:t,region:n,dashboardGuids:s,isUsingApiKeyInput:o,authenticationInstances:i}=this.state,r={rule:e,type:"listDashboards"};o?(r.api_key=t,r.region=n):r.serviceAuth=N.head(i).id,this.setState({loadingDashboards:!0,errorDashboards:!1}),p.default[e].listServices(r).then((e=>{let t=N.map(N.get(e,"data.actor.entitySearch.results.entities"),(e=>({label:e.name,value:e.guid,...e}))),n=N.map(t,(e=>{if(N.includes(s,e.value))return e}));n=N.compact(n),this.setState({availableDashboards:t,selectedDashboard:n,loadingDashboards:!1})})).catch((e=>{this.setState({errorDashboards:!0,loadingDashboards:!1,selectedDashboard:[],availableDashboards:[]})}))}reauthenticate(){this.setState({isUsingApiKeyInput:!0,authToBeUsed:null})}changeAuthenticationCallback(){const{authenticationInstances:e}=this.state;this.setState({orphaned:!1,authToBeUsed:N.head(e).id},(()=>{this.listServices(),this.listDashboards()}))}render(){const{apiKey:e,region:t,errorApiKey:n,errorNickname:s,availableServices:o,selectedService:r,loadingServices:a,loadingDashboards:l,selectedDashboard:p,availableDashboards:j,serviceGuids:T,dashboardGuids:M,errorServices:x,errorDashboards:O,origin:k,nickname:R,orphaned:L,authToBeUsed:V,isUsingApiKeyInput:F,authenticationInstances:U,loadingAuthenticationInstances:H,addNewRelicToTeam:K,installedAppFeatureFlag:B}=this.state,{rule:G,apiId:W,apiVersionId:z,integrationId:q,variables:$}=this.props,Y=!H&&N.isEmpty(U)&&L,J=B&&!H&&N.isEmpty(U),X=!N.isEmpty(U)&&V!==N.head(U).id,Q=e||V;let Z={name:R,rule:G,api_id:W,entity:"apiversion",executor:z,variables:{...e&&F?{api_key:e}:{},...F?{region:t,auth:""}:{auth:V},postman_api_id:W,service_guids:T,dashboard_guids:M}};return i.createElement("div",null,i.createElement(d.NicknameFieldSegment,{id:"new-relic-nickname",value:R,error:s,onBlur:()=>{this.setState({nickname:R.trim(),errorNickname:N.isEmpty(R.trim())?"Please enter a nickname":""})},onChange:e=>{this.setState({nickname:e,errorNickname:""})}}),F?i.createElement(d.SensitiveFieldSegment,{title:i.createElement(b.default,{text:"New Relic API Key",type:"primary"}),maskedPlaceholderWhenEmpty:!0,description:"Enter the User Key provided by New Relic or ",customLink:i.createElement(g.default,{extUrl:"https://go.pstmn.io/docs-newrelic-insights-key"},"generate one here"),id:"new-relic-key",value:e,error:n,onBlur:()=>{this.handleApiKeyInput(e)},onChange:e=>{this.setState({apiKey:e,errorApiKey:""})}}):i.createElement(i.Fragment,null,i.createElement(D.default,{connectedAccount:N.head(U),isLoading:H,isUsingPersonalCredentials:F,reauthenticateCallback:this.reauthenticate,primarySuccessText:"Connected to an account on New Relic by "+N.get(N.head(U),"createdByDetails.name","your team member"),primaryOrphanedText:"Connected New Relic account was removed",reauthenticateText:"Connect to different New Relic account",orphaned:Y,reauthenticateWithAnotherAccount:X,primaryChangeAuthenticationText:"Connected New Relic account is changed by "+N.get(N.head(U),"createdByDetails.name","your team member"),changeAuthenticationText:"Setup services using this authenticated account",changeAuthenticationCallback:this.changeAuthenticationCallback}),X?i.createElement(d.SensitiveFieldSegment,{title:i.createElement(b.default,{text:"New Relic API Key",type:"primary"}),maskedPlaceholderWhenEmpty:!0,description:"Enter the User Key provided by New Relic or ",customLink:i.createElement(g.default,{extUrl:"https://go.pstmn.io/docs-newrelic-insights-key"},"generate one here"),id:"new-relic-key",value:e,error:n,onBlur:()=>{this.handleApiKeyInput(e)},onChange:e=>{this.setState({apiKey:e,errorApiKey:""})}}):null),i.createElement(C.MultiSelectWrapper,null,i.createElement(f.default,{menuMaxHeight:"36vh",value:r,options:o,placeholder:"Select New Relic Services",label:i.createElement(b.default,{text:"Services",type:"secondary",infoText:"New Relic Charts will be fetched via a public URL."}),onChange:this.onServiceSelect,isLoading:a,error:x&&"Unable to load services",emptyStateMessage:"No services found"})),i.createElement(C.MultiSelectWrapper,null,i.createElement(f.default,{menuMaxHeight:"24vh",value:p,options:j,placeholder:"Select Dashboards",label:i.createElement(b.default,{text:"Link Dashboards (Optional)",type:"secondary"}),onChange:this.onDashboardSelect,isLoading:l,error:O&&"Unable to load dashboards",emptyStateMessage:"No dashboards found"})),F||X?i.createElement(i.Fragment,null,i.createElement(C.RadioButtonDiv,null,i.createElement(b.default,{text:"New Relic region",type:"primary"}),i.createElement(v.default,{type:"para"},"This helps us know what New Relic region to use"),i.createElement(S.default,{name:"Select New Relic site",value:this.state.region,direction:"column",onChange:e=>{this.onRegionSelectorChange(e)}},i.createElement(I.default,{label:"US (.com)",value:"us"}),i.createElement(I.default,{label:"EU (.eu)",value:"eu"}))),J?i.createElement("div",null,i.createElement(y.default,{isChecked:K,label:u.ADD_NEW_RELIC_TO_TEAM.LABEL,helperText:u.ADD_NEW_RELIC_TO_TEAM.HELPER_TEXT,onChange:()=>{this.setState({addNewRelicToTeam:!K})}})):null):null,i.createElement(c.default,{type:"primary",disabled:N.isEmpty(R.trim())||!Q||N.isEmpty(T)||!(0,P.isFormUpdated)(this.getInitialState(),this.state),payload:Z,generatePayload:K?m.default.createAndPopulateNewRelicAuthenticationInstance:null,store:this.store,rule:G,client_category:this.client_category,redirect:()=>{k===u.SERVICES_CONTAINER?E.default.transitionTo("build.apiVersion",{apiId:W,versionId:z},{tab:_.MONITORING}):E.default.transitionTo(w.V10_API_APM_INTEGRATION_DASHBOARD_NAV_IDENTIFIER,{apiId:W,integrationId:q})},route:w.V10_API_EDIT_APM_INTEGRATION_URL,integrationId:q},"Update"),i.createElement("div",{className:"integrations-add-actions__button--container"},i.createElement(h.Button,{className:"integrations-add-actions__button--cancel",type:"secondary",size:"small",onClick:()=>{A.default.closeByRoute(w.V10_API_EDIT_APM_INTEGRATION_URL,{apiId:W,integrationId:q})}},"Cancel")))}})||s,R=(0,r.observer)(o=class extends i.Component{render(){let{rule:e}=this.props;return e===u.NEW_RELIC_APM_CLASS_ID?i.createElement(k,this.props):e===u.NEW_RELIC_MONITOR_CLASS_ID?i.createElement(j.default,this.props):void 0}})||o},"./integrations/monitoring/edit/index.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return m}});var s=n("../../node_modules/react/index.js"),o=n("../../node_modules/mobx/lib/mobx.module.js"),i=n("./appsdk/workbench/TabService.js"),r=n("./integrations/navigation/constants.js"),a=n("./integrations/monitoring/constants.js"),l=n("./integrations/monitoring/customComponents.js"),d=n("./integrations/components/base/IntegrationEditDataFormatWrapper.js"),c=n("./node_modules/lodash/lodash.js");function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},p.apply(this,arguments)}let u;function g(e,t){i.default.closeByRoute(r.V10_API_EDIT_APM_INTEGRATION_URL,{integrationId:`${e}`,apiId:u.apiId}),"cancel"!==t&&pm.windowEvents.emit(`${a.API_MONITORING}-integration-edited`,{apiId:u.apiId,apiVersionId:u.version})}function m(e){const{service:t,source:n}=e,i=c.get(l.serviceBasedCustomComponents,[t,"customEditComponent"]);return u=e.controller,i?c.get(l.serviceBasedCustomComponents,[t,"useLegacyDataFormat"],!1)?s.createElement(i,p({},e,{controller:u,integrationFormActions:g,selectedWorkspace:(0,o.toJS)(u.currentWorkspace),showDisabledApiVersionSelector:!1,source:n})):s.createElement(d.IntegrationEditDataFormatWrapper,p({},e,{FormComponent:i,workspaceId:c.get((0,o.toJS)(u.currentWorkspace),"value"),postEditAction:g})):s.createElement("div",null)}},"./integrations/monitoring/sentry/DetailedView.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return S}});var s,o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),i=n("../../node_modules/react/index.js"),r=n("./integrations/components/api-builder/DetailedViewContainer.js"),a=n("./integrations/monitoring/sentry/components/IntegrationActionsMenu.js"),l=n("./integrations/monitoring/sentry/components/RefreshIssuesButton.js"),d=n("./integrations/monitoring/sentry/components/IssueFilters.js"),c=n("./integrations/monitoring/sentry/components/ProjectName.js"),p=n("./integrations/monitoring/sentry/components/IssuesTable.js"),u=n("./integrations/monitoring/sentry/constants.js"),g=n("./appsdk/workbench/TabService.js"),m=n("./js/services/NavigationService.js"),h=n("./api-dev/constants/APISubViews.js"),b=n("./integrations/navigation/constants.js"),f=n("./js/modules/services/AnalyticsService.js"),v=n("./node_modules/lodash/lodash.js");let S=(0,o.observer)(s=class extends i.Component{constructor(e){super(e),this.onEnvironmentChange=e=>{const t=v.get(e,"value","");this.setState({selectedEnvironment:t},(()=>{f.default.addEventV2({category:u.ANALYTICS_EVENT_CATEGORY,action:"update-environment",value:t,label:u.SOURCE.DETAILD_VIEW})}))},this.onDurationChange=e=>{const t=v.get(e,"value","");this.setState({selectedDuration:t},(()=>{f.default.addEventV2({category:u.ANALYTICS_EVENT_CATEGORY,action:"update-duration",value:t,label:u.SOURCE.DETAILD_VIEW})}))},this.state={selectedEnvironment:u.ALL_ENVIRONEMENT_OPTION_VALUE,selectedDuration:v.get(v.nth(u.DURATION_OPTIONS,u.DEFAULT_DURATION_INDEX),"value")},this.onEnvironmentChange=this.onEnvironmentChange.bind(this),this.onDurationChange=this.onDurationChange.bind(this),this.issuesTableRef=i.createRef()}render(){const{selectedDuration:e,selectedEnvironment:t}=this.state,{apiId:n,versionId:s,integrationId:o}=this.props.controller;return i.createElement(r.default,{titleHeading:"Sentry",titleSubheadingComponent:i.createElement(c.default,{integrationId:o}),titleRightSideComponent:i.createElement(a.default,{integrationId:o,apiId:n,apiVersionId:s,menuButtonSize:"large"}),subtitleRightSideComponent:i.createElement(l.default,{onClick:()=>{f.default.addEventV2({category:u.ANALYTICS_EVENT_CATEGORY,action:"refresh-issues",label:u.SOURCE.DETAILD_VIEW}),v.invoke(this.issuesTableRef,["current","refreshIssues"])}}),subtitleLeftSideComponent:i.createElement(d.default,{integrationId:o,onEnvironmentChange:this.onEnvironmentChange,onDurationChange:this.onDurationChange}),bodyComponent:i.createElement(p.default,{ref:this.issuesTableRef,source:u.SOURCE.DETAILD_VIEW,integrationId:o,selectedEnvironment:t,selectedDuration:e}),onBackButtonClick:()=>{g.default.closeByRoute(b.V10_API_SENTRY_INTEGRATION_DASHBOARD_URL,{apiId:n,integrationId:`${o}`}),m.default.transitionTo("build.apiVersion",{apiId:n,versionId:s},{tab:h.MONITORING})}})}})||s},"./integrations/monitoring/sentry/DetailedViewController.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return r}});var s=n("./appsdk/workbench/BaseWorkbenchController.js"),o=n("./api-dev/interfaces/APIInterface.js"),i=n("./node_modules/lodash/lodash.js");class r extends s.default{didCreate({routeParams:e,queryParams:t}){this.apiId=i.get(e,"apiId"),this.versionId=i.get(t,"version"),this.integrationId=i.get(e,"integrationId"),this.apiId&&(0,o.getAPI)(this.apiId)}}},"./integrations/monitoring/sentry/components/IntegrationActionsMenu.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return E}});var s=n("../../node_modules/react/index.js"),o=n("./node_modules/prop-types/index.js"),i=n.n(o),r=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/Menu.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuButton.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuList.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuItem.js"),u=n("./js/stores/SyncStatusStore.js"),g=n("./js/stores/StoreManager.js"),m=n("./integrations/monitoring/stores/APMIntegrationStore.js"),h=n("./js/services/NavigationService.js"),b=n("./integrations/api-observability/constants.ts"),f=n("./integrations/monitoring/constants.js"),v=n("./integrations/components/DeleteIntegrationModal.js"),S=n("./integrations/utils/CommonHelperMethods.ts"),I=n("./integrations/monitoring/sentry/constants.js"),y=n("./integrations/navigation/constants.js");class E extends s.Component{constructor(e){super(e),this.state={showDeleteModal:!1,canEditDeleteIntegration:!1},this.store=(0,g.resolveStoreInstance)(m.default)}componentDidMount(){const{apiId:e}=this.props;(0,g.resolveStoreInstance)(u.default).onSyncAvailable({timeout:I.SYNC_STATUS_TIMEOUT}).then((()=>(0,S.fetchApiPermissions)(e))).then((e=>{this.setState({canEditDeleteIntegration:e})}))}render(){const{showDeleteModal:e,canEditDeleteIntegration:t}=this.state,{apiId:n,apiVersionId:o,integrationId:i,menuButtonSize:u}=this.props,g=!t&&b.PERMISSION_ERROR;return s.createElement(r.default,{justifyContent:"center",alignItems:"center"},s.createElement(a.default,null,s.createElement(l.default,null,s.createElement(d.default,{icon:"icon-action-options-stroke",type:"tertiary",size:u||"small"})),s.createElement(c.default,null,s.createElement(p.default,{onClick:()=>{h.default.transitionTo(y.V10_API_EDIT_APM_INTEGRATION_NAV_IDENTIFIER,{apiId:n,integrationId:i},{service:I.SERVICE_ID,rule:I.INTEGRATION_CLASS_NAME})},isDisabled:!t,tooltip:g},"Edit Integration"),s.createElement(p.default,{type:"destructive",onClick:()=>{this.setState({showDeleteModal:!0})},isDisabled:!t,tooltip:g},"Delete Integration"))),s.createElement(v.default,{size:"small",store:this.store,category:f.API_MONITORING,payload:{api_id:n,executor:o},isOpen:e,handleCloseModal:()=>{this.setState({showDeleteModal:!1})},integrationId:i,ruleId:I.INTEGRATION_CLASS_NAME}))}}E.propTypes={integrationId:i().string.isRequired,apiId:i().string.isRequired,apiVersionId:i().string.isRequired,menuButtonSize:i().string}},"./integrations/monitoring/sentry/components/IssueDetails.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return y}});var s,o=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),i=n("../../node_modules/react/index.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Badge/Badge.js"),p=n("./integrations/monitoring/sentry/service.js"),u=n("./node_modules/prop-types/index.js"),g=n.n(u),m=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),h=n("./integrations/monitoring/sentry/components/StackTraceItem.js"),b=n("./integrations/monitoring/sentry/constants.js"),f=n("./appsdk/components/link/Link.js"),v=n("./node_modules/lodash/lodash.js");const S=(0,m.default)(r.default)`
    background-color: var(--background-color-secondary);
    padding: var(--spacing-m) var(--spacing-m) var(--spacing-m) calc(var(--spacing-xxl) + var(--spacing-s));
  `,I=(0,m.default)(r.default)`
    row-gap: var(--spacing-xs);
  `;let y=(0,o.observer)(s=class extends i.Component{constructor(e){super(e),this.state={issueDetails:{},loadingDetails:!0},this.fetchIssueDetails=this.fetchIssueDetails.bind(this)}fetchIssueDetails(){this.setState({loadingDetails:!0});const{integrationId:e,issueId:t,sentryEnvironment:n}=this.props,s={inputs:{issue_id:t,sentryEnvironment:n}};p.default.fetchIssueDetails(e,s).then((e=>{this.setState({loadingDetails:!1,issueDetails:e})})).catch((e=>{pm.logger.error("Sentry.IssueDetails ~ Error in fetching issue details",e),this.setState({loadingDetails:!1})}))}componentDidMount(){this.fetchIssueDetails()}render(){const{issueDetails:e,loadingDetails:t}=this.state,n=v.get(e,["metadata","type"],""),s=v.get(e,["metadata","value"],""),o=v.get(e,"entries",[]),p=v.first(v.filter(o,{type:"exception"})),u=v.get(p,"data.values[0].stacktrace.frames",[]);return t?i.createElement(S,{justifyContent:"center",alignItems:"center"},i.createElement(a.default,{size:"small",description:b.LOADING_ISSUE_DETAILS})):v.isEmpty(e)?i.createElement(S,{justifyContent:"center",alignItems:"end"},i.createElement(l.default,null,b.ERROR_MESSAGES.UNABLE_TO_FETCH_ISSUES_DETAILS," "),i.createElement(f.default,{onClick:e=>{e.preventDefault(),this.fetchIssueDetails()}},i.createElement(l.default,{type:"link-default"},i.createElement(l.default,null,"Try again")))):i.createElement(S,{direction:"column"},i.createElement(r.default,{direction:"row"},i.createElement(r.default,{justifyContent:"center",alignItems:"flex-start"},i.createElement(d.default,{type:"h5",text:"Tags: "})),i.createElement(I,{justifyContent:"flex-start",alignItems:"center",wrap:"wrap",width:"100%"},v.map(e.tags,(e=>i.createElement(c.default,{type:"neutral",text:`${v.lowerCase(e.key)}: ${e.value}`}))))),(n||s)&&i.createElement(i.Fragment,null,i.createElement("br",null),i.createElement(d.default,{type:"h5",text:n}),i.createElement(l.default,null,s)),!v.isEmpty(u)&&i.createElement(i.Fragment,null,i.createElement("br",null),v.map(u,(e=>i.createElement(h.default,{traceFrameData:e})))),i.createElement("br",null))}})||s;y.propTypes={integrationId:g().string.isRequired,issueId:g().string.isRequired,sentryEnvironment:g().string}},"./integrations/monitoring/sentry/components/IssueFilters.js":function(e,t,n){n.r(t);var s=n("../../node_modules/react/index.js"),o=n("./node_modules/prop-types/index.js"),i=n.n(o),r=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/SingleSelect/SingleSelect.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Toast/withToast.js"),p=n("./integrations/monitoring/sentry/service.js"),u=n("./integrations/monitoring/sentry/constants.js"),g=n("./node_modules/lodash/lodash.js");const m=(0,r.default)(a.default)`
    & .aether-dropdown__control {
      border: none;
    }
    & .aether-dropdown__control--is-focused, &:hover {
      border: none;
      box-shadow: none;
    }
  `;class h extends s.Component{constructor(e){super(e),this.handleEnvironmentChange=e=>{this.setState({selectedEnvironment:e},(()=>{this.props.onEnvironmentChange(e)}))},this.handleDurationChange=e=>{this.setState({selectedDuration:e},(()=>{this.props.onDurationChange(e)}))},this.state={environments:[],selectedDuration:g.nth(u.DURATION_OPTIONS,u.DEFAULT_DURATION_INDEX),selectedEnvironment:g.first(u.ENVIRONMENT_DEFAULT_OPTION),loadingEnvironments:!0},this.addToast=this.props.addToast,this.handleEnvironmentChange=this.handleEnvironmentChange.bind(this),this.handleDurationChange=this.handleDurationChange.bind(this)}componentDidMount(){const{integrationId:e}=this.props;p.default.fetchEnvironments(e).then((e=>{const t=g.map(e,(e=>({value:e.value,label:e.name})))||[];this.setState({loadingEnvironments:!1,environments:[...u.ENVIRONMENT_DEFAULT_OPTION,...t]})})).catch((e=>{pm.logger.error("sentry.IssueFilters ~ Error fetching environments",e),this.addToast({title:u.ENVIROMENT_LOADING_FAILED_TOAST.title,status:"error",description:u.ENVIROMENT_LOADING_FAILED_TOAST.description}),this.setState({loadingEnvironments:!1})}))}render(){const{loadingEnvironments:e,environments:t,selectedEnvironment:n,selectedDuration:o}=this.state;return s.createElement(l.default,{direction:"row"},s.createElement(l.default,{justifyContent:"center",alignItems:"center"},s.createElement(d.default,{color:"content-color-secondary"},"Environments:")),s.createElement(m,{triggerWidth:"auto",menuWidth:"auto",isClearable:!1,isLoading:e,onChange:this.handleEnvironmentChange,placeholder:"Select Environment",value:n,options:t}),s.createElement(l.default,{justifyContent:"center",alignItems:"center"},s.createElement(d.default,{color:"content-color-secondary"},"Duration:")),s.createElement(m,{triggerWidth:"auto",menuWidth:"auto",isClearable:!1,options:u.DURATION_OPTIONS,onChange:this.handleDurationChange,value:o,placeholder:"Select duration"}))}}h.propTypes={onEnvironmentChange:i().func.isRequired,onDurationChange:i().func.isRequired,integrationId:i().string.isRequired},t.default=(0,c.default)(h)},"./integrations/monitoring/sentry/components/IssuesTable.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return _}});var s=n("../../node_modules/react/index.js"),o=n("./node_modules/prop-types/index.js"),i=n.n(o),r=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Badge/Badge.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/BlankState/BlankState.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/UnableToLoad.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/TestPass.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/Table/Table.js"),h=n("./integrations/utils/CommonHelperMethods.ts"),b=n("./integrations/monitoring/sentry/constants.js"),f=n("./integrations/monitoring/sentry/service.js"),v=n("./integrations/monitoring/sentry/components/IssueDetails.js"),S=n("./js/external-navigation/ExternalNavigationService.js"),I=n("./js/modules/services/AnalyticsService.js"),y=n("./node_modules/lodash/lodash.js");const E=r.default.div`
    display: flex;
    aligh-items: center;
    width: 100%;
  `,A=r.default.div`
    margin: var(--spacing-m);
    overflow:hidden;
  `;class _ extends s.Component{constructor(e){super(e),this.state={issuesList:[],loadingIssues:!0,nextCursor:"",errorFetchingIssues:!1},this.refreshIssues=this.refreshIssues.bind(this),this.issueRowSubComponent=this.issueRowSubComponent.bind(this),this.getEmptyTableComponent=this.getEmptyTableComponent.bind(this),this.getSentryTableColumns=this.getSentryTableColumns.bind(this)}componentDidMount(){this.refreshIssues()}componentDidUpdate(e){const{selectedEnvironment:t,selectedDuration:n}=this.props;e.selectedEnvironment===t&&e.selectedDuration===n||this.refreshIssues()}issueRowSubComponent(e){const{integrationId:t,selectedEnvironment:n}=this.props;return s.createElement(v.default,{integrationId:t,issueId:e.id,sentryEnvironment:n})}getSentryTableColumns(){const{source:e}=this.props;return[{Header:"Issues",accessor:e=>[y.get(e,"title"),y.get(e,"permalink")],Cell:({value:t})=>{const[n,o]=t;return s.createElement(E,{onClick:t=>{t.preventDefault(),I.default.addEventV2({category:b.ANALYTICS_EVENT_CATEGORY,action:"open-issue-on-sentry",label:e}),(0,S.openExternalLink)(o,"_blank")}},s.createElement(a.default,{type:"link-default",isExternal:!0,isTruncated:!0},n))}},{Header:"Level",accessor:"level",Cell:({value:e})=>(e||(e="N/A"),s.createElement(l.default,{alignItems:"center"},s.createElement(d.default,{status:y.get(b.LEVEL_TO_BADGE_STATUS_MAPPING,e,b.LEVEL_TO_BADGE_STATUS_MAPPING.default),text:e}))),cellWidth:"100px"},{Header:"Handled",accessor:"isUnhandled",Cell:({value:e})=>{const t=e?"No":"Yes";return s.createElement(l.default,{alignItems:"center"},s.createElement(d.default,{status:"neutral",text:t}))},cellWidth:"90px"},{Header:"First Seen",accessor:"firstSeen",Cell:e=>s.createElement(l.default,{alignItems:"center"},s.createElement(a.default,{isTruncated:!0},(0,h.getRelativeTime)(e.value))),cellWidth:"120px"},{Header:"Last Seen",accessor:"lastSeen",Cell:e=>s.createElement(l.default,{alignItems:"center"},s.createElement(a.default,{isTruncated:!0},(0,h.getRelativeTime)(e.value))),cellWidth:"120px"},{Header:"Events",accessor:"count",Cell:e=>s.createElement(l.default,{alignItems:"center"},s.createElement(a.default,{isTruncated:!0},y.toString(e.value))),cellWidth:"80px"},{Header:"Users",accessor:"userCount",Cell:e=>s.createElement(l.default,{alignItems:"center"},s.createElement(a.default,{isTruncated:!0},y.toString(e.value))),cellWidth:"80px"}]}getEmptyTableComponent(){const{errorFetchingIssues:e}=this.state;return e?s.createElement(c.default,{description:"Unable to load issues.",secondaryAction:s.createElement(p.default,{type:"outline",text:"Try Again",onClick:this.refreshIssues})},s.createElement(u.default,null)):s.createElement(c.default,{title:"Things look good!",description:"We couldn’t find any issues.",secondaryAction:s.createElement(p.default,{type:"outline",text:"Refresh",onClick:this.refreshIssues})},s.createElement(g.default,null))}refreshIssues(e){const{integrationId:t,selectedEnvironment:n,selectedDuration:s,issuesLimit:o}=this.props,{cursor:i}=this.state;e?this.setState({loadingIssues:!0}):this.setState({loadingIssues:!0,issuesList:[]}),f.default.fetchIssues(t,{inputs:{sentryEnvironment:n,sentryDuration:s,cursor:i,limit:o||b.SINGLE_API_CALL_ISSUE_LIMIT}}).then((t=>{const n=y.get(t,"issues",[]),s=y.get(t,"nextCursor");let o=[];o=e?[...this.state.issuesList,...n]:n,this.setState({loadingIssues:!1,errorFetchingIssues:!1,issuesList:o,cursor:s})})).catch((e=>{pm.logger.error("Sentry.IssuesTable ~ Error fetching issues",e),this.setState({loadingIssues:!1,errorFetchingIssues:!0})}))}render(){const{issuesList:e,loadingIssues:t,cursor:n}=this.state,{hideLoadmoreButton:o}=this.props;return s.createElement(A,null,s.createElement(m.default,{data:e,columns:this.getSentryTableColumns(),sorting:!0,rowExpanded:this.issueRowSubComponent,loader:{isLoading:t,showLoadMoreButton:!o&&n,onLoadMore:()=>{this.refreshIssues(!0)}},blankState:{isEmpty:y.isEmpty(e)&&!t,component:this.getEmptyTableComponent()}}))}}_.propTypes={integrationId:i().string.isRequired,selectedEnvironment:i().string,selectedDuration:i().string,hideLoadmoreButton:i().bool,source:i().string,issuesLimit:i().number}},"./integrations/monitoring/sentry/components/ProjectName.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return u}});var s=n("../../node_modules/react/index.js"),o=n("./node_modules/prop-types/index.js"),i=n.n(o),r=n("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),d=n("./integrations/monitoring/sentry/service.js"),c=n("./integrations/monitoring/sentry/constants.js"),p=n("./node_modules/lodash/lodash.js");class u extends s.Component{constructor(e){super(e),this.state={projectName:"",loadingProjectName:!0}}componentDidMount(){const{integrationId:e}=this.props;d.default.fetchProjectDetails(e).then((e=>{this.setState({loadingProjectName:!1,projectName:p.get(e,"name")})})).catch((e=>{pm.logger.error("Sentry.ProjectName ~ Error in fetching project details",e),this.setState({loadingProjectName:!1,errorIssues:e})}))}render(){const{projectName:e,loadingProjectName:t}=this.state;return s.createElement(s.Fragment,null,t?s.createElement(r.default,{size:"small",description:c.LOADING_PROJECT_NAME_MESSAGE}):s.createElement(a.default,{direction:"row"},s.createElement(l.default,{color:"content-color-secondary"}," Project:  ",e)))}}u.propTypes={integrationId:i().string.isRequired}},"./integrations/monitoring/sentry/components/RefreshIssuesButton.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return l}});var s=n("../../node_modules/react/index.js"),o=n("./node_modules/prop-types/index.js"),i=n.n(o),r=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),a=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-refresh-stroke.js");class l extends s.Component{constructor(e){super(e)}render(){const{onClick:e}=this.props;return s.createElement(r.default,{onClick:e,icon:s.createElement(a.default,null),text:"Refresh",type:"tertiary",size:"medium"})}}l.propTypes={onClick:i().func.isRequired}},"./integrations/monitoring/sentry/components/StackTraceItem.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return v}});var s=n("../../node_modules/react/index.js"),o=n("./node_modules/prop-types/index.js"),i=n.n(o),r=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),d=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-subtract-stroke-small.js"),c=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-add-stroke-small.js"),p=n("./node_modules/lodash/lodash.js");const u=(0,r.default)(a.default)`
    border-radius: var(--border-radius-default);
    border: var(--border-width-default) var(--border-style-solid) var(--border-color-default);
  `,g=r.default.div`
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border: var(--border-width-default) var(--border-style-solid) var(--border-color-strong);
    background-color: var(--background-color-primary);
    padding: var(--spacing-xs) var(--spacing-m);
  `,m=r.default.div`
    background-color: var(--background-color-primary);
  `,h=r.default.pre`
    font-size: var(--text-size-m);
    padding: var(--spacing-xs) var(--spacing-m);
    margin: var(--spacing-zero);
  `,b=r.default.pre`
    font-size: var(--text-size-m);
    padding: var(--spacing-xs) var(--spacing-m);
    margin: var(--spacing-zero) var(--spacing-zero) var(--spacing-zero) var(--spacing-xs) !important;
    overflow: hidden;
    text-overflow: ellipsis;
  `,f=(0,r.default)(a.default)`
    background-color: var(--background-color-info);
  `;class v extends s.Component{constructor(e){super(e),this.state={showDetails:!1},this.getTraceTitle=this.getTraceTitle.bind(this),this.getTitleIcon=this.getTitleIcon.bind(this)}getTitleIcon(){const{showDetails:e}=this.state;return e?s.createElement(d.default,null):s.createElement(c.default,null)}getTraceTitle(e){const{filename:t,absPath:n,lineNo:o}=e,i=p.get(e,"function");return s.createElement(a.default,{direction:"row"},s.createElement(l.default,null,n||t,i&&s.createElement(s.Fragment,null,s.createElement(l.default,{color:"content-color-secondary"}," in "),i),o&&s.createElement(s.Fragment,null,s.createElement(l.default,{color:"content-color-secondary"}," at line "),o)))}render(){const{showDetails:e}=this.state,{traceFrameData:t}=this.props,n=p.get(t,"lineNo"),o=p.get(t,"context",[]);return s.createElement(u,{direction:"column"},s.createElement(g,{onClick:()=>{this.setState({showDetails:!e})}},this.getTraceTitle(t),this.getTitleIcon()),e&&s.createElement(m,null,p.map(o,(e=>{const t=p.nth(e,0),o=p.nth(e,1),i=s.createElement(s.Fragment,null,s.createElement("div",null,s.createElement(h,null,t)),s.createElement(b,null,o));return t===n?s.createElement(f,{direction:"row"},i):s.createElement(a.default,{direction:"row"},i)}))))}}v.propTypes={traceFrameData:i().object.isRequired}},"./integrations/monitoring/sentry/service.js":function(e,t,n){n.r(t);var s=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),o=n("./integrations/monitoring/sentry/constants.js"),i=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/ServiceActionsService.ts"),r=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/inputs/utils.js"),a=n("./node_modules/lodash/lodash.js");function l(e){return a.get(e,["inputs","sentryEnvironment"],"")===o.ALL_ENVIRONEMENT_OPTION_VALUE&&(e.inputs.sentryEnvironment=""),e}t.default={fetchIssues:(e,t)=>(t=l(t),new Promise(((n,i)=>{s.default.triggerIntegrationOnDemand(e,o.SENTRY_ONDEMAND_TRIGGERS.FETCH_ISSUES,t).then((e=>e.status>=200&&e.status<300?n(a.get(e,"body",{})):i(e))).catch(i)}))),fetchIssueDetails:(e,t)=>(t=l(t),new Promise(((n,i)=>{s.default.triggerIntegrationOnDemand(e,o.SENTRY_ONDEMAND_TRIGGERS.FETCH_ISSUE_DETAILS,t).then((e=>e.status>=200&&e.status<300?n(a.get(e,"body",{})):i(e))).catch(i)}))),fetchEnvironments:e=>new Promise(((t,n)=>{s.default.triggerIntegrationOnDemand(e,o.SENTRY_ONDEMAND_TRIGGERS.FETCH_ENVIRONMENTS,{}).then((e=>e.status>=200&&e.status<300?t(a.get(e,"body",[])):n(e))).catch(n)})),fetchProjectDetails:e=>new Promise(((t,n)=>{s.default.triggerIntegrationOnDemand(e,o.SENTRY_ONDEMAND_TRIGGERS.FETCH_PROJECT_DETAILS,{}).then((e=>e.status>=200&&e.status<300?t(a.get(e,"body",{})):n(e))).catch(n)})),fetchProjects:(e,t,n)=>{if(!t)return new Promise;const s=t.options,o=a.reduce(a.get(s,"inputs",[]),((t,n,s)=>(t[s]=a.get(e,n,""),t)),{});return new Promise(((e,l)=>{i.default.runServiceAction(s.service,s.serviceActionId,o,t.integrationClass,t.id,n||null).then((t=>{const n=a.get(t,"body",[]),o=a.get(s,"labelPath"),i=a.get(s,"valuePath"),l=(0,r.convertObjectListToOptions)(n,o,i);return e(l)})).catch((e=>(pm.logger.error("Sentry.service.fetchProjects ~ Error occurred while fetching projects",e),l(e))))}))}}},"./integrations/monitoring/services/DatadogService.js":function(e,t,n){n.r(t);var s=n("./node_modules/lodash/lodash.js"),o=n.n(s),i=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),r=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/ServiceActionsService.ts"),a=n("./integrations/monitoring/constants.js"),l=n("./node_modules/async/dist/async.js"),d=n.n(l);function c(e,t,n,s){return new Promise(((i,l)=>{r.default.runServiceAction("datadog",n,e,a.DATADOG_APM_CLASS_ID,s,t).then((e=>{if(e.status&&200===e.status)return i(o().get(e,"body"));throw o().get(e,"body")})).catch((e=>l(e)))}))}function p(e,t,n,s){return new Promise(((i,l)=>{r.default.runServiceAction("datadog",n,e,a.DATADOG_APM_CLASS_ID,s,t).then((e=>{if(e.status&&200===e.status)return i(o().get(e,"body"));throw o().get(e,"body")})).catch((e=>l(e)))}))}t.default={listServices:e=>p(e,null),listDashboards:(e,t,n,s)=>c(e,t,n,s),listDashboardsWithIntegrationId:(e,t,n,s)=>c(e,t,n,s),listServicesWithIntegrationId:(e,t,n,s)=>p(e,t,n,s),authenticateApiKey:(e,t,n,s)=>c(e,t,n,s),fetchMetricsForLinkedServices:e=>{const t=Date.now()/1e3,n=t-1800;return i.default.triggerIntegrationOnDemand(e,"fetch_metrics_for_added_services",{inputs:{startTime:n,endTime:t}}).then((e=>{if(e.status&&200===e.status)return Promise.resolve(e.body);throw e.body})).catch((e=>Promise.reject(e)))},fetchGraphURLs:(e,t,n,s,r)=>{let a={};const l=(r,l,d)=>{i.default.triggerIntegrationOnDemand(e,l,{inputs:{timeFrame:t,service:n,environment:s}}).then((e=>{if(e.status&&200===e.status)return a[d]=o().get(e.body,"data"),r();throw e.body})).catch((e=>r(e)))};d().parallel([function(e){l(e,"fetch_apdex_graph_url","apdex_graphs")},function(e){l(e,"fetch_error_rate_graph_url","error_rate_graphs")},function(e){l(e,"fetch_latency_graph_url","latency_graphs")},function(e){l(e,"fetch_throughput_graph_url","throughput_graphs")}],(e=>e?r(e):r(null,a)))},fetchServiceMonitorsStatus:(e,t,n)=>i.default.triggerIntegrationOnDemand(e,"get_violations",{inputs:{service:t,environment:n}}).then((e=>{if(e&&200===e.status)return Promise.resolve(e.body);throw e.body})).catch((e=>Promise.reject(e)))}},"./integrations/monitoring/services/index.js":function(e,t,n){n.r(t);var s=n("./integrations/monitoring/services/NewRelicService.js"),o=n("./integrations/monitoring/services/DatadogService.js");t.default={apm_new_relic:s.default,apm_datadog:o.default}},"./integrations/monitoring/stores/APMIntegrationStore.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return Z}});var s,o,i,r,a,l,d,c,p,u,g,m,h,b,f,v,S,I,y,E,A,_,w,j,C,P,D,T,M,x,N,O=n("../../node_modules/mobx/lib/mobx.module.js"),k=n("./node_modules/lodash/lodash.js"),R=n.n(k),L=n("./js/stores/StoreManager.js"),V=n("./js/stores/SyncStatusStore.js"),F=n("./js/stores/IntegrationsStore.js"),U=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),H=n("./integrations/monitoring/stores/fallbackCategoryIntegrations.js"),K=n("./js/stores/BaseListStore.js"),B=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationInstanceService.ts"),G=n("./integrations/monitoring/constants.js"),W=n("./integrations/monitoring/services/NewRelicService.js"),z=n("./integrations/services/AuthenticationInstanceService.ts"),q=n("./integrations/utils/CommonHelperMethods.ts");function $(e,t,n,s){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(s):void 0})}function Y(e,t,n,s,o){var i={};return Object.keys(s).forEach((function(e){i[e]=s[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,s){return s(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}const J="apiversion",X=(0,q.getErrorContextObject)("APMIntegrationStore","integrations");let Q=(o=Y((s=class{constructor(e){this.id="",$(this,"availableAPMServices",o,this),$(this,"selectedAPMService",i,this),this.id=e.id,this.availableAPMServices=e.availableAPMServices||{},this.selectedAPMService=e.selectedAPMService||{},this.integrationsStore=(0,L.resolveStoreInstance)(F.default)}update(e){R().has(e,"id")&&(this.id=e.id),R().has(e,"availableAPMServices")&&(this.availableAPMServices=e.availableAPMServices),R().has(e,"selectedAPMService")&&(this.selectedAPMService=e.selectedAPMService)}setAvailableAPMServices(e,t){this.availableAPMServices[e]=t}getAvailableAPMServices(e){return(0,O.toJS)(this.availableAPMServices[e])}setSelectedAPMService(e,t){this.selectedAPMService[e]=t}getSelectedAPMService(e){return(0,O.toJS)(this.selectedAPMService[e])}}).prototype,"availableAPMServices",[O.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),i=Y(s.prototype,"selectedAPMService",[O.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Y(s.prototype,"update",[O.action],Object.getOwnPropertyDescriptor(s.prototype,"update"),s.prototype),Y(s.prototype,"setAvailableAPMServices",[O.action],Object.getOwnPropertyDescriptor(s.prototype,"setAvailableAPMServices"),s.prototype),Y(s.prototype,"setSelectedAPMService",[O.action],Object.getOwnPropertyDescriptor(s.prototype,"setSelectedAPMService"),s.prototype),Y(s.prototype,"getSelectedAPMService",[O.action],Object.getOwnPropertyDescriptor(s.prototype,"getSelectedAPMService"),s.prototype),s),Z=(r=class extends K.default{constructor(){super(Q),this.id="",$(this,"isHydrating",a,this),$(this,"availableIntegrations",l,this),$(this,"configuredIntegrations",d,this),$(this,"categoryIntegrations",c,this),$(this,"builds",p,this),$(this,"activeRule",u,this),$(this,"activeService",g,this),$(this,"errorAvailableIntegrations",m,this),$(this,"errorConfiguredIntegrations",h,this),$(this,"loadingAvailableIntegrations",b,this),$(this,"loadingConfiguredIntegrations",f,this),$(this,"availableAPMServices",v,this),$(this,"selectedAPMService",S,this),$(this,"selectedAPI",I,this),$(this,"selectedAPIVersion",y,this),$(this,"selectedService",E,this),$(this,"selectedServiceName",A,this),$(this,"selectedIntegration",_,this),$(this,"selectedRule",w,this),$(this,"clientCategory",j,this),$(this,"isAdding",C,this),$(this,"integrationInstance",P,this),$(this,"loadingIntegrationInstanceAndClass",D,this),$(this,"integrationClass",T,this),$(this,"authenticationInstances",M,this),$(this,"loadingAuthenticationInstances",x,this),$(this,"errorAuthenticationInstances",N,this),this.integrationsStore=(0,L.resolveStoreInstance)(F.default)}initializeApmIntegrationStore(e){return new Promise(((t,n)=>{(0,L.resolveStoreInstance)(V.default).onSyncAvailable({timeout:8e3}).then((()=>{this.updateIsHydrating(!0);const{apiId:n,apiVersionId:s,category:o}=e;this.setClientCategory(o||G.API_MONITORING),this.setSelectedAPI(n),this.setSelectedAPIVersion(s),this.fetchConfiguredIntegrations(s,J).then((()=>{this.fetchAvailableIntegrations(),t()}))})).catch((e=>{this.updateLoadingAvailableIntegrations(!1),n(e)})).finally((()=>{this.updateIsHydrating(!1)}))}))}initializeApmIntegrationStoreV2(e){return new Promise(((t,n)=>{(0,L.resolveStoreInstance)(V.default).onSyncAvailable({timeout:8e3}).then((()=>{this.updateIsHydrating(!0);const{apiId:n,apiVersionId:s,category:o}=e;this.setClientCategory(o||G.API_MONITORING),this.setSelectedAPI(n),this.setSelectedAPIVersion(s),this.fetchConfiguredIntegrations(s,J).then(t)})).catch(n).finally((()=>{this.updateIsHydrating(!1)}))}))}clearStore(e){this.loadingAvailableIntegrations[e.apiVersionId]=void 0,this.loadingConfiguredIntegrations[e.apiVersionId]=void 0,this.configuredIntegrations[e.apiVersionId]=void 0}setAvailableAPMServices(e){this.availableAPMServices[this.selectedAPIVersion]=e}setClientCategory(e){this.clientCategory=e}getAvailableAPMServices(){return(0,O.toJS)(this.availableAPMServices[this.selectedAPIVersion])}clearAvailableAPMServices(){this.availableAPMServices[this.selectedAPIVersion]=void 0}setSelectedAPMService(e){this.selectedAPMService[this.selectedAPIVersion]=e}getSelectedAPMService(){return(0,O.toJS)(this.selectedAPMService[this.selectedAPIVersion])}clearSelectedAPMService(){this.selectedAPMService[this.selectedAPIVersion]=void 0}setSelectedIntegration(e){this.selectedIntegration[this.clientCategory]=e}setActiveService(e){this.activeService=e}setSelectedServiceName(e){this.selectedServiceName=e}setActiveRule(e){this.activeRule=e}setSelectedAPI(e){this.selectedAPI=e}setSelectedAPIVersion(e){this.selectedAPIVersion=e}setSelectedRule(e){this.selectedRule=e}setSelectedService(e){this.selectedService=e}updateLoadingAvailableIntegrations(e){this.loadingAvailableIntegrations[this.selectedAPIVersion]=e}updateLoadingConfiguredIntegrations(e){this.loadingConfiguredIntegrations[this.selectedAPIVersion]=e}updateErrorAvailableIntegrations(e){this.errorAvailableIntegrations[this.selectedAPIVersion]=e}updateErrorConfiguredIntegrations(e){this.errorConfiguredIntegrations[this.selectedAPIVersion]=e}updateAvailableIntegrations(e){this.availableIntegrations=[...e]}updateSelectedAPIVersion(e){this.selectedAPIVersion=e,this.fetchConfiguredIntegrations(this.selectedAPIVersion,J)}getAvailableIntegrations(){return(0,O.toJS)(this.availableIntegrations)}getSelectedIntegration(){return this.selectedIntegration[this.clientCategory]}getSelectedAPI(){return this.selectedAPI}getSelectedAPIVersion(){return this.selectedAPIVersion}updateConfiguredIntegrations(e){this.configuredIntegrations[this.selectedAPIVersion]=[...e]}updateCategoryIntegrations(e){R().isEmpty(e)?this.categoryIntegrations=[...H.fallbackCategoryIntegrations]:this.categoryIntegrations=[...e]}getConfiguredIntegrations(e){return(0,O.toJS)(this.configuredIntegrations[e||this.selectedAPIVersion])}getCategoryIntegrations(){return(0,O.toJS)(this.categoryIntegrations)}updateIsHydrating(e){this.isHydrating=e}updateIsAdding(e){this.isAdding=e}findIntegrationsByClientCategory(){const e=[];R().forEach((0,O.toJS)(this.availableIntegrations),(t=>{const n={},s=t.integrations[t.id];R().forEach(s,((e,t)=>{e.client_categories.includes(this.clientCategory)&&(n[t]=e)})),R().isEmpty(n)||(t.integrations[t.id]={...n},e.push(t))})),this.updateCategoryIntegrations(e)}fetchAvailableIntegrations(){return this.updateLoadingAvailableIntegrations(!0),this.updateErrorAvailableIntegrations(!1),U.default.getAvailableIntegrations().then((e=>{const t=R().get(e,"body.services",[]);if(200!==e.status||R().isEmpty(t))throw e;this.updateAvailableIntegrations(R().map(t,((e,t)=>({id:t,...e})))),this.findIntegrationsByClientCategory(),this.updateLoadingAvailableIntegrations(!1)})).catch((e=>{this.updateErrorAvailableIntegrations(e),this.updateLoadingAvailableIntegrations(!1),pm.logger.error("Error occurred while fetching the available integrations")}))}fetchConfiguredIntegrations(e,t){return this.updateLoadingConfiguredIntegrations(!0),this.updateErrorConfiguredIntegrations(!1),U.default.getConfiguredIntegrationsByEntityAndClientCategory(t,e,[this.clientCategory]).then((e=>{this.updateConfiguredIntegrations(e[this.clientCategory]),this.updateLoadingConfiguredIntegrations(!1)})).catch((e=>{this.updateErrorConfiguredIntegrations(e),this.updateLoadingConfiguredIntegrations(!1),pm.logger.error("Error occurred while fetching the configured integrations")}))}async fetchIntegrationInstance(e,t){this.setLoadingIntegrationInstancesAndClass(t,!0);try{const n=await B.default.getConfiguredIntegrationsForAnEntity(e,t,[G.API_PERFORMANCE_INTEGRATION]);let s=R().get(n,"body.data",[]),o=[];if(o=R().map(s,"class"),o.includes(G.NEW_RELIC_APM_CLASS_ID)&&o.includes(G.DATADOG_APM_CLASS_ID)){const e=o.indexOf(G.NEW_RELIC_APM_CLASS_ID),t=o.indexOf(G.DATADOG_APM_CLASS_ID);o.splice(e<t?t:e,1)}let i=[];if(!R().isEmpty(o)){const e=this.integrationsStore.getIntegrationClasses(),t=o[0];i=R().find(e,(e=>e.id===t))}if(o.includes(G.NEW_RELIC_APM_CLASS_ID)){const e=R().find(s,(e=>e.class===G.NEW_RELIC_APM_CLASS_ID)),t=await this.updateNewRelicInstance(e);s=t?[t]:[]}this.updateIntegrationClass([i],t),this.updateIntegrationInstance(s,t),this.setLoadingIntegrationInstancesAndClass(t,!1)}catch(e){pm.logger.error("APMIntegrationStore ~ Error in fetching integration instance details",t,e),this.setLoadingIntegrationInstancesAndClass(t,!1)}}async updateNewRelicInstance(e){try{const t=await W.default.fetchMetricsForLinkedServices(e.id),n=R().map(R().get(t,"data.data.actor.entities"),(e=>e.name));e.services=n}catch(e){pm.logger.error("NewRelicService ~ error occurred while fetching metrics for linked services",e)}return e}updateIntegrationInstance(e,t){this.integrationInstance[t||this.selectedAPIVersion]=e}updateIntegrationClass(e,t){this.integrationClass[t||this.selectedAPIVersion]=e}setLoadingIntegrationInstancesAndClass(e,t){this.loadingIntegrationInstanceAndClass[e||this.selectedAPIVersion]=t}getIntegrationInstance(e){return this.integrationInstance[e]}getIntegrationClass(e){return this.integrationClass[e]}resetPowerUpVariables(e){const{apiVersionId:t}=e;this.setLoadingIntegrationInstancesAndClass(t,!0),this.updateIntegrationClass([],t),this.updateIntegrationInstance([],t)}setAuthenticationInstances(e){this.authenticationInstances=e}setErrorAuthenticationInstances(e){this.errorAuthenticationInstances=e}setLoadingAuthenticationInstances(e){this.loadingAuthenticationInstances=e}fetchAuthenticationInstances(e,t,n,s){pm.logger.info("APMIntegrationsStore~Initializing fetching auth instances: ",n),this.setLoadingAuthenticationInstances(!0),this.setErrorAuthenticationInstances(null),z.default.listAuthenticationInstances({scope:[{type:e,id:t}],authenticationClass:[n],service:[s]}).then((({body:e})=>{R().isNil(e.data)&&pm.logger.error("APMIntegrationsStore~fetchAuthenticationInstances: Error loading authentication instances! Received null response!",{body:e},X),this.setAuthenticationInstances(e.data||[]),this.setLoadingAuthenticationInstances(!1)})).catch((e=>{pm.logger.error("APMIntegrationsStored~fetchAuthenticationInstances: Something went wrong while fetching authentication instances: ",e,X),this.setLoadingAuthenticationInstances(!1),this.setErrorAuthenticationInstances(e)}))}},a=Y(r.prototype,"isHydrating",[O.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),l=Y(r.prototype,"availableIntegrations",[O.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=Y(r.prototype,"configuredIntegrations",[O.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),c=Y(r.prototype,"categoryIntegrations",[O.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return H.fallbackCategoryIntegrations}}),p=Y(r.prototype,"builds",[O.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),u=Y(r.prototype,"activeRule",[O.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=Y(r.prototype,"activeService",[O.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=Y(r.prototype,"errorAvailableIntegrations",[O.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),h=Y(r.prototype,"errorConfiguredIntegrations",[O.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),b=Y(r.prototype,"loadingAvailableIntegrations",[O.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),f=Y(r.prototype,"loadingConfiguredIntegrations",[O.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),v=Y(r.prototype,"availableAPMServices",[O.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),S=Y(r.prototype,"selectedAPMService",[O.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),I=Y(r.prototype,"selectedAPI",[O.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=Y(r.prototype,"selectedAPIVersion",[O.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=Y(r.prototype,"selectedService",[O.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=Y(r.prototype,"selectedServiceName",[O.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=Y(r.prototype,"selectedIntegration",[O.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),w=Y(r.prototype,"selectedRule",[O.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=Y(r.prototype,"clientCategory",[O.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return G.API_MONITORING}}),C=Y(r.prototype,"isAdding",[O.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),P=Y(r.prototype,"integrationInstance",[O.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),D=Y(r.prototype,"loadingIntegrationInstanceAndClass",[O.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),T=Y(r.prototype,"integrationClass",[O.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),M=Y(r.prototype,"authenticationInstances",[O.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),x=Y(r.prototype,"loadingAuthenticationInstances",[O.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),N=Y(r.prototype,"errorAuthenticationInstances",[O.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y(r.prototype,"initializeApmIntegrationStore",[O.action],Object.getOwnPropertyDescriptor(r.prototype,"initializeApmIntegrationStore"),r.prototype),Y(r.prototype,"clearStore",[O.action],Object.getOwnPropertyDescriptor(r.prototype,"clearStore"),r.prototype),Y(r.prototype,"setAvailableAPMServices",[O.action],Object.getOwnPropertyDescriptor(r.prototype,"setAvailableAPMServices"),r.prototype),Y(r.prototype,"setClientCategory",[O.action],Object.getOwnPropertyDescriptor(r.prototype,"setClientCategory"),r.prototype),Y(r.prototype,"getAvailableAPMServices",[O.action],Object.getOwnPropertyDescriptor(r.prototype,"getAvailableAPMServices"),r.prototype),Y(r.prototype,"clearAvailableAPMServices",[O.action],Object.getOwnPropertyDescriptor(r.prototype,"clearAvailableAPMServices"),r.prototype),Y(r.prototype,"setSelectedAPMService",[O.action],Object.getOwnPropertyDescriptor(r.prototype,"setSelectedAPMService"),r.prototype),Y(r.prototype,"getSelectedAPMService",[O.action],Object.getOwnPropertyDescriptor(r.prototype,"getSelectedAPMService"),r.prototype),Y(r.prototype,"clearSelectedAPMService",[O.action],Object.getOwnPropertyDescriptor(r.prototype,"clearSelectedAPMService"),r.prototype),Y(r.prototype,"setSelectedIntegration",[O.action],Object.getOwnPropertyDescriptor(r.prototype,"setSelectedIntegration"),r.prototype),Y(r.prototype,"setActiveService",[O.action],Object.getOwnPropertyDescriptor(r.prototype,"setActiveService"),r.prototype),Y(r.prototype,"setSelectedServiceName",[O.action],Object.getOwnPropertyDescriptor(r.prototype,"setSelectedServiceName"),r.prototype),Y(r.prototype,"setActiveRule",[O.action],Object.getOwnPropertyDescriptor(r.prototype,"setActiveRule"),r.prototype),Y(r.prototype,"setSelectedAPI",[O.action],Object.getOwnPropertyDescriptor(r.prototype,"setSelectedAPI"),r.prototype),Y(r.prototype,"setSelectedAPIVersion",[O.action],Object.getOwnPropertyDescriptor(r.prototype,"setSelectedAPIVersion"),r.prototype),Y(r.prototype,"setSelectedRule",[O.action],Object.getOwnPropertyDescriptor(r.prototype,"setSelectedRule"),r.prototype),Y(r.prototype,"setSelectedService",[O.action],Object.getOwnPropertyDescriptor(r.prototype,"setSelectedService"),r.prototype),Y(r.prototype,"updateLoadingAvailableIntegrations",[O.action],Object.getOwnPropertyDescriptor(r.prototype,"updateLoadingAvailableIntegrations"),r.prototype),Y(r.prototype,"updateLoadingConfiguredIntegrations",[O.action],Object.getOwnPropertyDescriptor(r.prototype,"updateLoadingConfiguredIntegrations"),r.prototype),Y(r.prototype,"updateErrorAvailableIntegrations",[O.action],Object.getOwnPropertyDescriptor(r.prototype,"updateErrorAvailableIntegrations"),r.prototype),Y(r.prototype,"updateErrorConfiguredIntegrations",[O.action],Object.getOwnPropertyDescriptor(r.prototype,"updateErrorConfiguredIntegrations"),r.prototype),Y(r.prototype,"updateAvailableIntegrations",[O.action],Object.getOwnPropertyDescriptor(r.prototype,"updateAvailableIntegrations"),r.prototype),Y(r.prototype,"updateSelectedAPIVersion",[O.action],Object.getOwnPropertyDescriptor(r.prototype,"updateSelectedAPIVersion"),r.prototype),Y(r.prototype,"getAvailableIntegrations",[O.action],Object.getOwnPropertyDescriptor(r.prototype,"getAvailableIntegrations"),r.prototype),Y(r.prototype,"getSelectedIntegration",[O.action],Object.getOwnPropertyDescriptor(r.prototype,"getSelectedIntegration"),r.prototype),Y(r.prototype,"getSelectedAPI",[O.action],Object.getOwnPropertyDescriptor(r.prototype,"getSelectedAPI"),r.prototype),Y(r.prototype,"getSelectedAPIVersion",[O.action],Object.getOwnPropertyDescriptor(r.prototype,"getSelectedAPIVersion"),r.prototype),Y(r.prototype,"updateConfiguredIntegrations",[O.action],Object.getOwnPropertyDescriptor(r.prototype,"updateConfiguredIntegrations"),r.prototype),Y(r.prototype,"updateCategoryIntegrations",[O.action],Object.getOwnPropertyDescriptor(r.prototype,"updateCategoryIntegrations"),r.prototype),Y(r.prototype,"getConfiguredIntegrations",[O.action],Object.getOwnPropertyDescriptor(r.prototype,"getConfiguredIntegrations"),r.prototype),Y(r.prototype,"getCategoryIntegrations",[O.action],Object.getOwnPropertyDescriptor(r.prototype,"getCategoryIntegrations"),r.prototype),Y(r.prototype,"updateIsHydrating",[O.action],Object.getOwnPropertyDescriptor(r.prototype,"updateIsHydrating"),r.prototype),Y(r.prototype,"updateIsAdding",[O.action],Object.getOwnPropertyDescriptor(r.prototype,"updateIsAdding"),r.prototype),Y(r.prototype,"findIntegrationsByClientCategory",[O.action],Object.getOwnPropertyDescriptor(r.prototype,"findIntegrationsByClientCategory"),r.prototype),Y(r.prototype,"fetchAvailableIntegrations",[O.action],Object.getOwnPropertyDescriptor(r.prototype,"fetchAvailableIntegrations"),r.prototype),Y(r.prototype,"fetchConfiguredIntegrations",[O.action],Object.getOwnPropertyDescriptor(r.prototype,"fetchConfiguredIntegrations"),r.prototype),Y(r.prototype,"fetchIntegrationInstance",[O.action],Object.getOwnPropertyDescriptor(r.prototype,"fetchIntegrationInstance"),r.prototype),Y(r.prototype,"updateIntegrationInstance",[O.action],Object.getOwnPropertyDescriptor(r.prototype,"updateIntegrationInstance"),r.prototype),Y(r.prototype,"updateIntegrationClass",[O.action],Object.getOwnPropertyDescriptor(r.prototype,"updateIntegrationClass"),r.prototype),Y(r.prototype,"setLoadingIntegrationInstancesAndClass",[O.action],Object.getOwnPropertyDescriptor(r.prototype,"setLoadingIntegrationInstancesAndClass"),r.prototype),Y(r.prototype,"resetPowerUpVariables",[O.action],Object.getOwnPropertyDescriptor(r.prototype,"resetPowerUpVariables"),r.prototype),Y(r.prototype,"setAuthenticationInstances",[O.action],Object.getOwnPropertyDescriptor(r.prototype,"setAuthenticationInstances"),r.prototype),Y(r.prototype,"setErrorAuthenticationInstances",[O.action],Object.getOwnPropertyDescriptor(r.prototype,"setErrorAuthenticationInstances"),r.prototype),Y(r.prototype,"setLoadingAuthenticationInstances",[O.action],Object.getOwnPropertyDescriptor(r.prototype,"setLoadingAuthenticationInstances"),r.prototype),Y(r.prototype,"fetchAuthenticationInstances",[O.action],Object.getOwnPropertyDescriptor(r.prototype,"fetchAuthenticationInstances"),r.prototype),r)},"./integrations/monitoring/stores/MonitorIntegrationStore.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return x}});var s,o,i,r,a,l,d,c,p,u,g,m,h,b,f,v=n("../../node_modules/mobx/lib/mobx.module.js"),S=n("./node_modules/lodash/lodash.js"),I=n.n(S),y=n("./js/stores/StoreManager.js"),E=n("./js/stores/SyncStatusStore.js"),A=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),_=n("./integrations/monitoring/stores/fallbackCategoryIntegrations.js"),w=n("./api-dev/services/APIDevService.js");function j(e,t,n,s){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(s):void 0})}function C(e,t,n,s,o){var i={};return Object.keys(s).forEach((function(e){i[e]=s[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,s){return s(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}const P=["notifications-monitor","analytics-monitor"],D=["notifications-monitor","analytics-monitor","apm_api-observability"],T=[],M="jobTemplate";let x=(o=C((s=class{constructor(){j(this,"isHydrating",o,this),j(this,"availableIntegrations",i,this),j(this,"configuredIntegrations",r,this),j(this,"populatedConfiguredIntegrations",a,this),j(this,"categoryIntegrations",l,this),j(this,"builds",d,this),j(this,"errorAvailableIntegrations",c,this),j(this,"errorConfiguredIntegrations",p,this),j(this,"loadingAvailableIntegrations",u,this),j(this,"loadingConfiguredIntegrations",g,this),j(this,"selectedAPI",m,this),j(this,"selectedAPIVersion",h,this),j(this,"category",b,this),j(this,"isAdding",f,this)}initializeMonitoringIntegrationStore(e){return new Promise(((t,n)=>{(0,y.resolveStoreInstance)(E.default).onSyncAvailable({timeout:8e3}).then((()=>{this.updateIsHydrating(!0);const{apiId:n,apiVersionId:s}=e;this.setSelectedAPI(n),this.setSelectedAPIVersion(s),this.fetchAvailableIntegrations().then((()=>{this.fetchConfiguredIntegrations(s,M,D).then((()=>{t()}))}))})).catch((()=>{this.updateLoadingAvailableIntegrations(!1),n()})).finally((()=>{this.updateIsHydrating(!1)}))}))}clearStore(e){this.loadingAvailableIntegrations[e.apiVersionId]=void 0,this.loadingConfiguredIntegrations[e.apiVersionId]=void 0,this.configuredIntegrations[e.apiVersionId]=void 0}setAvailableIntegrations(e){this.availableIntegrations[this.selectedAPIVersion]=e}getAvailableIntegrations(){return(0,v.toJS)(this.availableIntegrations[this.selectedAPIVersion])}clearAvailableIntegrations(){this.availableIntegrations[this.selectedAPIVersion]=void 0}setSelectedAPI(e){this.selectedAPI=e}setSelectedAPIVersion(e){this.selectedAPIVersion=e}updateLoadingAvailableIntegrations(e){this.loadingAvailableIntegrations[this.selectedAPIVersion]=e}updateLoadingConfiguredIntegrations(e){this.loadingConfiguredIntegrations[this.selectedAPIVersion]=e}updateErrorAvailableIntegrations(e){this.errorAvailableIntegrations[this.selectedAPIVersion]=e}updateErrorConfiguredIntegrations(e){this.errorConfiguredIntegrations[this.selectedAPIVersion]=e}updateSelectedAPIVersion(e){return this.selectedAPIVersion=e,this.fetchConfiguredIntegrations(this.selectedAPIVersion,M,D)}getSelectedAPI(){return this.selectedAPI}getSelectedAPIVersion(){return this.selectedAPIVersion}updateConfiguredIntegrations(e){this.configuredIntegrations[this.selectedAPIVersion]=[...e],this.populatedConfiguredIntegrations=!0}updateCategoryIntegrations(e){I().isEmpty(e)?this.categoryIntegrations=[..._.fallbackCategoryIntegrations]:this.categoryIntegrations=[...e]}getConfiguredIntegrations(e){return(0,v.toJS)(this.configuredIntegrations[e||this.selectedAPIVersion])}getCategoryIntegrations(){return(0,v.toJS)(this.categoryIntegrations)}updateIsHydrating(e){this.isHydrating=e}updateIsAdding(e){this.isAdding=e}filterAvailableIntegrations(){const e=[];I().forEach(this.getAvailableIntegrations(),(t=>{if(![T].includes(t.id)){const n={},s=t.integrations[t.id];I().forEach(s,((e,t)=>{I().isEmpty(I().intersection(e.client_categories,P))||(n[t]=e)})),I().isEmpty(n)||(t.integrations[t.id]={...n},e.push(t))}})),this.updateCategoryIntegrations(e)}fetchAvailableIntegrations(){return this.updateLoadingAvailableIntegrations(!0),this.updateErrorAvailableIntegrations(!1),new Promise((e=>A.default.getAvailableIntegrations().then((t=>{const n=I().get(t,"body.services",[]);if(200!==t.status||I().isEmpty(n))throw t;this.setAvailableIntegrations(I().map(n,((e,t)=>({id:t,...e})))),this.filterAvailableIntegrations(),this.updateLoadingAvailableIntegrations(!1),e()})).catch((e=>{this.updateErrorAvailableIntegrations(e),this.updateLoadingAvailableIntegrations(!1),pm.logger.error("Error occurred while fetching the available integrations")}))))}fetchConfiguredIntegrations(e,t,n){return this.updateLoadingConfiguredIntegrations(!0),this.updateErrorConfiguredIntegrations(!1),new Promise(((e,s)=>{w.default.getRelations(this.selectedAPI,this.selectedAPIVersion,"monitor").then((o=>{if(o.monitor){let i=Object.values(o.monitor);Promise.all(I().map(i,(e=>A.default.getConfiguredIntegrationsByEntityAndClientCategory(t,e.id,n,!0)))).then((e=>{let t=I()(e).map((e=>Object.values(e))).flatten().flatten().value();this.updateConfiguredIntegrations(t),this.updateLoadingConfiguredIntegrations(!1)})).catch((e=>{this.updateErrorConfiguredIntegrations(e),this.updateLoadingConfiguredIntegrations(!1),pm.logger.error("Error occurred while fetching the configured integrations"),s()})).finally((()=>{e()}))}else this.updateConfiguredIntegrations([]),e()}))}))}}).prototype,"isHydrating",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i=C(s.prototype,"availableIntegrations",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),r=C(s.prototype,"configuredIntegrations",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),a=C(s.prototype,"populatedConfiguredIntegrations",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),l=C(s.prototype,"categoryIntegrations",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _.fallbackCategoryIntegrations}}),d=C(s.prototype,"builds",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),c=C(s.prototype,"errorAvailableIntegrations",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),p=C(s.prototype,"errorConfiguredIntegrations",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),u=C(s.prototype,"loadingAvailableIntegrations",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),g=C(s.prototype,"loadingConfiguredIntegrations",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),m=C(s.prototype,"selectedAPI",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=C(s.prototype,"selectedAPIVersion",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=C(s.prototype,"category",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=C(s.prototype,"isAdding",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),C(s.prototype,"initializeMonitoringIntegrationStore",[v.action],Object.getOwnPropertyDescriptor(s.prototype,"initializeMonitoringIntegrationStore"),s.prototype),C(s.prototype,"clearStore",[v.action],Object.getOwnPropertyDescriptor(s.prototype,"clearStore"),s.prototype),C(s.prototype,"setAvailableIntegrations",[v.action],Object.getOwnPropertyDescriptor(s.prototype,"setAvailableIntegrations"),s.prototype),C(s.prototype,"getAvailableIntegrations",[v.action],Object.getOwnPropertyDescriptor(s.prototype,"getAvailableIntegrations"),s.prototype),C(s.prototype,"clearAvailableIntegrations",[v.action],Object.getOwnPropertyDescriptor(s.prototype,"clearAvailableIntegrations"),s.prototype),C(s.prototype,"setSelectedAPI",[v.action],Object.getOwnPropertyDescriptor(s.prototype,"setSelectedAPI"),s.prototype),C(s.prototype,"setSelectedAPIVersion",[v.action],Object.getOwnPropertyDescriptor(s.prototype,"setSelectedAPIVersion"),s.prototype),C(s.prototype,"updateLoadingAvailableIntegrations",[v.action],Object.getOwnPropertyDescriptor(s.prototype,"updateLoadingAvailableIntegrations"),s.prototype),C(s.prototype,"updateLoadingConfiguredIntegrations",[v.action],Object.getOwnPropertyDescriptor(s.prototype,"updateLoadingConfiguredIntegrations"),s.prototype),C(s.prototype,"updateErrorAvailableIntegrations",[v.action],Object.getOwnPropertyDescriptor(s.prototype,"updateErrorAvailableIntegrations"),s.prototype),C(s.prototype,"updateErrorConfiguredIntegrations",[v.action],Object.getOwnPropertyDescriptor(s.prototype,"updateErrorConfiguredIntegrations"),s.prototype),C(s.prototype,"updateSelectedAPIVersion",[v.action],Object.getOwnPropertyDescriptor(s.prototype,"updateSelectedAPIVersion"),s.prototype),C(s.prototype,"getSelectedAPI",[v.action],Object.getOwnPropertyDescriptor(s.prototype,"getSelectedAPI"),s.prototype),C(s.prototype,"getSelectedAPIVersion",[v.action],Object.getOwnPropertyDescriptor(s.prototype,"getSelectedAPIVersion"),s.prototype),C(s.prototype,"updateConfiguredIntegrations",[v.action],Object.getOwnPropertyDescriptor(s.prototype,"updateConfiguredIntegrations"),s.prototype),C(s.prototype,"updateCategoryIntegrations",[v.action],Object.getOwnPropertyDescriptor(s.prototype,"updateCategoryIntegrations"),s.prototype),C(s.prototype,"getConfiguredIntegrations",[v.action],Object.getOwnPropertyDescriptor(s.prototype,"getConfiguredIntegrations"),s.prototype),C(s.prototype,"getCategoryIntegrations",[v.action],Object.getOwnPropertyDescriptor(s.prototype,"getCategoryIntegrations"),s.prototype),C(s.prototype,"updateIsHydrating",[v.action],Object.getOwnPropertyDescriptor(s.prototype,"updateIsHydrating"),s.prototype),C(s.prototype,"updateIsAdding",[v.action],Object.getOwnPropertyDescriptor(s.prototype,"updateIsAdding"),s.prototype),C(s.prototype,"filterAvailableIntegrations",[v.action],Object.getOwnPropertyDescriptor(s.prototype,"filterAvailableIntegrations"),s.prototype),C(s.prototype,"fetchAvailableIntegrations",[v.action],Object.getOwnPropertyDescriptor(s.prototype,"fetchAvailableIntegrations"),s.prototype),C(s.prototype,"fetchConfiguredIntegrations",[v.action],Object.getOwnPropertyDescriptor(s.prototype,"fetchConfiguredIntegrations"),s.prototype),s)},"./integrations/monitoring/stores/fallbackCategoryIntegrations.js":function(e,t,n){n.r(t),n.d(t,{fallbackCategoryIntegrations:function(){return s}});const s=[{id:"apm_new_relic",name:"New Relic",icon:"pm-icon-newrelic",description:"View New Relic metrics and statuses directly from Postman.",featureFlag:"apm-integrations-in-api-platform",icon_url:"https://static.getpostman.com/assets/newrelic-light.svg",dark_icon_url:"https://static.getpostman.com/assets/newrelic-dark.svg",extended_description:"New Relic provides a connected, real-time view of all your operational data in one place. This integration allows you to view New Relic data into Postman",categories:["Analytics"],integrations:{apm_new_relic:{apm_new_relic:{name:"Monitor API performance",description:"View New Relic metrics and statuses directly from Postman.",categories:["Analytics"],summary:"",client_categories:["apm_api-observability"],type:"multiple",entity:"apiversion",scope:"user",sync_data:[],variables:[],auth_type:"token",canCreateIntegration:!0}}},setup_details:"",service_data:[],summary:"",misc:"",oauth_initiator_host:null}]},"./js/components/base/PasswordInput.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return g}});var s=n("../../node_modules/react/index.js"),o=n("./node_modules/classnames/index.js"),i=n.n(o),r=n("./js/components/base/Inputs.js"),a=n("./js/components/base/AutoSuggest/AutoSuggestInput.js"),l=n("./js/components/base/Buttons.js"),d=n("./node_modules/prop-types/index.js"),c=n.n(d),p=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js");function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},u.apply(this,arguments)}class g extends s.Component{constructor(e){super(e),this.state={masked:!0,error:"",warning:""},this.handleToggle=this.handleToggle.bind(this)}UNSAFE_componentWillReceiveProps(e){this.handleValidationState(e)}handleToggle(){this.setState({masked:!this.state.masked})}handleValidationState(e){const{validation:t,value:n}=e;if(t){let s,o;for(let i=0;i<t.length;i++){const{validator:r,message:a,type:l}=t[i]||{};if("function"==typeof r&&!r(n,e)){s=l,o=a;break}}if(s)return this.state[s]!==o&&this.setState({[s]:o})}this.setState({error:"",warning:""})}getValidationIcon(){return this.state.error?s.createElement(l.Button,{type:"icon",className:"password-input__error-btn",tooltip:this.state.error},s.createElement(p.default,{name:"icon-state-error-stroke",size:"small"})):this.state.warning?s.createElement(l.Button,{type:"icon",className:"password-input__warning-btn",tooltip:this.state.warning},s.createElement(p.default,{name:"icon-state-warning-stroke",size:"small"})):void 0}getPasswordInput(e){return this.props.enableVariableSuggestions?this.state.masked?s.createElement(r.Input,u({},e,{type:"password"})):s.createElement(a.AutoSuggestInput,u({},e,{enableVariableSuggestions:!0,type:"text"})):s.createElement(r.Input,u({},e,{type:this.state.masked?"password":"text"}))}render(){let{className:e,...t}=this.props;return s.createElement("div",{className:i()("password-input",e)},this.getPasswordInput(t),s.createElement("div",{className:"password-input-message"},this.getValidationIcon()),s.createElement("div",{className:"password-input__toggle",onClick:this.handleToggle},this.state.masked?s.createElement(p.default,{name:"icon-action-hide-stroke",title:"Show"}):s.createElement(p.default,{name:"icon-action-view-stroke",title:"Hide"})))}}g.propTypes={className:c().string,inputStyle:c().oneOf(["box","line"]),size:c().oneOf(["huge"]),enableVariableSuggestions:c().bool,validation:c().arrayOf(c().shape({validator:c().func.isRequired,message:c().string,type:c().oneOf(["error","warning"])}))},g.defaultProps={enableVariableSuggestions:!1}},"./js/components/base/SelectDropdown.js":function(e,t,n){n.r(t),n.d(t,{LoadingLabel:function(){return d},default:function(){return c}});var s=n("../../node_modules/react/index.js"),o=n("./node_modules/classnames/index.js"),i=n.n(o),r=n("./node_modules/react-select-v1/dist/react-select.es.js"),a=n("./js/components/base/LoadingIndicator.js");function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},l.apply(this,arguments)}function d(e){return s.createElement(s.Fragment,null,e.loadingLabel||"Loading...",s.createElement("span",{className:"pm-select-loader"},s.createElement(a.default,null)))}class c extends s.Component{constructor(e){super(e)}render(){const{options:e,onValueClick:t,size:n,className:o,label:a,isClearable:c,isCreatable:p,autoBlur:u=!0}=this.props;return p?s.createElement(r.default.Creatable,l({},this.props,{value:!this.props.loading&&this.props.value,autoBlur:u,className:i()({"pm-select--block":this.props.block,"pm-select--loading":this.props.loading},"pm-select",`pm-select-${n}`,o),clearable:!!c,onBlurResetsInput:!0,onChange:t,options:e,placeholder:this.props.loading?s.createElement(d,this.props):a,scrollMenuIntoView:!1})):s.createElement(r.default,l({},this.props,{value:!this.props.loading&&this.props.value,autoBlur:u,className:i()({"pm-select--block":this.props.block,"pm-select--loading":this.props.loading},"pm-select",`pm-select-${n}`,o),clearable:!!c,onBlurResetsInput:!0,onChange:t,options:e,placeholder:this.props.loading?s.createElement(d,this.props):a,scrollMenuIntoView:!1}))}}c.defaultProps={size:"sm"},c.displayName="SelectDropdown"},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/ConnectedAccounts/IntegrationForms/FormHeader/ConnectedAccountsIntegrationFormHeader.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return g}});var s=n("../../node_modules/react/index.js"),o=n("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),l=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-state-error-stroke.js"),d=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-state-success-stroke.js"),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/inputs/utils.js"),p=n("./node_modules/lodash/lodash.js"),u=n.n(p);class g extends s.Component{componentDidMount(){const e=(0,c.getPreferredEntityId)(this.props.preferredEntities,"connectedAccount");e&&u().isFunction(this.props.onSelection)&&this.props.onSelection(e)}render(){const{connectedAccount:e,isLoading:t,isUsingPersonalCredentials:n,orphaned:c,reauthenticateCallback:p,primarySuccessText:u,primaryOrphanedText:g,reauthenticateText:m,reauthenticateWithAnotherAccount:h,primaryChangeAuthenticationText:b,changeAuthenticationText:f,changeAuthenticationCallback:v}=this.props;return t?s.createElement(o.default,null):h?s.createElement("div",{className:"integrations-connected-account__form__header"},s.createElement(i.default,{padding:"spacing-zero",direction:"row",gap:"spacing-xs",alignItems:"left"},s.createElement(l.default,{color:"content-color-primary"}),s.createElement(i.default,{direction:"column",padding:"spacing-zero",alignItems:"flex-start"},b,s.createElement("div",{className:"integrations-connected-account__form__header__helper"},s.createElement("span",{className:"integrations-connected-account__form__header__helper__btn",onClick:()=>v()}," ",f," "))))):c?s.createElement("div",{className:"integrations-connected-account__form__header"},s.createElement(i.default,{padding:"spacing-zero",direction:"row",gap:"spacing-xs",alignItems:"left"},s.createElement(l.default,{color:"base-color-error"}),s.createElement(i.default,{direction:"column",padding:"spacing-zero",alignItems:"flex-start"},g,s.createElement("div",{className:"integrations-connected-account__form__header__helper"},"To continue using this integration,",s.createElement("span",{className:"integrations-connected-account__form__header__helper__btn",onClick:()=>p()}," ",m," "))))):n||!e?null:s.createElement(s.Fragment,null,s.createElement("div",{className:"integrations-connected-account__form__header"},s.createElement(i.default,{padding:"spacing-zero",direction:"row",gap:"spacing-xs",alignItems:"left"},s.createElement(d.default,{color:"base-color-success"}),s.createElement(i.default,{direction:"column",padding:"spacing-zero",alignItems:"flex-start"},s.createElement(r.default,{styleAs:"h6",type:"h6",text:u,color:"content-color-secondary"}),s.createElement(a.default,{onClick:()=>p(),type:"plain",text:m})))))}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/DefaultFormInputs/inputs/utils.js":function(e,t,n){n.r(t),n.d(t,{convertEntityListToOptions:function(){return i},convertObjectListToOptions:function(){return r},getInputError:function(){return u},getPreferredEntity:function(){return c},getPreferredEntityId:function(){return p},getServiceActionInputsMap:function(){return l},isBlockedOnAnotherInput:function(){return d},isEntityInputInEditFlow:function(){return g},isValidSetOfOptions:function(){return a}});var s=n("./node_modules/lodash/lodash.js"),o=n.n(s);function i(e){return r(e,"name","id")}function r(e,t="name",n="id"){return e?e.map((e=>({label:o().get(e,t),value:o().get(e,n)}))):[]}function a(e){return o().isArray(e)&&o().some(e,(e=>o().has(e,"label")&&o().has(e,"value")))}function l(e,t){return o().reduce(o().get(e,"inputs"),((e,n,s)=>(e[s]=o().get(o().find(t,["key",n]),"value"),e)),{})}function d(e,t){return o().some(e,(e=>{const n=o().find(t,["key",e]);return o().isEmpty(n)||o().isNil(n.value)||(o().isObject(n.value)||o().isString(n.value))&&o().isEmpty(n.value)||n.error}))}function c(e,t){return o().find(e,["entityType",t])||null}function p(e,t){return o().get(c(e,t),"entityId")}function u(e,t){const n=o().isNil(t)||(o().isObject(t)||o().isString(t))&&o().isEmpty(t);return e.mandatory&&n&&"This field is mandatory"}function g(e){return e.currentValue&&e.disabled}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/DatadogAPM/DatadogCommonConfigs.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return v}});n("./node_modules/lodash/lodash.js");var s,o=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/RadioGroup/RadioGroup.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Radio/Radio.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/TextInput/TextInput.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),u=n("./integrations/monitoring/containers/helpers/DatadogAPMUtils.js"),g=n("./node_modules/prop-types/index.js"),m=n.n(g),h=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/ExternalLink.js"),b=n("./integrations/monitoring/constants.js");function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},f.apply(this,arguments)}let v=(0,i.observer)(s=class extends o.Component{constructor(e){super(e)}render(){const{handleOnApiKeyChange:e,handleOnApiKeyBlur:t,apiKey:n,handleOnAppKeyChange:s,handleOnAppKeyBlur:i,appKey:g,region:m,handleOnRegionChange:v,mode:S,apiKeyValidationStatus:I,apiKeyValidationMessage:y,appKeyValidationStatus:E,appKeyValidationMessage:A}=this.props,_=S===b.ADD_MODE?{fieldType:"required"}:{};return o.createElement(o.Fragment,null,o.createElement(r.default,{direction:"column",gap:"spacing-l"},o.createElement(a.default,{name:"Select Datadog site",value:m,direction:"column",onChange:v,label:o.createElement(l.default,{text:"Select Datadog region",type:"primary"}),helperText:"This helps us know what Datadog region to use."},o.createElement(d.default,{label:"US1 (datadoghq.com)",value:"us1"}),o.createElement(d.default,{label:"US3 (us3.datadoghq.com)",value:"us3"}),o.createElement(d.default,{label:"US5 (us5.datadoghq.com)",value:"us5"}),o.createElement(d.default,{label:"EU1 (datadoghq.eu)",value:"eu1"}),o.createElement(d.default,{label:"US1-FED (ddog-gov.com)",value:"us1-fed"})),o.createElement(c.default,{id:"datadog-api-key",type:"password",label:o.createElement(l.default,f({text:"Datadog API Key"},_)),helperText:o.createElement(p.default,null,"Enter the API Key provided by Datadog or ",o.createElement(h.default,{extUrl:`${u.default.getDatadogHostname(m)}/organization-settings/api-keys`},"generate one here.")),onChange:e,onBlur:t,value:n,validationStatus:I,validationMessage:y,placeholder:S===b.EDIT_MODE?"****************************":null}),o.createElement(c.default,{id:"datadog-app-key",type:"password",label:o.createElement(l.default,f({text:"Datadog Application Key"},_)),helperText:o.createElement(p.default,null,"Enter the Application Key provided by Datadog or ",o.createElement(h.default,{extUrl:`${u.default.getDatadogHostname(m)}/organization-settings/application-keys`},"generate one here.")),value:g,onChange:s,onBlur:i,validationStatus:E,validationMessage:A,placeholder:S===b.EDIT_MODE?"****************************":null})))}})||s;v.propTypes={handleOnApiKeyChange:m().func.isRequired,handleOnApiKeyBlur:m().func.isRequired,apiKey:m().string.isRequired,apiKeyValidationStatus:m().string.isRequired,apiKeyValidationMessage:m().string.isRequired,handleOnAppKeyChange:m().func.isRequired,handleOnAppKeyBlur:m().func.isRequired,appKey:m().string.isRequired,appKeyValidationStatus:m().string.isRequired,appKeyValidationMessage:m().string.isRequired,region:m().string.isRequired,handleOnRegionChange:m().func.isRequired,mode:m().string.isRequired}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/DatadogAPM/DatadogDashboardsAndEnvironments.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return b}});n("./node_modules/lodash/lodash.js");var s,o=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/MultiSelect/MultiSelect.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),c=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-add-stroke-small.js"),p=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/DatadogAPM/DatadogEnvironmentsMap.js"),u=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),g=n("./node_modules/prop-types/index.js"),m=n.n(g);const h=u.default.div`
  width: fit-content;
`;let b=(0,i.observer)(s=class extends o.Component{constructor(e){super(e)}render(){const{apiKey:e,appKey:t,selectedDashboards:n,availableDashboards:s,handleDashboardsChange:i,isLoadingDashboards:u,errorDashboards:g,region:m,environments:b,rule:f,onSelectEnvironmentServices:v,removeEnvironmentSelector:S,handleAddEnvironmentButtonClick:I,isAddEnvironmentButtonDisabled:y,integrationId:E}=this.props;return o.createElement(r.default,{direction:"column",gap:"spacing-l",width:"100%"},o.createElement(p.default,{integrationId:E,mode:this.props.mode,apiKey:e,appKey:t,environments:b,region:m,rule:f,onSelectEnvironmentServices:v,removeEnvironmentSelector:S}),o.createElement(h,null,o.createElement(a.default,{type:"tertiary",onClick:I,text:"Add Environment",icon:o.createElement(c.default,null),isDisabled:y,tooltip:!y&&"Fill in the details to add a new environment."})),o.createElement(l.default,{value:n,options:s,placeholder:"Select Dashboards",label:o.createElement(d.default,{text:"Link Dashboards (Optional)",type:"secondary"}),onChange:i,isLoading:u,error:g&&"Unable to load dashboards",emptyStateMessage:"No dashboards found"}))}})||s;b.propTypes={mode:m().string.isRequired,apiKey:m().string.isRequired,appKey:m().string.isRequired,selectedDashboards:m().array.isRequired,availableDashboards:m().array.isRequired,handleDashboardsChange:m().func.isRequired,isLoadingDashboards:m().bool.isRequired,errorDashboards:m().bool.isRequired,region:m().string.isRequired,environments:m().array.isRequired,rule:m().string.isRequired,onSelectEnvironmentServices:m().func.isRequired,removeEnvironmentSelector:m().func.isRequired,handleAddEnvironmentButtonClick:m().func.isRequired,isAddEnvironmentButtonDisabled:m().bool.isRequired}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/ServiceSetup/DatadogAPM/DatadogEnvironmentsMap.js":function(e,t,n){n.r(t),n.d(t,{DatadogEnvironmentSelector:function(){return y},default:function(){return I}});var s,o,i=n("./node_modules/lodash/lodash.js"),r=n.n(i),a=n("../../node_modules/react/index.js"),l=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),d=n("./js/stores/StoreManager.js"),c=n("./js/stores/IntegrationsStore.js"),p=n("./integrations/monitoring/constants.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),h=n("../../node_modules/@postman/aether/esmLib/src/components/TextInput/TextInput.js"),b=n("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),f=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/MultiSelect/MultiSelect.js"),v=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-clear-stroke-small.js"),S=n("./integrations/monitoring/services/index.js");let I=(0,l.observer)(o=class extends a.Component{constructor(e){super(e)}render(){let{environments:e,apiKey:t,appKey:n,region:s,rule:o,integrationId:i}=this.props;return a.createElement(a.Fragment,null,r().map(e,((l,d)=>a.createElement(a.Fragment,null,a.createElement(u.default,{direction:"column",gap:"spacing-l"},a.createElement(u.default,{justifyContent:"space-between",alignItems:"center"},a.createElement(g.default,{type:"h4",text:"Select services for Environment",color:"content-color-primary"}),r().size(e)>1&&a.createElement(m.default,{type:"tertiary",onClick:()=>this.props.removeEnvironmentSelector(d),text:"Remove",icon:a.createElement(v.default,null)})),a.createElement(y,{integrationId:i,mode:this.props.mode,apiKey:t,appKey:n,environments:e,environment:l,key:l.id,region:s,rule:o,onSelectEnvironmentServices:this.props.onSelectEnvironmentServices,index:d}))))))}})||o,y=(0,l.observer)(s=class extends a.Component{constructor(e){super(e),this.state={environmentName:e.environment.name,selectedServices:r().map(e.environment.services,(e=>({label:e,value:e}))),availableServices:[],loadingServices:!1,errorServices:"",errorName:""},this.integrationsStore=(0,d.resolveStoreInstance)(c.default),this.onServiceSelect=this.onServiceSelect.bind(this),this.listServicesDebounce=r().debounce(this.listServices.bind(this),1e3)}componentDidMount(){this.listServices()}onServiceSelect(e){r().isArray(e)&&this.setState({selectedServices:e},(()=>{this.props.onSelectEnvironmentServices(this.state.environmentName,r().map(e,"value"),this.props.index)}))}async listServices(){this.integrationsStore.integrationClass||await this.integrationsStore.getIntegrationClassDetails(p.DATADOG_APM_CLASS_ID);const{rule:e,apiKey:t,appKey:n,region:s,integrationId:o,mode:i}=this.props,{environmentName:a}=this.state,l=r().find(this.integrationsStore.integrationClass.inputs,{key:"environments"}),d=r().get(l,"options.serviceActionId"),c=r().get(l,"id");if((r().isEmpty(t)||r().isEmpty(n))&&i===p.ADD_MODE)return;this.setState({loadingServices:!0,errorServices:!1});let u={};u=i&&i===p.EDIT_MODE?{rule:e,...t?{api_key:t}:{},...n?{app_key:n}:{},environment:a,region:s}:{rule:e,api_key:t,app_key:n,environment:a,region:s},S.default[e].listServicesWithIntegrationId(u,o||null,d,c).then((e=>{let t=r().map(r().keys(e),(e=>({label:e,value:e})));this.setState({availableServices:t,loadingServices:!1})})).catch((e=>{this.setState({errorServices:!0,loadingServices:!1,availableServices:[],selectedServices:[]})}))}render(){const{selectedServices:e,availableServices:t,loadingServices:n,errorServices:s,environmentName:o,errorName:i}=this.state;let{environments:l}=this.props;return a.createElement(u.default,{direction:"column",gap:"spacing-l"},a.createElement(h.default,{id:"apm-datadog-environment",label:a.createElement(b.default,{text:"Datadog Environment",infoText:"Enter the Datadog environment for the services."}),helperText:"This will be used as a filter on the environment tag on datadog.",value:o,isDisabled:r().size(e)>0,onChange:e=>{const t=e.target.value,n=r().find(l,(e=>e.name===t&&r().size(e.services)>0));n&&r().size(n.services)?this.setState({environmentName:t,errorName:"You cannot input multiple environments with the same name.",validationStatus:"error",selectedServices:[]}):this.setState({environmentName:t,errorName:"",validationStatus:null,selectedServices:[]},(()=>{this.listServicesDebounce()}))},validationStatus:this.state.validationStatus,validationMessage:"error"===this.state.validationStatus?i:null}),a.createElement(f.default,{value:e,options:t,placeholder:"Select Datadog APM Services",label:a.createElement(b.default,{text:"Services",type:"secondary",infoText:"Datadog Metric Graphs will be fetched via a public URL."}),onChange:this.onServiceSelect,isLoading:n,error:s&&"Unable to load services",isDisabled:!r().isEmpty(i)}))}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/AddIntegrationActions.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return c}});var s=n("../../node_modules/react/index.js"),o=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/CancelButton.js"),i=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/AddButton.js"),r=n("./js/stores/StoreManager.js"),a=n("./js/stores/IntegrationsStore.js"),l=n("../../node_modules/mobx/lib/mobx.module.js");function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},d.apply(this,arguments)}function c(e){let{disabled:t,workspaceId:n,payload:c,integrationFormActions:p,source:u,showDivider:g,...m}=e,h="basic_auth"!==(b=(0,l.toJS)((0,r.resolveStoreInstance)(a.default).authType))&&"token"!==b;var b;return u||(u="team_integrations_create_forms"),s.createElement("div",null,g&&s.createElement("hr",{className:"integration-add-actions-separator"}),s.createElement(i.default,d({disabled:t,workspaceId:n,payload:c},m,{redirect:e.redirect,integrationFormActions:p,source:u,alignLeft:h})),s.createElement(o.default,d({alignLeft:h,integrationFormActions:p,payload:c,source:u},m)))}c.defaultProps={showDivider:!0}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/AuthUserSegment.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return o}});var s=n("../../node_modules/react/index.js");function o(e){const{imageSrc:t,displayField:n}=e;return s.createElement("div",{className:"integrations-add-card__authed-user"},s.createElement("div",{className:"integrations-add-card__authed-user__text"},"Authenticated as"),t&&s.createElement("img",{src:t,className:"integrations-add-card__authed-user-image"}),s.createElement("span",{className:"integrations-add-card__authed-user__name"},n))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/CustomLink.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return o}});var s=n("../../node_modules/react/index.js");function o(e){const{className:t,extUrl:n,target:o}=e;return s.createElement("a",{className:t,href:n,rel:"_blank"===o?"noopener noreferrer":"",target:o,onClick:e.onClick},e.children)}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/EntitySelector.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return j}});var s,o=n("../../node_modules/react/index.js"),i=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SelectSegmentV2.js"),r=n("./js/stores/ActiveWorkspaceStore.js"),a=n("./js/stores/StoreManager.js"),l=n("./js/stores/IntegrationsStore.js"),d=n("./monitors/services/MonitorService.js"),c=n("./js/services/NavigationService.js"),p=n("./api-dev/services/APIDevService.js"),u=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),g=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),m=(n("./js/modules/services/RemoteSyncRequestService.js"),n("./integrations/constants/integrationsConstants.ts")),h=n("./runtime-repl/collection/_api/CollectionInterface.js"),b=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),f=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),v=n("./js/external-navigation/ExternalNavigationService.js"),S=n("./api-dev/interfaces/APIInterface.js"),I=n("../../node_modules/mobx/lib/mobx.module.js"),y=n("./node_modules/lodash/lodash.js"),E=n.n(y);const A="Malformed response",_={collections:"Please select a collection",monitors:"Please select a monitor",apis:"Please select an API",apiversions:"Please select an API version"},w={collections:"You don't have access to this collection.",monitors:"You don't have access to this monitor.",apis:"You don't have access to this API.",apiversions:"You don't have access to this APIVersion."};let j=(0,u.observer)(s=class extends o.Component{constructor(e){super(e),this.store=(0,a.resolveStoreInstance)(l.default),this.workspaceStore=(0,a.resolveStoreInstance)(r.default),this.state={entities:[],entityVersions:[],loading:!1,error:!1,firstLoad:!0},this.fetchEntities=this.fetchEntities.bind(this),this.fetchCollections=this.fetchCollections.bind(this),this.fetchMonitors=this.fetchMonitors.bind(this),this.fetchUptimeMonitors=this.fetchUptimeMonitors.bind(this),this.fetchAPIs=this.fetchAPIs.bind(this),this.fetchAPIVersions=this.fetchAPIVersions.bind(this),this.onTargetSelect=this.onTargetSelect.bind(this),this.getEmptyStateError=this.getEmptyStateError.bind(this),this.updateSelectedEntity=this.updateSelectedEntity.bind(this),this.getFormattedResponse=this.getFormattedResponse.bind(this),this.validateDropdownVisibility=this.validateDropdownVisibility.bind(this)}async componentDidMount(){const{entity:e,workspaceId:t}=this.props;(e===m.entityTypes.API_VERSIONS||t)&&(this.setState({shouldHideDropdown:e===m.entityTypes.API_VERSIONS}),await this.fetchEntities(),await this.validateDropdownVisibility()),(0,I.reaction)((()=>this.workspaceStore.dependencies),(async()=>{await this.fetchEntities(),await this.validateDropdownVisibility()}))}async componentDidUpdate(e){e.workspaceId===this.props.workspaceId&&e.apiId===this.props.apiId||(await this.fetchEntities(),await this.validateDropdownVisibility())}getFormattedResponse(e){let t=!1,n=[];return n=e.map((e=>e.name&&e.id?{...e,label:E().get(e,"name"),value:E().get(e,"id")}:(t=!0,{}))),{newEntities:n,malformedResponse:t}}updateSelectedEntity(e){this.store.setSelectedEntity(E().find(e,{value:this.store.selectedEntity.value}))}async fetchEntities(){this.setState({loading:!0,error:""}),this.props.entity===m.entityTypes.COLLECTIONS&&this.fetchCollections(this.props.workspaceId),this.props.entity===m.entityTypes.MONITORS&&this.fetchMonitors(this.props.workspaceId),this.props.entity===m.entityTypes.UPTIME_MONITORS&&this.fetchUptimeMonitors(this.props.workspaceId),this.props.entity===m.entityTypes.APIS&&this.fetchAPIs(this.props.workspaceId),this.props.entity===m.entityTypes.API_VERSIONS&&await this.fetchAPIVersions(this.props.apiId)}getEmptyStateError(){return _[this.props.entity]?_[this.props.entity]:""}fetchAndAssignPermissions(e,t,n,s){return new Promise(((s,o)=>{const i=e.map((e=>({id:E().get(e,"apiversion"===n?"api":"id")})));let r=null;m.INTEGRATION_FORM_MODE.ADD,r=g.default.fetchCreatePermissions,r(t,n,i).then((t=>(E().forEach(E().zip(e,t.body),(e=>{const[t,n]=e;t.disabled=!n.hasPermission})),s(e)))).catch((e=>{pm.logger.error(e),o(e)}))}))}fetchCollections(e){e?(0,h.getCollectionsInWorkspace)(e).then((e=>{const{newEntities:t,malformedResponse:n}=this.getFormattedResponse(e);if(n)throw new Error(A);return t})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return this.fetchAndAssignPermissions(e,this.props.rule,"collection",this.props.mode)})).then((e=>{this.props.entity===m.entityTypes.COLLECTIONS&&this.store.selectedEntity&&this.updateSelectedEntity(e),this.setState({entities:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load collections",loading:!1}),pm.toasts.error("Something went wrong while fetching collections"),pm.logger.error("Error while fetching collections",e)})):this.setState({loading:!1})}fetchMonitors(e){e?d.default.getJobTemplatesByWorkspace({workspaceId:e}).then((e=>{const t=E().get(e,"body.data",[]),{newEntities:n,malformedResponse:s}=this.getFormattedResponse(t);if(s)throw new Error(A);return n})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return this.fetchAndAssignPermissions(e,this.props.rule,"monitor",this.props.mode)})).then((e=>this.props.performEntityChecks?this.props.performEntityChecks(e):e)).then((e=>{this.props.entity===m.entityTypes.MONITORS&&this.store.selectedEntity&&this.updateSelectedEntity(e),this.setState({entities:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load monitors",loading:!1}),pm.toasts.error("Something went wrong while fetching monitors"),pm.logger.error("Error ocurred while fetching monitors",e)})):this.setState({loading:!1})}fetchUptimeMonitors(e){e?d.default.getMonitorsByWorkspace({workspaceId:e}).then((e=>{const t=E().get(e,"body.data",[]),{newEntities:n,malformedResponse:s}=this.getFormattedResponse(t);if(s)throw new Error(A);return n})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return e})).then((e=>this.props.performEntityChecks?this.props.performEntityChecks(e):e)).then((e=>{this.props.entity===m.entityTypes.UPTIME_MONITORS&&this.store.selectedEntity&&this.updateSelectedEntity(e),this.setState({entities:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load uptime monitors",loading:!1}),pm.logger.error("Error ocurred while fetching uptime monitors",e)})):this.setState({loading:!1})}fetchAPIs(e){e?p.default.getWorkspaceAPIs(e).then((e=>{const{newEntities:t,malformedResponse:n}=this.getFormattedResponse(e);if(n)throw new Error(A);return t})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return this.fetchAndAssignPermissions(e,this.props.rule,"api",this.props.mode)})).then((e=>{this.props.entity===m.entityTypes.APIS&&this.store.selectedEntity&&this.updateSelectedEntity(e),this.setState({entities:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load APIs",loading:!1}),pm.toasts.error("Something went wrong while fetching APIs"),pm.logger.error("Error ocurred while fetching APIs",e)})):this.setState({loading:!1})}async fetchAPIVersions(e){if(this.setState({shouldHideDropdown:!0}),e)try{const t=await p.default.getVersions(e);let{newEntities:n,malformedResponse:s}=this.getFormattedResponse(t);if(s)throw new Error(A);if(this.props.rule&&this.props.mode){const e="apiversion";n=await this.fetchAndAssignPermissions(n,this.props.rule,e,this.props.mode)}this.props.entity===m.entityTypes.API_VERSIONS&&this.store.selectedEntityVersion&&this.store.setSelectedEntityVersion(E().find(n,{value:this.store.selectedEntityVersion.value})),this.setState({entityVersions:n,loading:!1})}catch(e){this.setState({error:"Unable to load API versions",loading:!1}),pm.toasts.error("Something went wrong while fetching API versions"),pm.logger.error("Error ocurred while fetching API versions",e)}else this.setState({loading:!1})}onTargetSelect(e){E().isEmpty(e)?(this.store.resetSelectedEntityVersion(),this.props.entity!==m.entityTypes.API_VERSIONS&&this.store.resetSelectedEntity(),this.setState({firstLoad:!1,loading:!1})):this.props.entity===m.entityTypes.API_VERSIONS?this.store.setSelectedEntityVersion(e):(this.store.resetSelectedEntityVersion(),this.store.setSelectedEntity(e))}renderCreateMonitor(){return o.createElement(b.default,{alignItems:"center",direction:"column"},o.createElement("div",null,"This workspace doesn't have any monitors."),o.createElement("div",{onClick:()=>{"workspace"===E().split(c.default.getCurrentURL(),"/",1)[0]?c.default.transitionTo("build.create-monitor",{wid:this.props.workspaceId}):(0,v.openExternalLink)(c.default.getBaseURL()+"/"+c.default.getURLForRoute("build.create-monitor",{wid:this.props.workspaceId}),"_blank")}},o.createElement(f.default,{type:"link-primary"},"Create a new monitor")))}renderEmptyStateOptions(){if(this.props.entity===m.entityTypes.MONITORS)return this.renderCreateMonitor()}async validateDropdownVisibility(){const{entity:e,apiId:t}=this.props,{entityVersions:n}=this.state;if(e===m.entityTypes.API_VERSIONS){const e=await(0,S.hasAPIMigrated)(t);this.setState({shouldHideDropdown:e}),e&&this.store.setSelectedEntityVersion(n[0])}else this.setState({shouldHideDropdown:!1})}render(){const{loading:e,error:t,entities:n,entityVersions:s,firstLoad:r,shouldHideDropdown:a}=this.state,{selectedEntity:l,selectedEntityVersion:d}=this.store;return a?null:o.createElement(i.default,{title:this.props.title,isClearable:!0,description:this.props.description,disabled:this.props.disabled||e,options:this.props.entity===m.entityTypes.API_VERSIONS?s:n,value:this.props.value||(this.props.entity===m.entityTypes.API_VERSIONS?d:l),entityType:this.props.entity,onTargetSelect:this.props.onTargetSelect||this.onTargetSelect,error:t,label:this.props.label,loading:e,tooltipMessage:this.props.tooltipMessage||E().get(w,this.props.entity),emptyStateError:!e&&(this.props.entity===m.entityTypes.API_VERSIONS?s.length>0&&!d:n.length>0&&!l)&&!r&&this.getEmptyStateError(),handleRetry:this.fetchEntities,noOptionsForDropdown:this.renderEmptyStateOptions(),workspaceId:this.props.workspaceId})}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/EntitySelectorV2.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return I}});var s,o=n("../../node_modules/react/index.js"),i=n("./js/stores/StoreManager.js"),r=n("./js/stores/IntegrationsStore.js"),a=n("./monitors/services/MonitorService.js"),l=n("./api-dev/services/APIDevService.js"),d=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),p=n("./integrations/constants/integrationsConstants.ts"),u=n("./runtime-repl/collection/_api/CollectionInterface.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),m=n("./js/components/base/LoadingIndicator.js"),h=n("./integrations/api-observability/components/base/CustomDropdown.js"),b=n("./node_modules/lodash/lodash.js");const f="Malformed response",v={collections:"Please select a collection",monitors:"Please select a monitor",uptimeMonitors:"Please select an uptime monitor",apis:"Please select an API",apiversions:"Please select an API version"},S={collections:"Select a collection",monitors:"Select a monitor",uptimeMonitors:"Select an uptime monitor",apis:"Select an API",apiversions:"Select an API version"};let I=(0,d.observer)(s=class extends o.Component{constructor(e){super(e),this.store=(0,i.resolveStoreInstance)(r.default),this.state={entities:[],entityVersions:[],loading:!1,error:!1,firstLoad:!0},this.fetchEntities=this.fetchEntities.bind(this),this.fetchCollections=this.fetchCollections.bind(this),this.fetchMonitors=this.fetchMonitors.bind(this),this.fetchUptimeMonitors=this.fetchUptimeMonitors.bind(this),this.fetchAPIs=this.fetchAPIs.bind(this),this.fetchAPIVersions=this.fetchAPIVersions.bind(this),this.onTargetSelect=this.onTargetSelect.bind(this),this.getEmptyStateError=this.getEmptyStateError.bind(this),this.updateSelectedEntity=this.updateSelectedEntity.bind(this),this.getFormattedResponse=this.getFormattedResponse.bind(this)}componentDidMount(){(this.props.entity===p.entityTypes.API_VERSIONS||this.props.workspaceId)&&this.fetchEntities()}componentDidUpdate(e){e.workspaceId===this.props.workspaceId&&e.apiId===this.props.apiId||this.fetchEntities()}getFormattedResponse(e){let t=!1,n=[];return n=e.map((e=>e.name&&e.id?{...e,label:b.get(e,"name"),value:b.get(e,"id")}:(t=!0,{}))),{newEntities:n,malformedResponse:t}}updateSelectedEntity(e){this.store.setSelectedEntity(b.find(e,{value:this.store.selectedEntity.value})||[])}fetchEntities(){this.setState({loading:!0,error:""}),this.props.entity===p.entityTypes.COLLECTIONS&&this.fetchCollections(this.props.workspaceId),this.props.entity===p.entityTypes.MONITORS&&this.fetchMonitors(this.props.workspaceId),this.props.entity===p.entityTypes.UPTIME_MONITORS&&this.fetchUptimeMonitors(this.props.workspaceId),this.props.entity===p.entityTypes.APIS&&this.fetchAPIs(this.props.workspaceId),this.props.entity===p.entityTypes.API_VERSIONS&&this.fetchAPIVersions(this.props.apiId)}getEmptyStateError(){return v[this.props.entity]?v[this.props.entity]:""}fetchAndAssignPermissions(e,t,n,s){return new Promise(((s,o)=>{const i=e.map((e=>({id:b.get(e,"apiversion"===n?"api":"id")})));let r=null;p.INTEGRATION_FORM_MODE.ADD,r=c.default.fetchCreatePermissions,r(t,n,i).then((t=>(b.forEach(b.zip(e,t.body),(e=>{const[t,n]=e;t.disabled=!n.hasPermission})),s(e)))).catch((e=>{pm.logger.error(e),o(e)}))}))}fetchCollections(e){e?(0,u.getCollectionsInWorkspace)(e).then((e=>{const{newEntities:t,malformedResponse:n}=this.getFormattedResponse(e);if(n)throw new Error(f);return t})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return this.fetchAndAssignPermissions(e,this.props.rule,"collection",this.props.mode)})).then((e=>{this.props.entity===p.entityTypes.COLLECTIONS&&this.store.selectedEntity&&this.updateSelectedEntity(e),this.setState({entities:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load collections",loading:!1}),pm.toasts.error("Something went wrong while fetching collections"),pm.logger.error("Error while fetching collections",e)})):this.setState({loading:!1})}fetchMonitors(e){e?a.default.getJobTemplatesByWorkspace({workspaceId:e}).then((e=>{const t=b.get(e,"body.data",[]),{newEntities:n,malformedResponse:s}=this.getFormattedResponse(t);if(s)throw new Error(f);return n})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return this.fetchAndAssignPermissions(e,this.props.rule,"monitor",this.props.mode)})).then((e=>{this.props.entity===p.entityTypes.MONITORS&&this.store.selectedEntity&&this.updateSelectedEntity(e),this.setState({entities:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load monitors",loading:!1}),pm.toasts.error("Something went wrong while fetching monitors"),pm.logger.error("Error ocurred while fetching monitors",e)})):this.setState({loading:!1})}fetchUptimeMonitors(e){e?a.default.getMonitorsByWorkspace({workspaceId:e}).then((e=>{const t=b.get(e,"body.data",[]),{newEntities:n,malformedResponse:s}=this.getFormattedResponse(t);if(s)throw new Error(f);return n})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return this.fetchAndAssignPermissions(e,this.props.rule,"uptimeMonitor",this.props.mode)})).then((e=>{this.props.entity===p.entityTypes.UPTIME_MONITORS&&this.store.selectedEntity&&this.updateSelectedEntity(e),this.setState({entities:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load uptime monitors",loading:!1}),pm.logger.error("Error ocurred while fetching uptime monitors",e)})):this.setState({loading:!1})}fetchAPIs(e){e?l.default.getWorkspaceAPIs(e).then((e=>{const{newEntities:t,malformedResponse:n}=this.getFormattedResponse(e);if(n)throw new Error(f);return t})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return this.fetchAndAssignPermissions(e,this.props.rule,"api",this.props.mode)})).then((e=>{this.props.entity===p.entityTypes.APIS&&this.store.selectedEntity&&this.updateSelectedEntity(e),this.setState({entities:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load APIs.",loading:!1}),pm.toasts.error("Something went wrong while fetching APIs"),pm.logger.error("Error ocurred while fetching APIs",e)})):this.setState({loading:!1})}fetchAPIVersions(e){e?l.default.getVersions(e).then((e=>{const{newEntities:t,malformedResponse:n}=this.getFormattedResponse(e);if(n)throw new Error(f);return t})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return this.fetchAndAssignPermissions(e,this.props.rule,"apiversion",this.props.mode)})).then((e=>{this.props.entity===p.entityTypes.API_VERSIONS&&this.store.selectedEntityVersion&&this.store.setSelectedEntityVersion(b.find(e,{value:this.store.selectedEntityVersion.value})||[]),this.setState({entityVersions:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load API versions.",loading:!1}),pm.toasts.error("Something went wrong while fetching API versions"),pm.logger.error("Error ocurred while fetching API versions",e)})):this.setState({loading:!1})}onTargetSelect(e){b.isEmpty(e)?(this.store.setSelectedEntityVersion([]),this.props.entity!==p.entityTypes.API_VERSIONS&&this.store.setSelectedEntity([]),this.setState({firstLoad:!1,loading:!1})):this.props.entity===p.entityTypes.API_VERSIONS?this.store.setSelectedEntityVersion(e):(this.store.setSelectedEntityVersion([]),this.store.setSelectedEntity(e))}getValidationState(){const{loading:e,error:t,entities:n,entityVersions:s,firstLoad:i}=this.state,{selectedEntity:r,selectedEntityVersion:a}=this.store;return t||!e&&(this.props.entity===p.entityTypes.API_VERSIONS?s.length>0&&!b.get(a,"value"):n.length>0&&!b.get(r,"value"))&&!i?{status:"error",message:t?o.createElement("div",null,t,o.createElement("span",{className:"dropdown-retry",onClick:()=>{this.fetchEntities()}},"Retry")):this.getEmptyStateError()}:{}}renderLoadingState(){return o.createElement(g.default,{justifyContent:"space-between"},o.createElement("div",null,"Loading..."),o.createElement(m.default,{className:"loading-indicator-aether__dropdown"}))}getPlaceHolder(){return S[this.props.entity]?S[this.props.entity]:""}render(){const{loading:e,entities:t,entityVersions:n}=this.state,{selectedEntity:s,selectedEntityVersion:i}=this.store;return o.createElement(h.default,{label:this.props.title,isClearable:!0,helperText:this.props.description,isDisabled:this.props.disabled||e,className:e?"dropdown-icon-remove":"",placeholder:e?this.renderLoadingState():this.getPlaceHolder(),options:this.props.entity===p.entityTypes.API_VERSIONS?n:t,value:this.props.entity===p.entityTypes.API_VERSIONS?i:s,onChange:this.onTargetSelect,validationState:this.getValidationState()})}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/FieldSegment.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return l}});var s=n("../../node_modules/react/index.js"),o=n("./js/components/base/Inputs.js"),i=n("./node_modules/lodash/lodash.js"),r=n.n(i);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},a.apply(this,arguments)}function l(e){const{description:t,title:n,optional:i,optionalText:l,id:d,disabled:c,error:p,...u}=e;return s.createElement("div",{className:"integrations-add-card__segment"},s.createElement("div",{className:"integrations-add-card__label-title"},n," ",i?s.createElement("span",null,"(",l||"optional",")"):""),s.createElement("div",{className:"integrations-add-card__label-description"},t),s.createElement("div",{className:"integrations-add-card__input"},s.createElement(o.Input,a({inputStyle:"box",type:"text",disabled:c,error:r().isEmpty(p)?"":"This is a mandatory field"},u)),r().isEmpty(p)?"":s.createElement("div",{className:"integrations-add-card__error"},p)))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/NicknameFieldSegment.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return l}});var s=n("../../node_modules/react/index.js"),o=n("./js/components/base/Inputs.js"),i=n("./node_modules/lodash/lodash.js"),r=n.n(i);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},a.apply(this,arguments)}function l(e){const{id:t,error:n,...i}=e;return s.createElement("div",{className:"integrations-add-card__segment"},s.createElement("div",{className:"integrations-add-card__label-title"}," Nickname "),s.createElement("div",{className:"integrations-add-card__label-description"},"Helps in identifying the integrations."),s.createElement("div",{className:"integrations-add-card__input"},s.createElement(o.Input,a({id:t,inputStyle:"box",type:"text",error:r().isEmpty(n)?"":"This is a mandatory field"},i)),r().isEmpty(n)?"":s.createElement("div",{className:"integrations-add-card__error"},n)))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/NicknameFieldSegmentV2.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return d}});var s=n("../../node_modules/react/index.js"),o=(n("./js/components/base/Inputs.js"),n("./node_modules/lodash/lodash.js")),i=n.n(o),r=n("../../node_modules/@postman/aether/esmLib/src/components/TextInput/TextInput.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js");function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},l.apply(this,arguments)}function d(e){const{id:t,error:n,...o}=e;return s.createElement("div",{className:"integrations-add-card__segment"},s.createElement(r.default,l({id:t,label:s.createElement(a.default,{text:"Nickname"}),helperText:"Give a nickname to your integration.",validationStatus:i().isEmpty(n)?"":"error",validationMessage:i().isEmpty(n)?"":"This is a mandatory field"},o)))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SelectSegment.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return a}});var s=n("../../node_modules/react/index.js"),o=n("./js/components/base/InputSelectV2.js"),i=n("./js/components/base/SearchHighlighter.js"),r=n("./node_modules/lodash/lodash.js");class a extends s.Component{constructor(e){super(e),this.selectedTarget=this.selectedTarget.bind(this)}getFilteredList(e,t,n={}){return!t||n.firstRender?e:r.filter(e,(e=>e.id&&r.includes(e.name.toLowerCase(),t.toLowerCase())))}selectedTarget(){var e=this.props.filterItems,t=this.props.selectedTarget,n=r.find(e,(e=>e.id===t.id));return n||{id:"none",name:this.props.initialLabel||"No result found"}}getOption(e,t,n={}){const o=e.name,r=e.id;return t&&!n.firstRender?s.createElement("div",{className:"input-select-item",key:r},s.createElement(i.default,{source:o,query:t})):s.createElement("div",{className:"input-select-item",key:r},o)}render(){var{title:e,description:t,customLabel:n,showCustomLabel:i,filterItems:r}=this.props;return s.createElement("div",{className:"integrations-add-card__segment"},s.createElement("div",{className:"integrations-add-card__label-title"},e),s.createElement("div",{className:"integrations-add-card__label-description"},t),s.createElement("div",{className:"integrations-add-card__input"},s.createElement(o.InputSelectV2,{style:{width:"100%"},onSelect:this.props.onTargetSelect,getFilteredList:this.getFilteredList.bind(this,r),optionRenderer:this.getOption,selectedItem:this.selectedTarget(),placeholder:this.props.placeholder,ref:"inputSelect",disabled:this.props.disabled,menuClassName:"integrations-target-selector-menu",getInputValue:e=>e.name||""}),i?n:""))}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SelectSegmentV2.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return c}});var s=n("../../node_modules/react/index.js"),o=n("./js/components/base/SelectDropdown.js"),i=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/DropdownOption.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),l=n("./version-control/common/ForkLabel.js"),d=n("./node_modules/lodash/lodash.js");class c extends s.Component{constructor(e){super(e),this.optionRenderer=e=>s.createElement(i.default,{option:e,workspaceId:this.props.workspaceId,entityType:this.props.entityType,tooltipMessage:e.disabledMessage||this.props.tooltipMessage}),this.validateEmptyString=this.validateEmptyString.bind(this),this.selectedTarget=this.selectedTarget.bind(this),this.optionRenderer=this.optionRenderer.bind(this)}filterOnLabel(e,t){return!t||(e.label&&"string"==typeof e.label?!(!t||!e.label.toLowerCase().includes(t.toLowerCase())):!e.name||"string"!=typeof e.name||e.name.toLowerCase().includes(t.toLowerCase()))}validateEmptyString(e){const t=e&&e.label&&e.label.trim();return!d.isEmpty(t)}selectedTarget(){if(this.props.multi)return this.props.value;var e=this.props.options,t=this.props.value,n=null;if(t&&(n=d.find(e,(e=>d.isEqual(e.value,t.value)))),n){let e,t;var o,i,c,p,u;return n.isForked?(e={id:null===(o=n)||void 0===o?void 0:o.id,forkLabel:null===(i=n)||void 0===i?void 0:i.forkLabel,model:null===(c=n)||void 0===c?void 0:c.type},t={id:null===(p=n)||void 0===p?void 0:p.baseCollectionUid,model:null===(u=n)||void 0===u?void 0:u.type},n={...n,label:s.createElement(r.default,{alignItems:"center",direction:"row",gap:"spacing-xs",className:"input-select-item",width:"100%"},s.createElement(a.default,{isTruncated:!0,maxWidth:"80%",color:"content-color-primary"},n.label),s.createElement(l.default,{forkedEntity:e,baseEntity:t,label:n.forkLabel}))}):n}return null}promptTextForCreateOption(e,t=""){return`${t} "${e}" `}render(){var{title:e,description:t,options:n,error:i,isCreatable:r,isClearable:a,noResultsForSearch:l,optional:c,noOptionsForDropdown:p,loading:u,disabled:g,handleRetry:m,checkForValidInput:h,customInputMessage:b,emptyStateError:f,label:v}=this.props;return s.createElement("div",{className:"integrations-add-card__segment"},s.createElement("div",{className:"integrations-add-card__label-title"},e," ",c?s.createElement("span",null,"(optional)"):""),s.createElement("div",{className:"integrations-add-card__label-description"},t),s.createElement("div",{className:"integrations-add-card__input"},s.createElement(o.default,{isCreatable:r,isClearable:a,multi:this.props.multi,label:v,optionRenderer:this.optionRenderer,loading:u,className:(f||i)&&"is-error",disabled:g,value:this.selectedTarget(),onValueClick:this.props.onTargetSelect,filterOption:this.filterOnLabel,noResultsText:n&&0!==n.length?l:p,options:n,isValidNewOption:h||this.validateEmptyString,placeholder:this.props.placeholder,ref:"inputSelect",promptTextCreator:e=>this.promptTextForCreateOption(e,b),menuClassName:"integrations-target-selector-menu",getInputValue:e=>e.name||""}),f?s.createElement("span",{className:"integrations-add-card__error"},f):i?s.createElement("span",{className:"integrations-add-card__error"},i+". ",d.isFunction(m)&&s.createElement("span",{onClick:m,className:"integrations-add-card__error__btn"},"Retry")):""))}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SensitiveFieldSegment.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return g}});var s=n("../../node_modules/react/index.js"),o=n("./js/components/base/PasswordInput.js"),i=n("./node_modules/lodash/lodash.js"),r=n.n(i),a=n("./node_modules/classnames/index.js"),l=n.n(a),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/InlineFormActions.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js");function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},p.apply(this,arguments)}const u=(e,t)=>l()(e,{"hide-toggle":!r().isEmpty(t)});function g(e){const{isInlineSaveVisible:t,inlineSaveButtonData:n,onSave:i,value:a}=e,{isSaveDisabled:l,integrationId:g,payload:m}=n||{};return s.createElement(c.default,{direction:"row",justifyContent:"space-between",alignItems:"center",width:"616px"},s.createElement("div",{className:"integrations-form__segment__input__inline-token"},(e=>{const{description:t,title:n,optional:i,id:a,customLink:l,error:d,descriptionClass:c,maskedPlaceholderWhenEmpty:g,...m}=e;return s.createElement("div",{className:"integrations-add-card__segment"},s.createElement("div",{className:"integrations-add-card__label-title"},n," ",i?s.createElement("span",null,"(optional)"):""),s.createElement("div",{className:c||"integrations-add-card__label-description"},t," ",l),s.createElement("div",{className:"integrations-add-card__input"},s.createElement(o.default,p({inputStyle:"box",type:"text",error:r().isEmpty(d)?"":"This is a mandatory field",placeholder:g?"************":""},m,{className:u(e.className,e.error)})),r().isEmpty(d)?"":s.createElement("div",{className:"integrations-add-card__error"},d)))})(e)),t&&s.createElement(d.default,{isSaveDisabled:l,integrationId:g,payload:m,onSave:i,value:a}))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SensitiveFieldSegmentV2.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return l}});var s=n("../../node_modules/react/index.js"),o=n("./node_modules/lodash/lodash.js"),i=n.n(o),r=(n("./node_modules/classnames/index.js"),n("../../node_modules/@postman/aether/esmLib/src/components/TextInput/TextInput.js"));function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},a.apply(this,arguments)}function l(e){const{description:t,title:n,optional:o,id:l,customLink:d,error:c,descriptionClass:p,maskedPlaceholderWhenEmpty:u,...g}=e;return s.createElement("div",{className:"integrations-add-card__segment"},s.createElement("div",{className:"integrations-add-card__label-title-v2"},n," ",o?s.createElement("span",null,"(optional)"):""),s.createElement("div",{className:p||"integrations-add-card__label-description"},t," ",d),s.createElement("div",{className:"integrations-add-card__input"},s.createElement(r.default,a({type:"password",placeholder:u?"************":""},g)),i().isEmpty(c)?"":s.createElement("div",{className:"integrations-add-card__error"},c)))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/WorkspaceSelector.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return g}});var s,o=n("../../node_modules/react/index.js"),i=n("./collaboration/workspace/controller/WorkspaceController.ts"),r=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SelectSegmentV2.js"),a=n("./js/stores/StoreManager.js"),l=n("./js/stores/IntegrationsStore.js"),d=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),c=n("./node_modules/async/dist/async.js"),p=n("./integrations/constants/integrationsConstants.ts"),u=n("./node_modules/lodash/lodash.js");let g=(0,d.observer)(s=class extends o.Component{constructor(e){super(e),this.store=(0,a.resolveStoreInstance)(l.default),this.state={workspaces:[],loading:!1,error:"",firstLoad:!0,shouldDisableDropdown:!1},this.fetchAllWorkspaces=this.fetchAllWorkspaces.bind(this),this.onTargetSelect=this.onTargetSelect.bind(this)}componentDidMount(){let{selectedWorkspace:e}=this.props;e?this.setState({workspaces:[e],shouldDisableDropdown:!0},(()=>{this.store.setSelectedWorkspace(e),this.setState({firstLoad:!1})})):this.fetchAllWorkspaces()}fetchAllWorkspaces(){this.setState({loading:!0,error:""});let e,t=[];(0,c.doUntil)((n=>{i.default.findAll({limit:50,...e&&{cursor:e}}).then((s=>(e=u.get(s,"meta.nextCursor"),t=u.unionBy(t,s.data,"id"),n()))).catch((e=>n(e)))}),(()=>u.isEmpty(e)),(e=>{if(e)this.setState({error:"Unable to load workspaces",loading:!1}),pm.toasts.error("Something went wrong while fetching workspaces"),pm.logger.error("Could not find workspaces",e);else{let n=!1;const s=t.map((e=>e.id&&e.name?{...e,label:e.name,value:e.id}:(n=!0,{})));n&&(this.setState({error:"Unable to load workspaces",loading:!1}),pm.toasts.error("Something went wrong while fetching workspaces"),pm.logger.error("Received malformed responses while fetching workspaces",e)),this.setState({workspaces:s,loading:!1})}}))}onTargetSelect(e){this.store.resetSelectedEntity(),this.store.resetSelectedEntityVersion(),u.isEmpty(e)?(this.store.resetAddIntegrationDependencies(),this.setState({firstLoad:!1})):this.store.setSelectedWorkspace(e)}render(){const{loading:e,error:t,workspaces:n,firstLoad:s,shouldDisableDropdown:i}=this.state,{selectedWorkspace:a}=this.store;return!i&&o.createElement(r.default,{title:"Choose workspace",description:this.props.description,disabled:this.props.disabled||e||i,error:t,entityType:p.entityTypes.WORKSPACES,loading:e,label:this.props.label,isClearable:!0,handleRetry:()=>this.fetchAllWorkspaces(),emptyStateError:!e&&n.length>0&&!a&&!s&&"Please select a workspace",options:n,value:a,onTargetSelect:this.onTargetSelect})}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/WorkspaceSelectorV2.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return f}});var s,o=n("../../node_modules/react/index.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),l=n("./js/stores/StoreManager.js"),d=n("./js/stores/IntegrationsStore.js"),c=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),p=n("./node_modules/prop-types/index.js"),u=n.n(p),g=n("./integrations/api-observability/components/base/CustomDropdown.js"),m=n("./collaboration/workspace/controller/WorkspaceControllerWithGateway.ts"),h=n("./node_modules/lodash/lodash.js");const b="Received malformed workspace response";let f=(0,c.observer)(s=class extends o.Component{constructor(e){super(e),this.store=(0,l.resolveStoreInstance)(d.default),this.state={workspaces:[],loading:!1,error:null,firstLoad:!0,shouldDisableDropdown:!1,cursor:"",selectedWorkspace:{}},this.fetchWorkspaces=this.fetchWorkspaces.bind(this),this.fetchSearchedWorkspaces=this.fetchSearchedWorkspaces.bind(this),this.onTargetSelect=this.onTargetSelect.bind(this),this.getCustomOption=this.getCustomOption.bind(this)}componentDidMount(){let{selectedWorkspace:e}=this.props;e&&this.setState({workspaces:[e],shouldDisableDropdown:!0},(()=>{this.store.setSelectedWorkspace(e),this.setState({firstLoad:!1})}))}async fetchWorkspaces(e){let t;this.setState({error:null});try{e?t=await m.default.findAllWithGateway({cursor:this.state.cursor,sort:{by:"name",order:"ASC"}}):(this.setState({loading:!0}),t=await m.default.findAllWithGateway({sort:{by:"name",order:"ASC"}}),this.setState({loading:!1}));const[n,s]=this.validateAndMapResponse(t);return s&&this.setState({error:b}),[n,t.meta.nextCursor]}catch(e){this.setState({error:"Unable to load workspaces.",loading:!1}),pm.toasts.error("Something went wrong while fetching workspaces"),pm.logger.error("Could not find workspaces",e)}}validateAndMapResponse(e){let t=!1;const n=h.map(e.data,(e=>e.id&&e.name?{...e,label:e.name,value:e.id}:(t=!0,{})));return[h.compact(n),t]}async fetchSearchedWorkspaces(e,t){let n;try{e?n=await m.default.findAllWithGateway({cursor:this.state.cursor,name:t,limit:50}):(this.setState({loading:!0}),n=await m.default.findAllWithGateway({name:t,limit:50}),this.setState({loading:!1}));const[s,o]=this.validateAndMapResponse(n);return o&&this.setState({error:b}),[s,n.meta.nextCursor]}catch(e){this.setState({error:"Unable to load workspaces.",loading:!1}),pm.toasts.error("Something went wrong while fetching workspaces"),pm.logger.error("Could not find workspaces",e)}}onTargetSelect(e){this.store.setSelectedEntity([]),this.store.setSelectedEntityVersion([]),h.isEmpty(e)?(this.store.resetSelectedWorkspace([]),this.setState({firstLoad:!1,selectedWorkspace:{}})):(this.store.setSelectedWorkspace(e),this.setState({firstLoad:!1,selectedWorkspace:e})),this.props.onChange&&this.props.onChange(e)}renderLoadingState(){return o.createElement(i.default,{className:"loading-placeholder"},o.createElement("div",null,"Loading..."),o.createElement(r.default,null))}getValidationState(){let{firstLoad:e,loading:t,workspaces:n,selectedWorkspace:s}=this.state;return!t&&n.length>0&&!h.get(s,"value")&&!e?{status:"error",message:"Please select a workspace."}:{}}getCustomOption(e){return o.createElement(i.default,{maxWidth:"parent",grow:1,shrink:1,minWidth:"0px",alignItems:"center",gap:"spacing-s"},o.createElement(a.default,{isTruncated:!0},e.label))}render(){const{loading:e,workspaces:t,shouldDisableDropdown:n}=this.state,{selectedWorkspace:s}=this.store;return!n&&o.createElement("div",{className:"integrations-add-card__segment"},o.createElement(g.default,{label:this.props.label||"Choose workspace",helperText:this.props.description,isDisabled:this.props.disabled||n,placeholder:e?this.renderLoadingState():"Select Workspace",className:e?"dropdown-icon-remove":"",isClearable:!0,isSearchable:!0,validationState:this.getValidationState(),options:t||[],value:s,onChange:this.onTargetSelect,emptyStateMessage:"No workspaces found",customOptionComponent:this.getCustomOption,asyncLoader:async({offset:e,search:n,shouldReset:s})=>{let o,i;return[o,i]=n?await this.fetchSearchedWorkspaces(e,n):await this.fetchWorkspaces(e),s?this.setState({workspaces:o,cursor:i}):this.setState({workspaces:h.union(t,o),cursor:i}),!h.isEmpty(i)}}))}})||s;f.propTypes={label:u().string,description:u().string,disabled:u().bool,onChange:u().func}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/AddButton.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return S}});var s,o=n("../../node_modules/react/index.js"),i=n("./js/components/base/Buttons.js"),r=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),a=n("./js/stores/StoreManager.js"),l=n("./js/stores/IntegrationsStore.js"),d=n("./js/services/NavigationService.js"),c=n("./integrations/navigation/constants.js"),p=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),u=n("./js/modules/services/AnalyticsService.js"),g=n("./integrations/utils/CommonHelperMethods.ts"),m=n("./node_modules/classnames/index.js"),h=n.n(m),b=n("./js/components/base/LoadingIndicator.js"),f=n("./node_modules/lodash/lodash.js");function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},v.apply(this,arguments)}let S=(0,p.observer)(s=class extends o.Component{constructor(e){super(e),this.store=(0,a.resolveStoreInstance)(l.default)}render(){const{disabled:e,payload:t,workspaceId:n,rule:s,service:a,alignLeft:l,integrationFormActions:p,source:m,labels:S,...I}=this.props,y=(null==S?void 0:S.add)||"Add Integration";let E=m||"team_integrations_create_forms";return o.createElement("div",{"data-testid":"add-integration-button",className:h()("integrations-add-actions__button--container",{"align-left":l})},o.createElement(i.Button,v({type:"primary",className:"integrations-add-actions__button--save-changes",disabled:e||this.store.isAdding,tooltip:e?"Make sure that you have entered all the mandatory fields":"",size:"small",onClick:()=>{this.store.updateIsAdding(!0),this.props.handleAddIntegration?this.props.handleAddIntegration():r.default.createIntegration(n||null,t).then((e=>{if(this.store.updateIsAdding(!1),200===e.status&&f.get(e,"body.model_id"))if(pm.toasts.success("Added a new integration"),u.default.addEventV2({category:"integrations",action:s+"_created_integration",label:E,value:1}),(0,g.postAddIntegrationActions)(s),p)p(t);else if("api_github"===s&&"github"===a)d.default.transitionTo(c.EDIT_INTEGRATIONS_IDENTIFIER,{integrationId:f.get(e,"body.data.id")},{apiId:t.executor,workspaceId:n});else if(this.props.redirect){const{identifier:e,routeParams:t,queryParams:n}=this.props.redirect;d.default.transitionTo(e,t,n)}else d.default.transitionTo(c.TEAM_INTEGRATIONS_IDENTIFIER,{serviceId:a,ruleId:s});else pm.toasts.error("Something went wrong while adding a new integration")})).catch((e=>{this.store.updateIsAdding(!1),pm.toasts.error(f.get(e,"error.details.message")||f.get(e,"error.message")||"Something went wrong while adding a new integration"),pm.logger.error("Something went wrong while adding a new integration",e)}))}},I)," ",this.store.isAdding?o.createElement(b.default,null):y))}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/CancelButton.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return g}});var s,o=n("../../node_modules/react/index.js"),i=n("./js/stores/StoreManager.js"),r=n("./js/stores/IntegrationsStore.js"),a=n("./js/components/base/Buttons.js"),l=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),d=n("./js/services/NavigationService.js"),c=n("./node_modules/classnames/index.js"),p=n.n(c);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},u.apply(this,arguments)}let g=(0,l.observer)(s=class extends o.Component{constructor(e){super(e),this.store=(0,i.resolveStoreInstance)(r.default)}render(){const{onClickHandler:e,service:t,alignLeft:n,integrationFormActions:s,payload:i,labels:r,...l}=this.props,c=(null==r?void 0:r.cancel)||"Cancel";return o.createElement("div",{"data-testid":"cancel-integration-addition-button",className:p()("integrations-add-actions__button--container",{"align-left":n})},o.createElement(a.Button,u({className:"integrations-add-actions__button--cancel",disabled:this.store.isAdding,type:"secondary",size:"small",onClick:()=>{s?s(i,"cancel"):(d.default.back(),this.store.resetAddIntegrationDependencies())}},l)," ",c," "))}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/DropdownOption.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return f}});var s=n("../../node_modules/react/index.js"),o=n("./js/components/base/Tooltips.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),a=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-entity-collection-stroke.js"),l=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-entity-forkedCollection-stroke.js"),d=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-entity-api-stroke.js"),c=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-entity-monitor-stroke.js"),p=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-descriptive-versions-stroke.js"),u=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),g=n("./integrations/constants/integrationsConstants.ts"),m=n("./collaboration/utils/util.js"),h=n("./version-control/common/ForkLabel.js"),b=n("./node_modules/lodash/lodash.js");class f extends s.Component{constructor(e){super(e),this.state={showTooltip:!1},this.setShowTooltip=this.setShowTooltip.bind(this)}setShowTooltip(e){this.setState({showTooltip:e})}render(){const{option:e,tooltipMessage:t,entityType:n,workspaceId:f}=this.props;let v,S;return e.isForked&&(v={id:e.id,forkLabel:e.forkLabel,model:e.type},S={id:e.baseCollectionUid,model:e.type}),s.createElement("div",{className:e.disabled?"disabled-option":"",ref:e=>this.optionRef=e,onMouseEnter:()=>this.setShowTooltip(!0),onMouseLeave:()=>this.setShowTooltip(!1)},t&&!b.isEmpty(t)&&e.disabled&&s.createElement(o.Tooltip,{show:this.state.showTooltip,target:this.optionRef,placement:"left"},s.createElement(o.TooltipBody,null,t)),s.createElement(i.default,{direction:"row",gap:"spacing-s",alignItems:"center",alignSelf:"auto",className:"target-input-flex"},((e,t)=>{let n=e.disabled?"content-color-tertiary":"",o={[g.entityTypes.COLLECTIONS]:s.createElement(a.default,{color:n}),[g.entityTypes.COLLECTIONS_FORKED]:s.createElement(l.default,{color:n}),[g.entityTypes.APIS]:s.createElement(d.default,{color:n}),[g.entityTypes.MONITORS]:s.createElement(c.default,{color:n}),[g.entityTypes.API_VERSIONS]:s.createElement(p.default,{color:n})};return t===g.entityTypes.WORKSPACES?s.createElement(u.default,{name:m.default.getWorkspaceIconName(e),color:"content-color-tertiary"}):t===g.entityTypes.COLLECTIONS&&e&&e.forkLabel?o[g.entityTypes.COLLECTIONS_FORKED]:o[t]})(e,n),s.createElement(i.default,{direction:"row",gap:"spacing-xs",className:"input-select-item",width:"100%"},s.createElement(r.default,{isTruncated:!0,maxWidth:"80%"},e.label),e.isForked&&s.createElement(h.default,{workspaceId:f,forkedEntity:v,baseEntity:S,label:e.forkLabel}))))}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/ExternalLink.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return r}});var s=n("../../node_modules/react/index.js"),o=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),i=n("./js/external-navigation/ExternalNavigationService.js");function r(e){const{extUrl:t}=e;return s.createElement("span",{onClick:()=>(0,i.openExternalLink)(t,"_blank")},s.createElement(o.default,{type:"link-default",isExternal:!0},e.children))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js":function(e,t,n){n.r(t),n.d(t,{AddIntegrationActions:function(){return g.default},AuthUserSegment:function(){return h.default},CustomLink:function(){return m.default},EntitySelector:function(){return p.default},EntitySelectorV2:function(){return u.default},FieldSegment:function(){return s.default},NicknameFieldSegment:function(){return o.default},NicknameFieldSegmentV2:function(){return i.default},SelectSegment:function(){return a.default},SelectSegmentV2:function(){return l.default},SensitiveFieldSegment:function(){return r.default},SensitiveFieldSegmentV2:function(){return b.default},WorkspaceSelector:function(){return d.default},WorkspaceSelectorV2:function(){return c.default}});var s=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/FieldSegment.js"),o=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/NicknameFieldSegment.js"),i=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/NicknameFieldSegmentV2.js"),r=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SensitiveFieldSegment.js"),a=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SelectSegment.js"),l=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SelectSegmentV2.js"),d=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/WorkspaceSelector.js"),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/WorkspaceSelectorV2.js"),p=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/EntitySelector.js"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/EntitySelectorV2.js"),g=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/AddIntegrationActions.js"),m=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/CustomLink.js"),h=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/AuthUserSegment.js"),b=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SensitiveFieldSegmentV2.js")},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/Datadog.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return I}});var s,o=n("./node_modules/lodash/lodash.js"),i=n.n(o),r=n("../../node_modules/react/index.js"),a=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),d=n("./integrations/monitoring/containers/helpers/DatadogAPMUtils.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/RadioGroup/RadioGroup.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),g=n("../../node_modules/@postman/aether/esmLib/src/components/Radio/Radio.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/CheckBoxGroup/CheckboxGroup.js"),h=n("../../node_modules/@postman/aether/esmLib/src/components/CheckBox/Checkbox.js"),b=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/EntityService.js"),f=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/EditFormActions.js"),v=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/ExternalLink.js"),S=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/FormUpdateChecker.ts");let I=(0,a.observer)(s=class extends r.Component{constructor(e){super(e),this.state={name:"",variables:{},configuredOn:null,loadingMonitorMeta:!1,errorMonitorMeta:""},this.toggle=this.toggle.bind(this),this.fetchMonitorMeta=this.fetchMonitorMeta.bind(this),this.onRegionSelectorChange=this.onRegionSelectorChange.bind(this),this.getInitialState=this.getInitialState.bind(this)}componentDidMount(){const{executor:e}=this.props.controller.integrationData;this.setState(this.getInitialState()),this.fetchMonitorMeta(e)}getInitialState(){const{name:e,executor:t,id:n,rule:s,serviceId:o,variables:i}=this.props.controller.integrationData,r={name:e,serviceId:o,executor:t,variables:i,ruleId:s,events:"both"===i.options||"events"==i.options,metrics:"both"===i.options||"metrics"==i.options,integrationId:n};return"us"===r.variables.region?r.variables.region="us1":"eu"===r.variables.region&&(r.variables.region="eu1"),r}fetchMonitorMeta(e){this.setState({loadingMonitorMeta:!0,errorMonitorMeta:""}),b.default.fetchMonitorMeta(e).then((t=>{t.id&&t.name?this.setState({configuredOn:{value:e,label:t.name},loadingMonitorMeta:!1}):this.setState({errorMonitorMeta:"Unable to load monitors",loadingMonitorMeta:!1})})).catch((e=>{e.status>=500&&e.status<600?this.setState({errorMonitorMeta:"Unable to load monitors"}):pm.toasts.error("Something went wrong while fetching monitors, please try again"),pm.logger.error("Error occurred while fetching monitors",e),this.setState({loadingMonitorMeta:!1})}))}toggle(e){this.setState((t=>({[e]:!t[e]})))}onRegionSelectorChange(e){this.setState({region:e})}render(){const{name:e,metrics:t,region:n,events:s,configuredOn:o,variables:a,executor:b,integrationId:I,ruleId:y,serviceId:E,errorMonitorMeta:A,loadingMonitorMeta:_}=this.state,{integrationFormActions:w,source:j}=this.props;let C={name:e,executor:b,variables:{region:a.region,options:(s&&t?"both":s&&"events")||t&&"metrics"||"none",...a.api_key?{api_key:a.api_key}:{}}};return r.createElement("div",null,r.createElement(l.NicknameFieldSegment,{id:"datadog-nickname",value:e,error:i().isEmpty(e)?"Please enter a nickname":"",onBlur:()=>{this.setState({name:e.trim()})},onChange:e=>{this.setState({name:e})}}),r.createElement(l.SelectSegmentV2,{disabled:!0,title:"Choose Monitor",description:"The results of the selected monitor will be sent to Datadog",value:o,options:o?[o]:[],error:A,loading:_,handleRetry:()=>this.fetchMonitorMeta(b)}),r.createElement(c.default,{padding:{paddingTop:"spacing-l"}},r.createElement(p.default,{name:"Select Datadog site",value:a.region,direction:"column",onChange:e=>{this.setState({variables:{...a,region:e,api_key:""}})},label:r.createElement(u.default,{text:"Select Datadog region",type:"primary"}),helperText:"This helps us know what Datadog region to use."},r.createElement(g.default,{label:"US1 (datadoghq.com)",value:"us1"}),r.createElement(g.default,{label:"US3 (us3.datadoghq.com)",value:"us3"}),r.createElement(g.default,{label:"US5 (us5.datadoghq.com)",value:"us5"}),r.createElement(g.default,{label:"EU1 (datadoghq.eu)",value:"eu1"}),r.createElement(g.default,{label:"US1-FED (ddog-gov.com)",value:"us1-fed"}))),r.createElement(c.default,{direction:"column",gap:"spacing-l"},r.createElement(l.SensitiveFieldSegment,{maskedPlaceholderWhenEmpty:!0,title:"Datadog API Key",description:"Enter the API Key provided by Datadog or",customLink:r.createElement(v.default,{extUrl:`${d.default.getDatadogHostname(a.region)}/organization-settings/api-keys`},"generate one here"),id:"datadog-key",value:a.api_key||"",onChange:e=>{this.setState({variables:{...a,api_key:e}})}}),r.createElement(m.default,null,r.createElement(h.default,{label:"Send metrics for each run",isChecked:t,onChange:()=>{this.toggle("metrics")}}),r.createElement(h.default,{label:"Send events for completed runs",isChecked:s,onChange:()=>{this.toggle("events")}}))),r.createElement(f.default,{disabled:!(o&&e&&a.region&&(s||t)&&(0,S.isFormUpdated)(this.getInitialState(),this.state)),integrationId:I,payload:C,rule:y,service:E,integrationFormActions:w,source:j}))}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/NewRelic.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return h}});var s,o=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=(n("../../node_modules/mobx/lib/mobx.module.js"),n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js")),a=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/RadioGroup/RadioGroup.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Radio/Radio.js"),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/EntityService.js"),p=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/EditFormActions.js"),u=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/ExternalLink.js"),g=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/FormUpdateChecker.ts"),m=n("./node_modules/lodash/lodash.js");let h=(0,i.observer)(s=class extends o.Component{constructor(e){super(e),this.state={name:"",variables:{},configuredOn:null,loadingMonitorMeta:!1,errorMonitorMeta:""},this.toggle=this.toggle.bind(this),this.fetchMonitorMeta=this.fetchMonitorMeta.bind(this),this.getInitialState=this.getInitialState.bind(this)}componentDidMount(){const{executor:e}=this.props.controller.integrationData;this.setState(this.getInitialState()),this.fetchMonitorMeta(e)}getInitialState(){const{name:e,executor:t,id:n,rule:s,serviceId:o,variables:i}=this.props.controller.integrationData;return{name:e,serviceId:o,executor:t,variables:i,ruleId:s,integrationId:n}}fetchMonitorMeta(e){this.setState({loadingMonitorMeta:!0,errorMonitorMeta:""}),c.default.fetchMonitorMeta(e).then((t=>{t.id&&t.name?this.setState({configuredOn:{value:e,label:t.name},loadingMonitorMeta:!1}):this.setState({errorMonitorMeta:"Unable to load monitors",loadingMonitorMeta:!1})})).catch((e=>{e.status>=500&&e.status<600?this.setState({errorMonitorMeta:"Unable to load monitors"}):pm.toasts.error("Something went wrong while fetching monitors, please try again"),pm.logger.error("Error occurred while fetching monitors",e),this.setState({loadingMonitorMeta:!1})}))}toggle(e){this.setState((t=>({[e]:!t[e]})))}render(){const{name:e,configuredOn:t,variables:n,executor:s,integrationId:i,ruleId:c,serviceId:h,errorMonitorMeta:b,loadingMonitorMeta:f,region:v}=this.state,{integrationFormActions:S,source:I}=this.props;let y={name:e,executor:s,variables:{region:n.region,...n.api_key?{api_key:n.api_key}:{}}};return o.createElement("div",null,o.createElement(r.NicknameFieldSegment,{id:"new-relic-nickname",value:e,error:m.isEmpty(e)?"Please enter a nickname":"",onBlur:()=>{this.setState({name:e.trim()})},onChange:e=>{this.setState({name:e})}}),o.createElement(r.SelectSegmentV2,{disabled:!0,title:"Choose Monitor",description:"The results of the selected monitor will be sent to New Relic",value:t,options:t?[t]:[],error:b,loading:f,handleRetry:()=>this.fetchMonitorMeta(s)}),o.createElement(a.default,{direction:"column",gap:"spacing-l"},o.createElement(r.SensitiveFieldSegment,{maskedPlaceholderWhenEmpty:!0,title:"New Relic API Key",description:"Enter the API Key provided by New Relic or ",customLink:o.createElement(u.default,{extUrl:"https://go.pstmn.io/docs-newrelic-insights-key"},"generate one here"),id:"new-relic-key",value:n.api_key||"",onChange:e=>{this.setState({variables:{...n,api_key:e}})}}),o.createElement(l.default,{label:"New Relic region",helperText:"This helps us know what New Relic region to use",name:"Select New Relic site",direction:"column",value:n.region,onChange:e=>{this.setState({variables:{...n,region:e}})}},o.createElement(d.default,{label:"US (.com)",value:"us"}),o.createElement(d.default,{label:"EU (.eu)",value:"eu"}))),o.createElement(p.default,{disabled:!(t&&e&&n.region&&(0,g.isFormUpdated)(this.getInitialState(),this.state)),integrationId:i,payload:y,rule:c,service:h,integrationFormActions:S,source:I}))}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/CancelButton.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return c}});var s,o=n("../../node_modules/react/index.js"),i=n("./js/stores/StoreManager.js"),r=n("./js/stores/IntegrationsStore.js"),a=n("./js/components/base/Buttons.js"),l=n("./js/services/NavigationService.js");function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},d.apply(this,arguments)}let c=(0,n("../../node_modules/mobx-react/dist/mobx-react.module.js").observer)(s=class extends o.Component{constructor(e){super(e),this.store=(0,i.resolveStoreInstance)(r.default)}render(){const{integrationId:e,integrationFormActions:t}=this.props;return o.createElement("div",{className:"integrations-edit-actions__button--container"},o.createElement(a.Button,d({className:"integrations-edit-actions__button--cancel",disabled:this.store.isAdding,type:"secondary",size:"small",onClick:()=>{t?t(e,"cancel"):(l.default.back(),this.store.resetAddIntegrationDependencies())}},this.props)," Cancel "))}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/EditFormActions.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return a}});var s=n("../../node_modules/react/index.js"),o=(n("./node_modules/lodash/lodash.js"),n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/CancelButton.js")),i=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/SaveChangesButton.js");function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},r.apply(this,arguments)}function a(e){let{disabled:t,integrationId:n,payload:a,integrationFormActions:l,source:d,showDivider:c,...p}=e;return d||(d="team_integrations_edit_forms"),s.createElement("div",null,c&&s.createElement("hr",{className:"integration-edit-actions__separator"}),s.createElement("div",{className:"integration-edit-actions__button"},s.createElement(i.default,r({disabled:t,integrationId:n,payload:a,integrationFormActions:l,source:d},p)),s.createElement(o.default,r({integrationId:n,payload:a,integrationFormActions:l,source:d},p))))}a.defaultProps={showDivider:!0}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/InlineFormActions.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return l}});var s=n("../../node_modules/react/index.js"),o=n("../../node_modules/@postman/aether/esmLib/src/components/ButtonGroup/ButtonGroup.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),r=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),a=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/constants/EditForm.js");function l(e){const{isSaveDisabled:t,integrationId:n,payload:l,value:d}=e,[c,p]=(0,s.useState)(!1);return s.createElement(o.default,{className:"integrations-edit-actions__button--container-inline"},s.createElement(i.default,{type:"secondary",text:"Cancel",isDisabled:c,onClick:()=>{e.onSave("",a.RESET)}}),s.createElement(i.default,{type:"primary",text:"Save",isDisabled:t,isLoading:c,onClick:()=>{p(!0),r.default.updateIntegration(n,l).then((t=>{e.onSave(d)})).catch((e=>{pm.toasts.error("Something went wrong while saving the changes. Please try again.",{title:"Unable to save changes"}),pm.logger.error("Something went wrong while saving the changes.",e)})).finally((()=>{p(!1)}))}}))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/SaveChangesButton.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return f}});var s,o=n("../../node_modules/react/index.js"),i=n("./js/components/base/Buttons.js"),r=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),a=n("./js/stores/StoreManager.js"),l=n("./js/stores/IntegrationsStore.js"),d=n("./js/services/NavigationService.js"),c=n("./integrations/navigation/constants.js"),p=n("./integrations/monitoring/constants.js"),u=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),g=n("./js/components/base/LoadingIndicator.js"),m=n("./js/modules/services/AnalyticsService.js"),h=n("./node_modules/lodash/lodash.js");function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},b.apply(this,arguments)}let f=(0,u.observer)(s=class extends o.Component{constructor(e){super(e),this.store=(0,a.resolveStoreInstance)(l.default)}render(){const{disabled:e,payload:t,integrationId:n,rule:s,service:a,source:l,integrationFormActions:u,generatePayload:f,...v}=this.props,S=l||"team_integrations_edit_forms";return o.createElement("div",{className:"integrations-edit-actions__button--container"},o.createElement(i.Button,b({type:"primary",className:"integrations-edit-actions__button--save-changes",disabled:e||this.store.isAdding,size:"small",tooltip:e?"Make sure that you have entered all the mandatory fields":"",onClick:async()=>{this.store.updateIsAdding(!0);let e=h.assign({},t);if(h.isFunction(f))try{e=await f(t)}catch(e){return this.store.updateIsAdding(!1),void pm.toasts.error(p.ERROR_ADDING_NEW_RELIC_TO_TEAM)}r.default.updateIntegration(n,e).then((e=>{this.store.updateIsAdding(!1),200===e.status&&e.body.model_id?(pm.toasts.success(`You updated the ${h.get(e.body,"data.name")} integration`,{noIcon:!0,title:"Changes Saved"}),m.default.addEventV2({category:"integrations",action:s+"_edited_integration",label:S,value:1}),u&&h.isFunction(u)?u(n):(d.default.transitionTo(c.TEAM_INTEGRATIONS_IDENTIFIER,{serviceId:a,ruleId:s}),this.store.setRuleSpecificTeamIntegrations(s,null),this.store.resetAddIntegrationDependencies())):pm.toasts.error("Looks like this isn't working right now. Please try again later.",{noIcon:!0,title:"Unable to save changes"})})).catch((e=>{this.store.updateIsAdding(!1),this.store.resetAddIntegrationDependencies(),pm.toasts.error(h.get(e,"error.details.message")||h.get(e,"error.message")||"Looks like this isn't working right now. Please try again later.",{noIcon:!0,title:"Unable to save changes"}),pm.logger.error("Something went wrong while updating a new integration",e)}))}},v)," ",this.store.isAdding?o.createElement(g.default,null):"Save Changes"))}})||s},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/error-states/ErrorState.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return d}});var s=n("../../node_modules/react/index.js"),o=n("./node_modules/prop-types/index.js"),i=n.n(o),r=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/UnauthorizedError.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/PageNotFound.js"),l=n("./node_modules/lodash/lodash.js");class d extends s.Component{constructor(e){super(e)}render(){return s.createElement("div",{className:"team-integrations-error-state"},s.createElement("div",{className:"team-integrations-error-state__illustration-wrapper team-integrations-error-state__illustration-wrapper--collections"},function(e){let t=s.createElement(r.default,null);return"team_integrations_in_detail"===e.origin||l.isEqual(l.get(e,"error.name"),"instanceNotFoundError")&&(t=s.createElement(a.default,null)),t}(this.props.errorDetails)),s.createElement("div",{className:"team-integrations-error-state__title"},function(e){let t=e.title||"Something went wrong";return 404===e.status||400===e.status?t="We can't seem to find this page":"ESOCKETTIMEDOUT"===l.get(e,"error.details.code","")&&(t="Your request timed out"),"team_integrations_in_detail"===e.origin||l.isEqual(l.get(e,"error.name"),"instanceNotFoundError")&&(t="Couldn't find the run log for this Integration"),t}(this.props.errorDetails)),s.createElement("div",{className:"team-integrations-error-state__subtitle"},function(e){let t=e.subtitle||"Try refreshing the page. If you keep getting this error, contact help@postman.com.";return 404!==e.status&&400!==e.status||(t="Looks like the page you're looking for doesn't exist."),"team_integrations_in_detail"===e.origin||l.isEqual(l.get(e,"error.name"),"instanceNotFoundError")&&(t="This integration may have been deleted or the URL maybe incorrect."),t}(this.props.errorDetails)))}}d.propTypes={errorDetails:i().object,origin:i().string}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/integrationRunsListing/utils/utils.js":function(e,t,n){function s(e,t,n){if("string"==typeof e&&e.length<t){let s="",o=t-e.length;for(;s.length<o;)s+=n;return s+e}return e}n.r(t),t.default={format:function(e,t,n={}){const o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],i=new Date(e),r=n.padDate?s(i.getDate().toString(),2,"0"):i.getDate(),a=i.getMonth(),l=i.getFullYear(),d=i.getHours()%12||12,c=s(i.getMinutes().toString(),2,"0"),p=i.getHours()<12?"AM":"PM",u=t?`${d}:${c} ${p}, ${r} ${o[a]} ${l}`:`${r} ${o[a]}, ${l}`;return"NaN"===r.toString()?"string"==typeof e&&e.indexOf(" ")>-1?this.format(e.replace(" ","T"),t):"":u}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/constants/EditForm.js":function(e,t,n){n.r(t),n.d(t,{RESET:function(){return s}});const s="reset"},"./integrations/constants/v10IntegrationConstants.ts":function(e,t,n){n.r(t),n.d(t,{DEPLOYMENTS:function(){return o},PERFORMANCE:function(){return i},TESTS:function(){return s}});const s="tests",o="deployments",i="performance"},"./onboarding/src/features/Homepage/pages/IntegrationsPage/FormUpdateChecker.ts":function(e,t,n){n.r(t),n.d(t,{isFormUpdated:function(){return i}});var s=n("./node_modules/lodash/lodash.js"),o=n.n(s);function i(e,t){const n=o().pick(t,o().keys(e));return!o().isEqual(e,n)}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/services/ServiceActionsService.ts":function(e,t,n){n.r(t);var s=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/HTTPGatewayService.ts"),o=n("./node_modules/lodash/lodash.js"),i=n.n(o),r=function(e,t,n,s){return new(n||(n=Promise))((function(o,i){function r(e){try{l(s.next(e))}catch(e){i(e)}}function a(e){try{l(s.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((s=s.apply(e,t||[])).next())}))};t.default={runServiceAction(e,t,n,o,i,a){return r(this,void 0,void 0,(function*(){const r=`/services/${e}/actions/${t}/run`;return yield s.HTTPGatewayService.request({data:{service:"integrations",method:"post",path:r,body:{integration:{instanceId:a||void 0,classId:o,classInputId:i},inputs:n}}})}))},getValidationError(e,t,n){return r(this,void 0,void 0,(function*(){if(i().isEmpty(e.validator)||this.state.inputErrors[e.key])return Promise.resolve();const s=e.validator,o=i().map(n,(n=>n.key===e.key?Object.assign(Object.assign({},n),{value:t}):n)),r=yield this.runServiceAction(s.service,s.serviceActionId,o,e.integrationClass,e.id,null),a=i().get(r,"body",!0);if("boolean"==typeof a&&a||i().isObject(a)&&(i().isEmpty(a)||i().isEqual(i().keys(a),["error"]))||i().isString(a)&&(i().isEmpty(a)||"true"===a.toLowerCase()))return Promise.resolve();let l="This field isn't valid";return i().isString(a)?l="false"===a.toLowerCase()?l:a:i().isObject(a)&&(l=a.message||a.msg||l),Promise.resolve(l)}))}}}}]);