/*! For license information please see ObservabilityIntegrationWorkbench.js.LICENSE.txt */
"use strict";(self.webpackChunk_postman_app_renderer=self.webpackChunk_postman_app_renderer||[]).push([[48],{"../../node_modules/@postman/aether/esmLib/src/components/Dropdown/MultiSelect/CustomMultiSelectComponents.js":function(e,t,i){i.r(t),i.d(t,{DefaultMultiSelectMenuList:function(){return y},MultiSelectChip:function(){return m},MultiSelectChipCloseIcon:function(){return p},MultiSelectChipLabel:function(){return f},MultiSelectOption:function(){return h}});var n=i("../../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),s=i("../../node_modules/react/index.js"),a=i("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),r=i("../../node_modules/@postman/aether/node_modules/react-select/dist/index-c7a4d7ce.esm.js"),o=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-close-stroke-small.js"),l=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),c=["isDisabled","isFocused","children"],d=a.default.div.withConfig({displayName:"CustomMultiSelectComponents__StyledMultiSelectOption",componentId:"sc-1e7h8n3-0"})(["display:flex;align-items:center;cursor:pointer;font-size:",";line-height:",";padding:",";border-radius:",";color:",";"," ",""],(function(e){return e.theme["text-size-m"]}),(function(e){return e.theme["line-height-m"]}),(function(e){return"".concat(e.theme["spacing-xs"]," ").concat(e.theme["spacing-m"],";")}),(function(e){return e.theme["border-radius-default"]}),(function(e){return e.theme["content-color-primary"]}),(function(e){return e.isFocused&&!e.isDisabled&&"background-color: ".concat(e.theme["highlight-background-color-primary"],";")}),(function(e){return e.isDisabled&&"\n      cursor: not-allowed;\n      color: ".concat(e.theme["content-color-tertiary"],";\n    ")}));function h(e){var t=e.isDisabled,i=e.isFocused,a=e.children,o=(0,n.default)(e,c);return s.createElement(r.c.Option,o,s.createElement(d,{isDisabled:t,isFocused:i},a))}var u=a.default.div.withConfig({displayName:"CustomMultiSelectComponents__StyledMultiSelectChipCloseIcon",componentId:"sc-1e7h8n3-1"})(["display:inline-flex;justify-content:center;align-items:center;cursor:pointer;height:",";width:",";margin-left:",";border-top-right-radius:",";border-bottom-right-radius:",";background-color:",";svg path{fill:",";}&:hover{background-color:",";svg path{fill:",";}}"],(function(e){return e.theme["size-s"]}),(function(e){return e.theme["size-s"]}),(function(e){return e.theme["spacing-xs"]}),(function(e){return e.theme["border-radius-default"]}),(function(e){return e.theme["border-radius-default"]}),(function(e){return e.theme["highlight-background-color-tertiary"]}),(function(e){return e.theme["content-color-secondary"]}),(function(e){return e.theme["highlight-background-color-tertiary"]}),(function(e){return e.theme["content-color-primary"]}));function p(e){return s.createElement(r.c.MultiValueRemove,e,s.createElement(u,{className:"aether-multiselect-dropdown__multi-value-chip--remove-icon"},s.createElement(o.default,null)))}var g=a.default.div.withConfig({displayName:"CustomMultiSelectComponents__StyledMultiSelectChip",componentId:"sc-1e7h8n3-2"})(["box-sizing:border-box;display:inline-flex;justify-content:center;align-items:center;height:",";padding:",";margin-bottom:",";margin-right:",";color:",";background-color:",";border-radius:",";"],(function(e){return e.theme["size-s"]}),(function(e){return"2px ".concat(e.theme["spacing-zero"]," 2px ").concat(e.theme["spacing-s"])}),(function(e){return e.theme["spacing-xs"]}),(function(e){return e.theme["spacing-xs"]}),(function(e){return e.theme["content-color-primary"]}),(function(e){return e.theme["highlight-background-color-tertiary"]}),(function(e){return e.theme["border-radius-default"]}));function m(e){var t=e.children;return s.createElement(g,{className:"aether-multiselect-dropdown__multi-select-chip"},t)}function f(e){var t=e.children;return s.createElement(l.default,{type:"body-medium"},t)}var b=(0,a.default)(r.c.MenuList).withConfig({displayName:"CustomMultiSelectComponents__StyledMenuList",componentId:"sc-1e7h8n3-3"})(["padding:8px;& .aether-multiselect-dropdown__group:not(:last-child){margin-bottom:12px;}& .aether-multiselect-dropdown__group:first-child{padding-top:4px;}"]);function y(e){var t=e.children;return s.createElement(b,e,t)}},"../../node_modules/@postman/aether/esmLib/src/components/Dropdown/MultiSelect/CustomMultiSelectStyles.js":function(e,t,i){i.r(t),i.d(t,{customBaseStyles:function(){return o},postmanSpecificStyles:function(){return r}});var n=i("../../node_modules/@babel/runtime/helpers/esm/defineProperty.js");function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function a(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach((function(t){(0,n.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var r=(0,i("../../node_modules/styled-components/dist/styled-components.browser.esm.js").css)(["& .aether-multiselect-dropdown__single-value{color:",";left:",";right:",";}& .aether-multiselect-dropdown__control{box-sizing:border-box;height:auto;min-height:32px;max-height:72px;overflow-x:hidden;overflow-y:auto;border:",";transition:border-color 0.2s ease-in-out,box-shadow 0.2s ease-in-out;background-color:",";& .aether-multiselect-dropdown__multi-value-chip--remove-icon{display:none;}& .aether-multiselect-dropdown__multi-select-chip{padding-right:",";}& .aether-multiselect-dropdown__value-container,& .aether-multiselect-dropdown__single-value{color:",";}&:hover{border-color:",";}&--is-focused{outline:none;border:",";box-shadow:",";&:hover{border:",";}& .aether-multiselect-dropdown__single-value{right:",";}& .aether-multiselect-dropdown__multi-select-chip{padding-right:",";}& .aether-multiselect-dropdown__multi-value-chip--remove-icon{display:inline-flex;}}&--is-disabled{user-select:none;cursor:not-allowed;background:",";border:",";color:",";& .aether-multiselect-dropdown__dropdown-indicator svg path{fill:",";}& .aether-multiselect-dropdown__multi-select-chip{color:",";}&:hover{border-color:",";}}","}& .aether-multiselect-dropdown__input{color:"," !important;caret-color:",";height:16px;}& .aether-multiselect-dropdown__placeholder{color:",";}& .aether-multiselect-dropdown__dropdown-indicator{svg path{fill:",";}padding:",";}& .aether-multiselect-dropdown__clear-indicator{padding:",";}"],(function(e){return e.theme["content-color-primary"]}),(function(e){return e.theme["spacing-m"]}),(function(e){return e.theme["spacing-xl"]}),(function(e){return"".concat(e.theme["border-width-default"]," ").concat(e.theme["border-style-solid"]," ").concat(e.theme["input-border-color-default"],";")}),(function(e){return e.theme["background-color-primary"]}),(function(e){return e.theme["spacing-s"]}),(function(e){return e.theme["content-color-primary"]}),(function(e){return e.theme["input-border-color-default"]}),(function(e){return"".concat(e.theme["border-width-default"]," ").concat(e.theme["border-style-solid"]," ").concat(e.theme["input-border-color-focus"],";")}),(function(e){return"0 0 0 2px ".concat(e.theme["input-shadow-focus"],";")}),(function(e){return"".concat(e.theme["border-width-default"]," ").concat(e.theme["border-style-solid"]," ").concat(e.theme["input-border-color-focus"],";")}),(function(e){return e.theme["spacing-xxxl"]}),(function(e){return e.theme["spacing-zero"]}),(function(e){return e.theme["input-background-color-disabled"]}),(function(e){return"".concat(e.theme["border-width-default"]," ").concat(e.theme["border-style-solid"]," ").concat(e.theme["border-color-strong"],";")}),(function(e){return e.theme["content-color-tertiary"]}),(function(e){return e.theme["content-color-tertiary"]}),(function(e){return e.theme["content-color-tertiary"]}),(function(e){return e.theme["border-color-strong"]}),(function(e){var t=e.validationState;return t.status?"\n          border-color: ".concat(e.theme["input-border-color-".concat(t.status)],";\n\n          &:hover {\n            border-color: ").concat(e.theme["input-border-color-".concat(t.status)],";\n          }\n\n          &--is-focused,\n          &--is-focused:hover {\n            border-color: ").concat(e.theme["input-border-color-focus"],";;\n          }\n        "):""}),(function(e){return e.theme["content-color-primary"]}),(function(e){return e.theme["content-color-primary"]}),(function(e){return e.theme["content-color-tertiary"]}),(function(e){return e.theme["content-color-secondary"]}),(function(e){return"".concat(e.theme["spacing-zero"]," ").concat(e.theme["spacing-s"],";")}),(function(e){return e.theme["spacing-zero"]})),o={container:function(e){return a(a({},e),{},{pointerEvents:"auto"})},multiValueRemove:function(){return{padding:0,":hover":{backgroundColor:"transparent"}}}}},"../../node_modules/@postman/aether/esmLib/src/components/Dropdown/MultiSelect/DefaultMultiSelect.js":function(e,t,i){i.r(t),i.d(t,{StyledCreatableReactSelect:function(){return b},StyledReactSelect:function(){return f},default:function(){return y}});var n=i("../../node_modules/@babel/runtime/helpers/esm/extends.js"),s=i("../../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),a=i("../../node_modules/react/index.js"),r=i("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),o=i("../../node_modules/@postman/aether/node_modules/react-select/dist/react-select.esm.js"),l=i("../../node_modules/@postman/aether/node_modules/react-select/creatable/dist/react-select.esm.js"),c=i("../../node_modules/prop-types/index.js"),d=i.n(c),h=i("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/Common/CustomComponents.js"),u=i("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/MultiSelect/CustomMultiSelectComponents.js"),p=i("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/MultiSelect/CustomMultiSelectStyles.js");function g(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function m(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?g(Object(i),!0).forEach((function(t){(0,s.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):g(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var f=(0,r.default)(o.default).withConfig({displayName:"DefaultMultiSelect__StyledReactSelect",componentId:"sc-14ka43a-0"})(["",""],p.postmanSpecificStyles),b=(0,r.default)(l.default).withConfig({displayName:"DefaultMultiSelect__StyledCreatableReactSelect",componentId:"sc-14ka43a-1"})(["",""],p.postmanSpecificStyles);function y(e){var t=e["aria-label"],i=e["aria-labelledby"],s=e.id,r=e.isOpen,o=e.onChange,l=e.onCreateNewOption,c=e.onClose,d=e.onOpen,p=e.options,g=e.value,y=e.placeholder,_=e.emptyStateMessage,v=e.isDisabled,S=e.isLoading,I=e.isOptionDisabled,E=e.viaPortal,x=e.closeMenuOnSelect,w=e.validationState,A=e.allowCreateNewOption,P=e.customOptionComponent,T=e.menuMaxHeight,C=e.triggerWidth,D=e.containerWidth,j=e.className;function k(e,t){var i=t.action,n=t.option;"create-option"===i&&l&&l(n),o(e,{action:i,option:n})}return a.createElement(a.Fragment,null,A?a.createElement(b,(0,n.default)({isMulti:!0,inputId:s,menuIsOpen:r},E&&{menuPortalTarget:document.getElementById("aether-dropdown-portal")},{onChange:k,onMenuClose:c,onMenuOpen:d},g&&{value:g},{options:p,placeholder:y,isDisabled:v,closeMenuOnSelect:x,"aria-label":t,"aria-labelledby":i},I&&{isOptionDisabled:I},{emptyStateMessage:_,formatOptionLabel:!S&&P,validationState:w,classNamePrefix:"aether-multiselect-dropdown",className:j,maxMenuHeight:T,styles:{container:function(e){return m(m({},e),{},{pointerEvents:"auto"})},control:function(e){return m(m({},e),{},{width:C})},input:function(e){return m(m({},e),{},{margin:0,padding:0,height:"20px",lineHeight:"normal"})},multiValueRemove:function(){return{padding:0,":hover":{backgroundColor:"transparent"}}},group:function(e){return m(m({},e),{},{padding:0,margin:0})},groupHeading:function(e){return m(m({},e),{},{userSelect:"none",fontSize:"11px",fontWeight:600,lineHeight:"16px",marginBottom:"4px",padding:"0px 12px",textTransform:"none"})},menu:function(e){return m(m({},e),{},{width:D,paddingLeft:"0",paddingRight:"0",border:"none",zIndex:1e3})},menuList:function(e){return m(m({},e),{},{paddingTop:"8px",paddingBottom:"8px"})},menuPortal:function(e){return m(m({},e),{},{zIndex:1e3})},noOptionsMessage:function(e){return m(m({},e),{},{padding:"0"})},option:function(e){return m(m({},e),{},{padding:"0",":active":{backgroundColor:"transparent"}})},placeholder:function(e){return m(m({},e),{},{position:"absolute",top:"50%",transform:"translateY(-50%)",fontSize:"12px",lineHeight:"20px",left:"6px",right:"16px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"})},valueContainer:function(e){return m(m({},e),{},{display:"flex",position:"static",height:"100%",paddingInline:"4px",padding:"4px 4px 0px 4px",fontSize:"12px"})}},components:{DropdownIndicator:null,ClearIndicator:null,NoOptionsMessage:h.EmptyState,Option:u.MultiSelectOption,Menu:h.Menu,MenuList:S?h.StaticLoader:u.DefaultMultiSelectMenuList,MultiValueContainer:u.MultiSelectChip,MultiValueLabel:u.MultiSelectChipLabel,MultiValueRemove:u.MultiSelectChipCloseIcon,IndicatorSeparator:null,GroupHeading:h.GroupHeading}})):a.createElement(f,(0,n.default)({isMulti:!0,inputId:s,menuIsOpen:r},E&&{menuPortalTarget:document.getElementById("aether-dropdown-portal")},{onChange:k,onMenuClose:c,onMenuOpen:d},g&&{value:g},{options:p,placeholder:y,isDisabled:v,closeMenuOnSelect:x,"aria-label":t,"aria-labelledby":i},I&&{isOptionDisabled:I},{emptyStateMessage:_,formatOptionLabel:!S&&P,validationState:w,classNamePrefix:"aether-multiselect-dropdown",className:j,maxMenuHeight:T,styles:{container:function(e){return m(m({},e),{},{pointerEvents:"auto"})},control:function(e){return m(m({},e),{},{width:C})},input:function(e){return m(m({},e),{},{margin:0,padding:0,height:"20px",lineHeight:"normal"})},multiValueRemove:function(){return{padding:0,":hover":{backgroundColor:"transparent"}}},group:function(e){return m(m({},e),{},{padding:0,margin:0})},groupHeading:function(e){return m(m({},e),{},{userSelect:"none",fontSize:"11px",fontWeight:600,lineHeight:"16px",marginBottom:"4px",padding:"0px 12px",textTransform:"none"})},menu:function(e){return m(m({},e),{},{width:D,paddingLeft:"0",paddingRight:"0",border:"none",zIndex:1e3})},menuList:function(e){return m(m({},e),{},{paddingTop:"8px",paddingBottom:"8px"})},menuPortal:function(e){return m(m({},e),{},{zIndex:1e3})},noOptionsMessage:function(e){return m(m({},e),{},{padding:"0"})},option:function(e){return m(m({},e),{},{padding:"0",":active":{backgroundColor:"transparent"}})},placeholder:function(e){return m(m({},e),{},{position:"absolute",top:"50%",transform:"translateY(-50%)",fontSize:"12px",lineHeight:"20px",left:"6px",right:"16px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"})},valueContainer:function(e){return m(m({},e),{},{display:"flex",position:"static",height:"100%",paddingInline:"4px",padding:"4px 4px 0px 4px",fontSize:"12px"})}},components:{DropdownIndicator:null,ClearIndicator:null,NoOptionsMessage:h.EmptyState,Option:u.MultiSelectOption,Menu:h.Menu,MenuList:S?h.StaticLoader:u.DefaultMultiSelectMenuList,MultiValueContainer:u.MultiSelectChip,MultiValueLabel:u.MultiSelectChipLabel,MultiValueRemove:u.MultiSelectChipCloseIcon,IndicatorSeparator:null,GroupHeading:h.GroupHeading}})))}y.defaultProps={isOpen:void 0,onClose:null,onCreateNewOption:null,onOpen:null,value:null,"aria-label":void 0,"aria-labelledby":void 0,placeholder:"Select option",emptyStateMessage:"No options found",menuMaxHeight:"auto",triggerWidth:"auto",containerWidth:"auto",className:"",isDisabled:!1,isLoading:!1,viaPortal:!1,isOptionDisabled:function(){},closeMenuOnSelect:!1,allowCreateNewOption:!1,customOptionComponent:null,validationState:{status:"",message:""}},y.propTypes={onChange:d().func.isRequired,options:d().arrayOf(d().shape({label:d().string,value:d().oneOfType([d().string,d().number])})).isRequired,id:d().string.isRequired,"aria-label":d().string,"aria-labelledby":d().string,value:d().array,isOpen:d().bool,onClose:d().func,onCreateNewOption:function(e){var t=e.allowCreateNewOption,i=e.onCreateNewOption;return!t&&i?new Error("MultiSelect: onCreateNewOption is only allowed to be used when the prop allowCreateNewOption is passed as true."):i&&"function"!=typeof i?new Error("MultiSelect: Expected the type of the onCreateNewOption to be a function."):null},onOpen:d().func,placeholder:d().string,emptyStateMessage:d().string,menuMaxHeight:d().oneOfType([d().number,d().string]),triggerWidth:d().oneOfType([d().number,d().string]),containerWidth:d().oneOfType([d().string,d().number]),className:d().string,isDisabled:d().bool,isLoading:d().bool,viaPortal:d().bool,isOptionDisabled:d().func,closeMenuOnSelect:d().bool,allowCreateNewOption:d().bool,customOptionComponent:d().func,validationState:d().shape({status:d().oneOf(["","success","error","warning"]),message:d().string})}},"../../node_modules/@postman/aether/esmLib/src/components/Dropdown/MultiSelect/MultiSelect.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return g}});var n=i("../../node_modules/@babel/runtime/helpers/esm/extends.js"),s=i("../../node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),a=i("../../node_modules/react/index.js"),r=i("../../node_modules/prop-types/index.js"),o=i.n(r),l=i("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),c=i("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/Common/DropdownContainer.js"),d=i("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/Common/DropdownLabel.js"),h=i("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/Common/DropdownValidationMessage.js"),u=i("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/MultiSelect/DefaultMultiSelect.js"),p=i("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/FilterSelect/FilterSelectContainer.js");function g(e){var t=(0,a.useRef)(null),i=(0,a.useState)(""),r=(0,s.default)(i,2),o=r[0],l=r[1],g=e.type,m=e.label,f=e.helperText,b=e.id,y=e.validationState,_=e["data-testid"],v=e["data-click"];return(0,a.useEffect)((function(){t.current&&(t.current.offsetWidth?l(t.current.offsetWidth):l("auto"))}),[]),"compact"===g?a.createElement(p.default,e):a.createElement(c.default,{ref:t,"data-aether-id":"aether-multiSelect","data-testid":_,"data-click":v},a.createElement(d.default,{id:b,label:m,helperText:f}),a.createElement(u.default,(0,n.default)({containerWidth:o},e)),a.createElement(h.default,{validationState:y}))}g.defaultProps={type:"default",id:"",label:"",helperText:"",validationState:{status:"",message:""},"data-testid":"aether-multi-select","data-click":""},g.propTypes={type:o().oneOf(["default","compact"]),id:o().string,label:function(e){var t=e.label;return t&&t.type!==l.default&&"string"!=typeof t?new Error("MultiSelect: label prop only accepts string or the Aether's Label component as valid value."):null},helperText:o().string,validationState:o().shape({status:o().oneOf(["","success","error","warning"]),message:o().string}),"data-testid":o().string,"data-click":o().string}},"../../node_modules/@postman/aether/esmLib/src/components/FileUploader/FileUploader.js":function(e,t,i){i.r(t);var n=i("../../node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),s=i("../../node_modules/react/index.js"),a=i("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),r=i("../../node_modules/prop-types/index.js"),o=i.n(r),l=i("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),c=i("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),d=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),h=i("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),u=a.default.input.attrs({type:"file"}).withConfig({displayName:"FileUploader__StyledInputFile",componentId:"yxf6ba-0"})(["height:0.1px;opacity:0;width:0.1px;z-index:-1;&:focus + label{box-shadow:",";outline:none;}"],(function(e){return e.theme["shadow-focus"]})),p=a.default.label.withConfig({displayName:"FileUploader__StyledFileUploaderLabel",componentId:"yxf6ba-1"})(["user-select:none;color:",";font-size:",";width:max-content;height:",";vertical-align:middle;line-height:",";display:inline-block;padding:",";border:",";border-color:",";box-sizing:border-box;border-radius:",";margin-top:",";&:hover{cursor:",";border-color:",";}"],(function(e){return e.isDisabled?e.theme["content-color-tertiary"]:e.theme["content-color-primary"]}),(function(e){return e.theme["text-size-m"]}),(function(e){return e.theme["size-m"]}),(function(e){return"calc(".concat(e.theme["line-height-xxl"]," - 2px)")}),(function(e){return"".concat(e.theme["spacing-zero"]," ").concat(e.theme["spacing-m"])}),(function(e){return e.theme["button-outline-border"]}),(function(e){return e.theme["button-outline-border-color"]}),(function(e){return e.theme["border-radius-default"]}),(function(e){return e.theme["spacing-s"]}),(function(e){return e.isDisabled?"not-allowed":"pointer"}),(function(e){return!e.isDisabled&&e.theme["button-outline-hover-border-color"]})),g=a.default.div.withConfig({displayName:"FileUploader__StyleFileListWrapper",componentId:"yxf6ba-2"})(["width:320px;height:32px;border-radius:",";padding-left:",";display:flex;justify-content:space-between;align-items:'center';background-color:",";& .aether-remove-uploaded-file-btn{border-top-left-radius:0;border-bottom-left-radius:0;}color:",";"],(function(e){return e.theme["border-radius-default"]}),(function(e){return e.theme["spacing-m"]}),(function(e){return e.theme["background-color-secondary"]}),(function(e){return e.theme["content-color-primary"]})),m=a.default.div.withConfig({displayName:"FileUploader__StyledFileNameContainer",componentId:"yxf6ba-3"})(["display:flex;align-items:center;width:258px;"]);var f=s.forwardRef((function(e,t){var i=e.initialList,a=e.label,r=e.helperText,o=e.actionLabel,f=e.id,b=e.name,y=e.className,_=e.isDisabled,v=e.multiple,S=e.onChange,I=e.accept,E=e.autoFocus,x=e["data-testid"],w=e["data-click"],A=(0,s.useState)(!v&&Array.isArray(i)?i:[]),P=(0,n.default)(A,2),T=P[0],C=P[1],D=(0,s.useRef)(null);D=t||D;var j=(0,s.useRef)(null);return s.createElement(l.default,{direction:"column"},function(e){return"string"==typeof e?s.createElement(c.default,{size:"medium"},e):e&&s.isValidElement(e)&&e.type===c.default?s.cloneElement(e,{size:"medium"}):null}(a),r&&s.createElement(d.default,{type:"_input-meta-text",color:"content-color-secondary",lineLengthType:"none"},r),s.createElement(u,{id:f,ref:D,onChange:function(e){var t=e.target,i=t&&t.files;0!==i.length?(C(Object.values(i).map((function(e){return{name:e.name}}))),j.current=i,S&&!_&&S(i)):D.current.files=j.current},multiple:v,disabled:_,accept:I,name:b,className:y,"data-testid":x,"data-click":w,autoFocus:E}),s.createElement(p,{"data-aether-id":"aether-label",htmlFor:f,isDisabled:_},o),T.length>0&&s.createElement(l.default,{direction:"column",padding:{paddingTop:"spacing-l"},gap:"spacing-xs"},T.map((function(e){return s.createElement(g,{className:"aether-file-list-wrapper","data-aether-id":"aether-fileUploader",key:e.name},s.createElement(m,null,s.createElement(d.default,{type:"body-medium",isTruncated:!0},e.name)),s.createElement(h.default,{className:"aether-remove-uploaded-file-btn",onClick:function(){!function(e){for(var t=D.current&&D.current.files,i=new DataTransfer,n=0;n<t.length;n+=1){var s=t[n];e!==s.name&&i.items.add(s)}C(T.filter((function(t){return e!==t.name}))),D.current.files=i.files,S&&!_&&S(D.current.files)}(e.name)},type:"tertiary",icon:"icon-action-close-stroke"}))}))))}));f.defaultProps={initialList:void 0,helperText:"",actionLabel:"Add Files",isDisabled:!1,multiple:!1,accept:"*",name:"",className:"",autoFocus:!1,"data-testid":"aether-file-uploader","data-click":""},f.propTypes={initialList:o().arrayOf(o().object),label:o().oneOfType([o().string,o().instanceOf(c.default)]).isRequired,onChange:o().func.isRequired,helperText:o().string,actionLabel:o().node,id:o().string.isRequired,name:o().string,className:o().string,isDisabled:o().bool,multiple:o().bool,accept:o().string,autoFocus:o().bool,"data-testid":o().string,"data-click":o().string},f.displayName="FileUploader",t.default=f},"../../node_modules/@postman/aether/esmLib/src/components/Stepper/Step.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return g}});var n=i("../../node_modules/react/index.js"),s=i("../../node_modules/prop-types/index.js"),a=i.n(s),r=i("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),o=i("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),l=i("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),c=i("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),d=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),h=r.default.span.withConfig({displayName:"Step__StyledStatusIndicator",componentId:"hb80lw-0"})(["width:12px;height:12px;box-sizing:border-box;border-radius:",";border:",";background-color:",";"],(function(e){return e.theme["border-radius-max"]}),(function(e){return"progress"!==e.status?"".concat(e.theme["border-width-default"]," ").concat(e.theme["border-style-solid"]," ").concat(e.theme["grey-40"]):""}),(function(e){return"progress"===e.status?e.theme["base-color-brand"]:e.theme["background-color-primary"]})),u=r.default.div.withConfig({displayName:"Step__StyledStepWrapper",componentId:"hb80lw-1"})(["display:inline;padding-left:",";& > .aether-step__label{& > .aether-button__text{color:",";&:hover{color:",";}}}"],(function(e){return e.theme["spacing-xs"]}),(function(e){return e.isDisabled?e.theme["content-color-secondary"]:e.theme["content-color-primary"]}),(function(e){return e.isDisabled?e.theme["content-color-secondary"]:e.theme["content-color-link"]})),p=(0,r.default)(d.default).withConfig({displayName:"Step__StyledCustomCurrentStepText",componentId:"hb80lw-2"})(["line-height:1.334;"]);function g(e){var t=e.label,i=e.status,s=e.isDisabled,a=e._stepIndex,r=e._onChange,d=e._isActive,g=e.className;return n.createElement(l.default,{basis:"0px",grow:1,shrink:1,alignItems:"center",className:g,padding:{paddingRight:"spacing-l"}},"completed"===i?n.createElement(o.default,{name:"icon-state-success-stroke-small",color:"content-color-primary",size:"small"}):n.createElement(h,{status:i}),n.createElement(u,{isDisabled:s},d?n.createElement(p,{color:"content-color-primary"},t):n.createElement(c.default,{className:"aether-step__label",isDisabled:s,text:t,type:"plain",onClick:function(){!s&&r&&r(a)}})))}g.defaultProps={className:"",status:"pending",isDisabled:!1,_isActive:!1,_stepIndex:0,_onChange:null},g.propTypes={label:a().string.isRequired,isDisabled:a().bool,_isActive:a().bool,status:a().oneOf(["pending","progress","completed"]),_stepIndex:a().number,_onChange:a().func,className:a().string}},"../../node_modules/@postman/aether/esmLib/src/components/Stepper/StepHeader.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return d}});var n=i("../../node_modules/react/index.js"),s=i("../../node_modules/prop-types/index.js"),a=i.n(s),r=i("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),o=i("../../node_modules/@postman/aether/esmLib/src/components/Stepper/Step.js"),l=i("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),c=r.default.div.withConfig({displayName:"StepHeader__StyledProgressLine",componentId:"sc-1xnw5na-0"})(["position:relative;width:100%;height:2px;background-color:",";&:after{content:'';position:absolute;top:0;bottom:0;left:0;right:0;height:2px;width:",";max-width:100%;background-color:",";}"],(function(e){return e.theme["border-color-strong"]}),(function(e){return"".concat((e.activeStepIndex+1)/e.totalSteps*100,"%")}),(function(e){return e.theme["stepper-progress-line-background-color"]}));function d(e){var t=0,i=e._activeStepIndex,s=e._onChange,a=e.className,r=e.children,d=n.Children.map(r,(function(e){var a=e;return(0,n.isValidElement)(e)&&[o.default].includes(e.type)?(a=(0,n.cloneElement)(e,{_isActive:t===i,_stepIndex:t,_onChange:s}),t+=1,a):null}));return n.createElement(l.default,{gap:"spacing-s",className:a,direction:"column"},n.createElement(c,{activeStepIndex:i,totalSteps:d.length}),n.createElement(l.default,null,d))}d.defaultProps={className:"",_activeStepIndex:0,_onChange:null},d.propTypes={_activeStepIndex:a().number,_onChange:a().func,className:a().string,children:a().oneOfType([a().arrayOf(a().node),a().node]).isRequired}},"../../node_modules/@postman/aether/esmLib/src/components/Stepper/StepPanel.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return u}});var n=i("../../node_modules/react/index.js"),s=i("../../node_modules/prop-types/index.js"),a=i.n(s),r=i("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),o=i("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),l=i("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),c=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),d=i("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),h=r.default.div.withConfig({displayName:"StepPanel__StyledStepPanelElement",componentId:"sc-7pb8oz-0"})(["display:",";color:",";"],(function(e){return e._isActive?"block":"none"}),(function(e){return e.theme["content-color-primary"]}));function u(e){var t=e._isActive,i=e._index,s=e.heading,a=e.description,r=e.primaryAction,u=e.secondaryAction,p=e.className,g=e.children;return n.createElement(h,{_isActive:t,className:p,key:"STEP_CONTENT ".concat(i)},n.createElement(d.default,{direction:"column",gap:"spacing-xxl"},n.createElement(d.default,{direction:"column",gap:"spacing-l"},s||a?n.createElement(d.default,{direction:"column",gap:"spacing-s"},s?n.createElement(o.default,{type:"h3",text:s}):"",a?n.createElement(c.default,{type:"para"},a):""):"",g),n.createElement(d.default,{gap:"spacing-m",grow:1,shrink:1,justifyContent:"flex-end"},function(e){if(e&&e.type===l.default&&"secondary"===(e.props&&e.props.type))return e;return null}(u),function(e){if(e&&e.type===l.default&&"primary"===(e.props&&e.props.type))return e;return null}(r))))}u.defaultProps={_isActive:!1,heading:"",description:"",primaryAction:null,secondaryAction:null,className:"",_index:null},u.propTypes={_isActive:a().bool,_index:a().number,heading:a().string,description:a().string,primaryAction:function(e){var t=e.primaryAction;if(t){if(t.type!==l.default)return new Error("StepPanel: primaryAction prop only accepts Aether button component.");if("primary"!==(t.props&&t.props.type))return new Error("StepPanel: primaryAction prop only accepts button type primary.")}return null},secondaryAction:function(e){var t=e.secondaryAction;if(t){if(t.type!==l.default)return new Error("StepPanel: secondaryAction prop only accepts Aether button component.");if("secondary"!==(t.props&&t.props.type))return new Error("StepPanel: secondaryAction prop only accepts button type secondary.")}return null},className:a().string,children:a().oneOfType([a().arrayOf(a().node),a().node]).isRequired}},"../../node_modules/@postman/aether/esmLib/src/components/Stepper/StepPanels.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return c}});var n=i("../../node_modules/react/index.js"),s=i("../../node_modules/prop-types/index.js"),a=i.n(s),r=i("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),o=i("../../node_modules/@postman/aether/esmLib/src/components/Stepper/StepPanel.js"),l=r.default.div.withConfig({displayName:"StepPanels__StyledStepPanelContainer",componentId:"sc-1bky6oo-0"})(["padding-top:",";padding-bottom:",";"],(function(e){return e.theme["spacing-xl"]}),(function(e){return e.theme["spacing-xl"]}));function c(e){var t=0,i=e._activeStepIndex,s=e.className,a=e.children,r=n.Children.map(a,(function(e){var s=e;return(0,n.isValidElement)(e)&&[o.default].includes(e.type)?(s=(0,n.cloneElement)(e,{_isActive:t===i,_index:t}),t+=1,s):null}));return n.createElement(l,{className:s},r)}c.defaultProps={_activeStepIndex:0,className:""},c.propTypes={_activeStepIndex:a().number,className:a().string,children:a().oneOfType([a().arrayOf(a().node),a().node]).isRequired}},"../../node_modules/@postman/aether/esmLib/src/components/Stepper/Stepper.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return c}});var n=i("../../node_modules/react/index.js"),s=i("../../node_modules/prop-types/index.js"),a=i.n(s),r=i("../../node_modules/@postman/aether/esmLib/src/components/Stepper/StepHeader.js"),o=i("../../node_modules/@postman/aether/esmLib/src/components/Stepper/StepPanels.js"),l=i("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js");function c(e){var t=e.activeStepIndex,i=e.onChange,s=e.className,a=e.children,c=e["data-testid"],d=e["data-click"],h=n.Children.map(a,(function(e){if((0,n.isValidElement)(e)){if([r.default].includes(e.type))return(0,n.cloneElement)(e,{_activeStepIndex:t,_onChange:i});if([o.default].includes(e.type))return(0,n.cloneElement)(e,{_activeStepIndex:t})}return null}));return n.createElement(l.default,{className:s,direction:"column","data-aether-id":"aether-stepper","data-testid":c,"data-click":d,width:"100%"},h)}c.defaultProps={className:"",onChange:null,"data-testid":"aether-stepper","data-click":""},c.propTypes={activeStepIndex:a().number.isRequired,onChange:a().func,className:a().string,children:a().oneOfType([a().arrayOf(a().node),a().node]).isRequired,"data-testid":a().string,"data-click":a().string}},"./integrations/api-observability/AzureFormHelper.js":function(e,t,i){i.r(t),i.d(t,{generateApiList:function(){return a},isFormUpdated:function(){return s}});var n=i("./node_modules/lodash/lodash.js");function s(e,t){const i=a(n.get(e,"variables.linked_apis")),{linkedApis:s}=t,r=a(s);return!n.isEqual(i,r)}function a(e){return n.map(e,(e=>n.assign({},n.pick(e,["azure_subscription_id","azure_resource_group_id","azure_service_id","azure_service_path","azure_api_id","azure_api_path"]))))}},"./integrations/api-observability/components/add/ApiGateway.js":function(e,t,i){i.r(t),i.d(t,{ApiGatewayDefault:function(){return w},ApiGatewayIam:function(){return A},default:function(){return P}});var n,s,a=i("./node_modules/lodash/lodash.js"),r=i.n(a),o=i("../../node_modules/react/index.js"),l=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),c=i("./js/stores/StoreManager.js"),d=i("./js/stores/IntegrationsStore.js"),h=i("./js/stores/CurrentUserStore.js"),u=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),p=i("./js/components/base/Buttons.js"),g=i("./integrations/api-observability/services/index.js"),m=i("./js/services/NavigationService.js"),f=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/ExternalLink.js"),b=i("./integrations/api-observability/components/base/AddIntegration.js"),y=i("./integrations/api-observability/constants.ts"),_=i("./integrations/api-observability/components/dashboard/aws-gateway/InfoSegment.js"),v=i("./appsdk/workbench/TabService.js"),S=i("./integrations/navigation/constants.js"),I=i("./integrations/api-observability/services/ApiGatewayService.js"),E=i("./api-dev/constants/APISubViews.js");function x(){return x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},x.apply(this,arguments)}let w=(0,l.observer)(n=class extends o.Component{constructor(e){super(e),this.state={aws_access_key:"",aws_key_id:"",aws_region:"",auth_type:y.AWS_IAM_ROLE,aws_api_type:"http",consentProvided:!1,verifying:!1,verification:"",errorAwsKeyId:"",errorAwsAccessKey:"",errorAwsRegion:"",nickname:"",aws_api_gateway_name:"",aws_api_gateway_id:"",postman_api_id:"",selectedAPIGateway:"",apiGateways:[],custom_api_gateway:"",isCustomApiGatewayMandatory:!1,showApiGatewayInputField:!1,isAddingIntegration:!1,errorGateway:!1,loadingGateway:!1,errorNickname:"",availableApiGatewayTypes:y.AVAILABLE_API_GATEWAY_TYPES,selectedAPIGatewayType:y.AVAILABLE_API_GATEWAY_TYPES[0],availableAuthTypes:y.AVAILABLE_AUTH_TYPES,selectedAuthType:y.AVAILABLE_AUTH_TYPES[0],currentAuthType:y.AWS_IAM_ROLE,integration_name:""},this.store=(0,c.resolveStoreInstance)(d.default),this.onTargetSelect=this.onTargetSelect.bind(this),this.handleAwsAccessKeyInput=this.handleAwsAccessKeyInput.bind(this),this.handleAwsKeyIdInput=this.handleAwsKeyIdInput.bind(this),this.handleAwsRegionInput=this.handleAwsRegionInput.bind(this),this.fetchApiGateways=this.fetchApiGateways.bind(this),this.handleAwsAPITypeSelection=this.handleAwsAPITypeSelection.bind(this),this.handleAuthTypeChange=this.handleAuthTypeChange.bind(this),this.handleNameChange=this.handleNameChange.bind(this),this.updateIsAddingIntegration=this.updateIsAddingIntegration.bind(this),this.fetchApiGatewaysDebounced=r().debounce(this.fetchApiGateways,1e3)}onTargetSelect(e){r().isEmpty(e)?this.setState({selectedAPIGateway:{id:"none",name:"No API Gateways selected"},aws_api_gateway_name:"",aws_api_gateway_id:"",showApiGatewayInputField:!1,showCustomLabel:!0}):this.setState({selectedAPIGateway:e,aws_api_gateway_name:e.label,aws_api_gateway_id:e.value})}handleAwsAPITypeSelection(e){let{aws_access_key:t,aws_region:i,aws_key_id:n}=this.state;this.setState({aws_api_type:e.value,selectedAPIGatewayType:e},(()=>{t&&i&&n&&this.fetchApiGateways()}))}handleAwsKeyIdInput(e){this.setState({aws_key_id:e,errorAwsKeyId:r().isEmpty(e.trim())?"Please enter an Access Key ID":""},(()=>{e&&this.state.aws_access_key&&this.state.aws_region&&this.fetchApiGatewaysDebounced()}))}handleAwsAccessKeyInput(e){this.setState({aws_access_key:e,errorAwsAccessKey:r().isEmpty(e.trim())?"Please enter a Secret Access Key":""},(()=>{e&&this.state.aws_key_id&&this.state.aws_region&&this.fetchApiGatewaysDebounced()}))}handleAwsRegionInput(e){this.setState({aws_region:e,errorAwsRegion:r().isEmpty(e.trim())?"Please enter the AWS region":""},(()=>{e&&this.state.aws_key_id&&this.state.aws_key_id&&this.fetchApiGatewaysDebounced()}))}handleAuthTypeChange(e){this.setState({currentAuthType:e.value,selectedAuthType:e,auth_type:e.value})}handleNameChange(e){this.setState({integration_name:e,errorNickname:r().isEmpty(e.trim())?"Please enter the Integration name":e.trim().length>255?"Name field can't have more than 255 characters":""})}fetchApiGateways(){let{aws_key_id:e,aws_access_key:t,aws_region:i,auth_type:n,aws_api_type:s}=this.state,{rule:a}=this.props;r().isEmpty(i)||r().isEmpty(t)||r().isEmpty(e)||(this.setState({verifying:!0,errorApiGateways:!1}),g.default[a].fetchApiGateways({aws_key_id:e,aws_access_key:t,aws_region:i,auth_type:n,aws_api_type:s,rule:a,type:"fetchAWSGatewayAPIs"}).then((e=>{let t=r().map(e,(e=>({label:e.Name||e.name,value:e.ApiId||e.id,...e})));this.setState({verifying:!1,availableApiGateways:t})})).catch((e=>{this.setState({verifying:!1,errorApiGateways:!0}),"invalidAWSRegion"===r().get(e,"error.name")?pm.toasts.error(r().get(e,"error.message")||"Please enter a valid AWS region.",{title:r().get(e,"error.title")||"Invalid AWS Region"}):(pm.toasts.error(r().get(e,"error.message","Something went wrong while fetching API Gateways"),{title:r().get(e,"error.title","Unable to fetch API Gateways")}),pm.logger.error("Something went wrong while fetching API Gateways",e))})))}updateIsAddingIntegration(e){this.setState({isAddingIntegration:e})}render(){let{rule:e,apiId:t,apiVersionId:i}=this.props,{aws_key_id:n,aws_access_key:s,aws_region:a,verifying:l,errorAwsKeyId:c,auth_type:d,aws_api_type:h,errorAwsAccessKey:g,errorAwsRegion:_,nickname:I,selectedAPIGateway:w,aws_api_gateway_id:P,aws_api_gateway_name:T,isCustomApiGatewayMandatory:C,errorGateway:D,availableApiGateways:j,availableApiGatewayTypes:k,selectedAPIGatewayType:O,currentAuthType:M,selectedAuthType:R,availableAuthTypes:L,integration_name:N,errorNickname:z,errorApiGateways:F,isAddingIntegration:V}=this.state,B={rule:e,name:N,entity:"apiversion",executor:i,api_id:t,variables:{auth_type:d,aws_api_type:h,postman_api_id:t,aws_key_id:n,aws_access_key:s,aws_region:a,aws_api_gateway_id:P}},W=null;if(r().get(this.props,"additionalContext.releaseId")){const e=r().get(this.props,"additionalContext.releaseId");W={identifier:"build.release",routeParams:{apiId:B.api_id,versionId:B.executor,releaseId:e},queryParams:{tab:E.DEPLOYMENT}}}return o.createElement("div",null,o.createElement(u.SelectSegmentV2,{title:"AWS Authentication Method",placeholder:"Select AWS Authentication Type",options:L,value:R,onTargetSelect:this.handleAuthTypeChange}),o.createElement(u.FieldSegment,{mandatory:!0,id:"integration-name",placeholder:"Give a nickname to your integration.",title:"Nickname",value:N,error:z,onBlur:()=>{this.handleNameChange(N.trim())},onChange:e=>{this.handleNameChange(e)}}),M===y.AWS_IAM_ROLE?o.createElement(A,x({authType:d,integration_name:N},this.props)):o.createElement("div",null,o.createElement(u.SelectSegmentV2,{title:"AWS API Type",placeholder:"Select AWS API Type",options:k,value:O,onTargetSelect:this.handleAwsAPITypeSelection}),o.createElement(u.SensitiveFieldSegment,{className:"aws-key-id",id:"aws-key-id",title:"Access Key ID",description:"You can find the credentials in your AWS console. ",customLink:o.createElement(f.default,{extUrl:"https://go.pstmn.io/docs-aws-api-gateway-keys"},"Learn more"),placeholder:"Enter the AWS access key id",value:n,error:c,onChange:this.handleAwsKeyIdInput}),o.createElement(u.SensitiveFieldSegment,{className:"aws-access-key",id:"aws-access-key",title:"Secret Access Key",placeholder:"Enter the AWS access key",value:s,error:g,onChange:this.handleAwsAccessKeyInput}),o.createElement(u.FieldSegment,{mandatory:!0,id:"aws-region",placeholder:"Enter AWS Region",title:"AWS Region",value:a,error:_,onChange:this.handleAwsRegionInput}),o.createElement("div",{className:"aws-gateway-dropdown"},o.createElement(u.SelectSegmentV2,{title:"AWS Gateway",disabled:!!C,label:"Select AWS Gateway",options:j,value:w,onTargetSelect:this.onTargetSelect,noOptionsForDropdown:"No API Gateways found",error:F?"Unable to load API Gateways":"",loading:l,handleRetry:this.fetchApiGateways})),o.createElement("div",{className:"aws-gateway__button"},o.createElement(b.default,{className:"integrations-add-actions__button--proceed",type:"primary",size:"small",disabled:!s||!n||!a||l||!j||r().isEmpty(P)||r().isEmpty(N),updateIsAddingIntegration:this.updateIsAddingIntegration,payload:B,redirect:W},"Connect"),o.createElement("div",{className:"integrations-add-actions__button--container"},o.createElement(p.Button,{className:"integrations-add-actions__button--cancel",type:"secondary",size:"small",disabled:V,onClick:()=>{r().get(this.props,"additionalContext.releaseId")?m.default.transitionTo("build.release",{apiId:B.api_id,versionId:B.executor,releaseId:r().get(this.props,"additionalContext.releaseId")},{tab:E.DEPLOYMENT}):m.default.transitionTo("build.apiVersion",{apiId:B.api_id,versionId:B.executor},{tab:E.DEPLOYMENT}),v.default.closeByRoute(S.V10_API_ADD_DEPLOYMENT_INTEGRATION_URL,{apiId:B.api_id})}},"Cancel")))))}})||n,A=(0,l.observer)(s=class extends o.Component{constructor(e){super(e),this.state={aws_account_id:y.AWS_ACCOUNT_ID,external_id:"",role_arn:"",aws_region:"",consentProvided:!1,verifying:!1,verification:"",errorAwsRegion:"",aws_api_type:"http",errorRoleArn:"",showInfoBanner:!0,availableApiGatewayTypes:[{label:"HTTP",value:"http"},{label:"REST",value:"rest"}],selectedAPIGatewayType:{label:"HTTP",value:"http"}},this.store=(0,c.resolveStoreInstance)(d.default),this.currentUserStore=(0,c.resolveStoreInstance)(h.default),this.handleBannerClose=this.handleBannerClose.bind(this),this.onTargetSelect=this.onTargetSelect.bind(this),this.fetchApiGateways=this.fetchApiGateways.bind(this),this.handleAwsAPITypeSelection=this.handleAwsAPITypeSelection.bind(this),this.handleAwsRegionInput=this.handleAwsRegionInput.bind(this),this.handleRoleArnInput=this.handleRoleArnInput.bind(this),this.fetchApiGatewaysDebounced=r().debounce(this.fetchApiGateways,1e3),this.updateIsAddingIntegration=this.updateIsAddingIntegration.bind(this)}onTargetSelect(e){r().isEmpty(e)?this.setState({selectedAPIGateway:{id:"none",name:"No API Gateways selected"},aws_api_gateway_name:"",aws_api_gateway_id:"",showApiGatewayInputField:!1,showCustomLabel:!0}):this.setState({selectedAPIGateway:e,aws_api_gateway_name:e.label,aws_api_gateway_id:e.value})}handleAwsAPITypeSelection(e){this.setState({aws_api_type:e.value,selectedAPIGatewayType:e},(()=>{this.state.role_arn&&!r().isEmpty(this.state.role_arn)&&this.state.aws_region&&!r().isEmpty(this.state.aws_region)&&this.fetchApiGateways()}))}fetchApiGateways(){let{aws_region:e,aws_api_type:t,role_arn:i,external_id:n}=this.state,{rule:s,authType:a}=this.props;r().isEmpty(e)||r().isEmpty(i)||(this.setState({verifying:!0,errorApiGateways:!1}),g.default[s].fetchApiGateways({role_arn:i,external_id:n,aws_region:e,auth_type:a,aws_api_type:t,rule:s,type:"fetchAWSGatewayAPIs"}).then((e=>{let t=r().map(e,(e=>({label:e.Name||e.name,value:e.ApiId||e.id,...e})));this.setState({verifying:!1,availableApiGateways:t})})).catch((e=>{this.setState({verifying:!1,errorApiGateways:!0}),"invalidAWSRegion"===r().get(e,"error.name")?pm.toasts.error(r().get(e,"error.message")||"Please enter a valid AWS region.",{title:r().get(e,"error.title")||"Invalid AWS Region"}):(pm.toasts.error(r().get(e,"error.message","Something went wrong while fetching API Gateways"),{title:r().get(e,"error.title","Unable to fetch API Gateways")}),pm.logger.error("Something went wrong while fetching API Gateways",e))})))}handleBannerClose(){this.setState({showInfoBanner:!1})}handleRoleArnInput(e){this.setState({role_arn:e,errorRoleArn:r().isEmpty(e)?"Please enter the role ARN":""},(()=>{!this.state.aws_region||r().isEmpty(this.state.aws_region)||r().isEmpty(this.state.role_arn)||this.fetchApiGatewaysDebounced()}))}handleAwsRegionInput(e){this.setState({aws_region:e.trim(),errorAwsRegion:r().isEmpty(e.trim())?"Please enter a AWS region":""},(()=>{!this.state.role_arn||r().isEmpty(this.state.role_arn)||r().isEmpty(this.state.aws_region)||this.fetchApiGatewaysDebounced()}))}setExternalId(){let e={rule:this.props.rule,type:"fetchExternalId"};I.default.fetchExternalId(e).then((e=>{this.setState({external_id:e})})).catch((e=>{pm.toasts.error("Something went wrong, please try again."),pm.logger.error("Something went wrong while fetching External ID",e)}))}updateIsAddingIntegration(e){this.setState({isAddingIntegration:e})}componentDidMount(){this.setExternalId()}render(){let{rule:e,apiId:t,apiVersionId:i,authType:n,integration_name:s}=this.props,{role_arn:a,aws_region:l,verifying:c,errorAwsRegion:d,errorRoleArn:h,external_id:g,showInfoBanner:y,aws_api_type:I,aws_api_gateway_id:x,availableApiGateways:w,selectedAPIGateway:A,errorGateway:P,availableApiGatewayTypes:T,selectedAPIGatewayType:C,errorApiGateways:D,isAddingIntegration:j}=this.state,k={rule:e,name:s,entity:"apiversion",executor:i,api_id:t,variables:{auth_type:n,aws_api_type:I,role_arn:a,external_id:g,postman_api_id:t,aws_region:l,aws_api_gateway_id:x}},O=s.length<256,M=null;if(r().get(this.props,"additionalContext.releaseId")){const e=r().get(this.props,"additionalContext.releaseId");M={identifier:"build.release",routeParams:{apiId:k.api_id,versionId:k.executor,releaseId:e},queryParams:{tab:E.DEPLOYMENT}}}return o.createElement("div",null,o.createElement(u.SelectSegmentV2,{title:"AWS API Type",placeholder:"Select AWS API Type",options:T,value:C,onTargetSelect:this.handleAwsAPITypeSelection}),o.createElement("div",{className:"integrations-add-step"},o.createElement("div",{className:"integrations-add-step__title"},"Step 1: Create an IAM role"),o.createElement("div",{className:"integrations-add-step__text"},"Use the following credentials to create an IAM role for Postman in AWS. Learn how toÂ ",o.createElement(f.default,{extUrl:"https://go.pstmn.io/docs-apigateway-integration-iam"},"create an IAM role"))),o.createElement("div",{className:"integrations-info-segment--account-id"},o.createElement(_.default,{title:"AWS account ID",value:this.state.aws_account_id,description:"This assigns the IAM role to Postman."})),o.createElement(_.default,{title:"External ID",value:this.state.external_id,description:"This adds an extra level of security against malicious attacks."},o.createElement(f.default,{extUrl:"https://go.pstmn.io/docs-apigateway-integration-confused-duty-problem"},"Learn more")),o.createElement("div",{className:"integrations-add-step"},o.createElement("div",{className:"integrations-add-step__title"},"Step 2: Enter role ARN and region")),o.createElement("div",{className:"integrations-field-segment__role-arn"},o.createElement(u.FieldSegment,{mandatory:!0,id:"role-arn",placeholder:"arn:aws:iam::79840258006:role/PostmanIntegration",title:"Role ARN",description:"Provided by AWS once the IAM role is created. It allows Postman to assume the IAM role.",value:a,error:h,onChange:this.handleRoleArnInput})),o.createElement(u.FieldSegment,{mandatory:!0,id:"aws-region",title:"AWS Region",placeholder:"Enter AWS Region",value:l,error:d,onChange:this.handleAwsRegionInput}),o.createElement("div",{className:"aws-gateway-dropdown"},o.createElement(u.SelectSegmentV2,{title:"AWS Gateway",label:"Select AWS Gateway",options:w,value:A,onTargetSelect:this.onTargetSelect,noOptionsForDropdown:"No API Gateways found",error:D?"Unable to load API Gateways":"",loading:c,handleRetry:this.fetchApiGateways})),o.createElement("div",{className:"aws-gateway__button"},o.createElement(b.default,{className:"integrations-add-actions__button--proceed",type:"primary",size:"small",disabled:!a||!l||c||!w||r().isEmpty(x)||r().isEmpty(s)||!O,updateIsAddingIntegration:this.updateIsAddingIntegration,payload:k,redirect:M},"Connect"),o.createElement("div",{className:"integrations-add-actions__button--container"},o.createElement(p.Button,{className:"integrations-add-actions__button--cancel",type:"secondary",disabled:j,size:"small",onClick:()=>{r().get(this.props,"additionalContext.releaseId")?m.default.transitionTo("build.release",{apiId:k.api_id,versionId:k.executor,releaseId:r().get(this.props,"additionalContext.releaseId")},{tab:E.DEPLOYMENT}):m.default.transitionTo("build.apiVersion",{apiId:k.api_id,versionId:k.executor},{tab:E.DEPLOYMENT}),v.default.closeByRoute(S.V10_API_ADD_DEPLOYMENT_INTEGRATION_URL,{apiId:k.api_id})}},"Cancel"))))}})||s;function P(e){const{rule:t}=e;return"api_gateway_aws"===t?o.createElement(w,e):o.createElement("div",null)}},"./integrations/api-observability/components/add/ApigeeAPIGateway.js":function(e,t,i){i.r(t),i.d(t,{APIGatewayApigeeSetup:function(){return W},ApigeeAuthenticationPanel:function(){return B},ApigeeConfigurationPanel:function(){return V},default:function(){return H}});var n,s,a,r=i("./node_modules/lodash/lodash.js"),o=i.n(r),l=i("../../node_modules/react/index.js"),c=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),d=i("./js/stores/StoreManager.js"),h=i("./integrations/api-observability/stores/APIObservabilityStore.js"),u=i("./api-dev/stores/APIListStore.js"),p=i("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),g=i("../../node_modules/@postman/aether/esmLib/src/components/ButtonGroup/ButtonGroup.js"),m=i("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),f=i("../../node_modules/@postman/aether/esmLib/src/components/FileUploader/FileUploader.js"),b=i("../../node_modules/@postman/aether/esmLib/src/components/TextInput/TextInput.js"),y=i("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),_=i("../../node_modules/@postman/aether/esmLib/src/components/TextArea/TextArea.js"),v=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),S=i("../../node_modules/@postman/aether/esmLib/src/components/Stepper/Stepper.js"),I=i("../../node_modules/@postman/aether/esmLib/src/components/Stepper/StepHeader.js"),E=i("../../node_modules/@postman/aether/esmLib/src/components/Stepper/Step.js"),x=i("../../node_modules/@postman/aether/esmLib/src/components/Stepper/StepPanels.js"),w=i("../../node_modules/@postman/aether/esmLib/src/components/Stepper/StepPanel.js"),A=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),P=i("./js/services/NavigationService.js"),T=i("./api-dev/constants/APISubViews.js"),C=i("./appsdk/workbench/TabService.js"),D=i("./integrations/navigation/constants.js"),j=i("./js/modules/services/AnalyticsService.js"),k=i("./integrations/utils/CommonHelperMethods.ts"),O=i("./js/components/base/LoadingIndicator.js"),M=i("./integrations/api-observability/constants.ts"),R=i("./js/external-navigation/ExternalNavigationService.js"),L=i("../../node_modules/mobx/lib/mobx.module.js"),N=i("./integrations/api-observability/components/base/CustomMultiSelect.js"),z=i("./integrations/api-observability/components/base/CustomDropdown.js");function F(){return F=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},F.apply(this,arguments)}let V=(0,c.observer)(n=class extends l.Component{constructor(e){super(e),this.state={fetchedOrganizations:[],selectedOrganization:null,integrationName:"",errorIntegrationName:"",fetchedApiProxies:[],selectedApiProxy:null,fetchedEnvironments:[],selectedEnvironments:null},this.store=(0,d.resolveStoreInstance)(h.default),this.apiListStore=(0,d.resolveStoreInstance)(u.default),this.handleSelectOrganization=this.handleSelectOrganization.bind(this),this.handleSelectApiProxy=this.handleSelectApiProxy.bind(this),this.handleSelectEnvironments=this.handleSelectEnvironments.bind(this),this.handleConnect=this.handleConnect.bind(this),this.navigateToDeploymentsTab=this.navigateToDeploymentsTab.bind(this),this.fetchOrganizations=o().debounce(this.fetchOrganizations.bind(this),1e3),this.fetchApiProxies=this.fetchApiProxies.bind(this),this.fetchEnvironments=this.fetchEnvironments.bind(this),this.addIntegration=this.addIntegration.bind(this),this.renderLoadingState=this.renderLoadingState.bind(this),this.getValidationState=this.getValidationState.bind(this)}componentDidUpdate(e){e.stepStatus[0]!==this.props.stepStatus[0]&&this.fetchOrganizations()}fetchOrganizations(){let{serviceAccountEmail:e,privateKey:t}=this.props;this.setState({isFetchingOrganization:!0});let i={service_account_email:e,private_key:t,classId:this.props.rule},n=M.FETCH_ORGANIZATIONS;A.default.fetchPreConfigurationGatewayActionDetails(n,i).then((e=>{let t=o().get(e,"body.data.organizations",[]),i=o().map(t,(e=>({label:e.organization,value:e.organization})));this.setState({fetchedOrganizations:i,isFetchingOrganization:!1,fetchErrorOrganizations:!1})})).catch((e=>{this.setState({fetchErrorOrganizations:!0,isFetchingOrganization:!1}),pm.toasts.error("Something went wrong while fetching Apigee organizations"),pm.logger.error("Something went wrong while fetching Apigee organizations",e)}))}fetchApiProxies(){let{serviceAccountEmail:e,privateKey:t}=this.props,{selectedOrganization:i}=this.state;this.setState({isFetchingApiProxies:!0});let n={service_account_email:e,private_key:t,organization:o().get(i,"value"),classId:this.props.rule},s=M.FETCH_API_PROXIES;A.default.fetchPreConfigurationGatewayActionDetails(s,n).then((e=>{let t=o().get(e,"body.data.proxies",[]),i=o().map(t,(e=>({label:e.name,value:e.name})));this.setState({fetchedApiProxies:i,isFetchingApiProxies:!1,fetchErrorApiProxies:!1})})).catch((e=>{this.setState({fetchErrorApiProxies:!0,isFetchingApiProxies:!1}),pm.toasts.error("Something went wrong while fetching Apigee API Proxies"),pm.logger.error("Something went wrong while fetching Apigee API Proxies",e)}))}fetchEnvironments(){let{serviceAccountEmail:e,privateKey:t}=this.props,{selectedOrganization:i}=this.state;this.setState({isFetchingEnvironments:!0});let n={service_account_email:e,private_key:t,organization:o().get(i,"value"),classId:this.props.rule},s=M.FETCH_ENVIRONMENTS;A.default.fetchPreConfigurationGatewayActionDetails(s,n).then((e=>{let t=o().map(o().get(e,"body.data",[]),(e=>({label:e,value:e})));this.setState({fetchedEnvironments:t,isFetchingEnvironments:!1,fetchErrorEnvironments:!1})})).catch((e=>{this.setState({fetchErrorEnvironments:!0,isFetchingEnvironments:!1}),pm.toasts.error("Something went wrong while fetching Apigee environments"),pm.logger.error("Something went wrong while fetching Apigee environments",e)}))}handleSelectOrganization(e){this.setState({selectedOrganization:e,errorOrganization:o().isEmpty(e),fetchedApiProxies:[],selectedApiProxy:[],selectedEnvironments:[],fetchedEnvironments:[]},(()=>{o().get(e,"value")&&(this.fetchApiProxies(M.PRE_CONFIG),this.fetchEnvironments(M.PRE_CONFIG))}))}handleSelectEnvironments(e){this.setState({selectedEnvironments:e,errorEnvironments:o().isEmpty(e)})}handleSelectApiProxy(e){this.setState({selectedApiProxy:e,errorApiProxy:o().isEmpty(e)})}navigateToDeploymentsTab(){let{apiId:e,apiVersionId:t}=this.props,i={apiId:e,versionId:t};C.default.closeByRoute(D.V10_API_ADD_DEPLOYMENT_INTEGRATION_URL,{apiId:e}),this.store.initializeApiObservabilityStore({apiId:e,apiVersionId:t,category:M.API_OBSERVABILITY}),P.default.transitionTo("build.apiVersion",i,{tab:T.DEPLOYMENT})}handleConnect(){let e,t,i,n,s,a,{selectedOrganization:r,selectedApiProxy:l,selectedEnvironments:c}=this.state,{apiVersionId:d,apiId:h,serviceAccountEmail:u,privateKey:p,rule:g}=this.props,m=(0,L.toJS)(this.apiListStore.members);n=o().find(m,(e=>h===o().get(e,"id"))),t=o().get(n,"name"),a=(0,L.toJS)(o().get(n,"childEntities.members")),s=o().find(a,(e=>d===o().get(e,"id"))),i=o().get(s,"name"),e={name:t+"-"+i+"-apigee",rule:g,entity:"apiversion",executor:d,variables:{postman_api_id:h,service_account_email:u,private_key:p,organization:o().get(r,"value"),api_proxy:o().get(l,"value"),environments:o().isArray(c)?c.map((e=>o().get(e,"value"))):[]}},this.setState({isAddingIntegration:!0}),t&&i?this.addIntegration(e,g):pm.toasts.error("Something went wrong while adding a new integration. Please try again")}addIntegration(e,t){A.default.createIntegration(null,e).then((i=>{this.setState({isAddingIntegration:!1}),200===o().get(i,"status")&&o().get(i,"body.model_id")?((0,k.postAddIntegrationActions)(t,h.default,{enitityType:"apiversion",entityId:e.executor}),pm.toasts.success("Added a new integration"),j.default.addEventV2({category:"integrations",action:t+"_created_integration",label:"team_integrations_create_forms",value:1}),this.navigateToDeploymentsTab()):pm.toasts.error("Something went wrong while adding a new integration")})).catch((e=>{this.setState({isAddingIntegration:!1}),"integrationFoundError"===o().get(e,"error.name")?pm.toasts.error("The integration already exists."):pm.toasts.error("Something went wrong while adding a new integration. Please try again."),pm.logger.error("Something went wrong while adding a new integration",e)}))}renderLoadingState(){return l.createElement(p.default,{justifyContent:"space-between"},l.createElement("div",null,"Loading..."),l.createElement(O.default,{className:"loading-indicator-aether__dropdown"}))}getValidationState(e){let{errorOrganization:t,fetchErrorOrganizations:i,errorApiProxy:n,fetchErrorApiProxies:s,errorEnvironments:a,fetchErrorEnvironments:r}=this.state;return"organization"===e?t||i?{status:"error",message:i?l.createElement("div",null,"Unable to load organizations.",l.createElement("span",{className:"dropdown-retry",onClick:()=>{this.fetchOrganizations()}},"Retry")):"Please select an organization."}:{}:"apiProxy"===e?n||s?{status:"error",message:s?l.createElement("div",null,"Unable to load API Proxies.",l.createElement("span",{className:"dropdown-retry",onClick:()=>{this.fetchApiProxies()}},"Retry")):"Please select an API Proxy."}:{}:a||r?{status:"error",message:r?l.createElement("div",null,"Unable to load environments.",l.createElement("span",{className:"dropdown-retry",onClick:()=>{this.fetchEnvironments()}},"Retry")):"Please select one or more environments."}:{}}render(){const{fetchedOrganizations:e,selectedOrganization:t,fetchedApiProxies:i,selectedApiProxy:n,fetchedEnvironments:s,selectedEnvironments:a,isAddingIntegration:r,isFetchingOrganization:c,isFetchingApiProxies:d,isFetchingEnvironments:h}=this.state,{serviceAccountEmail:u,privateKey:p}=this.props,f=o().isEmpty(t)||o().isEmpty(n)||o().isEmpty(a)||!u||!p;return l.createElement("div",{className:"connect-apigee-gateway__form"},l.createElement("div",{className:"connect-apigee-gateway__form--component"},l.createElement(z.default,{onChange:this.handleSelectOrganization,options:e||[],value:t,label:"Organization",placeholder:c?this.renderLoadingState():"Select Organization",className:c?"dropdown-icon-remove":"",emptyStateMessage:"No organizations found",isDisabled:c,validationState:this.getValidationState("organization"),menuWidth:M.DROPDOWN_WIDTH})),l.createElement("div",{className:"connect-apigee-gateway__form--component"},l.createElement(z.default,{onChange:this.handleSelectApiProxy,options:i||[],value:n,label:"API Proxy",helperText:"Connection between Proxy and Postman API",placeholder:d?this.renderLoadingState():"Select API Proxy",className:d?"dropdown-icon-remove":"",isDisabled:!o().get(t,"value")||d,emptyStateMessage:"No API Proxies found",validationState:this.getValidationState("apiProxy"),menuWidth:M.DROPDOWN_WIDTH})),l.createElement("div",{className:"connect-apigee-gateway__form--component"},l.createElement(N.default,{onChange:this.handleSelectEnvironments,options:s,value:a,label:"Environments",helperText:"Environments configured on Apigee X over which APIs are deployed",placeholder:h?this.renderLoadingState():"Select one or more environments",isDisabled:!o().get(t,"value")||h,emptyStateMessage:"No environments found",validationState:this.getValidationState("environments")})),l.createElement("div",{className:"connect-apigee-gateway__form--buttons"},l.createElement(g.default,null,l.createElement(m.default,{type:"secondary",size:"small",onClick:()=>{this.navigateToDeploymentsTab()},text:"Cancel",isDisabled:r}),l.createElement(m.default,{type:"primary",size:"small",onClick:()=>{this.handleConnect()},isDisabled:f,text:"Complete Setup",isLoading:r}))))}})||n,B=(0,c.observer)(s=class extends l.Component{constructor(e){super(e),this.setUploadedFile=e=>{let t=o().isObject(e)?e[0]:"";if(t){let e=new FileReader;e.readAsText(t,"UTF-8"),e.onload=function(e){try{let t=JSON.parse(e.target.result),i=Object.keys(t),n=o().get(t,"client_email"),s=o().get(t,"private_key");if(this.setState({isFileUploaded:!0,serviceAccountEmail:n,privateKey:s}),!i.includes("client_email","private_key")){let e=new Error;throw e.name="invalidFileContent",e}this.props.handleServiceAccountEmail(n),this.props.handlePrivateKey(s)}catch(e){this.setState({isFileUploaded:!1}),"invalidFileContent"===e.name?(pm.toasts.error("Invalid file content. Please try selecting different file."),pm.logger.error("Something went wrong while parsing JSON file",e)):(pm.toasts.error("Something went wrong. Please try again."),pm.logger.error("Something went wrong while parsing JSON file",e))}}.bind(this)}else this.setState({isFileUploaded:!1,serviceAccountEmail:"",privateKey:""}),this.props.handleServiceAccountEmail(""),this.props.handlePrivateKey("")},this.handleServiceAccountEmail=e=>{this.setState({serviceAccountEmail:e,errorServiceAccountEmail:!e}),this.props.handleServiceAccountEmail(e)},this.handlePrivateKey=e=>{this.setState({privateKey:e.replace(/\\n/g,"\n"),errorPrivateKey:!e}),this.props.handlePrivateKey(e)},this.state={serviceAccountEmail:"",privateKey:""}}render(){const{serviceAccountEmail:e,privateKey:t,errorServiceAccountEmail:i,errorPrivateKey:n,isFileUploaded:s}=this.state;return l.createElement("div",null,l.createElement("div",{className:"connect-apigee-gateway__stepper__authorize__input"},l.createElement(f.default,{label:"Upload private key file (Optional)",helperText:l.createElement("div",{className:"connect-apigee-gateway__stepper__authorize__text"},l.createElement("div",null,"Upload private key file or manually enter the values below. "),l.createElement("div",null,"Only JSON file format is supported.")),id:"file-uploader",accept:".json",onChange:this.setUploadedFile,actionLabel:"Select File"})),l.createElement("div",{className:"connect-apigee-gateway__stepper__authorize__service-account"},l.createElement(b.default,{placeholder:"Enter service account email",helperText:"Service Account Email associated with Google Cloud Project",value:e,onChange:e=>this.handleServiceAccountEmail(e.target.value),label:l.createElement(y.default,{text:"Service Account Email"}),validationStatus:i?"error":"",validationMessage:"Please enter service account email",isDisabled:s})),l.createElement("div",{className:"connect-apigee-gateway__stepper__authorize__private-key"},l.createElement(_.default,{placeholder:"Enter private key",helperText:"Private key associated with the Service Account",value:t,onChange:e=>this.handlePrivateKey(e.target.value),label:l.createElement(y.default,{text:"Private Key"}),validationStatus:n?"error":"",validationMessage:"Please enter private key",isDisabled:s,isResizable:!1})))}})||s,W=(0,c.observer)(a=class extends l.Component{constructor(e){super(e),this.setActiveStepIndex=e=>{this.setState({activeStepIndex:e})},this.setStepStatus=e=>{this.setState({stepStatus:e})},this.handleServiceAccountEmail=e=>{this.setState({serviceAccountEmail:e})},this.handlePrivateKey=e=>{this.setState({privateKey:e})},this.renderDescription=()=>l.createElement("div",{className:"connect-apigee-gateway__stepper__authorize__text"},M.AUTHENTICATE_STEP_DESCRIPTION_1,l.createElement("div",null,"Follow these",l.createElement(v.default,{className:"connect-apigee-gateway__stepper__authorize__description",type:"link-default"},l.createElement("span",{onClick:()=>{(0,R.openExternalLink)("https://go.pstmn.io/apigee-setup-instructions","_blank")}},"instructions")),M.AUTHENTICATE_STEP_DESCRIPTION_2)),this.navigateToDeploymentsTab=()=>{let{apiId:e,apiVersionId:t}=this.props,i={apiId:e,versionId:t};C.default.closeByRoute(D.V10_API_ADD_DEPLOYMENT_INTEGRATION_URL,{apiId:e}),P.default.transitionTo("build.apiVersion",i,{tab:T.DEPLOYMENT})},this.authenticate=()=>{const{serviceAccountEmail:e,privateKey:t}=this.state;let i={service_account_email:e,private_key:t,classId:this.props.rule};A.default.fetchPreConfigurationGatewayActionDetails(M.FETCH_ORGANIZATIONS,i).then((e=>{200===e.status?(this.setState({isAuthenticated:!0,isLoading:!1}),this.setActiveStepIndex(1),this.setStepStatus(["completed","progress"])):this.setState({isAuthenticated:!1,isLoading:!1})})).catch((e=>{this.setState({isLoading:!1}),pm.toasts.error("Could not authorize. Please try again."),pm.logger.error("Could not get authorized.",e)}))},this.state={activeStepIndex:0,stepStatus:["progress","pending"],serviceAccountEmail:"",privateKey:""}}render(){const{activeStepIndex:e,stepStatus:t,serviceAccountEmail:i,privateKey:n,isLoading:s}=this.state;return l.createElement("div",{className:"connect-apigee-gateway__stepper"},l.createElement("div",null,l.createElement("div",{className:"connect-apigee-gateway__form--title"},"Connect to Apigee X"),l.createElement("div",{className:"connect-apigee-gateway__form--description"},"View deployment status of your API directly from Postman.")),l.createElement(S.default,{activeStepIndex:e,onChange:this.setActiveStepIndex},l.createElement(I.default,null,l.createElement(E.default,{status:t[0],label:"Authenticate",isDisabled:"pending"===t[0]||"completed"===t[0]}),l.createElement(E.default,{status:t[1],label:"Setup",isDisabled:"pending"===t[1]})),l.createElement(x.default,null,l.createElement(w.default,{heading:M.AUTHENTICATE_STEP_HEADING,description:this.renderDescription(),secondaryAction:l.createElement(m.default,{type:"secondary",size:"medium",text:"Cancel",onClick:()=>{this.navigateToDeploymentsTab()},isDisabled:s}),primaryAction:l.createElement(m.default,{type:"primary",size:"medium",text:"Connect",onClick:()=>{this.setState({isLoading:!0},(()=>this.authenticate()))},isDisabled:!i||!n,isLoading:s})},l.createElement(B,{handleServiceAccountEmail:this.handleServiceAccountEmail,handlePrivateKey:this.handlePrivateKey})),l.createElement(w.default,{heading:"Setup Apigee X"},l.createElement(V,F({},this.props,{serviceAccountEmail:i,privateKey:n,stepStatus:t}))))))}})||a;function H(e){const{rule:t}=e;return"api_gateway_apigee"===t?l.createElement(W,e):l.createElement("div",null)}},"./integrations/api-observability/components/add/Azure.js":function(e,t,i){i.r(t),i.d(t,{AzureSetup:function(){return x},default:function(){return w}});var n,s=i("./node_modules/lodash/lodash.js"),a=i.n(s),r=i("../../node_modules/react/index.js"),o=i("./integrations/components/error-states/IntegrationNotSupported.js"),l=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),c=i("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),d=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-add-stroke-small.js"),h=i("./api-dev/constants/APISubViews.js"),u=i("./integrations/api-observability/components/base/AzureServiceConfig.js"),p=i("./integrations/api-observability/components/base/CancelButton.js"),g=i("./integrations/api-observability/components/base/AddIntegrationV2.js"),m=i("./node_modules/uuid/v4.js"),f=i.n(m),b=i("./integrations/navigation/constants.js"),y=i("./js/stores/StoreManager.js"),_=i("./integrations/api-observability/stores/APIObservabilityStore.js"),v=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/EntityService.js"),S=i("./integrations/api-observability/constants.ts"),I=i("./integrations/api-observability/services/Helper.js");function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},E.apply(this,arguments)}let x=(0,l.observer)(n=class extends r.Component{constructor(e){super(e),this.fetchConnectedApiMeta=()=>{v.default.fetchAPIMeta(this.props.apiId).then((e=>{this.setState({selectedApiName:a().get(e,"name"),isFetchingApiMeta:!1})})).catch((e=>{this.setState({isFetchingApiMeta:!1,errorApiMeta:!0}),pm.toasts.error("Something went wrong. Please try again."),pm.logger.error("Error occurred while fetching APIs",e)})),v.default.fetchAPIVersionMeta(this.props.apiId,this.props.apiVersionId).then((e=>{this.setState({selectedApiVersionName:a().get(e,"name"),isFetchingApiVersionMeta:!1})})).catch((e=>{this.setState({errorApiVersionMeta:!0,isFetchingApiVersionMeta:!1}),pm.toasts.error("Something went wrong. Please try again."),pm.logger.error("Error occurred while fetching API versions",e)}))},this.handleLinkedApis=(e,t)=>{let{linkedApis:i}=this.state,n=!1;e&&(i[t]=e),a().each(i,(e=>{if(!(a().get(e,"azure_subscription_id")&&a().get(e,"azure_resource_group_id")&&a().get(e,"azure_service_id")&&a().get(e,"azure_api_id")))return n=!0,!1})),this.setState({linkedApis:i,isDisabled:n})},this.generatePayload=()=>{const{apiId:e,apiVersionId:t,rule:i,accessToken:n,refreshToken:s}=this.props,{linkedApis:r,selectedApiName:o,selectedApiVersionName:l}=this.state;return new Promise(((c,d)=>{o&&l||(this.fetchConnectedApiMeta(),pm.toasts.error("Something went wrong. Please try again."),pm.logger.error("Error occurred while fetching API meta"),d());let h={entity:"apiversion",executor:t,name:o+"-"+l+"-azure",rule:i,variables:{linked_apis:[],azure_access_token:n,azure_refresh_token:s,postman_api_id:e,use_refresh_token:!0}};return a().each(r,(e=>{e=a().pick(e,["azure_subscription_id","azure_resource_group_id","azure_service_id","azure_service_path","azure_api_id","azure_api_path"]),h.variables.linked_apis.push(e)})),this.setState({payload:h},(()=>c(h)))}))},this.handleFetchedSubscriptions=e=>{this.setState({fetchedSubscriptions:e})},this.addSection=()=>{let{linkedApis:e}=this.state;const t=f()();e[t]={},a().each(e,(e=>{e.isCollapsed=!0})),e[t].isCollapsed=!1,this.setState({linkedApis:e})},this.removeSection=e=>{let{linkedApis:t}=this.state;t[e]&&delete t[e],this.setState({linkedApis:t})},this.handleCollapse=(e,t)=>{let{linkedApis:i}=this.state;i[e]&&(i[e].isCollapsed=t),this.setState({linkedApis:i})},this.renderSections=()=>{let{fetchedSubscriptions:e,linkedApis:t}=this.state,i=[],n=1,s=[];return a().isObject(t)&&a().each(Object.keys(t),(e=>{t[e].azure_api_path&&s.push(t[e].azure_api_path)})),a().isObject(t)&&a().each(t,((a,o)=>{let l=t[o].isCollapsed;i.push(r.createElement(u.default,E({},this.props,{key:o,index:o,handleLinkedApis:this.handleLinkedApis,selectedApiPaths:s,fetchedSubscriptions:e,handleFetchedSubscriptions:this.handleFetchedSubscriptions,handleRemoveSection:this.removeSection,handleCollapse:this.handleCollapse,isCollapsed:l,isRemoveHidden:1===Object.keys(t).length,formType:S.ADD,serialNumber:n}))),n++})),i},this.state={linkedApis:{},fetchedSubscriptions:[]},this.store=(0,y.resolveStoreInstance)(_.default)}componentDidMount(){this.fetchConnectedApiMeta();const{linkedApis:e}=this.state;e[f()()]={isCollapsed:!1},this.setState({linkedApis:e})}render(){const{payload:e,isDisabled:t}=this.state,{apiId:i,apiVersionId:n,rule:s}=this.props;return r.createElement("div",null,r.createElement("div",{className:"observability-azure-add-integration__service"},S.SETUP_AZURE_API_MANAGEMENT_SERVICES),this.renderSections(),r.createElement("div",{className:"observability-azure-add-integration__buttons__add-service"},r.createElement(c.default,{onClick:()=>{this.addSection()},type:"tertiary",size:"small",text:"Add Service",icon:r.createElement(d.default,null),isDisabled:t||this.store.isAdding})),r.createElement("div",{className:"observability-azure-add-integration__buttons"},r.createElement(g.default,{text:"Connect",payload:e,rule:s,apiId:i,apiVersionId:n,isDisabled:t,customAddIntegrationHandler:this.generatePayload,onSuccessfulIntegrationCreate:I.default.addAzureServicesAnalytics}),r.createElement("span",{className:"observability-azure-add-integration__buttons__cancel"},r.createElement(p.default,{text:"Cancel",apiId:i,apiVersionId:n,redirectUrl:b.V10_API_ADD_DEPLOYMENT_INTEGRATION_URL}))))}})||n;function w(e){const{rule:t,apiId:i,apiVersionId:n}=e;return"api_management_azure"===t?r.createElement(x,e):r.createElement(o.default,{apiId:i,apiVersionId:n,tab:h.DEPLOYMENT})}},"./integrations/api-observability/components/add/index.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return d}});var n=i("../../node_modules/react/index.js"),s=i("./integrations/api-observability/components/add/ApiGateway.js"),a=i("./integrations/api-observability/components/add/ApigeeAPIGateway.js"),r=i("./integrations/api-observability/components/add/Azure.js"),o=i("./integrations/components/error-states/IntegrationNotSupported.js"),l=i("./api-dev/constants/APISubViews.js");const c={api_gateway_aws:s.default,api_gateway_apigee:a.default,api_management_azure:r.default};function d(e){const{service:t,apiId:i,apiVersionId:s}=e,a=c[t];return a?n.createElement(a,e):n.createElement(o.default,{apiId:i,apiVersionId:s,tab:l.DEPLOYMENT})}},"./integrations/api-observability/components/base/AddIntegration.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return x}});var n,s=i("../../node_modules/react/index.js"),a=i("./js/components/base/Buttons.js"),r=i("./js/components/base/LoadingIndicator.js"),o=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),l=i("./js/stores/StoreManager.js"),c=i("./integrations/api-observability/stores/APIObservabilityStore.js"),d=i("./js/stores/IntegrationsStore.js"),h=i("./js/services/NavigationService.js"),u=i("./appsdk/workbench/TabService.js"),p=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),g=i("./js/modules/services/AnalyticsService.js"),m=i("./integrations/navigation/constants.js"),f=i("./integrations/api-observability/constants.ts"),b=i("./node_modules/classnames/index.js"),y=i.n(b),_=i("./api-dev/constants/APISubViews.js"),v=i("./integrations/api-observability/components/import-schema/index.js"),S=i("./integrations/utils/CommonHelperMethods.ts"),I=i("./node_modules/lodash/lodash.js");function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},E.apply(this,arguments)}let x=(0,p.observer)(n=class extends s.Component{constructor(e){super(e),this.store=(0,l.resolveStoreInstance)(c.default),this.integrationsStore=(0,l.resolveStoreInstance)(d.default),this.state={isAddingIntegration:!1}}render(){const{disabled:e,payload:t,workspaceId:i,service:n,alignLeft:l,updateIsAddingIntegration:d,...p}=this.props,{rule:b}=t,{isAddingIntegration:x}=this.state;return s.createElement("div",{className:y()("integrations-add-actions__button--container",{"align-left":l})},s.createElement(a.Button,E({type:"primary",className:"integrations-add-actions__button--save-changes",disabled:e,tooltip:e?"Make sure that you have entered all the mandatory fields":"",size:"small",onClick:()=>{this.setState({isAddingIntegration:!0}),d(!0),o.default.createIntegration(i||null,t).then((e=>{if(200===e.status&&e.body.model_id){if(pm.toasts.success("Added a new integration"),g.default.addEventV2({category:"integrations",action:b+"_created_integration",label:"team_integrations_create_forms",value:1}),this.setState({isAddingIntegration:!1}),d(!1),(0,S.postAddIntegrationActions)(b,c.default,{enitityType:"apiversion",entityId:t.executor}),!v.default[b]){if(this.props.redirect){const{identifier:e,routeParams:t,queryParams:i}=this.props.redirect;h.default.transitionTo(e,t,i)}else h.default.transitionTo(f.API_BUILDER_ROUTE_IDENTIFIERS.API_VERSION,{apiId:t.api_id,versionId:t.executor},{tab:_.DEPLOYMENT});u.default.closeByRoute(m.V10_API_ADD_DEPLOYMENT_INTEGRATION_URL,{apiId:t.api_id})}pm.windowEvents.emit(`${f.API_OBSERVABILITY}-integration-added`,{apiId:t.api_id,apiVersionId:t.executor,integrationId:I.get(e,"body.model_id")})}else pm.toasts.error("Something went wrong while adding a new integration"),this.setState({isAddingIntegration:!1}),d(!1)})).catch((e=>{this.setState({isAddingIntegration:!1}),d(!1),pm.toasts.error(I.get(e,"error.details")&&I.get(e,"error.details.message")||I.get(e,"error.message")||"Something went wrong while adding a new integration"),pm.logger.error("Something went wrong while adding a new integration",e)}))}},p),x?s.createElement(r.default,null):this.props.children))}})||n},"./integrations/api-observability/components/base/AddIntegrationV2.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return _}});var n=i("../../node_modules/react/index.js"),s=i("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),a=i("./appsdk/workbench/TabService.js"),r=i("./integrations/navigation/constants.js"),o=i("./js/services/NavigationService.js"),l=i("./api-dev/constants/APISubViews.js"),c=i("./node_modules/lodash/lodash.js"),d=i.n(c),h=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),u=i("./js/modules/services/AnalyticsService.js"),p=i("./js/stores/StoreManager.js"),g=i("./integrations/api-observability/stores/APIObservabilityStore.js"),m=i("./js/stores/IntegrationsStore.js"),f=i("./integrations/api-observability/constants.ts"),b=i("./integrations/api-observability/components/import-schema/index.js"),y=i("./integrations/utils/CommonHelperMethods.ts");function _(e){let t=(0,p.resolveStoreInstance)(g.default);(0,p.resolveStoreInstance)(m.default);const i=(0,n.useCallback)((e=>{let{apiId:i,apiVersionId:n}=e,s={apiId:i,versionId:n};a.default.closeByRoute(r.V10_API_ADD_DEPLOYMENT_INTEGRATION_URL,{apiId:i}),t.initializeApiObservabilityStore({apiId:i,apiVersionId:n,category:f.API_OBSERVABILITY}),o.default.transitionTo("build.apiVersion",s,{tab:l.DEPLOYMENT})}),[]),c=(0,n.useCallback)((e=>{let{service:t,rule:i}=e;o.default.transitionTo(r.TEAM_INTEGRATIONS_IDENTIFIER,{serviceId:t,ruleId:i})}),[]),_=(0,n.useCallback)(((e,n)=>{const{rule:s,isBrowseIntegrationFlow:a,onSuccessfulIntegrationCreate:r}=e;n||(n=d().get(e,"payload")),t.updateIsAdding(!0),h.default.createIntegration(null,n).then((n=>{t.updateIsAdding(!1),200===d().get(n,"status")&&d().get(n,"body.model_id")?(pm.toasts.success("Added a new integration"),u.default.addEventV2({category:"integrations",action:s+"_created_integration",label:"team_integrations_create_forms",value:1}),d().isFunction(r)&&r(d().get(n,"body.data",{})),a?((0,y.postAddIntegrationActions)(s),c(e)):((0,y.postAddIntegrationActions)(s,g.default,{enitityType:"apiversion",entityId:e.apiVersionId}),b.default[e.rule]||i(e)),pm.windowEvents.emit(`${f.API_OBSERVABILITY}-integration-added`,{apiId:e.apiId,apiVersionId:e.apiVersionId,integrationId:d().get(n,"body.model_id")})):pm.toasts.error("Something went wrong while adding a new integration")})).catch((e=>{t.updateIsAdding(!1),"integrationFoundError"===d().get(e,"error.name")?pm.toasts.error("The integration already exists."):pm.toasts.error("Something went wrong while adding a new integration. Please try again."),pm.logger.error("Something went wrong while adding a new integration",e)}))}),[]);return n.createElement(s.default,{type:"primary",size:"medium",onClick:()=>{d().isFunction(e.customAddIntegrationHandler)?e.customAddIntegrationHandler().then((t=>{_(e,t)})):_(e)},isDisabled:e.isDisabled||t.isAdding,text:e.text,isLoading:e.isLoading||t.isAdding})}},"./integrations/api-observability/components/base/AzureServiceConfig.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return y}});var n,s=i("../../node_modules/react/index.js"),a=i("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),r=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),o=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-direction-up.js"),l=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-direction-down.js"),c=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-clear-stroke-small.js"),d=i("./node_modules/lodash/lodash.js"),h=i.n(d),u=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),p=i("./js/components/base/LoadingIndicator.js"),g=i("./integrations/api-observability/services/AzureService.js"),m=i("./integrations/api-observability/constants.ts"),f=i("./integrations/api-observability/components/base/CustomDropdown.js"),b=i("./js/components/base/SearchHighlighter.js");let y=(0,u.observer)(n=class extends s.Component{constructor(e){super(e),this.filterApis=e=>{const{selectedApiPaths:t=[]}=this.props;let i=h().filter(e||[],(e=>!t.includes(h().get(e,"path"))||this.state.azureApiPath===h().get(e,"path")));this.setState({filteredApis:i})},this.renderLoadingState=()=>s.createElement(a.default,{justifyContent:"space-between"},s.createElement("div",null,"Loading..."),s.createElement(p.default,{className:"loading-indicator-aether__dropdown"})),this.getSubscriptionValidationState=()=>{let{errorSubscription:e,fetchErrorSubscriptions:t}=this.state;return!e&&h().isEmpty(t)?{}:{status:"error",message:t?s.createElement("div",null,"Unable to load subscriptions.",s.createElement("span",{className:"dropdown-retry",onClick:()=>{this.props.formType===m.EDIT?this.fetchSubscriptionsWithIntegrationId():this.fetchSubscriptions()}},"Retry")):"Please select a subscription."}},this.getResourceGroupValidationState=()=>{let{errorResourceGroup:e,fetchErrorResourceGroups:t}=this.state;return!e&&h().isEmpty(t)?{}:{status:"error",message:t?s.createElement("div",null,"Unable to load resource groups.",s.createElement("span",{className:"dropdown-retry",onClick:()=>{this.props.formType===m.EDIT?this.fetchResourceGroupsWithIntegrationId():this.fetchResourceGroups()}},"Retry")):"Please select a resource group."}},this.getServiceValidationState=()=>{let{errorService:e,fetchErrorServices:t}=this.state;return!e&&h().isEmpty(t)?{}:{status:"error",message:t?s.createElement("div",null,"Unable to load services.",s.createElement("span",{className:"dropdown-retry",onClick:()=>{this.props.formType===m.EDIT?this.fetchServicesWithIntegrationId():this.fetchServices()}},"Retry")):"Please select a service."}},this.getApiValidationState=()=>{let{errorApi:e,fetchErrorApis:t}=this.state;return!e&&h().isEmpty(t)?{}:{status:"error",message:t?s.createElement("div",null,"Unable to load Apis.",s.createElement("span",{className:"dropdown-retry",onClick:()=>{this.props.formType===m.EDIT?this.fetchApisWithIntegrationId():this.fetchApis()}},"Retry")):"Please select an API."}},this.handleLinkedApiConfig=()=>{const{selectedSubscription:e,selectedResourceGroup:t,selectedService:i,selectedApi:n}=this.state;let{index:s}=this.props,a={azure_subscription_id:h().get(e,"value"),azure_resource_group_id:h().get(t,"value"),azure_service_id:h().get(i,"value"),azure_service_path:h().get(i,"path"),azure_api_id:h().get(n,"value"),azure_api_path:h().get(n,"path"),isCollapsed:!1};this.props.handleLinkedApis(a,s)},this.handleSelectSubscription=e=>{this.setState({selectedSubscription:e,azureSubscriptionId:h().get(e,"value"),errorSubscription:h().isEmpty(e),fetchedResourceGroups:[],selectedResourceGroup:[],fetchedServices:[],selectedService:[],fetchedApis:[],selectedApi:[],azureResourceGroupId:"",azureServiceId:"",azureApiId:""},(()=>{h().get(e,"value")&&(this.props.formType===m.EDIT?this.fetchResourceGroupsWithIntegrationId():this.fetchResourceGroups()),this.handleLinkedApiConfig()}))},this.handleSelectResourceGroup=e=>{this.setState({selectedResourceGroup:e,azureResourceGroupId:h().get(e,"value"),errorResourceGroup:h().isEmpty(e),fetchedServices:[],azureServiceId:"",azureApiId:"",selectedService:[],fetchedApis:[],selectedApi:[]},(()=>{h().get(e,"value")&&(this.props.formType===m.EDIT?this.fetchServicesWithIntegrationId():this.fetchServices()),this.handleLinkedApiConfig()}))},this.handleSelectService=e=>{this.setState({selectedService:e,errorService:h().isEmpty(e),azureServiceId:h().get(e,"value"),azureApiId:"",fetchedApis:[],selectedApi:[]},(()=>{h().get(e,"value")&&(this.props.formType===m.EDIT?this.fetchApisWithIntegrationId():this.fetchApis()),this.handleLinkedApiConfig()}))},this.handleSelectApi=e=>{this.setState({selectedApi:e,azureApiId:h().get(e,"value"),azureApiPath:h().get(e,"path"),errorApi:h().isEmpty(e)},(()=>{this.handleLinkedApiConfig()}))},this.fetchSubscriptionsWithIntegrationId=()=>{this.setState({isFetchingSubscriptions:!0});let e=[];g.default.fetchSubscriptionsWithIntegrationId(this.props.integrationId,{},m.LIST_SUBSCRIPTIONS).then((t=>{h().map(t,(t=>{h().get(t,"value")===this.state.azureSubscriptionId&&(e={label:h().get(t,"label"),value:h().get(t,"value")})})),this.setState({selectedSubscription:e,fetchedSubscriptions:t||[],isFetchingSubscriptions:!1,fetchErrorSubscriptions:!1}),this.props.handleFetchedSubscriptions(t)})).catch((e=>{this.setState({fetchErrorSubscriptions:!0,isFetchingSubscriptions:!1})}))},this.fetchSubscriptions=()=>{this.setState({isFetchingSubscriptions:!0});let{rule:e,accessToken:t}=this.props,i={azure_access_token:t};g.default.fetchSubscriptions(e,i,m.LIST_SUBSCRIPTIONS).then((e=>{this.setState({fetchedSubscriptions:e||[],isFetchingSubscriptions:!1,fetchErrorSubscriptions:!1}),this.props.handleFetchedSubscriptions(e)})).catch((e=>{this.setState({fetchErrorSubscriptions:!0,isFetchingSubscriptions:!1})}))},this.fetchResourceGroupsWithIntegrationId=()=>{this.setState({isFetchingResourceGroups:!0});let{selectedSubscription:e}=this.state,t=[],i={azure_subscription_id:this.state.azureSubscriptionId||h().get(e,"value")};g.default.fetchResourceGroupsWithIntegrationId(this.props.integrationId,i,m.LIST_RESOURCE_GROUPS).then((e=>{h().map(e,(e=>{h().get(e,"value")===this.state.azureResourceGroupId&&(t={label:h().get(e,"label"),value:h().get(e,"value")})})),this.setState({selectedResourceGroup:t,fetchedResourceGroups:e||[],isFetchingResourceGroups:!1,fetchErrorResourceGroups:!1})})).catch((e=>{this.setState({fetchErrorResourceGroups:!0,isFetchingResourceGroups:!1})}))},this.fetchResourceGroups=()=>{this.setState({isFetchingResourceGroups:!0});let{rule:e,accessToken:t}=this.props,{selectedSubscription:i}=this.state,n={azure_access_token:t,azure_subscription_id:h().get(i,"value")};g.default.fetchResourceGroups(e,n,m.LIST_RESOURCE_GROUPS).then((e=>{this.setState({fetchedResourceGroups:e||[],isFetchingResourceGroups:!1,fetchErrorResourceGroups:!1})})).catch((e=>{this.setState({fetchErrorResourceGroups:!0,isFetchingResourceGroups:!1})}))},this.fetchServicesWithIntegrationId=()=>{this.setState({isFetchingServices:!0});let{selectedSubscription:e,selectedResourceGroup:t}=this.state,i=[],n={azure_subscription_id:this.state.azureSubscriptionId||h().get(e,"value"),azure_resource_group_id:this.state.azureResourceGroupId||h().get(t,"value")};g.default.fetchServicesWithIntegrationId(this.props.integrationId,n,m.LIST_SERVICES).then((e=>{h().map(e,(e=>{h().get(e,"value")===this.state.azureServiceId&&(i={label:h().get(e,"label"),value:h().get(e,"value"),path:h().get(e,"path")})})),this.setState({selectedService:i,fetchedServices:e||[],isFetchingServices:!1,fetchErrorServices:!1})})).catch((e=>{this.setState({fetchErrorServices:!0,isFetchingServices:!1})}))},this.fetchServices=()=>{this.setState({isFetchingServices:!0});let{rule:e,accessToken:t}=this.props,{selectedSubscription:i,selectedResourceGroup:n}=this.state,s={azure_access_token:t,azure_subscription_id:h().get(i,"value"),azure_resource_group_id:h().get(n,"value")};g.default.fetchServices(e,s,m.LIST_SERVICES).then((e=>{this.setState({fetchedServices:e||[],isFetchingServices:!1,fetchErrorServices:!1})})).catch((e=>{this.setState({fetchErrorServices:!0,isFetchingServices:!1})}))},this.fetchApisWithIntegrationId=async()=>{this.setState({isFetchingApis:!0});let{selectedSubscription:e,selectedResourceGroup:t,selectedService:i}=this.state,n=[],s={azure_subscription_id:this.state.azureSubscriptionId||h().get(e,"value"),azure_resource_group_id:this.state.azureResourceGroupId||h().get(t,"value"),azure_service_id:this.state.azureServiceId||h().get(i,"value")};try{const e=await g.default.fetchApisWithIntegrationId(this.props.integrationId,s,m.LIST_APIS);let t=e;if(n=h().find(t,(e=>(null==e?void 0:e.value)===this.state.azureApiId)),h().isEmpty(n)){s.azureApiSearchQuery=this.state.azureApiId;const i=await g.default.fetchApisWithIntegrationId(this.props.integrationId,s,m.LIST_APIS);t=h().unionBy(i,e,"path"),n=h().find(t,(e=>(null==e?void 0:e.value)===this.state.azureApiId))}this.filterApis(t),this.setState({selectedApi:n,fetchedApis:t||[],isFetchingApis:!1,fetchErrorApis:!1})}catch(e){this.setState({fetchErrorApis:!0,isFetchingApis:!1})}},this.fetchApis=()=>{this.setState({isFetchingApis:!0});let{rule:e,accessToken:t}=this.props,{selectedSubscription:i,selectedResourceGroup:n,selectedService:s}=this.state,a={azure_access_token:t,azure_subscription_id:h().get(i,"value"),azure_resource_group_id:h().get(n,"value"),azure_service_id:h().get(s,"value")};g.default.fetchApis(e,a,m.LIST_APIS).then((e=>{this.filterApis(e),this.setState({fetchedApis:e||[],isFetchingApis:!1,fetchErrorApis:!1})})).catch((e=>{this.setState({fetchErrorApis:!0,isFetchingApis:!1})}))},this.fetchApisWithSearchQuery=e=>{const{rule:t,accessToken:i,integrationId:n,formType:s}=this.props,{selectedSubscription:a,selectedResourceGroup:r,selectedService:o,azureSubscriptionId:l,azureResourceGroupId:c,fetchedApis:d,azureServiceId:u}=this.state,p={azure_access_token:i,azure_subscription_id:l||h().get(a,"value"),azure_resource_group_id:c||h().get(r,"value"),azure_service_id:u||h().get(o,"value"),azureApiSearchQuery:e};return(s===m.EDIT?g.default.fetchApisWithIntegrationId:g.default.fetchApis)(s===m.EDIT?n:t,p,m.LIST_APIS).then((e=>{const t=h().unionBy(e,d,"path");return this.setState({fetchedApis:t}),this.shouldSetFetchedApis&&this.filterApis(e),Promise.resolve()})).catch((e=>(pm.logger.error("Something went wrong while fetching APIs",e),Promise.reject(e))))},this.toggleSection=()=>{const{isCollapsed:e,index:t}=this.props;this.props.handleCollapse(t,!e)},this.hideContainer=()=>{let{isContainerVisible:e}=this.state,{index:t}=this.props;this.setState({isContainerVisible:!e}),this.props.handleRemoveSection(t),this.props.handleLinkedApis(null,t)},this.getApiDropdownOption=e=>{const{azureApiSearchQuery:t}=this.state,i=null==e?void 0:e.label;return s.createElement(b.default,{source:i,query:t,highlightClassName:"highlight-dropdown-options"})},this.state={fetchedSubscriptions:this.props.fetchedSubscriptions||[],fetchedResourceGroups:[],fetchedServices:[],isSectionVisible:!0,isContainerVisible:!0,azureSubscriptionId:h().get(this.props,"config.azure_subscription_id"),azureResourceGroupId:h().get(this.props,"config.azure_resource_group_id"),azureServiceId:h().get(this.props,"config.azure_service_id"),azureApiId:h().get(this.props,"config.azure_api_id"),azureApiPath:h().get(this.props,"config.azure_api_path"),filteredApis:[],fetchedApis:[],azureApiSearchQuery:""}}componentDidMount(){const{config:e,formType:t}=this.props;t===m.EDIT?h().isEmpty(e)?(this.props.handleLinkedApis({isCollapsed:!1},this.props.index),h().isEmpty(this.props.fetchedSubscriptions)&&this.fetchSubscriptions()):(this.props.handleLinkedApis(e,this.props.index),h().isEmpty(this.props.fetchedSubscriptions)&&(this.fetchSubscriptionsWithIntegrationId(),this.fetchResourceGroupsWithIntegrationId(),this.fetchServicesWithIntegrationId(),this.fetchApisWithIntegrationId())):(this.props.handleLinkedApis({isCollapsed:!1},this.props.index),h().isEmpty(this.props.fetchedSubscriptions)&&this.fetchSubscriptions())}componentDidUpdate(e,t,i){h().isEqual(e.selectedApiPaths,this.props.selectedApiPaths)||this.filterApis(this.state.fetchedApis)}render(){const{fetchedSubscriptions:e,selectedSubscription:t,isFetchingSubscriptions:i,fetchedResourceGroups:n,selectedResourceGroup:d,isFetchingResourceGroups:u,fetchedServices:p,selectedService:g,isFetchingServices:m,fetchedApis:b,filteredApis:y,selectedApi:_,isFetchingApis:v,isSectionVisible:S,isContainerVisible:I}=this.state,{isCollapsed:E}=this.props;return I?s.createElement(a.default,{direction:"column",className:"observability-azure-add-integration__service__section__container"},s.createElement("div",{className:E?"observability-azure-add-integration__service__section__setup-service":""},s.createElement(a.default,{justifyContent:"space-between"},s.createElement(a.default,{alignItems:"center"},s.createElement("div",{onClick:()=>{this.toggleSection()}},E?s.createElement(l.default,null):s.createElement(o.default,null)),s.createElement(r.default,{className:"observability-azure-add-integration__service__section__header",color:"content-color-primary",typographyStyle:{fontSize:"text-size-m",fontWeight:"text-weight-regular",lineHeight:"line-height-m",fontFamily:"text-family-default"}},"Service (",this.props.serialNumber,") Setup")),!this.props.isRemoveHidden&&s.createElement(a.default,{alignItems:"center",className:"observability-azure-add-integration__service__section__header__link"},s.createElement("div",{onClick:()=>{this.hideContainer()}},s.createElement(c.default,null)),s.createElement("div",{className:"observability-azure-add-integration__service__section__remove",onClick:()=>{this.hideContainer()}},s.createElement(r.default,{className:"observability-azure-add-integration__service__section__header",color:"content-color-secondary",typographyStyle:{fontSize:"text-size-m",fontWeight:"text-weight-regular",lineHeight:"line-height-m",fontFamily:"text-family-default"}},"Remove"))))),!E&&s.createElement("div",{className:"observability-azure-add-integration__service__section"},s.createElement("div",{className:"observability-azure-add-integration__service__component"},s.createElement(f.default,{onChange:this.handleSelectSubscription,options:e||[],value:t,label:"Subscription",placeholder:i?this.renderLoadingState():"Select Subscription",className:i?"dropdown-icon-remove":"",isDisabled:i,emptyStateMessage:"No Subscriptions found",validationState:this.getSubscriptionValidationState()})),s.createElement("div",{className:"observability-azure-add-integration__service__component"},s.createElement(f.default,{onChange:this.handleSelectResourceGroup,options:n||[],value:d,label:"Resource Group",placeholder:u?this.renderLoadingState():"Select Resource Group",className:u?"dropdown-icon-remove":"",isDisabled:!h().get(t,"value")||u,emptyStateMessage:"No Resource Groups found",validationState:this.getResourceGroupValidationState()})),s.createElement("div",{className:"observability-azure-add-integration__service__component"},s.createElement(f.default,{onChange:this.handleSelectService,options:p||[],value:g,label:"Service",placeholder:m?this.renderLoadingState():"Select Service",className:m?"dropdown-icon-remove":"",isDisabled:!h().get(d,"value")||m,emptyStateMessage:"No Services found",validationState:this.getServiceValidationState()})),s.createElement("div",{className:"observability-azure-add-integration__service__component"},s.createElement(f.default,{onChange:this.handleSelectApi,options:y||[],value:_,label:"API Version",placeholder:v?this.renderLoadingState():"Select API Version",className:v?"dropdown-icon-remove":"",isDisabled:!h().get(g,"value")||v,emptyStateMessage:"No APIs found",validationState:this.getApiValidationState(),customOptionComponent:this.getApiDropdownOption,asyncLoader:async({search:e})=>{this.shouldSetFetchedApis=e,e||this.filterApis(b),this.setState({azureApiSearchQuery:e}),e&&await this.fetchApisWithSearchQuery(e)}})))):s.createElement("div",null)}})||n},"./integrations/api-observability/components/base/CancelButton.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return h}});var n,s=i("../../node_modules/react/index.js"),a=i("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),r=i("./appsdk/workbench/TabService.js"),o=i("./js/services/NavigationService.js"),l=i("./api-dev/constants/APISubViews.js"),c=i("./js/stores/StoreManager.js"),d=i("./integrations/api-observability/stores/APIObservabilityStore.js");let h=(0,i("../../node_modules/mobx-react/dist/mobx-react.module.js").observer)(n=class extends s.Component{constructor(e){super(e),this.navigateToDeploymentsTab=()=>{let{apiId:e,apiVersionId:t,integrationId:i,redirectUrl:n}=this.props,s={apiId:e,versionId:t},a={apiId:e};i&&(a.integrationId=i),r.default.closeByRoute(n,a),o.default.transitionTo("build.apiVersion",s,{tab:l.DEPLOYMENT})},this.state={}}render(){return s.createElement(a.default,{type:"secondary",size:"medium",onClick:()=>{this.props.isBrowseIntegrationFlow?o.default.back():this.navigateToDeploymentsTab()},text:this.props.text,isDisabled:this.props.isDisabled||(0,c.resolveStoreInstance)(d.default).isAdding})}})||n},"./integrations/api-observability/components/base/CustomDropdown.js":function(e,t,i){i.r(t);var n=i("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/SingleSelect/SingleSelect.js");const s=(0,i("../../node_modules/styled-components/dist/styled-components.browser.esm.js").default)(n.default)`
  .aether-dropdown__value-container{
    >span {
      width: 100%;
    }
  }
`;t.default=s},"./integrations/api-observability/components/base/CustomMultiSelect.js":function(e,t,i){i.r(t);var n=i("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),s=i("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/MultiSelect/MultiSelect.js"),a=i("./integrations/api-observability/constants.ts");const r=(0,n.default)(s.default)`
  & .aether-multiselect-dropdown__menu {
    width: ${a.DROPDOWN_WIDTH}px;
  }
`;t.default=r},"./integrations/api-observability/components/base/DeploySchemaActions.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return c}});var n=i("../../node_modules/react/index.js"),s=i("./appsdk/workbench/TabService.js"),a=i("../../node_modules/@postman/aether/esmLib/src/components/ButtonGroup/ButtonGroup.js"),r=i("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),o=i("./integrations/navigation/constants.js"),l=i("./node_modules/lodash/lodash.js");class c extends n.Component{constructor(e){super(e),this.state={deployingAPI:!1}}render(){const{disabled:e,loading:t,onDeploy:i,payload:c,deployButtonText:d}=this.props;return n.createElement(a.default,{className:"deploy-form-container__segment__actions-container"},n.createElement(r.default,{className:"deploy-form-container__segment__actions-container__deploy",type:"primary",size:"medium",text:l.isEmpty(d)?"Deploy":d,onClick:i,tooltip:e&&"Make sure that you have entered all the mandatory fields",isDisabled:e,isLoading:t}),n.createElement(r.default,{className:"deploy-form-container__segment__actions-container__cancel",type:"secondary",size:"medium",text:"Cancel",onClick:()=>{s.default.closeByRoute(o.V10_API_DEPLOY_URL,{apiId:l.get(c,"apiId"),integrationId:l.get(c,"integrationId","").toString()})},isDisabled:t}))}}},"./integrations/api-observability/components/base/EditIntegration.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return _}});var n,s=i("../../node_modules/react/index.js"),a=i("./js/components/base/Buttons.js"),r=i("./js/components/base/LoadingIndicator.js"),o=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),l=i("./js/stores/StoreManager.js"),c=i("./integrations/api-observability/stores/APIObservabilityStore.js"),d=i("./js/stores/IntegrationsStore.js"),h=i("./js/services/NavigationService.js"),u=i("./appsdk/workbench/TabService.js"),p=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),g=i("./js/modules/services/AnalyticsService.js"),m=i("./integrations/navigation/constants.js"),f=i("./integrations/api-observability/constants.ts"),b=i("./node_modules/lodash/lodash.js");function y(){return y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},y.apply(this,arguments)}let _=(0,p.observer)(n=class extends s.Component{constructor(e){super(e),this.store=(0,l.resolveStoreInstance)(c.default),this.integrationsStore=(0,l.resolveStoreInstance)(d.default),this.state={isUpdating:!1}}render(){const{disabled:e,payload:t,integrationId:i,service:n,alignLeft:l,setIsUpdatingIntegration:c,...d}=this.props,{rule:p}=t;return s.createElement("div",{className:"integrations-add-actions__button--container"},s.createElement(a.Button,y({type:"primary",className:"integrations-add-actions__button--save-changes",disabled:e||this.state.isUpdating,size:"small",tooltip:e?"Make sure that you have entered all the mandatory fields":"",onClick:()=>{this.setState({isUpdating:!0},(()=>{c(!0),o.default.updateIntegration(i,t).then((e=>{200===e.status&&e.body.model_id?(pm.toasts.success(`You updated the ${b.get(e.body,"data.name")} integration`,{noIcon:!0,title:"Changes Saved"}),g.default.addEventV2({category:"integrations",action:p+"_edited_integration",label:"team_integrations_edit_forms",value:1}),this.setState({isUpdating:!1}),c(!1),this.integrationsStore.setRuleSpecificTeamIntegrations(p,null),this.store.fetchIntegrationInstance("apiversion",t.executor),pm.windowEvents.emit(`${f.API_OBSERVABILITY}-integration-edited`,{apiId:t.api_id,apiVersionId:t.executor,integrationId:i}),h.default.transitionTo("build.apiVersion",{apiId:t.api_id,versionId:t.executor},{tab:f.DEPLOYMENT_TAB}),u.default.closeByRoute(m.V10_API_EDIT_DEPLOYMENT_INTEGRATION_URL,{apiId:t.api_id,integrationId:i})):(pm.toasts.error("Looks like this isn't working right now. Please try again later.",{noIcon:!0,title:"Unable to save changes"}),this.setState({isUpdating:!1}),c(!1))})).catch((e=>{this.setState({isUpdating:!1}),c(!1),pm.toasts.error(b.get(e,"error.details")&&b.get(e,"error.details.message")||b.get(e,"error.message")||"Looks like this isn't working right now. Please try again later.",{noIcon:!0,title:"Unable to save changes"}),pm.logger.error("Something went wrong while updating a new integration",e)}))}))}},d)," ",this.state.isUpdating?s.createElement(r.default,null):this.props.children))}})||n},"./integrations/api-observability/components/base/EditIntegrationV2.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return b}});var n=i("../../node_modules/react/index.js"),s=i("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),a=i("./appsdk/workbench/TabService.js"),r=i("./integrations/navigation/constants.js"),o=i("./js/services/NavigationService.js"),l=i("./api-dev/constants/APISubViews.js"),c=i("./node_modules/lodash/lodash.js"),d=i.n(c),h=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),u=i("./js/modules/services/AnalyticsService.js"),p=i("./js/stores/StoreManager.js"),g=i("./integrations/api-observability/stores/APIObservabilityStore.js"),m=i("./js/stores/IntegrationsStore.js"),f=i("./integrations/api-observability/constants.ts");function b(e){let t=(0,p.resolveStoreInstance)(g.default),i=(0,p.resolveStoreInstance)(m.default);const c=(0,n.useCallback)((e=>{let{apiId:i,apiVersionId:n,redirectUrl:s,integrationId:r}=e,c={apiId:i,versionId:n,integrationId:r};a.default.closeByRoute(s,{apiId:i,integrationId:r}),t.initializeApiObservabilityStore({apiId:i,apiVersionId:n,category:f.API_OBSERVABILITY}),o.default.transitionTo("build.apiVersion",c,{tab:l.DEPLOYMENT})}),[]),b=(0,n.useCallback)((e=>{let{service:t,rule:i}=e;o.default.transitionTo(r.TEAM_INTEGRATIONS_IDENTIFIER,{serviceId:t,ruleId:i})}),[]),y=(0,n.useCallback)(((e,n)=>{const{rule:s,integrationId:a,isBrowseIntegrationFlow:r}=e;n||(n=d().get(e,"payload")),t.updateIsAdding(!0),h.default.updateIntegration(a,n).then((n=>{t.updateIsAdding(!1),200===d().get(n,"status")&&d().get(n,"body.model_id")?(pm.toasts.success("Successfully updated integration"),u.default.addEventV2({category:"integrations",action:s+"_edited_integration",label:"team_integrations_edit_forms",value:1}),r?(i.setRuleSpecificTeamIntegrations(s,null),i.refetchTeamIntegrations(),i.resetAddIntegrationDependencies(),t.fetchIntegrationInstance("apiversion",e.apiVersionId),b(e)):c(e)):pm.toasts.error("Something went wrong while updating integration")})).catch((e=>{t.updateIsAdding(!1),"integrationFoundError"===d().get(e,"error.name")?pm.toasts.error("The integration already exists."):pm.toasts.error("Something went wrong while updating integration. Please try again."),pm.logger.error("Something went wrong while updating integration",e)}))}),[]);return n.createElement(s.default,{type:"primary",size:"medium",onClick:()=>{d().isFunction(e.customUpdateIntegrationHandler)?e.customUpdateIntegrationHandler().then((t=>{y(e,t)})):y(e)},isDisabled:t.isAdding||e.isDisabled,text:e.text,isLoading:e.isLoading||t.isAdding})}},"./integrations/api-observability/components/base/ImportSchemaActions.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return I}});var n=i("./node_modules/lodash/lodash.js"),s=i.n(n),a=i("../../node_modules/react/index.js"),r=i("./appsdk/workbench/TabService.js"),o=i("../../packages/api-design/schema-service/index.js"),l=i("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),c=i("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),d=i("./integrations/navigation/constants.js"),h=i("./js/services/NavigationService.js"),u=i("./api-dev/constants/APISubViews.js"),p=i("./integrations/api-observability/constants.ts"),g=i("./js/modules/services/AnalyticsService.js"),m=(i("../../packages/api-design/api-definition-service/index.js"),i("./node_modules/uuid/v4.js")),f=i.n(m),b=i("../../packages/api-design/api-definition-store/index.js"),y=(i("./js/stores/StoreManager.js"),i("./api-dev/services/APIDevService.js")),_=i("./integrations/api-observability/components/import/ImportGatewayServiceConstants.js"),v=i("./api-dev/interfaces/APIInterface.js"),S=i("../../packages/api-design/api-definition-ui/index.js");class I extends a.Component{constructor(e){super(e),this.state={isImporting:!1,errorImport:!1,apiRelationId:null,fileId:null},this.handleImport=this.handleImport.bind(this),this.handleNavigation=this.handleNavigation.bind(this),this.addSchema=this.addSchema.bind(this)}handleNavigation(){const{apiId:e,versionId:t}=s().get(this.props,"payload",{}),{formSource:i}=this.props;if(r.default.closeByRoute(d.V10_API_ADD_DEPLOYMENT_INTEGRATION_URL,{apiId:e}),s().isEqual(i,p.IMPORT_FORM_SOURCES.INTEGRATION_SETUP))h.default.transitionTo(p.API_BUILDER_ROUTE_IDENTIFIERS.API_VERSION,{apiId:e,versionId:t},{tab:u.DEPLOYMENT});else{let i=s().get(h.default.getActiveQueryParams().get(),"branch");setTimeout((()=>{h.default.transitionTo("build.apiDefinitionFile",{apiId:e,apiVersionId:t,apiDefinitionId:this.state.apiRelationId,fileId:this.state.fileId},i&&{branch:i})}),3e3)}}handleCancel(){const{apiId:e}=s().get(this.props,"payload",{});r.default.closeByRoute(d.V10_API_ADD_DEPLOYMENT_INTEGRATION_URL,{apiId:e})}async createOrReplaceApiDefinition(e,t,i,n){try{const i=f()(),a=b.APIDefinitionTypeService.getDefinitionTypeFromSchemaType(s().get(n,"type")),r=`${i}.${s().get(n,"language","json")}`,o=[{type:_.FILE,name:r,path:r,content:s().get(n,"content")}],l=await(0,S.createOrReplaceDefinition)({apiId:e,apiVersionId:t,items:o,options:{type:a}});let c=await l.getRedirectionFileId();return Promise.resolve({id:c})}catch(e){return Promise.reject(e)}}addSchema(){const{payload:e,apiDefinition:t}=this.props,i=s().get(e,"schemaContent",{}),n=s().get(e,"apiId"),a=s().get(e,"versionId");return y.default.getRelations(n,a).then((e=>{const r=s().get(e,"apiDefinition")&&s().get(s().keys(e.apiDefinition),0),l=s().get(e,"schema")&&s().get(s().keys(e.schema),0);return this.setState({apiRelationId:null!=r?r:l}),l?(0,o.updateSchema)(l,i):this.createOrReplaceApiDefinition(n,a,s().get(t,"id",r),i)}))}async handleImport(){const{onImport:e,rule:t,formSource:i,payload:n,onCancel:a}=this.props,{apiId:r}=n,o=(await(0,v.getAPI)(r)).version.apiRepositoryStore;if(!o.canEditAPISource.allowed)return a&&a(),void o.openEditDisabledModal();this.setState({isImporting:!0,errorImport:!1},(()=>{this.addSchema().then((n=>{g.default.addEventV2({category:"gateway-integration",action:`import-schema-${i}`,label:t,value:1}),this.setState({fileId:s().get(n,"id")},(()=>{this.handleNavigation()})),pm.toasts.success("Successfully imported definition."),this.setState({isImporting:!1,errorImport:!1}),s().isFunction(e)&&e()})).catch((e=>{pm.logger.error("Import definition via gateway error ~"+e),pm.toasts.error("Error occurred while importing definition"),this.setState({isImporting:!1,errorImport:e})}))}))}render(){const{disabled:e,tooltipText:t,formSource:i,isLoading:n}=this.props,{isImporting:r}=this.state,o=s().isEqual(i,p.IMPORT_FORM_SOURCES.DEPLOY_DASHBOARD),d=t||"Make sure that you have entered all the mandatory fields",h=!o&&"Maybe later";return a.createElement(l.default,{justifyContent:"flex-start",direction:o?"row-reverse":"row",grow:1,shrink:1,gap:"spacing-s"},a.createElement(c.default,{className:"deploy-form-container__segment__actions-container__deploy",type:"primary",size:"medium",text:"Import",onClick:this.handleImport,tooltip:e&&d,isDisabled:e||r||n,isLoading:r||n}),a.createElement(c.default,{className:"deploy-form-container__segment__actions-container__cancel",type:"secondary",size:"medium",text:h||"Cancel",onClick:()=>{s().isFunction(this.props.onCancel)&&this.props.onCancel(),this.handleCancel()},isDisabled:r}))}}},"./integrations/api-observability/components/base/NativeChart.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return o}});var n=i("../../node_modules/react/index.js"),s=i("./node_modules/chart.js/auto/auto.js"),a=i("./node_modules/chartjs-plugin-datalabels/dist/chartjs-plugin-datalabels.esm.js"),r=(i("./node_modules/chartjs-adapter-moment/dist/chartjs-adapter-moment.esm.js"),i("../../node_modules/mobx-react/dist/mobx-react.module.js"));function o(e){const[t,i]=(0,n.useState)(null),r=(0,n.useRef)(null);return(0,n.useEffect)((()=>{let t={data:e.data,plugins:[a.default],options:e.options};e.type&&(t.type=e.type);let n=new s.default(r.current,t);return i(n),()=>{n.destroy(),i(null)}}),[e.data,e.options]),n.createElement("div",{className:"native-chart"},n.createElement("canvas",{ref:r}))}o.propTypes={type:r.PropTypes.string,data:r.PropTypes.object,options:r.PropTypes.object}},"./integrations/api-observability/components/base/TableEmptyState.js":function(e,t,i){i.r(t);var n=i("../../node_modules/react/index.js"),s=i("../../node_modules/@postman/aether/esmLib/src/components/BlankState/BlankState.js");t.default=function({title:e,description:t,secondaryAction:i,illustration:a}){return n.createElement(s.default,{title:e,description:t,secondaryAction:i},a)}},"./integrations/api-observability/components/common/ErrorState.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return o}});var n=i("../../node_modules/react/index.js"),s=i("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/UnauthorizedError.js"),a=i("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/PageNotFound.js"),r=i("./node_modules/lodash/lodash.js");class o extends n.Component{constructor(e){super(e)}render(){return n.createElement("div",{className:"team-integrations-error-state"},n.createElement("div",{className:"team-integrations-error-state__illustration-wrapper team-integrations-error-state__illustration-wrapper--collections"},function(e){let t=e.illustration||n.createElement(s.default,null);return r.isEqual(r.get(e,"error.name"),"instanceNotFoundError")&&(t=n.createElement(a.default,null)),t}(this.props.errorDetails)),n.createElement("div",{className:"team-integrations-error-state__title"},function(e){let t=e.title||"Something went wrong";return 404===e.status||400===e.status?t="We can't seem to find this page":"ESOCKETTIMEDOUT"===r.get(e,"error.details.code","")?t="Your request timed out":r.isEqual(r.get(e,"error.name"),"instanceNotFoundError")&&(t="Couldn't find the run log for this Integration"),t}(this.props.errorDetails)),n.createElement("div",{className:"team-integrations-error-state__subtitle"},function(e){let t=e.subtitle||"Try refreshing the page. If you keep getting this error, contact help@postman.com.";return 404===e.status||400===e.status?t="Looks like the page you're looking for doesn't exist.":r.isEqual(r.get(e,"error.name"),"instanceNotFoundError")&&(t="This integration may have been deleted or the URL maybe incorrect."),t}(this.props.errorDetails)))}}},"./integrations/api-observability/components/common/ImportSchemaBanner.js":function(e,t,i){i.r(t);var n=i("../../node_modules/react/index.js"),s=i("../../node_modules/@postman/aether/esmLib/src/components/Banner/Banner.js"),a=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js");t.default=function({isSchemaPresent:e}){let t=e?"Importing a definition will replace the existing definition":"Importing a definition will create a new definition";return n.createElement(s.default,{status:"info"},n.createElement(a.default,null,t))}},"./integrations/api-observability/components/common/SchemaSourceSelector.js":function(e,t,i){i.r(t),i.d(t,{SchemaSourceSelector:function(){return S}});var n,s=i("../../node_modules/react/index.js"),a=i("../../node_modules/mobx/lib/mobx.module.js"),r=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),o=i("./node_modules/prop-types/index.js"),l=i.n(o),c=i("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),d=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),h=i("../../node_modules/@postman/aether/esmLib/src/components/Tooltip/Tooltip.js"),u=i("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/SingleSelect/SingleSelect.js"),p=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-descriptive-branch-stroke.js"),g=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-descriptive-versions-stroke.js"),m=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-descriptive-schemaOutline-stroke.js"),f=i("./api-dev/services/APIDevService.js"),b=i("./integrations/api-observability/constants.ts"),y=i("./api-dev/interfaces/APIInterface.js"),_=i("./node_modules/lodash/lodash.js");function v({label:e,type:t,isDisabled:i}){let n=null;switch(t){case b.SCHEMA_SOURCE_TYPE.BRANCH:n=s.createElement(p.default,{color:i?"content-color-tertiary":"content-color-primary"});break;case b.SCHEMA_SOURCE_TYPE.RELEASE:n=s.createElement(g.default,{color:"content-color-primary"});break;case b.SCHEMA_SOURCE_TYPE.SCHEMA:n=s.createElement(m.default,{color:"content-color-primary"})}const a=s.createElement(c.default,{alignItems:"center",gap:"spacing-xs"},n,s.createElement(d.default,null,e));return i?s.createElement(h.default,{content:"Changes in this branch need to be pushed before deploying."},a):a}let S=(0,r.observer)(n=class extends s.Component{constructor(e){super(e),this.state={sources:[],releases:[],branch:null,loadingAPI:!1,isAPISynced:!1,loadingSources:!1,errorSources:!1,selectedSource:null,apiId:_.get(e,"apiId",null),versionId:_.get(e,"versionId",null),fetchingFilesOnBranch:!1},this.populate=this.populate.bind(this),this.handleSourceChange=this.handleSourceChange.bind(this),this.fetchFilesOnBranch=this.fetchFilesOnBranch.bind(this),this.handleBranchSwitch=this.handleBranchSwitch.bind(this)}componentDidMount(){this.setState({loadingAPI:!0}),(0,y.getAPI)(this.state.apiId).then((async e=>{this.api=e,await(0,a.when)((()=>e.version.isLoaded));const t=_.get(this,"api.version.apiRepositoryStore.sourceControlStore.stagedFilesList",[]),i=_.get(this,"api.version.apiRepositoryStore.sourceControlStore.unStagedFilesList",[]),n=_.get(this,"api.version.apiRepositoryStore.branch");this.setState({loadingAPI:!1,isAPISynced:_.isEmpty(t)&&_.isEmpty(i),branch:n},this.populate())})).catch((e=>{this.setState({loadingAPI:!1,errorSources:"Something went wrong. Please refresh."}),pm.logger.error("Error occurred while fetching API",e)}))}fetchAPIGitLinkStatus(e){return(0,y.isAPIGitLinked)(e).then((e=>Promise.resolve(e))).catch((e=>(pm.logger.error("Error occurred while fetching API<>Git link status",e),Promise.resolve(!1))))}getReleases(e,t){return f.default.getAllReleases(e,t).then((e=>(this.setState({releases:e}),Promise.resolve(e)))).catch((e=>Promise.reject(e)))}handleBranchSwitch(){const e=_.clone(this.state.sources),{isAPISynced:t,branch:i}=this.state,n=_.filter(e,(e=>e.type!==b.SCHEMA_SOURCE_TYPE.BRANCH)),s=[{label:i,value:i,type:b.SCHEMA_SOURCE_TYPE.BRANCH,isDisabled:!t},...n];this.setState({sources:s},(()=>this.handleSourceChange({label:"Select",value:null})))}populate(){let{apiId:e,versionId:t}=this.props;e&&t&&(this.branchReactionDisposer=(0,a.reaction)((()=>_.get(this,"api.version.apiRepositoryStore.branch")),(e=>{this.setState({branch:e},this.handleBranchSwitch)})),this.isAPISyncedDisposer=(0,a.reaction)((()=>{const e=_.get(this,"api.version.apiRepositoryStore.sourceControlStore.stagedFilesList",[]),t=_.get(this,"api.version.apiRepositoryStore.sourceControlStore.unStagedFilesList",[]);return _.isEmpty(e)&&_.isEmpty(t)}),(e=>{this.setState({isAPISynced:e},this.handleBranchSwitch)})),this.setState({loadingSources:!0,errorSources:!1}),Promise.all([this.getReleases(e,t),this.fetchAPIGitLinkStatus(e)]).then((e=>{let t=e[0],i=e[1],n=[],s=_.get(this,"api.version.apiRepositoryStore.branch"),a=this.state.isAPISynced,r=_.keys(_.get(this,"api.version.relationsStore.relations.schema")),o=_.keys(_.get(this,"api.version.relationsStore.relations.apiDefinition")),l=_.isEmpty(r)&&_.isEmpty(o);if(i&&n.push({label:s,value:s,type:b.SCHEMA_SOURCE_TYPE.BRANCH,isDisabled:!a}),_.each(t,(e=>{let t={label:_.get(e,"name"),value:_.get(e,"id"),type:b.SCHEMA_SOURCE_TYPE.RELEASE,isDisabled:!1};_.get(e,"entities.apiDefinitions")?(t.apiDefinitionId=_.get(e,"entities.apiDefinitions.0.entityId"),t.tagId=_.get(e,"entities.apiDefinitions.0.tag")):(t.schemaId=_.get(e,"entities.schemas.0.entityId"),t.tagId=_.get(e,"entities.schemas.0.tag")),n.push(t)})),!l&&!i){let e={label:b.API_DEFINITION,type:b.SCHEMA_SOURCE_TYPE.SCHEMA,isDisabled:!1};e=_.isEmpty(o)?_.merge({},e,{schemaId:r[0],value:r[0]}):_.merge({},e,{apiDefinitionId:o[0],value:o[0]}),n.push(e)}_.isEmpty(n)&&n.push({label:"Add API definition to export/deploy API",type:"empty",value:null,isDisabled:!0}),this.setState({sources:n,loadingSources:!1,errorSources:!1})})).catch((e=>{pm.logger.error("Error while populating sources",e),this.setState({loadingSources:!1,errorSources:"Something went wrong while fetching sources."})})))}handleSourceChange(e){if(!e||!e.value)return this.setState({selectedSource:e}),void(_.isFunction(this.props.onSourceChange)&&this.props.onSourceChange(null));let t=_.cloneDeep(e);_.isEqual(b.SCHEMA_SOURCE_TYPE.BRANCH,e.type)?this.fetchFilesOnBranch(this.state.apiId,((e,i=[])=>{_.isEmpty(e)&&(t=_.merge(t,{files:i}),this.setState({selectedSource:t,errorSources:!1},(()=>{_.isFunction(this.props.onSourceChange)&&this.props.onSourceChange(t)})))})):this.setState({selectedSource:t,errorSources:!1},(()=>{_.isFunction(this.props.onSourceChange)&&this.props.onSourceChange(t)}))}fetchFilesOnBranch(e,t){_.isEmpty(e)||this.setState({fetchingFilesOnBranch:!0,errorSources:!1},(()=>{(0,y.getAPILinkedEntityDataOnBranch)(e,b.SCHEMA_SOURCE_TYPE.API_DEFINITION).then((e=>{let i=[];return _.forEach(e,(e=>{i.push(_.pick(e,["name","path","language"]))})),this.setState({fetchingFilesOnBranch:!1}),t(null,i)})).catch((e=>(this.setState({fetchingFilesOnBranch:!1,errorSources:"Error occurred while fetching API definition files. Please refresh."}),pm.logger.error("Error occurred while fetching API definition files.",e),t(e))))}))}componentWillUnmount(){this.branchReactionDisposer(),this.isAPISyncedDisposer()}render(){const{sources:e,loadingSources:t,loadingAPI:i,errorSources:n,selectedSource:a,fetchingFilesOnBranch:r}=this.state;return s.createElement(u.default,{label:"Definition Source",options:e||[],placeholder:t||i?"Loading...":r?"Fetching files...":"Select",isDisabled:!!t,value:a,customOptionComponent:v,onChange:this.handleSourceChange,validationState:!_.isEmpty(n)&&{status:"error",message:n},isOptionDisabled:e=>e.isDisabled,triggerWidth:"parent"})}})||n;S.propTypes={apiId:l().string.isRequired,versionId:l().string.isRequired,onSourceChange:l().func.isRequired,preSelectedSource:l().object},t.default=S},"./integrations/api-observability/components/dashboard/aws-gateway/InfoSegment.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return a}});var n=i("../../node_modules/react/index.js"),s=i("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js");class a extends n.Component{constructor(e){super(e),this.state={value:""},this.handleCopyToClipboard=this.handleCopyToClipboard.bind(this)}componentDidMount(){this.setState({value:this.props.value})}handleCopyToClipboard(){try{window.clipboardData.setData("Text",this.props.value),pm.toasts.success(`${this.props.title} copied to clipboard`)}catch(e){navigator.clipboard.writeText(this.props.value),pm.toasts.success(`${this.props.title} copied to clipboard`)}}render(){return n.createElement("div",{className:"integrations-info-segment"},n.createElement("div",{className:"integrations-info-segment__title"},this.props.title),n.createElement("div",{className:"integrations-info-segment__description"},this.props.description," ",this.props.children),n.createElement("div",{className:"integrations-info-segment__value-container"},n.createElement("div",{className:"input input-box integrations-info-segment__value-segment"},n.createElement("div",{className:"integrations-info-segment__value"},this.props.value)),n.createElement("div",{className:"input input-box integrations-info-segment__copy-btn",onClick:this.handleCopyToClipboard},n.createElement("div",{className:"integrations-info-segment__copy-btn-container"},n.createElement(s.default,{name:"icon-action-copy-stroke",color:"content-color-primary"})))))}}},"./integrations/api-observability/components/deploy/AwsDeployForm.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return v}});var n=i("../../node_modules/react/index.js"),s=i("./node_modules/lodash/lodash.js"),a=i.n(s),r=i("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),o=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),l=i("../../node_modules/@postman/aether/esmLib/src/components/CheckBox/Checkbox.js"),c=i("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/SingleSelect/SingleSelect.js"),d=i("../../node_modules/@postman/aether/esmLib/src/components/TextArea/TextArea.js"),h=i("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),u=i("./integrations/api-observability/services/ApiGatewayService.js"),p=i("./integrations/api-observability/components/base/DeploySchemaActions.js"),g=i("./js/services/NavigationService.js"),m=i("./appsdk/workbench/TabService.js"),f=i("./integrations/api-observability/constants.ts"),b=i("./integrations/navigation/constants.js"),y=i("./integrations/api-observability/components/common/SchemaSourceSelector.js"),_=i("./js/modules/services/AnalyticsService.js");class v extends n.Component{constructor(e){super(e),this.populateStageDropdown=this.populateStageDropdown.bind(this),this.handleSourceChange=this.handleSourceChange.bind(this),this.handleStageChange=this.handleStageChange.bind(this),this.handleDeployToStage=this.handleDeployToStage.bind(this),this.handleDeploy=this.handleDeploy.bind(this),this.getDeployPayload=this.getDeployPayload.bind(this),this.isConfigurationCorrect=this.isConfigurationCorrect.bind(this),this.state={integrationData:a().get(e,"integrationData"),context:a().get(e,"context"),stages:[],loadingStages:!1,errorStages:!1,description:"",selectedSource:null,selectedStage:null,deployToStage:!1,disableDeploy:!1,loadingDeploy:!1,apiGatewayName:null,deployButtonText:"Export"}}componentDidMount(){this.populateStageDropdown(),u.default.fetchAPIGatewayMeta(a().get(this.state,"integrationData.id")).then((e=>{this.setState({apiGatewayName:a().get(e,"Name",a().get(e,"name",null))})})).catch((e=>{pm.logger.error("Error occurred while fetching gateway meta",e)}))}isConfigurationCorrect(){let{selectedSource:e,selectedStage:t,deployToStage:i}=this.state;return!!e&&!(i&&!t)}getDeployPayload(){let{selectedSource:e,selectedStage:t,deployToStage:i,description:n}=this.state,s={exportOnly:!i},r=a().isEqual(e.type,f.SCHEMA_SOURCE_TYPE.BRANCH);return i&&(s.stage=t.value,a().isEmpty(n)||(s.description=n)),r?(s.branch=e.value,s.files=e.files||[]):(e.schemaId&&(s.schemaId=e.schemaId),e.apiDefinitionId&&(s.apiDefinitionId=e.apiDefinitionId),a().isEqual(e.type,f.SCHEMA_SOURCE_TYPE.RELEASE)&&(s.tagId=e.tagId,s.releaseId=e.value)),s}handleDeploy(){if(!this.isConfigurationCorrect())return;this.setState({loadingDeploy:!0});let e=this.getDeployPayload(),t=a().get(this.state,"integrationData.id"),i=a().get(this.state,"integrationData.variables.postman_api_id").toString(),n=a().get(this.state,"integrationData.executor").toString(),s=a().get(this.state,"apiGatewayName"),r="Successfully Deployed API",o=a().get(this.state,"integrationData.rule"),l=a().get(this.state,"context"),c={apiId:i,versionId:n},d={tab:f.DEPLOYMENT_TAB},h="build.apiVersion",p=a().get(this.state,"selectedSource.type"),y=this.state.deployToStage?f.SOURCE_TO_DEPLOY_ACTION[p]:f.SOURCE_TO_EXPORT_ACTION[p];l&&!a().isEmpty(l.releaseId)&&(h="build.release",c.releaseId=a().get(l,"releaseId")),r=s&&this.state.deployToStage?`API Deployed on ${s}`:"Successfully exported",u.default.deploySchema(t,e).then((e=>{if(!e.status||200!==e.status)throw e;m.default.closeByRoute(b.V10_API_DEPLOY_URL,{apiId:i,integrationId:a().toString(t)}),g.default.transitionTo(h,c,d),pm.windowEvents.emit(`${f.API_OBSERVABILITY}-deploy-triggered`,{apiId:i,apiVersionId:n}),_.default.addEventV2({category:"gateway-integration",action:y,label:o,value:1}),pm.toasts.success(r),this.setState({loadingDeploy:!1})})).catch((e=>{a().isEqual(a().get(e,"error.type"),"notFoundError")?pm.toasts.error("We could not find the definition you are looking for.",{title:"Deployment failed"}):pm.toasts.error(a().get(e,"error.message")||"Error occurred while deploying.",{title:a().get(e,"error.title")||"AWS Gateway error",noIcon:!0}),pm.logger.error("Error occurred while deploying",e),this.setState({loadingDeploy:!1})}))}handleDeployToStage(){const e=this.state.deployToStage;this.setState({deployToStage:!e},(()=>{this.state.deployToStage?this.setState({deployButtonText:"Deploy"}):this.setState({deployButtonText:"Export"})}))}handleSourceChange(e){this.setState({selectedSource:e})}handleStageChange(e){this.setState({selectedStage:e})}populateStageDropdown(){const e=a().get(this.state,"integrationData.id");this.setState({loadingStages:!0,errorStages:!1}),u.default.fetchStages(e).then((e=>{let t=[];a().each(e,(e=>{t.push({label:a().get(e,"StageName")||a().get(e,"stageName"),value:a().get(e,"StageName")||a().get(e,"stageName")})})),this.setState({loadingStages:!1,errorStages:!1,stages:t})})).catch((e=>{pm.logger.error("Error occurred while fetching stages",e),this.setState({errorStages:"Error occurred while fetching stages",loadingStages:!1})}))}render(){const{selectedStage:e,loadingStages:t,deployButtonText:i,stages:s,deployToStage:u,description:g,loadingDeploy:m,disableStage:f,errorStages:b}=this.state,_=this.props.integrationData;return n.createElement("div",{className:"deploy-form-container"},n.createElement(r.default,{color:"content-color-primary",type:"h1",text:"Export and deploy definition on AWS"}),n.createElement("div",{className:"deploy-form-container__description"},n.createElement(o.default,{type:"body-large",color:"content-color-secondary"},"Deploying an API from Postman will export the definition to the gateway and trigger deployment on the selected stage.")),n.createElement("div",{className:"deploy-form-container__segment"},n.createElement(y.default,{onSourceChange:this.handleSourceChange,apiId:a().get(this.state,"integrationData.variables.postman_api_id"),versionId:a().get(this.state,"integrationData.executor")})),n.createElement("div",{className:"deploy-form-container__segment"},n.createElement(l.default,{isChecked:u,label:"Deploy on a stage",helperText:"This will push the definition from Postman onto an AWS stage.",onChange:this.handleDeployToStage,infoText:"The deployment will be successful only if at least one integration is configured over any API route in AWS"})),u&&n.createElement("div",{className:"deploy-form-container__segment"},n.createElement(c.default,{label:"AWS Stage",options:s,placeholder:t?"Loading...":"Select",isDisabled:!!(t||f||b),value:e,onChange:this.handleStageChange,validationState:!!b&&{status:"error",message:b}})),u&&n.createElement("div",{className:"deploy-form-container__segment"},n.createElement(d.default,{label:n.createElement(h.default,{text:"Deployment Description"}),value:g,placeholder:"Enter description",onChange:e=>this.setState({description:e.target.value})})),n.createElement("div",{className:"deploy-form-container__actions-segment"},n.createElement(p.default,{payload:{apiId:a().get(_,"variables.postman_api_id"),versionId:a().get(_,"executor"),integrationId:a().get(_,"id")},onDeploy:this.handleDeploy,disabled:!this.isConfigurationCorrect(),loading:m,deployButtonText:i})))}}},"./integrations/api-observability/components/deploy/Azure.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return y}});var n=i("../../node_modules/react/index.js"),s=i("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),a=i("../../node_modules/@postman/aether/esmLib/src/components/TextArea/TextArea.js"),r=i("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),o=i("../../node_modules/@postman/aether/esmLib/src/components/CheckBox/Checkbox.js"),l=i("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/SingleSelect/SingleSelect.js"),c=i("./integrations/api-observability/services/AzureService.js"),d=i("./integrations/api-observability/components/base/DeploySchemaActions.js"),h=i("./js/services/NavigationService.js"),u=i("./appsdk/workbench/TabService.js"),p=i("./integrations/api-observability/constants.ts"),g=i("./integrations/navigation/constants.js"),m=i("./integrations/api-observability/components/common/SchemaSourceSelector.js"),f=i("./js/modules/services/AnalyticsService.js"),b=i("./node_modules/lodash/lodash.js");class y extends n.Component{constructor(e){super(e),this.populateRevisionDropdown=this.populateRevisionDropdown.bind(this),this.handleSourceChange=this.handleSourceChange.bind(this),this.handleRevisionChange=this.handleRevisionChange.bind(this),this.handleExportToExistingRevision=this.handleExportToExistingRevision.bind(this),this.handleDeploy=this.handleDeploy.bind(this),this.getDeployPayload=this.getDeployPayload.bind(this),this.isConfigurationCorrect=this.isConfigurationCorrect.bind(this),this.state={integrationData:b.get(e,"integrationData"),context:b.get(e,"context"),details:b.get(e,"details"),selectedService:null,revisions:[],loadingRevisions:!1,errorRevisions:!1,description:"",selectedSource:null,selectedRevision:null,exportOnExistingRevision:!1,loadingDeploy:!1,deployButtonText:"Export"}}componentDidMount(){const e=b.get(this.state,"integrationData"),t=b.get(e,"variables.linked_apis"),i=b.get(this.state,"details.azure_api_path"),n=b.find(t,{azure_api_path:i});if(b.isEmpty(n)){const t=b.get(e,"variables.postman_api_id"),i=b.get(e,"id");return pm.toasts.error("Service details not present"),h.default.transitionTo(g.V10_API_DEPLOYMENT_DASHBOARD_NAV_IDENTIFIER,{apiId:t,integrationId:i})}this.setState({selectedService:n},(()=>{this.populateRevisionDropdown()}))}isConfigurationCorrect(){let{selectedSource:e,selectedRevision:t,exportOnExistingRevision:i,selectedService:n}=this.state;return!(!e||!n)&&!(i&&!t)}getDeployPayload(){let{selectedSource:e,selectedRevision:t,exportOnExistingRevision:i,description:n,selectedService:s}=this.state,a={exportOnly:!0,...s},r=b.isEqual(e.type,p.SCHEMA_SOURCE_TYPE.BRANCH);return i&&(a.azure_revision_id=t.value),b.isEmpty(n)||i||(a.azure_revision_description=n),r?(a.branch=e.value,a.files=e.files||[]):(a.schemaId=e.schemaId,a.apiDefinitionId=e.apiDefinitionId,b.isEqual(e.type,p.SCHEMA_SOURCE_TYPE.RELEASE)&&(a.tagId=e.tagId,a.releaseId=e.value)),a}handleDeploy(){if(!this.isConfigurationCorrect())return;this.setState({loadingDeploy:!0});let e=this.getDeployPayload(),t=b.get(this.state,"integrationData.id"),i=b.get(this.state,"integrationData.variables.postman_api_id").toString(),n=b.get(this.state,"integrationData.executor").toString(),s=b.get(this.state,"selectedRevision.value"),a="Successfully Deployed API",r=b.get(this.state,"integrationData.rule"),o={apiId:i,integrationId:t},l={azure_api_path:b.get(this.state,"selectedService.azure_api_path")},d=g.V10_API_DEPLOYMENT_DASHBOARD_NAV_IDENTIFIER,m=b.get(this.state,"selectedSource.type"),y=p.SOURCE_TO_EXPORT_ACTION[m];a=s&&this.state.exportOnExistingRevision?`Definition exported on revision ${s}`:"Definition exported on a new revision",c.default.deploySchema(t,e).then((e=>{if(!e.status||200!==e.status)throw e;u.default.closeByRoute(g.V10_API_DEPLOY_URL,{apiId:i,integrationId:b.toString(t)}),h.default.transitionTo(d,o,l),pm.windowEvents.emit(`${p.API_OBSERVABILITY}-deploy-triggered`,{apiId:i,apiVersionId:n}),f.default.addEventV2({category:"gateway-integration",action:y,label:r,value:1}),pm.toasts.success(a),this.setState({loadingDeploy:!1})})).catch((e=>{b.isEqual(b.get(e,"error.type"),"notFoundError")?pm.toasts.error("We could not find the definition you are looking for.",{title:"Deployment failed"}):b.isEqual(b.get(e,"error.type"),"badRequestError")?pm.toasts.error(b.get(e,"error.message"),{title:"Deployment failed"}):pm.toasts.error(b.get(e,"error.message","Error occurred while merging. Please try a manual merge."),{title:b.get(e,"error.title","Azure API Management error")}),pm.logger.error("Error occurred while deploying",e),this.setState({loadingDeploy:!1})}))}handleExportToExistingRevision(){const e=this.state.exportOnExistingRevision;this.setState({exportOnExistingRevision:!e})}handleSourceChange(e){this.setState({selectedSource:e})}handleRevisionChange(e){this.setState({selectedRevision:e})}populateRevisionDropdown(){const e=b.get(this.state,"integrationData.id"),t=b.get(this.state,"selectedService");this.setState({loadingRevisions:!0,errorRevisions:!1}),c.default.fetchRevisions(t,e).then((e=>{let t=[];b.each(e,(e=>{t.push({label:b.get(e,"azure_revision_id"),value:b.get(e,"azure_revision_id")})})),this.setState({loadingRevisions:!1,errorRevisions:!1,revisions:t})})).catch((e=>{pm.logger.error("Error occurred while fetching revisions",e),this.setState({errorRevisions:"Error occurred while fetching revisions",loadingRevisions:!1})}))}render(){const{selectedRevision:e,loadingRevisions:t,deployButtonText:i,revisions:c,exportOnExistingRevision:h,description:u,loadingDeploy:p,errorRevisions:g}=this.state,f=this.props.integrationData;return n.createElement("div",{className:"deploy-form-container"},n.createElement(s.default,{color:"content-color-primary",type:"h1",text:"Export definition to Azure API Management"}),n.createElement("div",{className:"deploy-form-container__segment"},n.createElement(m.default,{onSourceChange:this.handleSourceChange,apiId:b.get(this.state,"integrationData.variables.postman_api_id"),versionId:b.get(this.state,"integrationData.executor")})),n.createElement("div",{className:"deploy-form-container__segment"},n.createElement(a.default,{label:n.createElement(r.default,{text:"Description"}),value:u,placeholder:"Enter description",onChange:e=>this.setState({description:e.target.value}),isDisabled:h})),n.createElement("div",{className:"deploy-form-container__segment"},n.createElement(o.default,{isChecked:h,label:"Export definition to an existing Revision",onChange:this.handleExportToExistingRevision})),h&&n.createElement("div",{className:"deploy-form-container__segment"},n.createElement(l.default,{label:"Revision ID",options:c||[],placeholder:t?"Loading...":"Select",isDisabled:!(!t&&!g),value:e,onChange:this.handleRevisionChange,menuMaxHeight:150,validationState:!!g&&{status:"error",message:g}})),n.createElement("div",{className:"deploy-form-container__actions-segment"},n.createElement(d.default,{payload:{apiId:b.get(f,"variables.postman_api_id"),versionId:b.get(f,"executor"),integrationId:b.get(f,"id")},onDeploy:this.handleDeploy,disabled:!this.isConfigurationCorrect(),loading:p,deployButtonText:i})))}}},"./integrations/api-observability/components/deploy/index.js":function(e,t,i){i.r(t);var n=i("./integrations/api-observability/components/deploy/AwsDeployForm.js"),s=i("./integrations/api-observability/components/deploy/Azure.js");t.default={api_gateway_aws:n.default,api_management_azure:s.default}},"./integrations/api-observability/components/detailed-dashboard/aws/CloudWatchMetrics.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return T}});var n=i("../../node_modules/react/index.js"),s=i("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),a=i("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),r=i("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/SingleSelect/SingleSelect.js"),o=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),l=i("../../node_modules/@postman/aether/esmLib/src/components/Tooltip/Tooltip.js"),c=i("../../node_modules/@postman/aether-design-tokens/esmLib/src/themes/light.js"),d=i("../../node_modules/@postman/aether-design-tokens/esmLib/src/themes/dark.js"),h=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-direction-back.js"),u=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-openWeb-stroke.js"),p=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-refresh-stroke.js"),g=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-state-info-stroke-small.js"),m=i("./integrations/api-observability/components/base/NativeChart.js"),f=(i("./appsdk/workbench/TabService.js"),i("./js/services/NavigationService.js")),b=i("./integrations/api-observability/services/index.js"),y=i("./integrations/api-observability/constants.ts"),_=i("./js/components/base/LoadingIndicator.js"),v=i("./js/modules/services/AnalyticsService.js"),S=i("./js/external-navigation/ExternalNavigationService.js"),I=i("./integrations/api-observability/utils/chartHelpers.js"),E=i("./integrations/navigation/constants.js"),x=i("./js/stores/StoreManager.js"),w=i("./js/stores/ActiveWorkspaceSessionStore.js"),A=i("./integrations/constants/v10IntegrationConstants.ts"),P=i("./node_modules/lodash/lodash.js");class T extends n.Component{constructor(e){super(e),this.renderTopHeader=()=>{const{availableStages:e,selectedStage:t,availableTimeframes:i,selectedTimeframe:o,dashboardURL:l,stageUrl:c}=this.state;return n.createElement("div",{className:"observability-aws-cloudwatch-container__header"},n.createElement(s.default,{direction:"row",justifyContent:"space-between",gap:"spacing-s"},n.createElement(s.default,{direction:"row"},n.createElement(a.default,{type:"tertiary",icon:n.createElement(h.default,null),onClick:this.handleBackClick,className:"observability-aws-cloudwatch-container__header__back"}),n.createElement("div",{className:"observability-aws-cloudwatch-container__header__stages"},n.createElement(r.default,{onChange:this.handleSelectStage,options:e||[],isClearable:!1,value:t}))),n.createElement(s.default,{direction:"row",gap:"spacing-s"},n.createElement("div",{className:"observability-aws-cloudwatch-container__header__stages"},n.createElement(r.default,{onChange:this.handleSelectTimeframe,options:i,isClearable:!1,value:o})),n.createElement("div",{className:"observability-gateway-dashboard-link"},n.createElement(a.default,{type:"tertiary",icon:n.createElement(u.default,null),text:"View Dashboard",onClick:()=>this.handleViewDashboard(l)})),n.createElement("div",{className:"observability-gateway-dashboard-link"},n.createElement(a.default,{type:"tertiary",icon:n.createElement(u.default,null),text:"View Stage on AWS",onClick:()=>this.handleViewStage(c)})),n.createElement("div",{className:"observability-aws-cloudwatch-container__header__refresh"},n.createElement(a.default,{onClick:this.bootstrap,type:"tertiary",icon:n.createElement(p.default,null),text:"Refresh"})))))},this.renderLoader=()=>n.createElement(s.default,{direction:"column",justifyContent:"center",alignItems:"center"},n.createElement(s.default,{direction:"column",justifyContent:"center",alignItems:"center",width:"100%"},n.createElement(_.default,null))),this.renderErrorState=()=>n.createElement(s.default,{direction:"column",justifyContent:"center",alignItems:"center"},n.createElement(s.default,{direction:"column",justifyContent:"center",alignItems:"center",width:"100%"},n.createElement(o.default,{type:"para",color:"content-color-secondary"},y.GENERIC_CLOUDWATCH_METRICS_ERROR))),this.state={selectedStage:null,availableStages:[],dashboardURL:null,stageUrl:null,availableTimeframes:y.TIMEFRAMES,selectedTimeframe:y.TIMEFRAMES[4],loadingStages:!1,errorStages:!1,loadingMetrics:!1,currentTheme:pm.settings.getSetting("postmanTheme")},this.fetchCloudWatchTimeSeriesMetrics=this.fetchCloudWatchTimeSeriesMetrics.bind(this),this.fetchStages=this.fetchStages.bind(this),this.renderChart=this.renderChart.bind(this),this.handleSelectStage=this.handleSelectStage.bind(this),this.handleSelectTimeframe=this.handleSelectTimeframe.bind(this),this.renderTopHeader=this.renderTopHeader.bind(this),this.renderLoader=this.renderLoader.bind(this),this.renderErrorState=this.renderErrorState.bind(this),this.bootstrap=this.bootstrap.bind(this),this.populateData=this.populateData.bind(this),this.handleStageChange=this.handleStageChange.bind(this),this.handleViewDashboard=this.handleViewDashboard.bind(this),this.handleBackClick=this.handleBackClick.bind(this),this.constructDashboardURL=this.constructDashboardURL.bind(this),this.debouncedShowErrorToast=P.debounce(this.showErrorToast,1e3),this.handleThemeChange=this.handleThemeChange.bind(this)}UNSAFE_componentWillMount(){this.setState({currentTheme:pm.settings.getSetting("postmanTheme")}),pm.settings.on("setSetting:postmanTheme",this.handleThemeChange)}componentDidMount(){let{integrationData:e,context:t,details:i={}}=this.props,{stageId:n,stageName:s}=i,{availableStages:a,selectedStage:r}=t||{};!r&&n&&s&&(r={label:s,value:n}),a?this.setState({selectedStage:r,availableStages:a,integration:e},(()=>{this.populateData()})):this.setState({integration:e,selectedStage:r},(()=>{this.fetchStages(e.id,e.rule)}))}componentDidUpdate(e){P.get(this.props,"details.stageId")!==P.get(e,"details.stageId")&&this.handleStageChange()}handleStageChange(){this.setState({selectedStage:{label:P.get(this.props,"details.stageName"),value:P.get(this.props,"details.stageId")}},(()=>{this.populateData()}))}populateData(){this.bootstrap(),this.constructDashboardURL(),this.constructStageUrl()}bootstrap(){P.map(P.values(y.CLOUDWATCH_METRICS),(e=>{this.setState({[e.id]:null},(()=>this.fetchCloudWatchAllMetrics()))}))}showErrorToast(e){pm.toasts.error(P.get(e,"error.message","Something went wrong while fetching CloudWatch metrics"),{title:P.get(e,"error.title","AWS CloudWatch Error")})}fetchCloudWatchTimeSeriesMetrics(e,t,i){let{integration:n}=this.state,{id:s,rule:a}=n,r={stage:e,metric:t,period:i.period,endTime:new Date,startTime:new Date(Date.now()-i.duration)};this.setState({[t]:{loading:!0,error:!1}}),b.default[a].fetchCloudWatchTimeSeriesMetrics(s,r).then((e=>{const i=P.get(e,"body.data.MetricDataResults[0]");this.setState({[t]:{labels:i.Timestamps,data:i.Values,loading:!1,error:!1}})})).catch((e=>{this.debouncedShowErrorToast(e),this.setState({[t]:{loading:!1,error:!0}}),pm.logger.error("Error occurred while fetching AWS CloudWatch metrics",e)}))}fetchCloudWatchAllMetrics(){const{selectedStage:e,selectedTimeframe:t}=this.state;e&&t&&P.each(y.CLOUDWATCH_METRICS,(i=>{this.fetchCloudWatchTimeSeriesMetrics(e.label,i.id,t)}))}handleThemeChange(){let e;e="light"===pm.settings.getSetting("postmanTheme")?{...c.default,isDark:!1}:{...d.default,isDark:!0},this.setState({currentTheme:e})}fetchStages(e,t){this.setState({loadingStages:!0,errorStages:!1}),b.default[t].fetchStages(e).then((e=>{let t=P.orderBy(e,[e=>new Date(e.CreatedDate)],["desc"]),i=P.map(t,(e=>({label:e.StageName||e.stageName,value:e.DeploymentId||e.deploymentId,...e})));P.isEmpty(i)||this.state.selectedStage?this.setState({availableStages:i,loadingStages:!1},(()=>{this.populateData()})):this.setState({availableStages:i,loadingStages:!1},(()=>{this.handleSelectStage(i[0])}))})).catch((e=>{this.setState({errorStages:!0,loadingStages:!1}),pm.logger.error("Error occurred while fetching AWS stages",e),pm.toasts.error("Something went wrong while fetching AWS stage, please try again.")}))}constructDashboardURL(){let{integration:e}=this.state,t=P.get(e,"variables.aws_api_type"),i=P.get(e,"variables.aws_region"),n=P.get(e,"variables.aws_api_gateway_id"),s="";s=t===y.API_GATEWAY_TYPES.REST?`${y.AWS_API_GATEWAY_BASE_URL}/home?region=${i}#/apis/${n}/dashboard`:`${y.AWS_API_GATEWAY_BASE_URL}/main/monitor/metrics?api=${n}&region=${i}`,this.setState({dashboardURL:s})}constructStageUrl(){let{integration:e,selectedStage:t}=this.state,i=P.get(e,"variables.aws_api_type"),n=P.get(e,"variables.aws_region"),s=P.get(e,"variables.aws_api_gateway_id"),a=P.get(t,"label"),r="";r=i===y.API_GATEWAY_TYPES.REST?`${y.AWS_API_GATEWAY_BASE_URL}/home?region=${n}#/apis/${s}/stages/${a}`:`${y.AWS_API_GATEWAY_BASE_URL}/main/deploy/stages?api=${s}&region=${n}&stage=${a}`,this.setState({stageUrl:r})}handleViewDashboard(e){e&&(0,S.openExternalLink)(e,"_blank"),v.default.addEventV2({category:"gateway-integration",action:"view-dashboard",label:P.get(this.state.integration,"rule"),value:1})}handleViewStage(e){e&&(0,S.openExternalLink)(e,"_blank"),v.default.addEventV2({category:"gateway-integration",action:"view-stage",label:P.get(this.state.integration,"rule"),value:1})}handleSelectStage(e){if(!e)return;const{integration:t={},availableStages:i}=this.state;f.default.transitionTo(E.V10_API_DEPLOYMENT_DASHBOARD_NAV_IDENTIFIER,{apiId:P.get(t,"variables.postman_api_id"),integrationId:t.id},{stageName:e.label,stageId:e.value},{additionalContext:{integration:t,selectedStage:e,availableStages:i}})}handleSelectTimeframe(e){this.setState({selectedTimeframe:e},(()=>this.bootstrap()))}handleBackClick(){const e=P.get(this.props,"integrationData"),t=P.get(e,"variables.postman_api_id"),i=(0,x.resolveStoreInstance)(w.default).activeEditor;f.default.transitionTo(E.API_OVERVIEW_IDENTIFIER,{apiId:t},{view:A.DEPLOYMENTS},{tabOptions:{openIn:i}})}renderChart(e={}){const{selectedTimeframe:t,currentTheme:i}=this.state,a=I.default.getChartOptions({unit:t&&t.unit,title:{y:e.yAxis},currentTheme:i}),r=[{label:e.id,data:this.state[e.id]&&this.state[e.id].data,fill:!1,borderColor:"rgb(243,108,57)"}];return n.createElement("div",{className:"aws-cloudwatch__container"},n.createElement(s.default,{direction:"column",gap:"spacing-xl"},n.createElement(s.default,{direction:"row",alignItems:"center",gap:"spacing-xs",justifyContent:"center"},n.createElement(o.default,{color:"content-color-secondary",className:"metrics__title"},e.label),n.createElement(l.default,{content:e.info,placement:"bottom"},n.createElement("span",{className:"aws-cloudwatch__tooltip"},n.createElement(g.default,null)))),this.state[e.id]&&this.state[e.id].data&&this.state[e.id].data?n.createElement(m.default,{key:e.id,type:"line",data:{labels:this.state[e.id]&&this.state[e.id].labels,datasets:r},options:a}):this.state[e.id]&&this.state[e.id].error?this.renderErrorState():this.renderLoader()))}render(){return n.createElement("div",{className:"aws-cloudwatch__container__main"},n.createElement(s.default,{direction:"column",justifyContent:"space-between"},this.renderTopHeader(),n.createElement("div",{className:"aws-cloudwatch__detailed-view"},n.createElement(s.default,{direction:"row",justifyContent:"space-between",alignItems:"center",gap:"spacing-xl"},this.renderChart(y.CLOUDWATCH_METRICS.LATENCY),this.renderChart(y.CLOUDWATCH_METRICS.INTEGRATION_LATENCY)),n.createElement(s.default,{direction:"row",justifyContent:"space-between",alignItems:"center",gap:"spacing-xl"},this.renderChart(y.CLOUDWATCH_METRICS["5XX_ERROR"]),this.renderChart(y.CLOUDWATCH_METRICS["4XX_ERROR"])),n.createElement(s.default,{direction:"row",justifyContent:"space-between",alignItems:"center",gap:"spacing-xl"},this.renderChart(y.CLOUDWATCH_METRICS.COUNT),n.createElement("div",{className:"aws-cloudwatch__container__empty"})))))}}},"./integrations/api-observability/components/detailed-dashboard/azure/Azure.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return F}});var n=i("../../node_modules/react/index.js"),s=i("../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuItem.js"),a=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),r=i("../../node_modules/@postman/aether/esmLib/src/components/Menu/Menu.js"),o=i("../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuButton.js"),l=i("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),c=i("../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuList.js"),d=i("../../node_modules/@postman/aether/esmLib/src/components/Menu/MenuItemGroup.js"),h=i("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),u=i("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/SingleSelect/SingleSelect.js"),p=i("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/InternalServerError.js"),g=i("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),m=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-direction-back.js"),f=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-refresh-stroke.js"),b=i("./integrations/api-observability/components/detailed-dashboard/azure/RevisionsTable.js"),y=i("./integrations/api-observability/components/detailed-dashboard/azure/ChangelogTable.js"),_=i("./integrations/api-observability/components/detailed-dashboard/azure/ExportsTable.js"),v=i("./js/external-navigation/ExternalNavigationService.js"),S=i("./integrations/api-observability/constants.ts"),I=i("./js/services/NavigationService.js"),E=i("./appsdk/workbench/TabService.js"),x=i("./integrations/navigation/constants.js"),w=i("./node_modules/lodash/lodash.js"),A=i.n(w),P=i("./integrations/api-observability/services/AzureService.js"),T=i("./integrations/api-observability/components/common/ErrorState.js"),C=i("./api-dev/constants/Permissions.js"),D=i("./js/stores/StoreManager.js"),j=i("./js/stores/CurrentUserStore.js"),k=i("./api-dev/services/APIPermissionService.js"),O=i("./integrations/api-observability/components/modals/DeleteIntegrationModal.js"),M=i("./integrations/api-observability/services/Helper.js"),R=i("./integrations/api-observability/containers/ImportSchema.js"),L=i("./js/stores/ActiveWorkspaceSessionStore.js"),N=i("./integrations/constants/v10IntegrationConstants.ts");const z=({value:e,truncatedText:t,publicIPs:i,privateIPs:h})=>{let u=A().map(i||[],(e=>n.createElement(s.default,null,n.createElement(a.default,{color:"content-color-secondary",typographyStyle:{fontSize:"text-size-m",fontWeight:"text-weight-regular",lineHeight:"line-height-m",fontFamily:"text-family-default"}},e)))),p=A().map(h||[],(e=>n.createElement(s.default,null,n.createElement(a.default,{color:"content-color-secondary",typographyStyle:{fontSize:"text-size-m",fontWeight:"text-weight-regular",lineHeight:"line-height-m",fontFamily:"text-family-default"}},e))));return n.createElement("div",{className:"azure-custom-cell"},n.createElement(a.default,{color:"content-color-secondary",typographyStyle:{fontSize:"text-size-m",fontWeight:"text-weight-regular",lineHeight:"line-height-m",fontFamily:"text-family-default"}},e+"... "),n.createElement(r.default,null,n.createElement(o.default,null,n.createElement(l.default,{onClick:()=>{},type:"monochrome-plain",text:t,className:"azure-custom-cell__ip-address"})),n.createElement(c.default,{placement:"bottom-end"},i&&n.createElement(d.default,{title:"Public IPs"},u),h&&n.createElement(d.default,{title:"Private IPs"},p))))};class F extends n.Component{constructor(e){super(e),this.setShowModal=e=>{this.setState({showModal:e})},this.handleEditIntegration=()=>{const e=A().get(this.props,"integrationData"),t=A().get(e,"id"),i=A().get(e,"variables.postman_api_id");this.closeCurrentTab(),I.default.transitionTo(x.V10_API_EDIT_DEPLOYMENT_INTEGRATION_NAV_IDENTIFIER,{apiId:i,integrationId:t},{tab:S.DEPLOYMENT_TAB,category:S.API_OBSERVABILITY})},this.renderVIP=()=>{let e,{totalIPs:t,publicIPs:i,privateIPs:s,vip:a}=this.state;return Number(t)>1?(e=Number(t)-1+" more",n.createElement(z,{value:a,truncatedText:e,publicIPs:i,privateIPs:s})):n.createElement("div",null,a)},this.renderDeleteModal=()=>{const e=A().get(this.state,"integration",{});return n.createElement(O.default,{size:"small",model:{apiId:A().get(e,"variables.postman_api_id"),id:A().get(e,"executor")},isOpen:this.state.showModal,handleCloseModal:()=>this.setShowModal(!1),integrationId:e.id,ruleId:e.rule,onSuccessfulDelete:this.closeCurrentTab})},this.renderHeaderFirstRow=()=>{const{serviceName:e,resourceGroup:t,subscription:i,location:s,vip:a}=this.state;return n.createElement(h.default,{direction:"row",justifyContent:"space-between"},n.createElement(h.default,{direction:"row"},n.createElement(h.default,{direction:"column",justifyContent:"center",className:"observability-azure-detailed-dashboard-container__integration-name"},n.createElement("div",null,e))),n.createElement(h.default,{direction:"row"},n.createElement(h.default,{direction:"row"},n.createElement("div",{className:"observability-azure-detailed-dashboard-container__label"},"Resource Group:"),n.createElement("div",{className:"observability-azure-detailed-dashboard-container__label__value"},t)),n.createElement(h.default,{direction:"row"},n.createElement("div",{className:"observability-azure-detailed-dashboard-container__label"},"Subscription:"),n.createElement("div",{className:"observability-azure-detailed-dashboard-container__label__value"},i)),n.createElement(h.default,{direction:"row"},n.createElement("div",{className:"observability-azure-detailed-dashboard-container__label"},"Location:"),n.createElement("div",{className:"observability-azure-detailed-dashboard-container__label__value"},s)),n.createElement(h.default,{direction:"row"},n.createElement("div",{className:"observability-azure-detailed-dashboard-container__label"},"VIP:"),n.createElement("div",{className:"observability-azure-detailed-dashboard-container__label__value"},this.renderVIP()))))},this.renderHeaderSecondRow=()=>{const{api:e,version:t,gatewayUrl:i,developerPortalUrl:s}=this.state;return n.createElement(h.default,{direction:"row",justifyContent:"space-between",className:"observability-azure-detailed-dashboard-container__row2"},n.createElement(h.default,{direction:"row"},n.createElement(h.default,{direction:"row"},n.createElement("div",{className:"observability-azure-detailed-dashboard-container__row2__api"},"API:"),n.createElement("div",{className:"observability-azure-detailed-dashboard-container__row2__label__value"},e)),n.createElement(h.default,{direction:"row"},n.createElement("div",{className:"observability-azure-detailed-dashboard-container__row2__label"},"Version:"),n.createElement("div",{className:"observability-azure-detailed-dashboard-container__row2__label__value"},t))),n.createElement(h.default,{direction:"row"},n.createElement(h.default,{direction:"row"},n.createElement("div",{className:"observability-azure-detailed-dashboard-container__row2__label"},"Gateway URL:"),n.createElement("div",{className:"observability-azure-detailed-dashboard-container__row2__label__value"},n.createElement("span",{onClick:()=>(0,v.openExternalLink)(i,"_blank")},n.createElement(a.default,{isExternal:!0,type:"link-subtle"},i)))),n.createElement(h.default,{direction:"row"},n.createElement("div",{className:"observability-azure-detailed-dashboard-container__row2__portal"},n.createElement("span",{onClick:()=>(0,v.openExternalLink)(s,"_blank")},n.createElement(a.default,{isExternal:!0,type:"link-subtle"},"View Developer Portal"))))))},this.renderTopHeader=()=>{const{fetchedServices:e,selectedService:t,loadingService:i,isEditEnabled:d,integration:p}=this.state;return n.createElement("div",{className:"observability-azure-detailed-dashboard-container__header"},n.createElement(h.default,{direction:"row",justifyContent:"space-between"},n.createElement(h.default,{direction:"row"},n.createElement(l.default,{type:"tertiary",icon:n.createElement(m.default,null),onClick:this.handleBackClick,className:"observability-azure-detailed-dashboard-container__header__back"}),n.createElement("div",{className:"observability-azure-detailed-dashboard-container__header__services"},n.createElement(u.default,{options:e||[],value:t,onChange:this.handleServiceChange,isClearable:!1,isDisabled:i}))),n.createElement(h.default,{direction:"row"},n.createElement("div",null,n.createElement(l.default,{onClick:this.handleExportApi,type:"secondary",text:"Export API",isDisabled:!d,tooltip:!d&&S.PERMISSION_ERROR||"Export definition to a Revision"})),n.createElement("div",{className:"observability-azure-detailed-dashboard-container__header__import"},n.createElement(R.default,{integrationId:A().get(p,"id"),rule:A().get(p,"rule"),apiId:A().get(p,"variables.postman_api_id"),versionId:A().get(p,"executor"),formSource:S.IMPORT_FORM_SOURCES.DEPLOY_DASHBOARD,selectedService:t})),n.createElement("div",{className:"observability-azure-detailed-dashboard-container__header__refresh"},n.createElement(l.default,{onClick:this.handleRefresh,type:"tertiary",icon:n.createElement(f.default,null),tooltip:"Refresh"})),n.createElement(r.default,null,n.createElement(o.default,null,n.createElement(l.default,{icon:"icon-action-options-stroke",type:"tertiary"})),n.createElement(c.default,null,n.createElement(s.default,{onClick:this.handleEditIntegration,isDisabled:!d,tooltip:!d&&S.PERMISSION_ERROR},n.createElement(h.default,{alignItems:"center"},n.createElement(a.default,null,"Edit Integration"))),n.createElement(s.default,{type:"destructive",onClick:()=>{this.setShowModal(!0)},isDisabled:!d,tooltip:!d&&S.PERMISSION_ERROR},n.createElement(h.default,{alignItems:"center"},n.createElement("div",null,"Delete Integration"))))),this.renderDeleteModal())))},this.renderErrorState=()=>{const{errorService:e}=this.state;return n.createElement(T.default,{errorDetails:{...e.error,title:A().get(e,"error.name"),subTitle:A().get(e,"error.message"),illustration:n.createElement(p.default,null)}})},this.renderLoadingState=()=>n.createElement("div",{className:"observability-azure-detailed-dashboard-container__loader"},n.createElement(g.default,null)),this.state={canUpdateIntegration:!0,serviceName:"",showModal:!1,status:"Online",resourceGroup:"",subscription:"",location:"",vip:"",api:"",version:"",gatewayUrl:"",developerPortalUrl:"",fetchedServices:A().map(A().get(e,"integrationData.variables.linked_apis",[]),(e=>({label:A().get(e,"azure_service_id"),value:e}))),selectedService:null,integration:A().get(e,"integrationData",null),context:A().get(e,"context",null),preSelectService:A().get(e,"details.azure_api_path"),servicesMeta:A().get(e,"context.services",{}),apisMeta:{},subscriptionsMeta:A().get(e,"context.subscriptions",{}),loadingService:!1,errorService:!1,refreshRevisions:0,refreshChangelog:0,refreshExports:0,isEditEnabled:!1},this.handleBackClick=this.handleBackClick.bind(this),this.handleExportApi=this.handleExportApi.bind(this),this.handleServiceChange=this.handleServiceChange.bind(this),this.fetchApiMeta=this.fetchApiMeta.bind(this),this.fetchSubscriptionMeta=this.fetchSubscriptionMeta.bind(this),this.fetchServiceMeta=this.fetchServiceMeta.bind(this),this.addServiceData=this.addServiceData.bind(this),this.handleRefresh=this.handleRefresh.bind(this),this.handleCurrentToggle=this.handleCurrentToggle.bind(this),this.navigateToCurrentService=this.navigateToCurrentService.bind(this),this.fetchEditPermission=this.fetchEditPermission.bind(this),this.initiatePage=this.initiatePage.bind(this),this.closeCurrentTab=this.closeCurrentTab.bind(this)}componentDidMount(){pm.windowEvents.addListener(`${S.API_OBSERVABILITY}-deploy-triggered`,this.onIntegrationEventCaptured.bind(this)),this.initiatePage(this.state.preSelectService),this.fetchEditPermission()}componentDidUpdate(e){A().get(e,"details.azure_api_path")&&A().get(this.props,"details.azure_api_path")&&(A().isEqual(e.details.azure_api_path,this.props.details.azure_api_path)||this.initiatePage(this.props.details.azure_api_path))}initiatePage(e){let t=null;t=e?A().find(A().get(this.state,"integration.variables.linked_apis",[]),{azure_api_path:e}):A().get(this.state,"integration.variables.linked_apis.0"),t&&this.handleServiceChange({label:A().get(t,"azure_service_id"),value:t})}closeCurrentTab(){const e=A().get(this.state,"integration",{}),t=A().get(e,"variables.postman_api_id","").toString(),i=A().get(e,"id","").toString();E.default.closeByRoute(x.V10_API_DEPLOYMENT_DASHBOARD_URL,{apiId:t,integrationId:i})}fetchEditPermission(){const e=(0,D.resolveStoreInstance)(j.default).id,t=[C.UPDATE_API_META],i=A().get(this.state,"integration.variables.postman_api_id"),n=k.default.getAPIPermissionQueryObject(t,[{id:i}],e);k.default.fetchPermissions(n).then((e=>{this.setState({isEditEnabled:A().get(e,`${i}:UPDATE_API_META.allowed`)})})).catch((e=>{pm.logger.error(e)}))}onIntegrationEventCaptured(e){const{integration:t}=this.state,i=A().get(t,"variables.postman_api_id"),n=A().get(t,"executor");e.apiId===i&&e.apiVersionId===n&&this.handleRefresh()}showErrorToasts(e){pm.toasts.error("Error occurred while fetching Azure services meta.",{title:A().get(e,"error.title")||"Azure API Management error",noIcon:!0})}addServiceData(e){const{integration:t}=this.state,i=A().get(t,"id");this.setState({loadingService:!0,errorService:!1},(()=>{Promise.all([this.fetchServiceMeta(e,i),this.fetchApiMeta(e,i),this.fetchSubscriptionMeta(e,i)]).then((t=>{const i=t[0],n=t[1],s=t[2];let a=A().get(i,"privateIPAddresses")||[],r=A().get(i,"publicIPAddresses")||[],o=a.length+r.length,l=r[0]||a[0]||"-";this.setState({serviceName:A().get(e,"azure_service_id"),resourceGroup:A().get(e,"azure_resource_group_id"),subscription:A().get(s,"name"),location:A().get(i,"location"),vip:l,privateIPs:a,publicIPs:r,totalIPs:o,developerPortalUrl:A().get(i,"developerPortalUrl"),api:A().get(n,"name"),version:A().get(n,"version"),gatewayUrl:A().get(i,"gatewayUrl"),loadingService:!1})})).catch((e=>{this.showErrorToasts(e),this.setState({loadingService:!1,errorService:"Error Occurred while fetching service meta"})}))}))}handleServiceChange(e){if(!e)return null;this.setState({selectedService:e},(()=>{this.navigateToCurrentService()})),this.addServiceData(e.value)}navigateToCurrentService(){const{selectedService:e,integration:t}=this.state;I.default.transitionTo(x.V10_API_DEPLOYMENT_DASHBOARD_NAV_IDENTIFIER,{apiId:A().get(t,"variables.postman_api_id"),integrationId:A().get(t,"id")},{azure_api_path:A().get(e,"value.azure_api_path")})}fetchApiMeta(e,t){let i={...A().get(this.state,"apisMeta",{})};return A().isEmpty(i[e.azure_api_path])?P.default.fetchApiMeta(e,t).then((t=>(i[e.azure_api_path]=t,this.setState({apisMeta:i}),Promise.resolve(t)))).catch((e=>(pm.logger.error("Error occurred while fetching API meta",e),Promise.reject(e)))):Promise.resolve(i[e.azure_api_path])}fetchServiceMeta(e,t){let i={...A().get(this.state,"servicesMeta",{})};return A().isEmpty(i[e.azure_service_path])?P.default.fetchServiceMeta(e,t).then((t=>(i[e.azure_service_path]=t,this.setState({servicesMeta:i}),Promise.resolve(t)))).catch((e=>(pm.logger.error("Error occurred while fetching services meta",e),Promise.reject(e)))):Promise.resolve(i[e.azure_service_path])}fetchSubscriptionMeta(e,t){let i={...A().get(this.state,"subscriptionsMeta",{})};return A().isEmpty(i[e.azure_subscription_id])?P.default.fetchSubscriptionMeta(e,t).then((t=>(i[e.azure_subscription_id]=t,this.setState({subscriptionsMeta:i}),Promise.resolve(t)))).catch((e=>(pm.logger.error("Error occurred while fetching subscription meta",e),Promise.reject(e)))):Promise.resolve(i[e.azure_subscription_id])}handleRefresh(){let{refreshChangelog:e,refreshExports:t,refreshRevisions:i}=this.state;e+=1,t+=1,i+=1,this.setState({servicesMeta:null,apisMeta:null,subscriptionsMeta:null,refreshChangelog:e,refreshExports:t,refreshRevisions:i},(()=>{this.initiatePage(A().get(this.state,"selectedService.value.azure_api_path"))}))}handleCurrentToggle(){const{refreshChangelog:e,refreshRevisions:t}=this.state;return this.setState({refreshChangelog:e+1,refreshRevisions:t+1})}handleBackClick(){const e=A().get(this.props,"integrationData"),t=A().get(e,"variables.postman_api_id"),i=(0,D.resolveStoreInstance)(L.default).activeEditor;I.default.transitionTo(x.API_OVERVIEW_IDENTIFIER,{apiId:t},{view:N.DEPLOYMENTS},{tabOptions:{openIn:i}})}handleExportApi(){const{integration:e,selectedService:t}=this.state,{context:i}=this.props,n=A().get(i,"releaseId",null)?S.RELEASE_VIEW:S.DEPLOYMENT_VIEW;M.default.addDeployClickAnalytics(e,n),I.default.transitionTo(x.V10_API_DEPLOY_NAV_IDENTIFIER,{apiId:A().get(e,"variables.postman_api_id"),integrationId:A().get(e,"id")},{azure_api_path:A().get(t,"value.azure_api_path")},{additionalContext:i})}render(){const{integrationData:e}=this.props,{loadingService:t,errorService:i,selectedService:s,refreshChangelog:a,refreshRevisions:r,refreshExports:o,isEditEnabled:l}=this.state;return n.createElement(n.Fragment,null,this.renderTopHeader(),n.createElement("div",{className:"observability-azure-detailed-dashboard-container"},t?this.renderLoadingState():i?this.renderErrorState():n.createElement(h.default,{direction:"column"},this.renderHeaderFirstRow(),this.renderHeaderSecondRow()),n.createElement(b.default,{integration:e,selectedService:A().get(s,"value"),refresh:r,onCurrentToggle:this.handleCurrentToggle,isEditEnabled:l}),n.createElement(y.default,{integration:e,selectedService:A().get(s,"value"),refresh:a}),n.createElement(_.default,{integration:e,selectedService:A().get(s,"value"),refresh:o})))}}},"./integrations/api-observability/components/detailed-dashboard/azure/ChangelogTable.js":function(e,t,i){i.r(t),i.d(t,{ChangelogTable:function(){return m}});var n=i("../../node_modules/react/index.js"),s=i("./node_modules/lodash/lodash.js"),a=i.n(s),r=i("./integrations/api-observability/services/AzureService.js"),o=i("./integrations/api-observability/components/base/TableEmptyState.js"),l=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),c=i("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),d=i("../../node_modules/@postman/aether/esmLib/src/components/Table/Table.js"),h=i("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),u=i("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/InternalServerError.js"),p=i("./js/modules/services/AnalyticsService.js");const g=({value:e})=>n.createElement("div",{className:"azure-custom-cell"},n.createElement(l.default,{color:"content-color-secondary",isTruncated:!0,typographyStyle:{fontSize:"text-size-m",fontWeight:"text-weight-regular",lineHeight:"line-height-m",fontFamily:"text-family-default"}},e));class m extends n.Component{constructor(e){super(e),this.state={loadingReleases:!1,releases:{},errorReleases:!1,integration:e.integration,data:[],activeData:[],columns:[{Header:"Created",accessor:"createdAt",Cell:({value:e})=>n.createElement(g,{value:e}),cellWidth:"20%"},{Header:"Updated",accessor:"updatedAt",Cell:({value:e})=>n.createElement(g,{value:e}),cellWidth:"20%"},{Header:"Description",accessor:"description",Cell:({value:e})=>n.createElement(g,{value:e})}],nextIndex:0,selectedService:e.selectedService,showLoadMoreButton:!1},this.fetchReleases=this.fetchReleases.bind(this),this.updateSelectedService=this.updateSelectedService.bind(this),this.updateRelease=this.updateRelease.bind(this),this.handleLoadMore=this.handleLoadMore.bind(this),this.handleRefresh=this.handleRefresh.bind(this)}componentDidMount(){this.updateSelectedService(this.props.selectedService)}updateRelease(e){const t=a().get(this.state,"integration.id");this.setState({loadingReleases:!0,errorReleases:!1,activeData:[]}),this.fetchReleases(e,t).then((e=>{let t=[...e],i=0,n=t.slice(i,5),s=!1;i=Math.min(t.length,5),s=t.length!==i,this.setState({loadingReleases:!1,activeData:n,data:e,nextIndex:i,showLoadMoreButton:s})})).catch((e=>{this.setState({loadingReleases:!1,errorReleases:e})}))}updateSelectedService(e){this.setState({selectedService:e}),a().isEmpty(e)||this.updateRelease(e)}componentDidUpdate(e){a().isEqual(a().get(e,"selectedService.azure_api_path"),a().get(this.props,"selectedService.azure_api_path"))||this.updateSelectedService(this.props.selectedService),a().isEqual(a().get(e,"refresh"),a().get(this.props,"refresh"))||this.handleRefresh()}handleRefresh(){this.setState({releases:{},activeData:[],data:[]},(()=>{this.updateSelectedService(this.props.selectedService)}))}handleLoadMore(){let{data:e,activeData:t,nextIndex:i,showLoadMoreButton:n}=this.state;p.default.addEventV2({category:"gateway-integration",action:"azure-load-more-changelog",label:null,value:1}),i!==e.length&&(t=[...t,...[...e].splice(i,5)],i=Math.min(e.length,i+5),n=e.length!==i,this.setState({activeData:t,nextIndex:i,showLoadMoreButton:n}))}fetchReleases(e,t){let i={...this.state.releases};return a().isEmpty(i[e.azure_api_path])?r.default.fetchChangelog(e,t).then((t=>(i[e.azure_api_path]=t,this.setState({releases:i}),Promise.resolve(t)))).catch((e=>(pm.logger.error("Error occurred while fetching changelog",e),Promise.reject(e)))):Promise.resolve(i[e.azure_api_path])}render(){const{loadingReleases:e,activeData:t,columns:i,errorReleases:s,showLoadMoreButton:r}=this.state,p=!e&&!s&&0===t.length;return n.createElement("div",{className:"observability-azure-table-container"},n.createElement("div",{className:"observability-azure-table-container__heading"},n.createElement(c.default,{type:"h4",text:"Changelog"})),p?n.createElement("div",{className:"observability-azure-table-container__empty-message"},n.createElement(l.default,{color:"content-color-secondary"},"No Changelog data found")):n.createElement(d.default,{className:"observability-azure-services-table",data:t,columns:i,bodyMaxHeight:"250px",loader:{isLoading:e,skeletonRowCount:5,skeletonRowHeight:"44px",showLoadMoreButton:r,onLoadMore:this.handleLoadMore},blankState:{isEmpty:!a().isEmpty(s),component:n.createElement(o.default,{title:"Something went wrong",description:"Please try again",secondaryAction:n.createElement(h.default,{type:"outline",text:"Refresh",onClick:this.handleRefresh}),illustration:n.createElement(u.default,null)})}}))}}t.default=m},"./integrations/api-observability/components/detailed-dashboard/azure/ExportsTable.js":function(e,t,i){i.r(t),i.d(t,{ExportsTable:function(){return b}});var n=i("../../node_modules/react/index.js"),s=i("./node_modules/lodash/lodash.js"),a=i.n(s),r=i("./integrations/api-observability/services/AzureService.js"),o=i("./integrations/api-observability/components/base/TableEmptyState.js"),l=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),c=i("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),d=i("../../node_modules/@postman/aether/esmLib/src/components/Table/Table.js"),h=i("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),u=i("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/InternalServerError.js"),p=i("./integrations/api-observability/components/detailed-dashboard/azure/PostmanSource.js"),g=i("./js/modules/services/AnalyticsService.js");const m=({value:e})=>n.createElement("div",{className:"azure-custom-cell"},n.createElement(l.default,{color:"content-color-secondary",isTruncated:!0,typographyStyle:{fontSize:"text-size-m",fontWeight:"text-weight-regular",lineHeight:"line-height-m",fontFamily:"text-family-default"}},e)),f=({value:e,meta:t})=>n.createElement("div",{className:"azure-custom-cell"},n.createElement(p.default,{source:e,meta:t}));class b extends n.Component{constructor(e){super(e),this.state={loadingExports:!1,exports:{},errorExports:!1,data:[],activeData:[],columns:[{Header:"Created",accessor:"createdAt",Cell:({value:e})=>n.createElement(m,{value:e}),cellWidth:"20%"},{Header:"Azure Revision",accessor:"azure_revision_id",Cell:({value:e})=>n.createElement(m,{value:e}),cellWidth:"20%"},{Header:"Source from Postman",accessor:"schemaSource",Cell:({value:e})=>{const t={apiId:a().get(this.props,"integration.variables.postman_api_id"),versionId:a().get(this.props,"integration.executor")};return n.createElement(f,{meta:t,value:e})}}],integration:e.integration,nextIndex:0,selectedService:e.selectedService,showLoadMoreButton:!1},this.fetchExports=this.fetchExports.bind(this),this.updateSelectedService=this.updateSelectedService.bind(this),this.updateExports=this.updateExports.bind(this),this.handleLoadMore=this.handleLoadMore.bind(this),this.handleRefresh=this.handleRefresh.bind(this)}componentDidMount(){this.updateSelectedService(this.props.selectedService)}updateSelectedService(e){this.setState({selectedService:e}),a().isEmpty(e)||this.updateExports(e)}componentDidUpdate(e){a().isEqual(a().get(e,"selectedService.azure_api_path"),a().get(this.props,"selectedService.azure_api_path"))||this.updateSelectedService(this.props.selectedService),a().isEqual(a().get(e,"refresh"),a().get(this.props,"refresh"))||this.handleRefresh()}updateExports(e){const t=a().get(this.state,"integration.id");this.setState({loadingExports:!0,errorExports:!1,activeData:[]}),this.fetchExports(e,t).then((e=>{let t=[...e],i=0,n=t.slice(i,5),s=!1;i=Math.min(t.length,5),s=t.length!==i,this.setState({loadingExports:!1,activeData:n,data:e,nextIndex:i,showLoadMoreButton:s})})).catch((e=>{this.setState({loadingExports:!1,errorExports:e})}))}fetchExports(e,t){let i={...this.state.exports};return a().isEmpty(i[e.azure_api_path])?r.default.fetchExports(e,t).then((t=>(i[e.azure_api_path]=t,this.setState({exports:i}),Promise.resolve(t)))).catch((e=>(pm.logger.error("Error occurred while fetching exports",e),Promise.reject(e)))):Promise.resolve(i[e.azure_api_path])}handleLoadMore(){let{data:e,activeData:t,nextIndex:i,showLoadMoreButton:n,integration:s}=this.state;g.default.addEventV2({category:"gateway-integration",action:"load-more-exports",label:a().get(s,"rule"),value:1}),i!==e.length&&(t=[...t,...[...e].splice(i,5)],i=Math.min(e.length,i+5),n=e.length!==i,this.setState({activeData:t,nextIndex:i,showLoadMoreButton:n}))}handleRefresh(){this.setState({exports:{},activeData:[],data:[]},(()=>{this.updateSelectedService(this.props.selectedService)}))}render(){const{loadingExports:e,activeData:t,columns:i,errorExports:s,showLoadMoreButton:r}=this.state,p=!e&&!s&&0===t.length;return n.createElement("div",{className:"observability-azure-table-container"},n.createElement("div",{className:"observability-azure-table-container__heading"},n.createElement(c.default,{type:"h4",text:"Export History"})),p?n.createElement("div",{className:"observability-azure-table-container__empty-message"},n.createElement(l.default,{color:"content-color-secondary"},"There has been no export of API definition from Postman to Azure.")):n.createElement(d.default,{className:"observability-azure-services-table",data:t,columns:i,bodyMaxHeight:"250px",loader:{isLoading:e,skeletonRowCount:5,skeletonRowHeight:"44px",showLoadMoreButton:r,onLoadMore:this.handleLoadMore},blankState:{isEmpty:!a().isEmpty(s),component:n.createElement(o.default,{title:"Something went wrong",description:"Please try again",secondaryAction:n.createElement(h.default,{type:"outline",text:"Refresh",onClick:this.handleRefresh}),illustration:n.createElement(u.default,null)})}}))}}t.default=b},"./integrations/api-observability/components/detailed-dashboard/azure/MakeRevisionCurrentModal.js":function(e,t,i){i.r(t),i.d(t,{MakeRevisionCurrentModal:function(){return c}});var n=i("../../node_modules/react/index.js"),s=i("../../node_modules/@postman/aether/esmLib/src/components/Modal/Modal.js"),a=i("../../node_modules/@postman/aether/esmLib/src/components/TextArea/TextArea.js"),r=i("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),o=i("../../node_modules/@postman/aether/esmLib/src/components/ButtonGroup/ButtonGroup.js"),l=i("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js");class c extends n.Component{constructor(e){super(e)}render(){const{showModal:e,onClose:t,description:i,handleDescriptionChange:c,onSubmit:d,loadingRevisionModalButton:h}=this.props;return n.createElement(s.Modal,{isOpen:e,onClose:t},n.createElement(s.ModalHeader,{heading:"Make revision current"}),n.createElement(s.ModalContent,null,n.createElement(a.default,{placeholder:"The description will be published in the change log on your developer portal",value:i,label:n.createElement(r.default,{text:"Description",fieldType:"optional"}),onChange:c,isDisabled:h})),n.createElement(s.ModalFooter,null,n.createElement(o.default,{className:"azure-current-revision-modal-button-container"},n.createElement(l.default,{type:"secondary",onClick:t,text:"Cancel",isDisabled:h}),n.createElement(l.default,{type:"primary",onClick:d,text:"Confirm",isDisabled:h,isLoading:h}))))}}t.default=c},"./integrations/api-observability/components/detailed-dashboard/azure/PostmanSource.js":function(e,t,i){i.r(t);var n=i("../../node_modules/react/index.js"),s=i("./js/services/NavigationService.js"),a=i("./api-dev/services/APIDevService.js"),r=i("./integrations/api-observability/constants.ts"),o=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),l=i("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),c=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-descriptive-branch-stroke.js"),d=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-descriptive-versions-stroke.js"),h=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-descriptive-schemaOutline-stroke.js"),u=i("./node_modules/lodash/lodash.js");function p({message:e,onRetry:t}){return n.createElement("div",{className:"postman-source-error"},n.createElement("span",{className:"postman-source-error__message"},e+" "),n.createElement("span",{className:"postman-source-error__link",onClick:t},"Retry"))}t.default=function({source:e,meta:t}){const[i,g]=(0,n.useState)(!1),[m,f]=(0,n.useState)("-"),[b,y]=(0,n.useState)(!1);(0,n.useEffect)((()=>{u.get(e,"type")===r.SCHEMA_SOURCE_TYPE.RELEASE&&_(u.get(e,"releaseId"))}),[]);const _=e=>{const{apiId:i,versionId:n}=t;g(!0),y(!1),a.default.getRelease(i,n,e).then((e=>{f(u.get(e,"name","-")),g(!1)})).catch((e=>{pm.logger.error("Error occurred while fetching release",e),g(!1),y("Unable to load Release.")}))};return u.get(e,"type")===r.SCHEMA_SOURCE_TYPE.BRANCH?n.createElement(o.default,{color:"content-color-primary"},n.createElement("div",{className:"postman-source-item-container"},n.createElement("div",{className:"postman-source-item-container__icon"},n.createElement(c.default,{color:"content-color-primary"})),n.createElement("div",{className:"postman-source-item-container__content"},e.name))):u.get(e,"type")===r.SCHEMA_SOURCE_TYPE.RELEASE?b?n.createElement(p,{message:b,onRetry:_}):n.createElement("span",{onClick:()=>{return i=e.releaseId,void s.default.transitionTo("build.release",{apiId:u.get(t,"apiId"),versionId:u.get(t,"versionId"),releaseId:i});var i}},n.createElement(o.default,{type:"link-primary"},n.createElement("div",{className:"postman-source-item-container"},n.createElement("div",{className:"postman-source-item-container__icon"},n.createElement(d.default,{color:"content-color-link"})),n.createElement("div",{className:"postman-source-item-container__content"},i?n.createElement(l.default,null):m)))):u.get(e,"type")===r.SCHEMA_SOURCE_TYPE.HEAD?n.createElement(o.default,{color:"content-color-primary"},n.createElement("div",{className:"postman-source-item-container"},n.createElement("div",{className:"postman-source-item-container__icon"},n.createElement(h.default,{color:"content-color-primary"})),n.createElement("div",{className:"postman-source-item-container__content"},r.API_DEFINITION))):n.createElement(o.default,{color:"content-color-primary"},"-")}},"./integrations/api-observability/components/detailed-dashboard/azure/RevisionsTable.js":function(e,t,i){i.r(t),i.d(t,{RevisionsTable:function(){return I}});var n=i("../../node_modules/react/index.js"),s=i("./node_modules/lodash/lodash.js"),a=i.n(s),r=i("./integrations/api-observability/services/AzureService.js"),o=i("./integrations/api-observability/components/base/TableEmptyState.js"),l=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),c=i("../../node_modules/@postman/aether/esmLib/src/components/Tooltip/Tooltip.js"),d=i("../../node_modules/@postman/aether/esmLib/src/components/ToggleSwitch/ToggleSwitch.js"),h=i("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),u=i("../../node_modules/@postman/aether/esmLib/src/components/Table/Table.js"),p=i("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),g=i("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/InternalServerError.js"),m=i("./integrations/api-observability/components/detailed-dashboard/azure/PostmanSource.js"),f=i("./integrations/api-observability/constants.ts"),b=i("./integrations/api-observability/components/detailed-dashboard/azure/MakeRevisionCurrentModal.js"),y=i("./js/modules/services/AnalyticsService.js");const _=({value:e})=>n.createElement("div",{className:"azure-custom-cell"},n.createElement(l.default,{color:"content-color-secondary",isTruncated:!0,typographyStyle:{fontSize:"text-size-m",fontWeight:"text-weight-regular",lineHeight:"line-height-m",fontFamily:"text-family-default"}},e)),v=({value:e,onChange:t,isEditEnabled:i})=>{if(!i)return n.createElement("div",{className:"azure-custom-cell"},n.createElement(c.default,{content:f.PERMISSION_ERROR},n.createElement(d.default,{isChecked:e.value,onChange:t,isDisabled:!0})));const s=e.disabledText;return a().isEmpty(s)?n.createElement("div",{className:"azure-custom-cell"},n.createElement(d.default,{isChecked:e.value,onChange:t,isDisabled:e.isDisabled})):n.createElement("div",{className:"azure-custom-cell"},n.createElement(c.default,{content:s},n.createElement(d.default,{isChecked:e.value,onChange:t,isDisabled:!0})))},S=({value:e,meta:t})=>n.createElement("div",{className:"azure-custom-cell"},n.createElement(m.default,{source:e,meta:t}));class I extends n.Component{constructor(e){super(e),this.state={loadingRevisions:!1,revisions:[],errorRevisions:!1,integration:this.props.integration,data:[],activeData:[],loadingRevisionAction:!1,columns:[{Header:"ID",accessor:"azure_revision_id",Cell:({value:e})=>n.createElement(_,{value:e}),cellWidth:"40px"},{Header:"Created",accessor:"createdAt",Cell:({value:e})=>n.createElement(_,{value:e}),cellWidth:"20%"},{Header:"Description",accessor:"description",Cell:({value:e})=>n.createElement(_,{value:e}),cellWidth:"20%"},{Header:"URL",accessor:"privateUrl",Cell:({value:e})=>n.createElement(_,{value:e}),cellWidth:"20%"},{Header:"Online",accessor:"isOnline",Cell:({value:e})=>n.createElement(v,{value:e,onChange:()=>this.handleOnlineToggle(e),isEditEnabled:this.props.isEditEnabled}),cellWidth:"96px"},{Header:"Current",accessor:"isCurrent",Cell:({value:e})=>n.createElement(v,{value:e,onChange:()=>this.handleCurrentToggle(e),isEditEnabled:this.props.isEditEnabled}),cellWidth:"96px"},{Header:"Postman Source",accessor:"schemaSource",Cell:({value:e})=>{const t={apiId:a().get(this.props,"integration.variables.postman_api_id"),versionId:a().get(this.props,"integration.executor")};return e?n.createElement(S,{meta:t,value:e}):n.createElement("div",{className:"azure-custom-cell"},n.createElement("span",{className:"azure-custom-cell__no-source"},"No source linked"))},cellWidth:"20%"}],nextIndex:0,selectedService:e.selectedService,showLoadMoreButton:!1,showRevisionModal:!1,azureReleaseDescription:"",focusedRevision:null,loadingRevisionModalButton:!1},this.fetchRevisions=this.fetchRevisions.bind(this),this.updateSelectedService=this.updateSelectedService.bind(this),this.updateRevisions=this.updateRevisions.bind(this),this.handleLoadMore=this.handleLoadMore.bind(this),this.handleCurrentToggle=this.handleCurrentToggle.bind(this),this.handleOnlineToggle=this.handleOnlineToggle.bind(this),this.handleRefresh=this.handleRefresh.bind(this),this.updateColumnDisabledState=this.updateColumnDisabledState.bind(this),this.handleRevisionModalClose=this.handleRevisionModalClose.bind(this),this.handleRevisionModalSubmit=this.handleRevisionModalSubmit.bind(this)}componentDidMount(){this.updateSelectedService(this.props.selectedService)}componentDidUpdate(e){a().isEqual(a().get(e,"selectedService.azure_api_path"),a().get(this.props,"selectedService.azure_api_path"))||this.updateSelectedService(this.props.selectedService),a().isEqual(a().get(e,"refresh"),a().get(this.props,"refresh"))||this.handleRefresh(),a().isEqual(a().get(e,"isEditEnabled"),a().get(this.props,"isEditEnabled"))||this.updateColumnDisabledState(this.props.isEditEnabled)}updateColumnDisabledState(e){let t=[...this.state.columns];t[4]={Header:"Online",accessor:"isOnline",Cell:({value:t})=>n.createElement(v,{value:t,onChange:()=>this.handleOnlineToggle(t),isEditEnabled:e}),cellWidth:"96px"},t[5]={Header:"Current",accessor:"isCurrent",Cell:({value:e})=>n.createElement(v,{value:e,onChange:()=>this.handleCurrentToggle(e),isEditEnabled:this.props.isEditEnabled}),cellWidth:"96px"},this.setState({columns:t})}updateRevisions(e){const t=a().get(this.state,"integration.id");this.setState({loadingRevisions:!0,errorRevisions:!1,activeData:[]}),this.fetchRevisions(e,t).then((e=>{let t=[...e],i=0,n=t.slice(i,5),s=!1;i=Math.min(t.length,5),s=t.length!==i,this.setState({loadingRevisions:!1,activeData:n,data:e,nextIndex:i,showLoadMoreButton:s})})).catch((e=>{this.setState({loadingRevisions:!1,errorRevisions:e})}))}updateSelectedService(e){this.setState({selectedService:e}),a().isEmpty(e)||this.updateRevisions(e)}fetchRevisions(e,t){return r.default.fetchRevisions(e,t).then((i=>r.default.fetchRevisionMapping(e,i,t).then((t=>{const n=a().map(i,(i=>{const n=`${e.azure_api_path};rev=${i.azure_revision_id}`;return{...i,schemaSource:t[n]}}));return this.setState({revisions:n}),Promise.resolve(n)})).catch((e=>{throw e})))).catch((e=>(pm.logger.error("Error occurred while fetching revisions",e),Promise.reject(e))))}handleLoadMore(){let{data:e,activeData:t,nextIndex:i,showLoadMoreButton:n}=this.state;y.default.addEventV2({category:"gateway-integration",action:"azure-load-more-revisions",label:null,value:1}),i!==e.length&&(t=[...t,...[...e].splice(i,5)],i=Math.min(e.length,i+5),n=e.length!==i,this.setState({activeData:t,nextIndex:i,showLoadMoreButton:n}))}updateDisabled(e,t){return a().map(e,(e=>({...e,isOnline:{...e.isOnline,isDisabled:t},isCurrent:{...e.isCurrent,isDisabled:t}})))}updateRevisionIsOnline(e,t,i){return a().map(e,(e=>e.azure_revision_id===t.azure_revision_id?{...e,isOnline:{...e.isOnline,value:i}}:e))}updateRevisionIsCurrent(e,t){return a().map(e,(e=>e.azure_revision_id===t.azure_revision_id?{...e,isCurrent:{...e.isCurrent,value:!0}}:{...e,isCurrent:{...e.isCurrent,value:!1}}))}handleOnlineToggle(e){if(e&&e.value){const t=a().find(this.state.activeData,{azure_revision_id:e.azure_revision_id});if(t&&t.isCurrent.value)return void pm.toasts.error("Current revision cannot be made offline.")}let t=[...a().get(this.state,"data")],i=[...a().get(this.state,"activeData")],n=a().get(this.state,"selectedService"),s=a().get(this.state,"integration.id");t=this.updateDisabled(t,!0),i=this.updateDisabled(i,!0),y.default.addEventV2({category:"gateway-integration",action:"azure-toggle-online",label:e.value?"off":"on",value:1}),this.setState({data:t,activeData:i},(()=>{t=[...a().get(this.state,"data")],i=[...a().get(this.state,"activeData")],r.default.toggleOnlineRevision(n,e.azure_revision_id,!e.value,s).then((n=>{t=this.updateDisabled(t,!1),i=this.updateDisabled(i,!1),t=this.updateRevisionIsOnline(t,e,!e.value),i=this.updateRevisionIsOnline(i,e,!e.value),this.setState({data:t,activeData:i}),pm.toasts.success(`Successfully made the revision ${e.value?"offline":"online"}.`)})).catch((e=>{t=this.updateDisabled(t,!1),i=this.updateDisabled(i,!1),this.setState({data:t,activeData:i}),pm.logger.error("Error occurred while toggling revision status",e),pm.toasts.error("Error occurred while toggling revision status",{title:a().get(e,"error.title")||"Azure API Management error",noIcon:!0})}))}))}handleCurrentToggle(e){if(e&&!e.value){const t=a().find(this.state.activeData,{azure_revision_id:e.azure_revision_id});if(t&&!t.isOnline.value)return void pm.toasts.error("Offline revision cannot be made current.")}let t=[...a().get(this.state,"data")],i=[...a().get(this.state,"activeData")];t=this.updateDisabled(t,!0),i=this.updateDisabled(i,!0),this.setState({data:t,activeData:i,showRevisionModal:!0,focusedRevision:e})}handleRefresh(){this.setState({revisions:{},activeData:[],data:[]},(()=>{this.updateSelectedService(this.props.selectedService)}))}handleRevisionModalSubmit(){let e=[...a().get(this.state,"data")],t=[...a().get(this.state,"activeData")],i=a().get(this.state,"selectedService"),n=a().get(this.state,"integration.id"),s=a().get(this.state,"focusedRevision"),o=a().get(this.state,"azureReleaseDescription","");y.default.addEventV2({category:"gateway-integration",action:"azure-toggle-current",label:null,value:1}),this.setState({loadingRevisionModalButton:!0},(()=>{r.default.toggleCurrentRevision(i,s.azure_revision_id,o,n).then((i=>{e=this.updateDisabled(e,!1),t=this.updateDisabled(t,!1),e=this.updateRevisionIsCurrent(e,s),t=this.updateRevisionIsCurrent(t,s),this.setState({data:e,activeData:t,showRevisionModal:!1,loadingRevisionModalButton:!1,focusedRevision:null,azureReleaseDescription:""}),a().isFunction(this.props.onCurrentToggle)&&this.props.onCurrentToggle(),pm.toasts.success("Successfully made the revision current.")})).catch((i=>{e=this.updateDisabled(e,!1),t=this.updateDisabled(t,!1),this.setState({data:e,activeData:t,showRevisionModal:!1,loadingRevisionModalButton:!1,focusedRevision:null,azureReleaseDescription:""}),pm.logger.error("Error occurred while toggling.",i),pm.toasts.error("Error occurred while toggling revision status",{title:a().get(i,"error.title")||"Azure API Management error",noIcon:!0})}))}))}handleRevisionModalClose(){if(this.state.loadingRevisionModalButton)return;let e=[...a().get(this.state,"data")],t=[...a().get(this.state,"activeData")];e=this.updateDisabled(e,!1),t=this.updateDisabled(t,!1),this.setState({data:e,activeData:t,showRevisionModal:!1,loadingRevisionModalButton:!1,focusedRevision:null,azureReleaseDescription:""})}render(){const{loadingRevisions:e,activeData:t,columns:i,errorRevisions:s,showLoadMoreButton:r,showRevisionModal:c,azureReleaseDescription:d,loadingRevisionModalButton:m}=this.state,f=!e&&!s&&0===t.length;return n.createElement("div",{className:"observability-azure-table-container"},n.createElement(b.default,{showModal:c,onClose:this.handleRevisionModalClose,onSubmit:this.handleRevisionModalSubmit,description:d,handleDescriptionChange:e=>this.setState({azureReleaseDescription:e.target.value}),loadingRevisionModalButton:m}),n.createElement("div",{className:"observability-azure-table-container__heading"},n.createElement(h.default,{type:"h4",text:"Revisions"})),f?n.createElement("div",{className:"observability-azure-table-container__empty-message"},n.createElement(l.default,null,"No Revisions found")):n.createElement(u.default,{className:"observability-azure-services-table",data:t,columns:i,bodyMaxHeight:"250px",loader:{isLoading:e,skeletonRowCount:5,skeletonRowHeight:"44px",showLoadMoreButton:r,onLoadMore:this.handleLoadMore},blankState:{isEmpty:!a().isEmpty(s),component:n.createElement(o.default,{title:"Something went wrong",description:"Please try again",secondaryAction:n.createElement(p.default,{type:"outline",text:"Refresh",onClick:this.handleRefresh}),illustration:n.createElement(g.default,null)})}}))}}t.default=I},"./integrations/api-observability/components/detailed-dashboard/index.js":function(e,t,i){i.r(t);var n=i("./integrations/api-observability/components/detailed-dashboard/azure/Azure.js"),s=i("./integrations/api-observability/components/detailed-dashboard/aws/CloudWatchMetrics.js");t.default={api_management_azure:n.default,api_gateway_aws:s.default}},"./integrations/api-observability/components/edit/ApiGateway.js":function(e,t,i){i.r(t),i.d(t,{ApiGatewayDefault:function(){return A},ApiGatewayIam:function(){return P},default:function(){return T}});var n,s,a=i("./node_modules/lodash/lodash.js"),r=i.n(a),o=i("../../node_modules/react/index.js"),l=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),c=i("./js/stores/StoreManager.js"),d=i("./js/stores/CurrentUserStore.js"),h=i("./js/stores/IntegrationsStore.js"),u=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js"),p=i("./js/components/base/Buttons.js"),g=i("./integrations/api-observability/services/index.js"),m=i("./js/services/NavigationService.js"),f=i("./integrations/api-observability/components/base/EditIntegration.js"),b=i("./integrations/api-observability/constants.ts"),y=i("./integrations/api-observability/components/dashboard/aws-gateway/InfoSegment.js"),_=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/ExternalLink.js"),v=i("./appsdk/workbench/TabService.js"),S=i("./integrations/navigation/constants.js"),I=i("./integrations/api-observability/services/ApiGatewayService.js"),E=i("./api-dev/constants/APISubViews.js"),x=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/FormUpdateChecker.ts");function w(){return w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},w.apply(this,arguments)}let A=(0,l.observer)(n=class extends o.Component{constructor(e){super(e),this.state={aws_access_key:"",aws_key_id:"",aws_region:"",auth_type:b.AWS_IAM_ROLE,aws_api_type:"http",consentProvided:!1,isUpdatingIntegration:!1,verifying:!1,verification:"",errorAwsKeyId:"",errorAwsAccessKey:"",errorAwsRegion:"",nickname:"",aws_api_gateway_name:"",aws_api_gateway_id:"",postman_api_id:"",selectedAPIGateway:"",apiGateways:[],custom_api_gateway:"",isCustomApiGatewayMandatory:!1,showApiGatewayInputField:!1,errorGateway:!1,loadingGateway:!1,errorNickname:"",availableApiGatewayTypes:b.AVAILABLE_API_GATEWAY_TYPES,selectedAPIGatewayType:b.AVAILABLE_API_GATEWAY_TYPES[0],availableAuthTypes:b.AVAILABLE_AUTH_TYPES,selectedAuthType:b.AVAILABLE_AUTH_TYPES[0],currentAuthType:b.AWS_IAM_ROLE,integration_name:""},this.store=(0,c.resolveStoreInstance)(h.default),this.onTargetSelect=this.onTargetSelect.bind(this),this.handleAwsAccessKeyInput=this.handleAwsAccessKeyInput.bind(this),this.handleAwsKeyIdInput=this.handleAwsKeyIdInput.bind(this),this.handleAwsRegionInput=this.handleAwsRegionInput.bind(this),this.fetchApiGateways=this.fetchApiGateways.bind(this),this.handleAwsAPITypeSelection=this.handleAwsAPITypeSelection.bind(this),this.handleAuthTypeChange=this.handleAuthTypeChange.bind(this),this.handleNameChange=this.handleNameChange.bind(this),this.setIsUpdatingIntegration=this.setIsUpdatingIntegration.bind(this),this.fetchApiGatewaysWithIntegrationId=this.fetchApiGatewaysWithIntegrationId.bind(this),this.getInitialState=this.getInitialState.bind(this)}onTargetSelect(e){r().isEmpty(e)?this.setState({selectedAPIGateway:{id:"none",name:"No API Gateways selected"},aws_api_gateway_name:"",aws_api_gateway_id:"",showApiGatewayInputField:!1,showCustomLabel:!0}):this.setState({selectedAPIGateway:e,aws_api_gateway_name:e.label,aws_api_gateway_id:e.value})}handleAwsAPITypeSelection(e){let{aws_key_id:t,aws_access_key:i,aws_region:n}=this.state;this.setState({aws_api_type:e.value,selectedAPIGatewayType:e},(()=>{r().isEmpty(t)||r().isEmpty(i)||r().isEmpty(n)||this.fetchApiGateways()}))}handleAwsKeyIdInput(e){this.setState({selectedAPIGateway:"",aws_key_id:e,errorAwsKeyId:r().isEmpty(e.trim())?"Please enter an Access Key ID":""},(()=>{r().isEmpty(e)||r().isEmpty(this.state.aws_access_key)||r().isEmpty(this.state.aws_region)||this.fetchApiGateways()}))}handleAwsAccessKeyInput(e){this.setState({selectedAPIGateway:"",aws_access_key:e,errorAwsAccessKey:r().isEmpty(e.trim())?"Please enter a Secret Access Key":""},(()=>{r().isEmpty(e)||r().isEmpty(this.state.aws_key_id)||r().isEmpty(this.state.aws_region)||this.fetchApiGateways()}))}handleAwsRegionInput(e){this.setState({selectedAPIGateway:"",aws_region:e,errorAwsRegion:r().isEmpty(e.trim())?"Please enter the AWS region":""},(()=>{r().isEmpty(e)||r().isEmpty(this.state.aws_key_id)||r().isEmpty(this.state.aws_access_key)||this.fetchApiGateways()}))}handleAuthTypeChange(e){this.setState({selectedAPIGateway:{},currentAuthType:e.value,selectedAuthType:e,auth_type:e.value},(()=>{e.value!==b.AWS_KEYS||r().isEmpty(this.state.aws_region)||r().isEmpty(this.state.aws_key_id)||r().isEmpty(this.state.aws_access_key)||this.fetchApiGateways()}))}handleNameChange(e){this.setState({integration_name:e,errorNickname:r().isEmpty(e.trim())?"Please enter the Integration name":e.trim().length>255?"Name field can't have more than 255 characters":""})}fetchApiGateways(){let{aws_key_id:e,aws_access_key:t,aws_region:i,auth_type:n,aws_api_type:s,aws_api_gateway_id:a}=this.state,{rule:o}=this.props;this.setState({verifying:!0,availableApiGateways:[],aws_api_gateway_id:"",errorApiGateways:!1}),g.default[o].fetchApiGateways({aws_key_id:e,aws_access_key:t,aws_region:i,auth_type:n,aws_api_type:s,rule:o,type:"fetchAWSGatewayAPIs"}).then((e=>{let t=r().map(e,(e=>({label:e.Name||e.name,value:e.ApiId||e.id,...e}))),i=r().find(t,(e=>e.id===a||e.ApiId===a));this.setState({verifying:!1,availableApiGateways:t},(()=>{this.onTargetSelect(i)}))})).catch((e=>{this.setState({verifying:!1,errorApiGateways:!0}),"invalidAWSRegion"===r().get(e,"error.name")?pm.toasts.error(r().get(e,"error.message")||"Please enter a valid AWS region.",{title:r().get(e,"error.title")||"Invalid AWS Region"}):(pm.toasts.error(r().get(e,"error.message","Something went wrong while fetching API Gateways"),{title:r().get(e,"error.title","Unable to fetch API Gateways")}),pm.logger.error("Something went wrong while fetching API Gateways",e))}))}fetchApiGatewaysWithIntegrationId(e){let{aws_api_gateway_id:t}=this.state,{rule:i}=this.props;this.setState({verifying:!0}),g.default[i].fetchApiGatewaysUsingIntegrationId(e).then((e=>{let i=r().map(e,(e=>({label:e.Name||e.name,value:e.ApiId||e.id,...e}))),n=r().find(i,(e=>e.id===t||e.ApiId===t));this.setState({verifying:!1,availableApiGateways:i,selectedAPIGateway:n})})).catch((e=>{this.setState({verifying:!1}),"invalidAWSRegion"===r().get(e,"error.name")?pm.toasts.error(r().get(e,"error.message")||"Please enter a valid AWS region.",{title:r().get(e,"error.title")||"Invalid AWS Region"}):(pm.toasts.error("Something went wrong while fetching API Gateways, please try again."),pm.logger.error("Something went wrong while fetching API Gateways",e))}))}componentDidMount(){const{variables:e}=this.props;this.setState(this.getInitialState(),(()=>{e.auth_type===b.AWS_KEYS&&this.fetchApiGatewaysWithIntegrationId(this.props.integrationId)}))}getInitialState(){const{variables:e,nickname:t}=this.props;return{integration_name:t,auth_type:e.auth_type,currentAuthType:e.auth_type,aws_api_type:e.aws_api_type,apiVersionId:e.executor,postman_api_id:e.postman_api_id,aws_key_id:e.aws_key_id,aws_access_key:e.aws_access_key,aws_region:e.aws_region,aws_api_gateway_id:e.aws_api_gateway_id,selectedAuthType:e.auth_type===b.AWS_IAM_ROLE?{label:"IAM",value:b.AWS_IAM_ROLE}:{label:"Access Key",value:b.AWS_KEYS},selectedAPIGatewayType:"http"===e.aws_api_type?{label:"HTTP",value:"http"}:{label:"REST",value:"rest"}}}setIsUpdatingIntegration(e){this.setState({isUpdatingIntegration:e})}render(){let{rule:e,apiId:t,apiVersionId:i,integrationId:n}=this.props,{aws_key_id:s,aws_access_key:a,aws_region:l,verifying:c,errorAwsKeyId:d,auth_type:h,aws_api_type:g,errorAwsAccessKey:y,errorAwsRegion:_,selectedAPIGateway:I,aws_api_gateway_id:A,isCustomApiGatewayMandatory:T,errorGateway:C,availableApiGateways:D,availableApiGatewayTypes:j,selectedAPIGatewayType:k,currentAuthType:O,selectedAuthType:M,availableAuthTypes:R,integration_name:L,postman_api_id:N,errorNickname:z,isUpdatingIntegration:F,errorApiGateways:V}=this.state,B={rule:e,name:L,entity:"apiversion",executor:i,api_id:t,variables:{auth_type:h,aws_api_type:g,postman_api_id:N,...s?{aws_key_id:s}:{},...a?{aws_access_key:a}:{},aws_region:l,aws_api_gateway_id:A,role_arn:"",external_id:""}},W=L.length<256;return o.createElement("div",null,o.createElement(u.SelectSegmentV2,{title:"AWS Authentication Method",options:R,value:M,onTargetSelect:this.handleAuthTypeChange}),o.createElement(u.FieldSegment,{mandatory:!0,id:"integration-name",title:"Nickname",placeholder:"Give a nickname to your integration.",value:L,error:z,onBlur:()=>{this.handleNameChange(L.trim())},onChange:e=>{this.handleNameChange(e)}}),O===b.AWS_IAM_ROLE?o.createElement(P,w({authType:h,integration_name:L},this.props)):o.createElement("div",null,o.createElement(u.SelectSegmentV2,{title:"AWS API Type",options:j,value:k,onTargetSelect:this.handleAwsAPITypeSelection}),o.createElement(u.SensitiveFieldSegment,{className:"aws-key-id",id:"aws-key-id",title:"Access Key ID",maskedPlaceholderWhenEmpty:!0,description:"Enter the AWS access key id",value:s,error:d,onBlur:()=>{this.handleAwsKeyIdInput(s)},onChange:e=>{this.setState({aws_key_id:e,errorAwsKeyId:""})}}),o.createElement(u.SensitiveFieldSegment,{className:"aws-access-key",id:"aws-access-key",title:"Secret Access Key",description:"Enter the AWS access key",maskedPlaceholderWhenEmpty:!0,value:a,error:y,onBlur:()=>{this.handleAwsAccessKeyInput(a)},onChange:e=>{this.setState({aws_access_key:e,errorAwsAccessKey:""})}}),o.createElement(u.FieldSegment,{mandatory:!0,id:"aws-region",placeholder:"Enter AWS Region",title:"AWS Region",value:l,error:_,onBlur:()=>{this.handleAwsRegionInput(l)},onChange:e=>{this.setState({aws_region:e,errorAwsRegion:""})}}),o.createElement("div",{className:"aws-gateway-dropdown"},o.createElement(u.SelectSegmentV2,{title:"AWS Gateway",disabled:!!T,label:"Select AWS Gateway",options:D,value:I,onTargetSelect:this.onTargetSelect,noOptionsForDropdown:"No API Gateways found",error:V?"Unable to load API Gateways":"",loading:c,handleRetry:this.fetchApiGateways})),o.createElement("div",{className:"aws-gateway__button"},o.createElement(f.default,{className:"integrations-add-actions__button--proceed",type:"primary",size:"small",disabled:!a||!s||!l||c||!D||r().isEmpty(A)||r().isEmpty(L)||!W||!(0,x.isFormUpdated)(this.getInitialState(),this.state),payload:B,setIsUpdatingIntegration:this.setIsUpdatingIntegration,integrationId:n},"Update"),o.createElement("div",{className:"integrations-add-actions__button--container"},o.createElement(p.Button,{className:"integrations-add-actions__button--cancel",type:"secondary",size:"small",disabled:F,onClick:()=>{m.default.transitionTo("build.apiVersion",{apiId:B.api_id,versionId:B.executor},{tab:E.DEPLOYMENT}),v.default.closeByRoute(S.V10_API_EDIT_DEPLOYMENT_INTEGRATION_URL,{apiId:B.api_id,integrationId:n})}},"Cancel")))))}})||n,P=(0,l.observer)(s=class extends o.Component{constructor(e){super(e),this.state={aws_account_id:b.AWS_ACCOUNT_ID,external_id:"",role_arn:"",aws_region:"",consentProvided:!1,verifying:!1,verification:"",errorAwsRegion:"",aws_api_type:"http",errorRoleArn:"",showInfoBanner:!0,availableApiGatewayTypes:b.AVAILABLE_API_GATEWAY_TYPES,selectedAPIGatewayType:b.AVAILABLE_API_GATEWAY_TYPES[0]},this.store=(0,c.resolveStoreInstance)(h.default),this.currentUserStore=(0,c.resolveStoreInstance)(d.default),this.handleBannerClose=this.handleBannerClose.bind(this),this.onTargetSelect=this.onTargetSelect.bind(this),this.fetchApiGateways=this.fetchApiGateways.bind(this),this.handleAwsAPITypeSelection=this.handleAwsAPITypeSelection.bind(this),this.handleAwsRegionInput=this.handleAwsRegionInput.bind(this),this.handleRoleArnInput=this.handleRoleArnInput.bind(this),this.setIsUpdatingIntegration=this.setIsUpdatingIntegration.bind(this),this.setExternalId=this.setExternalId.bind(this),this.fetchApiGatewaysWithIntegrationId=this.fetchApiGatewaysWithIntegrationId.bind(this),this.getInitialState=this.getInitialState.bind(this)}onTargetSelect(e){r().isEmpty(e)?this.setState({selectedAPIGateway:{id:"none",name:"No API Gateways selected"},aws_api_gateway_name:"",aws_api_gateway_id:"",showApiGatewayInputField:!1,showCustomLabel:!0}):this.setState({selectedAPIGateway:e,aws_api_gateway_name:e.label,aws_api_gateway_id:e.value})}handleAwsAPITypeSelection(e){this.setState({aws_api_type:e.value,selectedAPIGatewayType:e},(()=>{this.state.role_arn&&!r().isEmpty(this.state.role_arn)&&this.state.aws_region&&!r().isEmpty(this.state.aws_region)&&this.fetchApiGateways()}))}fetchApiGateways(){let{aws_region:e,aws_api_type:t,role_arn:i,external_id:n,aws_api_gateway_id:s}=this.state,{rule:a,authType:o}=this.props;this.setState({verifying:!0,availableApiGateways:[],aws_api_gateway_id:"",errorApiGateways:!1}),g.default[a].fetchApiGateways({role_arn:i,external_id:n,aws_region:e,auth_type:o,aws_api_type:t,rule:a,type:"fetchAWSGatewayAPIs"}).then((e=>{let t=r().map(e,(e=>({label:e.Name||e.name,value:e.ApiId||e.id,...e}))),i=r().find(t,(e=>e.id===s||e.ApiId===s));this.setState({verifying:!1,availableApiGateways:t},(()=>{this.onTargetSelect(i)}))})).catch((e=>{this.setState({verifying:!1,errorApiGateways:!0}),"invalidAWSRegion"===r().get(e,"error.name")?pm.toasts.error(r().get(e,"error.message")||"Please enter a valid AWS region.",{title:r().get(e,"error.title")||"Invalid AWS Region"}):(pm.toasts.error(r().get(e,"error.message","Something went wrong while fetching API Gateways"),{title:r().get(e,"error.title","Unable to fetch API Gateways")}),pm.logger.error("Something went wrong while fetching API Gateways",e))}))}fetchApiGatewaysWithIntegrationId(e){let{aws_api_gateway_id:t}=this.state,{rule:i}=this.props;this.setState({verifying:!0}),g.default[i].fetchApiGatewaysUsingIntegrationId(e).then((e=>{let i=r().map(e,(e=>({label:e.Name||e.name,value:e.ApiId||e.id,...e}))),n=r().find(i,(e=>e.id===t||e.ApiId===t));this.setState({verifying:!1,availableApiGateways:i,selectedAPIGateway:n})})).catch((e=>{this.setState({verifying:!1}),"invalidAWSRegion"===r().get(e,"error.name")?pm.toasts.error(r().get(e,"error.message")||"Please enter a valid AWS region.",{title:r().get(e,"error.title")||"Invalid AWS Region"}):(pm.toasts.error("Something went wrong while fetching API Gateways, please try again."),pm.logger.error("Something went wrong while fetching API Gateways",e))}))}handleBannerClose(){this.setState({showInfoBanner:!1})}handleRoleArnInput(e){this.setState({selectedAPIGateway:"",role_arn:e,errorRoleArn:r().isEmpty(e)?"Please enter the role ARN":""},(()=>{!this.state.aws_region||r().isEmpty(this.state.aws_region)||r().isEmpty(this.state.role_arn)||this.fetchApiGateways()}))}handleAwsRegionInput(e){this.setState({selectedAPIGateway:"",aws_region:e.trim(),errorAwsRegion:r().isEmpty(e.trim())?"Please enter a AWS region":""},(()=>{!this.state.role_arn||r().isEmpty(this.state.role_arn)||r().isEmpty(this.state.aws_region)||this.fetchApiGateways()}))}setIsUpdatingIntegration(e){this.setState({isUpdatingIntegration:e})}setExternalId(){let e={rule:this.props.rule,type:"fetchExternalId"};I.default.fetchExternalId(e).then((e=>{this.setState({external_id:e})})).catch((e=>{pm.toasts.error("Something went wrong, please try again."),pm.logger.error("Something went wrong while fetching External ID",e)}))}componentDidMount(){const{variables:e,authType:t}=this.props;this.setState(this.getInitialState(),(()=>{e.auth_type===b.AWS_IAM_ROLE?this.fetchApiGatewaysWithIntegrationId(this.props.integrationId):t!==b.AWS_IAM_ROLE||r().isEmpty(this.state.role_arn)||this.fetchApiGateways(),this.setExternalId()}))}getInitialState(){const{variables:e}=this.props;return{auth_type:e.auth_type,aws_api_type:e.aws_api_type,apiVersionId:e.executor,postman_api_id:e.postman_api_id,role_arn:e.role_arn,external_id:e.external_id,aws_region:e.aws_region,aws_api_gateway_id:e.aws_api_gateway_id,selectedAuthType:e.auth_type===b.AWS_IAM_ROLE?{label:"IAM",value:b.AWS_IAM_ROLE}:{label:"Access Key",value:b.AWS_KEYS},selectedAPIGatewayType:"http"===e.aws_api_type?{label:"HTTP",value:"http"}:{label:"REST",value:"rest"}}}render(){let{rule:e,apiId:t,apiVersionId:i,authType:n,integration_name:s,integrationId:a}=this.props,{role_arn:l,aws_region:c,verifying:d,errorAwsRegion:h,errorRoleArn:g,external_id:b,showInfoBanner:I,aws_api_type:w,aws_api_gateway_id:A,availableApiGateways:P,selectedAPIGateway:T,errorGateway:C,availableApiGatewayTypes:D,selectedAPIGatewayType:j,isUpdatingIntegration:k,errorApiGateways:O}=this.state,M={rule:e,name:s,entity:"apiversion",executor:i,api_id:t,variables:{auth_type:n,aws_api_type:w,role_arn:l,external_id:b,postman_api_id:t,aws_region:c,aws_api_gateway_id:A,aws_key_id:"",aws_access_key:""}},R=s.length<256;return o.createElement("div",null,o.createElement(u.SelectSegmentV2,{title:"AWS API Type",options:D,value:j,onTargetSelect:this.handleAwsAPITypeSelection}),o.createElement(y.default,{title:"AWS account ID",value:this.state.aws_account_id,description:"This assigns the IAM role to Postman."}),o.createElement(y.default,{title:"External ID",value:this.state.external_id,description:"This adds an extra level of security against malicious attacks."},o.createElement(_.default,{extUrl:"https://go.pstmn.io/docs-apigateway-integration-confused-duty-problem"},"Learn more")),o.createElement(u.FieldSegment,{mandatory:!0,id:"role-arn",placeholder:"arn:aws:iam::79840258006:role/PostmanIntegration",title:"Role ARN",description:"Provided by AWS once the IAM role is created. It allows Postman to assume the IAM role.",value:l,error:g,onBlur:()=>{this.handleRoleArnInput(l)},onChange:e=>{this.setState({role_arn:e,errorRoleArn:""})}}),o.createElement(u.FieldSegment,{mandatory:!0,id:"aws-region",placeholder:"Enter AWS Region",title:"AWS Region",value:c,error:h,onBlur:()=>{this.handleAwsRegionInput(c)},onChange:e=>{this.setState({aws_region:e,errorAwsRegion:""})}}),o.createElement("div",{className:"aws-gateway-dropdown"},o.createElement(u.SelectSegmentV2,{title:"AWS Gateway",label:"Select AWS Gateway",options:P,value:T,onTargetSelect:this.onTargetSelect,noOptionsForDropdown:"No API Gateways found",error:O?"Unable to load API Gateways":"",loading:d,handleRetry:this.fetchApiGateways})),o.createElement("div",{className:"aws-gateway__button"},o.createElement(f.default,{className:"integrations-add-actions__button--proceed",type:"primary",size:"small",disabled:!l||!c||d||!P||r().isEmpty(A)||r().isEmpty(s)||!R||!(0,x.isFormUpdated)(this.getInitialState(),this.state),payload:M,setIsUpdatingIntegration:this.setIsUpdatingIntegration,integrationId:a},"Update"),o.createElement("div",{className:"integrations-add-actions__button--container"},o.createElement(p.Button,{className:"integrations-add-actions__button--cancel",type:"secondary",disabled:k,size:"small",onClick:()=>{m.default.transitionTo("build.apiVersion",{apiId:M.api_id,versionId:M.executor},{tab:E.DEPLOYMENT}),v.default.closeByRoute(S.V10_API_EDIT_DEPLOYMENT_INTEGRATION_URL,{apiId:M.api_id,integrationId:a})}},"Cancel"))))}})||s;function T(e){const{rule:t}=e;if("api_gateway_aws"===t)return o.createElement(A,e)}},"./integrations/api-observability/components/edit/ApigeeAPIGateway.js":function(e,t,i){i.r(t),i.d(t,{APIGatewayApigeeDefault:function(){return T},default:function(){return C}});var n,s=i("./node_modules/lodash/lodash.js"),a=i.n(s),r=i("../../node_modules/react/index.js"),o=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=i("./js/stores/StoreManager.js"),c=i("./integrations/api-observability/stores/APIObservabilityStore.js"),d=i("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),h=i("../../node_modules/@postman/aether/esmLib/src/components/FileUploader/FileUploader.js"),u=i("../../node_modules/@postman/aether/esmLib/src/components/TextInput/TextInput.js"),p=i("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),g=i("../../node_modules/@postman/aether/esmLib/src/components/TextArea/TextArea.js"),m=i("../../node_modules/@postman/aether/esmLib/src/components/ButtonGroup/ButtonGroup.js"),f=i("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),b=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),y=i("./js/services/NavigationService.js"),_=i("./api-dev/constants/APISubViews.js"),v=i("./appsdk/workbench/TabService.js"),S=i("./integrations/navigation/constants.js"),I=i("./js/modules/services/AnalyticsService.js"),E=i("./js/components/base/LoadingIndicator.js"),x=i("./integrations/api-observability/constants.ts"),w=i("./integrations/api-observability/components/base/CustomMultiSelect.js"),A=i("./integrations/api-observability/components/base/CustomDropdown.js"),P=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/FormUpdateChecker.ts");let T=(0,o.observer)(n=class extends r.Component{constructor(e){super(e),this.setUploadedFile=e=>{let t=a().isObject(e)?e[0]:"";if(t){let e=new FileReader;e.readAsText(t,"UTF-8"),e.onload=function(e){try{let t=JSON.parse(e.target.result),i=Object.keys(t);if(this.setState({isFileUploaded:!0,serviceAccountEmail:a().get(t,"client_email"),privateKey:a().get(t,"private_key")},(()=>this.resetFormValuesAndFetchOrganizations())),!i.includes("client_email","private_key")){let e=new Error;throw e.name="invalidFileContent",e}}catch(e){this.setState({isFileUploaded:!1}),"invalidFileContent"===e.name?(pm.toasts.error("Invalid file content. Please try selecting different file."),pm.logger.error("Something went wrong while parsing JSON file",e)):(pm.toasts.error("Something went wrong. Please try again."),pm.logger.error("Something went wrong while parsing JSON file",e))}}.bind(this)}else this.setState({isFileUploaded:!1,serviceAccountEmail:"",privateKey:""})},this.handleServiceAccountEmail=e=>{this.setState({serviceAccountEmail:e,errorServiceAccountEmail:!e},(()=>this.resetFormValuesAndFetchOrganizations()))},this.handlePrivateKey=e=>{this.setState({privateKey:e.replace(/\\n/g,"\n"),errorPrivateKey:!e},(()=>this.resetFormValuesAndFetchOrganizations()))},this.resetFormValuesAndFetchOrganizations=()=>{const{serviceAccountEmail:e,privateKey:t}=this.state;this.setState({selectedOrganization:[],selectedApiProxy:[],selectedEnvironments:[],fetchedOrganizations:[]}),e&&t&&this.fetchOrganizations(x.PRE_CONFIG)},this.state={fetchedOrganizations:[],selectedOrganization:null,fetchedApiProxies:[],selectedApiProxy:null,fetchedEnvironments:[],selectedEnvironments:null,integrationId:"",serviceAccountEmail:a().get(this.props,"variables.service_account_email"),privateKey:a().get(this.props,"variables.private_key"),originalState:{}},this.store=(0,l.resolveStoreInstance)(c.default),this.handleSelectOrganization=this.handleSelectOrganization.bind(this),this.handleSelectApiProxy=this.handleSelectApiProxy.bind(this),this.handleSelectEnvironments=this.handleSelectEnvironments.bind(this),this.handleConnect=this.handleConnect.bind(this),this.navigateToDeploymentsTab=this.navigateToDeploymentsTab.bind(this),this.fetchOrganizations=a().debounce(this.fetchOrganizations.bind(this),1e3),this.fetchApiProxies=this.fetchApiProxies.bind(this),this.fetchEnvironments=this.fetchEnvironments.bind(this),this.updateIntegration=this.updateIntegration.bind(this),this.renderLoadingState=this.renderLoadingState.bind(this),this.getValidationState=this.getValidationState.bind(this)}componentDidMount(){this.setState({originalState:a().pick(this.state,["selectedOrganization","selectedApiProxy","selectedEnvironments","serviceAccountEmail","privateKey"])}),this.fetchOrganizations(x.POST_CONFIG),this.fetchApiProxies(x.POST_CONFIG),this.fetchEnvironments(x.POST_CONFIG)}fetchOrganizations(e){let{serviceAccountEmail:t,privateKey:i,selectedOrganization:n}=this.state;this.setState({isFetchingOrganization:!0});let s={service_account_email:t,private_key:i},r=x.FETCH_ORGANIZATIONS,o=a().get(this.props,"variables.organization"),l=this.props.integrationId;e===x.PRE_CONFIG&&(s.classId=this.props.rule),b.default.fetchGatewayActionDetails(e,r,s,l).then((t=>{let i=a().get(t,"body.data.organizations",[]),s=a().map(i,(t=>{if(e===x.POST_CONFIG&&a().get(t,"organization")===o){n={label:o,value:o};const e={...this.state.originalState};a().set(e,"selectedOrganization",n),this.setState({selectedOrganization:n,originalState:e})}return{label:t.organization,value:t.organization}}));this.setState({fetchedOrganizations:s,isFetchingOrganization:!1,fetchErrorOrganizations:!1})})).catch((e=>{this.setState({fetchErrorOrganizations:!0,isFetchingOrganization:!1}),pm.toasts.error("Something went wrong while fetching Apigee organizations"),pm.logger.error("Something went wrong while fetching Apigee organizations",e)}))}fetchApiProxies(e){let{serviceAccountEmail:t,privateKey:i,selectedOrganization:n,selectedApiProxy:s}=this.state;this.setState({isFetchingApiProxies:!0});let r={service_account_email:t,private_key:i,organization:a().get(n,"value")},o=x.FETCH_API_PROXIES,l=a().get(this.props,"variables.api_proxy"),c=this.props.integrationId;e===x.PRE_CONFIG&&(r.classId=this.props.rule),b.default.fetchGatewayActionDetails(e,o,r,c).then((t=>{let i=a().get(t,"body.data.proxies",[]),n=a().map(i,(t=>{if(e===x.POST_CONFIG&&a().get(t,"name")===l){s={label:l,value:l};const e={...this.state.originalState};a().set(e,"selectedApiProxy",s),this.setState({selectedApiProxy:s,originalState:e})}return{label:t.name,value:t.name}}));this.setState({fetchedApiProxies:n,isFetchingApiProxies:!1,fetchErrorApiProxies:!1})})).catch((e=>{this.setState({fetchErrorApiProxies:!0,isFetchingApiProxies:!1}),pm.toasts.error("Something went wrong while Apigee API Proxies"),pm.logger.error("Something went wrong while fetching Apigee API Proxies",e)}))}fetchEnvironments(e){let{serviceAccountEmail:t,privateKey:i,selectedOrganization:n,selectedEnvironments:s}=this.state;this.setState({isFetchingEnvironments:!0});let r={service_account_email:t,private_key:i,organization:a().get(n,"value")},o=x.FETCH_ENVIRONMENTS,l=a().get(this.props,"variables.environments"),c=this.props.integrationId;s=s||[],e===x.PRE_CONFIG&&(r.classId=this.props.rule),b.default.fetchGatewayActionDetails(e,o,r,c).then((t=>{let i=a().map(a().get(t,"body.data",[]),(t=>{if(e===x.POST_CONFIG&&l.includes(t)){s.push({label:t,value:t});const e={...this.state.originalState};a().set(e,"selectedEnvironments",s),this.setState({selectedEnvironments:s,originalState:e})}return{label:t,value:t}}));this.setState({fetchedEnvironments:i,isFetchingEnvironments:!1,fetchErrorEnvironments:!1})})).catch((e=>{this.setState({fetchErrorEnvironments:!0,isFetchingEnvironments:!1}),pm.toasts.error("Something went wrong while fetching Apigee environments"),pm.logger.error("Something went wrong while fetching Apigee environments",e)}))}handleSelectOrganization(e){this.setState({selectedOrganization:e,errorOrganization:a().isEmpty(e),fetchedApiProxies:[],selectedApiProxy:[],selectedEnvironments:[],fetchedEnvironments:[]},(()=>{a().get(e,"value")&&(this.fetchApiProxies(x.PRE_CONFIG),this.fetchEnvironments(x.PRE_CONFIG))}))}handleSelectEnvironments(e){this.setState({selectedEnvironments:e,errorEnvironments:a().isEmpty(e)})}handleSelectApiProxy(e){this.setState({selectedApiProxy:e,errorApiProxy:a().isEmpty(e)})}handleConnect(){let{selectedOrganization:e,selectedApiProxy:t,selectedEnvironments:i,serviceAccountEmail:n,privateKey:s}=this.state,{rule:r,integrationId:o}=this.props,l={variables:{service_account_email:n,...s?{private_key:s}:{},organization:a().get(e,"value"),api_proxy:a().get(t,"value"),environments:a().isArray(i)?i.map((e=>a().get(e,"value"))):[]}};this.setState({isAddingIntegration:!0}),this.updateIntegration(l,r,o)}updateIntegration(e,t,i){b.default.updateIntegration(i,e).then((e=>{this.setState({isAddingIntegration:!1}),200===a().get(e,"status")&&a().get(e,"body.model_id")?(pm.toasts.success("Successfully updated integration"),I.default.addEventV2({category:"integrations",action:t+"_edited_integration",label:"team_integrations_edit_forms",value:1}),this.navigateToDeploymentsTab()):pm.toasts.error("Something went wrong while updating integration")})).catch((e=>{this.setState({isAddingIntegration:!1}),"integrationFoundError"===a().get(e,"error.name")?pm.toasts.error("The integration already exists."):pm.toasts.error("Something went wrong while updating integration. Please try again."),pm.logger.error("Something went wrong while updating integration",e)}))}navigateToDeploymentsTab(){let{apiId:e,apiVersionId:t}=this.props,i={apiId:e,versionId:t};v.default.closeByRoute(S.V10_API_EDIT_DEPLOYMENT_INTEGRATION_URL,{apiId:e,integrationId:this.state.integrationId}),this.store.initializeApiObservabilityStore({apiId:e,apiVersionId:t,category:x.API_OBSERVABILITY}),y.default.transitionTo("build.apiVersion",i,{tab:_.DEPLOYMENT})}renderLoadingState(){return r.createElement(d.default,{justifyContent:"space-between"},r.createElement("div",null,"Loading..."),r.createElement(E.default,{className:"loading-indicator-aether__dropdown"}))}getValidationState(e){let{errorOrganization:t,fetchErrorOrganizations:i,errorApiProxy:n,fetchErrorApiProxies:s,errorEnvironments:a,fetchErrorEnvironments:o}=this.state;return"organization"===e?t||i?{status:"error",message:i?r.createElement("div",null,"Unable to load organizations.",r.createElement("span",{className:"dropdown-retry",onClick:()=>{this.fetchOrganizations(x.PRE_CONFIG)}},"Retry")):"Please select an organization."}:{}:"apiProxy"===e?n||s?{status:"error",message:s?r.createElement("div",null,"Unable to load API Proxies.",r.createElement("span",{className:"dropdown-retry",onClick:()=>{this.fetchApiProxies(x.PRE_CONFIG)}},"Retry")):"Please select an API Proxy."}:{}:a||o?{status:"error",message:o?r.createElement("div",null,"Unable to load environments.",r.createElement("span",{className:"dropdown-retry",onClick:()=>{this.fetchEnvironments(x.PRE_CONFIG)}},"Retry")):"Please select one or more environments."}:{}}render(){const{fetchedOrganizations:e,selectedOrganization:t,fetchedApiProxies:i,selectedApiProxy:n,fetchedEnvironments:s,selectedEnvironments:o,isAddingIntegration:l,isFetchingOrganization:c,isFetchingApiProxies:d,isFetchingEnvironments:b,serviceAccountEmail:y,errorServiceAccountEmail:_,isFileUploaded:v,privateKey:S,errorPrivateKey:I}=this.state,E=a().isEmpty(t)||a().isEmpty(n)||a().isEmpty(o);return r.createElement("div",{className:"connect-apigee-gateway__container"},r.createElement("div",{className:"connect-apigee-gateway__form__edit"},r.createElement("div",{className:"connect-apigee-gateway__form--component"},r.createElement(h.default,{label:"Upload private key file (Optional)",helperText:r.createElement("div",null,r.createElement("div",null,"Upload private key file or manually enter the values below. "),r.createElement("div",null,"Only JSON file format is supported.")),id:"file-uploader",accept:".json",onChange:this.setUploadedFile,actionLabel:"Select File"})),r.createElement("div",{className:"connect-apigee-gateway__form--component"},r.createElement(u.default,{placeholder:"Enter service account email",helperText:"Service Account Email associated with Google Cloud Project",value:y,onChange:e=>this.handleServiceAccountEmail(e.target.value),label:r.createElement(p.default,{text:"Service Account Email"}),validationStatus:_?"error":"",validationMessage:"Please enter service account email",isDisabled:v})),r.createElement("div",{className:"connect-apigee-gateway__form--component"},r.createElement(g.default,{placeholder:"Enter private key",helperText:"Private key associated with the Service Account",value:S,onChange:e=>this.handlePrivateKey(e.target.value),label:r.createElement(p.default,{text:"Private Key"}),validationStatus:I?"error":"",validationMessage:"Please enter private key",isDisabled:v,isResizable:!1})),r.createElement("div",{className:"connect-apigee-gateway__form--component"},r.createElement(A.default,{onChange:this.handleSelectOrganization,options:e||[],value:t,label:"Organization",placeholder:c?this.renderLoadingState():"Select Organization",className:c?"dropdown-icon-remove":"",emptyStateMessage:"No organizations found",isDisabled:c,validationState:this.getValidationState("organization"),menuWidth:x.DROPDOWN_WIDTH})),r.createElement("div",{className:"connect-apigee-gateway__form--component"},r.createElement(A.default,{onChange:this.handleSelectApiProxy,options:i||[],value:n,label:"API Proxy",helperText:"Connection between Proxy and Postman API",placeholder:d?this.renderLoadingState():"Select API Proxy",className:d?"dropdown-icon-remove":"",isDisabled:!a().get(t,"value")||d,emptyStateMessage:"No API Proxies found",validationState:this.getValidationState("apiProxy"),menuWidth:x.DROPDOWN_WIDTH})),r.createElement("div",{className:"connect-apigee-gateway__form--component"},r.createElement(w.default,{onChange:this.handleSelectEnvironments,options:s,value:o,label:"Environments",helperText:"Environments configured on Apigee X over which APIs are deployed",placeholder:b?this.renderLoadingState():"Select one or more environments",isDisabled:!a().get(t,"value")||b,emptyStateMessage:"No environments found",validationState:this.getValidationState("environments")})),r.createElement("div",{className:"connect-apigee-gateway__form--buttons--update"},r.createElement(m.default,null,r.createElement(f.default,{type:"secondary",size:"small",onClick:()=>{this.navigateToDeploymentsTab()},text:"Cancel",isDisabled:l}),r.createElement(f.default,{type:"primary",size:"small",onClick:()=>{this.handleConnect()},isDisabled:E||!(0,P.isFormUpdated)(this.state.originalState,this.state),text:"Update",isLoading:l})))))}})||n;function C(e){const{rule:t}=e;return"api_gateway_apigee"===t?r.createElement(T,e):r.createElement("div",null)}},"./integrations/api-observability/components/edit/Azure.js":function(e,t,i){i.r(t),i.d(t,{AzureSetup:function(){return E},default:function(){return x}});var n,s=i("./node_modules/lodash/lodash.js"),a=i.n(s),r=i("../../node_modules/react/index.js"),o=i("./integrations/components/error-states/IntegrationNotSupported.js"),l=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),c=i("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),d=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-add-stroke-small.js"),h=i("./api-dev/constants/APISubViews.js"),u=i("./integrations/api-observability/components/base/AzureServiceConfig.js"),p=i("./integrations/api-observability/components/base/CancelButton.js"),g=i("./integrations/api-observability/components/base/EditIntegrationV2.js"),m=i("./node_modules/uuid/v4.js"),f=i.n(m),b=i("./integrations/navigation/constants.js"),y=i("./js/stores/StoreManager.js"),_=i("./integrations/api-observability/stores/APIObservabilityStore.js"),v=i("./integrations/api-observability/constants.ts"),S=i("./integrations/api-observability/AzureFormHelper.js");function I(){return I=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},I.apply(this,arguments)}let E=(0,l.observer)(n=class extends r.Component{constructor(e){super(e),this.handleLinkedApis=(e,t)=>{let{linkedApis:i}=this.state,n=!1;e&&(i[t]=e),a().each(i,(e=>{if(!(a().get(e,"azure_subscription_id")&&a().get(e,"azure_resource_group_id")&&a().get(e,"azure_service_id")&&a().get(e,"azure_api_id")))return n=!0,!1})),this.setState({linkedApis:i,isDisabled:n})},this.generatePayload=()=>{const{linkedApis:e}=this.state;let t={variables:{linked_apis:(0,S.generateApiList)(e)}};return new Promise((e=>this.setState({payload:t},(()=>e(t)))))},this.handleFetchedSubscriptions=e=>{this.setState({fetchedSubscriptions:e})},this.addSection=()=>{let{linkedApis:e}=this.state;const t=f()();e[t]={},a().each(e,(e=>{e.isCollapsed=!0})),e[t].isCollapsed=!1,this.setState({linkedApis:e})},this.removeSection=e=>{let{linkedApis:t}=this.state;t[e]&&delete t[e],this.setState({linkedApis:t})},this.handleCollapse=(e,t)=>{let{linkedApis:i}=this.state;i[e]&&(i[e].isCollapsed=t),this.setState({linkedApis:i})},this.renderSections=()=>{let{fetchedSubscriptions:e,linkedApis:t}=this.state,i=[],n=1,s=[];return a().isObject(t)&&a().each(Object.keys(t),(e=>{t[e].azure_api_path&&s.push(t[e].azure_api_path)})),a().isObject(t)&&a().each(t,((a,o)=>{let l=t[o].isCollapsed;i.push(r.createElement(u.default,I({},this.props,{key:o,index:o,handleLinkedApis:this.handleLinkedApis,linkedApis:t,config:a,fetchedSubscriptions:e,selectedApiPaths:s,handleFetchedSubscriptions:this.handleFetchedSubscriptions,handleRemoveSection:this.removeSection,handleCollapse:this.handleCollapse,isCollapsed:l,isRemoveHidden:1===Object.keys(t).length,formType:v.EDIT,serialNumber:n}))),n++})),i},this.state={fetchedSubscriptions:[]},this.store=(0,y.resolveStoreInstance)(_.default)}componentDidMount(){const e=a().get(this.props,"variables.linked_apis");let t={};a().each(e,(e=>{let i=f()();t[i]=e,t[i].isCollapsed=!1})),this.setState({linkedApis:t})}render(){const{payload:e,isDisabled:t}=this.state,{apiId:i,apiVersionId:n,rule:s}=this.props;return r.createElement("div",null,r.createElement("div",{className:"observability-azure-add-integration__service"},v.SETUP_AZURE_API_MANAGEMENT_SERVICES),this.renderSections(),r.createElement("div",{className:"observability-azure-add-integration__buttons__add-service"},r.createElement(c.default,{onClick:()=>{this.addSection()},type:"tertiary",text:"Add Service",size:"small",icon:r.createElement(d.default,null),isDisabled:t||this.store.isAdding})),r.createElement("div",{className:"observability-azure-add-integration__buttons"},r.createElement(g.default,{text:"Update",payload:e,rule:s,apiId:i,apiVersionId:n,isDisabled:t||!(0,S.isFormUpdated)(this.props,this.state),customUpdateIntegrationHandler:this.generatePayload,integrationId:this.props.integrationId,redirectUrl:b.V10_API_EDIT_DEPLOYMENT_INTEGRATION_URL}),r.createElement("span",{className:"observability-azure-add-integration__buttons__cancel"},r.createElement(p.default,{text:"Cancel",apiId:i,apiVersionId:n,integrationId:this.props.integrationId,redirectUrl:b.V10_API_EDIT_DEPLOYMENT_INTEGRATION_URL}))))}})||n;function x(e){const{rule:t,apiId:i,apiVersionId:n}=e;return"api_management_azure"===t?r.createElement(E,e):r.createElement(o.default,{apiId:i,apiVersionId:n,tab:h.DEPLOYMENT})}},"./integrations/api-observability/components/edit/index.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return d}});var n=i("../../node_modules/react/index.js"),s=i("./integrations/api-observability/components/edit/ApiGateway.js"),a=i("./integrations/api-observability/components/edit/ApigeeAPIGateway.js"),r=i("./integrations/api-observability/components/edit/Azure.js"),o=i("./integrations/components/error-states/IntegrationNotSupported.js"),l=i("./api-dev/constants/APISubViews.js");const c={api_gateway_aws:s.default,api_gateway_apigee:a.default,api_management_azure:r.default};function d(e){const{rule:t,apiId:i,apiVersionId:s}=e,a=c[t];return(0,n.useEffect)((()=>{a||e.headingHandler(!1)}),[]),a?n.createElement(a,e):n.createElement(o.default,{apiId:i,apiVersionId:s,tab:l.DEPLOYMENT})}},"./integrations/api-observability/components/import-schema/APIGatewayAWS.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return C}});var n,s=i("./node_modules/lodash/lodash.js"),a=i.n(s),r=i("../../node_modules/react/index.js"),o=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=i("../../node_modules/@postman/aether/esmLib/src/components/Tooltip/Tooltip.js"),c=i("../../node_modules/@postman/aether/esmLib/src/components/Modal/Modal.js"),d=i("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),h=i("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/SingleSelect/SingleSelect.js"),u=i("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),p=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),g=i("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),m=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-state-error-stroke-small.js"),f=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-import-stroke.js"),b=i("./integrations/api-observability/constants.ts"),y=i("./integrations/api-observability/services/ApiGatewayService.js"),_=i("./integrations/api-observability/services/GatewayIntegrationsService.js"),v=i("./integrations/api-observability/components/base/ImportSchemaActions.js"),S=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),I=i("./integrations/api-observability/components/common/ErrorState.js"),E=i("./js/services/NavigationService.js"),x=i("./appsdk/workbench/TabService.js"),w=i("./integrations/navigation/constants.js"),A=i("./api-dev/constants/APISubViews.js"),P=i("./integrations/api-observability/components/common/ImportSchemaBanner.js"),T=i("./integrations/api-observability/services/Helper.js");let C=(0,o.observer)(n=class extends r.Component{constructor(e){super(e),this.state={errorStages:!1,loadingStages:!1,stages:[],loadingData:!1,errorData:!1,AWSApiType:a().get(this.props,"integration.variables.aws_api_type")||b.API_GATEWAY_TYPES.HTTP,integration:a().get(this.props,"integration",{}),loadingSchema:!1,errorFetchingSchema:!1,schemaContent:null,selectedStage:null,selectedAPIGateway:null,showImportModal:!1,isImportDisabled:!1,hasPermission:!1,loadingPermission:!1,errorPermission:!1,apiDetails:{},isGitIntegrationLinked:!1,apiDefinition:{},isSchemaPresent:!1},this.fetchStages=this.fetchStages.bind(this),this.fetchSchema=this.fetchSchema.bind(this),this.handleStageChange=this.handleStageChange.bind(this),this.renderFormInputs=this.renderFormInputs.bind(this),this.renderImportModal=this.renderImportModal.bind(this),this.bootstrap=this.bootstrap.bind(this),this.fetchIntegrationData=this.fetchIntegrationData.bind(this),this.renderSchemaActions=this.renderSchemaActions.bind(this),this.closeImportModal=this.closeImportModal.bind(this),this.handleNoSchema=this.handleNoSchema.bind(this),this.fetchRequiredPermission=this.fetchRequiredPermission.bind(this),this.renderTooltip=this.renderTooltip.bind(this)}componentDidMount(){this.bootstrap(),this.fetchRequiredPermission()}componentDidUpdate(e){a().isEqual(e.integrationId,this.props.integrationId)||this.bootstrap()}fetchRequiredPermission(){this.setState({loadingPermission:!0,errorPermission:!1}),T.default.hasEditPermissionOnAPI(this.props.apiId).then((e=>{this.setState({hasPermission:e,loadingPermission:!1})})).catch((e=>{this.setState({loadingPermission:!1,errorPermission:e}),pm.logger.error("Permission fetching error ~",e)}))}fetchStages(){this.setState({loadingStages:!0,errorStages:!1}),y.default.fetchStages(a().get(this.state,"integration.id")).then((e=>{let t=a().orderBy(e,[e=>new Date(e.CreatedDate)],["desc"]),i=a().map(t,(e=>({label:e.StageName||e.stageName,value:e.StageName||e.stageName})));this.setState({stages:i,loadingStages:!1},(()=>{this.handleNoSchema()}))})).catch((e=>{pm.logger.error("Error occurred while fetching stages",e),this.setState({errorStages:!0,loadingStages:!1,isImportDisabled:!1})}))}fetchSchema(){this.setState({loadingSchema:!0,errorFetchingSchema:!1});const{selectedStage:e,integration:t}=this.state;_.default.performAction(a().get(t,"id"),{stage:a().get(e,"label")},b.AWS_GATEWAY_ACTIONS.EXPORT_API).then((e=>{if(200!==e.status)throw new Error("Something went wrong while fetching schema");{const t=a().get(e,"body.data.versions.0.schemas.0"),i={content:a().get(t,"schema"),language:a().get(t,"language"),type:a().get(t,"type")};this.setState({schemaContent:i,loadingSchema:!1,errorFetchingSchema:!1})}})).catch((e=>{pm.logger.error("Error occurred while fetching Definition",e),pm.toasts.error("Error occurred while fetching Definition"),this.setState({loadingSchema:!1,errorFetchingSchema:e})}))}fetchIntegrationData(){const{integrationId:e=""}=this.props;return S.default.getIntegrationData(e&&e.toString()).then((e=>{const t=a().get(e,"body.data");return 200!==e.status||a().isEmpty(t)?new Error("Something went wrong while fetching integration"):Promise.resolve(t)})).catch((e=>Promise.reject("Something went wrong while fetching integration")))}bootstrap(){this.setState({loadingData:!0,errorData:!1,errorFetchingSchema:!1,formSource:this.props.formSource});const{apiId:e,versionId:t}=this.props;Promise.all([this.fetchIntegrationData(),T.default.fetchAPIDetails(e),T.default.isSchemaPresent(e,t)]).then((([e,t,i])=>{a().get(t,"isGitIntegrationLinked")&&(i=!a().isEmpty(a().get(t,"apiDefinition.fileTree.items.files"))||!a().isEmpty(a().get(t,"apiDefinition.fileTree.items.folders"))),this.setState({integration:e,...t,loadingData:!1,errorData:!1,isSchemaPresent:i},(()=>{this.fetchStages()}))})).catch((e=>{pm.logger.error("Error occurred while fetching data",e),this.setState({loadingData:!1,errorData:e})}))}handleNoSchema(){const{formSource:e,integrationId:t,apiId:i,versionId:n}=this.props,{stages:s}=this.state;!a().isEmpty(s)?this.setState({isImportDisabled:!1}):a().isEqual(e,b.IMPORT_FORM_SOURCES.INTEGRATION_SETUP)?(pm.toasts.warn("Skipping definition import as no stages found on linked API Gateway",{title:"Import Definition"}),x.default.closeByRoute(w.V10_API_ADD_DEPLOYMENT_INTEGRATION_URL,{apiId:i}),E.default.transitionTo("build.apiVersion",{apiId:i,versionId:n,integrationId:t},{tab:A.DEPLOYMENT})):this.setState({isImportDisabled:!0})}handleStageChange(e){this.setState({selectedStage:e},(()=>{this.fetchSchema()}))}closeImportModal(){this.setState({showImportModal:!1,stages:[],selectedStage:null})}renderTooltip(){const{isImportDisabled:e,loadingPermission:t,hasPermission:i,errorPermission:n}=this.state,s=(e?"No stages found on linked API Gateway":t&&"Fetching required permission")||n&&"Error occurred while fetching required permission. Please try again."||!i&&b.PERMISSION_ERROR||"Import definition from AWS";return r.createElement(l.default,{content:s,triggerEvent:"mouseenter"})}renderSchemaActions(){const{integration:e,loadingStages:t,errorStages:i,loadingSchema:n,errorFetchingSchema:s,selectedStage:o,loadingData:l,errorData:c,apiDetails:d,apiDefinition:h,isGitIntegrationLinked:u}=this.state,p={apiId:a().get(e,"variables.postman_api_id"),versionId:a().get(e,"executor"),integrationId:a().get(e,"id"),schemaContent:a().get(this.state,"schemaContent")},g=o&&!n&&!s&&a().isEmpty(a().get(p,"schemaContent.content"));return l||c?r.createElement("div",null):r.createElement(v.default,{payload:p,disabled:!o||n||s||i||t||g,tooltipText:n?"Fetching Definition":g&&"No Definition found on selected stage.",formSource:this.props.formSource,onCancel:this.closeImportModal,onImport:this.closeImportModal,isLoading:n,rule:a().get(e,"rule"),apiDetails:d,apiDefinition:h,isGitIntegrationLinked:u})}renderImportModal(){const{showImportModal:e}=this.state;return r.createElement(c.Modal,{isOpen:e,onClose:this.closeImportModal,className:"observability-import-schema-modal"},r.createElement(c.ModalHeader,{heading:"Import Definition"}),r.createElement(c.ModalContent,{className:"observability-import-schema-modal__content"},this.renderFormInputs()),r.createElement(c.ModalFooter,null,this.renderSchemaActions()))}renderFormInputs(){const{stages:e,loadingStages:t,loadingSchema:i,isSchemaPresent:n,selectedStage:s,loadingData:a,errorData:o,errorFetchingSchema:l}=this.state;return a?r.createElement("div",{className:"deploy-tab-container"},r.createElement(d.default,null)):o?r.createElement(I.default,{errorDetails:o}):r.createElement(r.Fragment,null,r.createElement("div",null,r.createElement(P.default,{isSchemaPresent:n})),r.createElement("div",{className:"gateway-import-schema-form-container__segment"},r.createElement(h.default,{options:e||[],value:s,isLoading:t,isDisabled:i,isSearchable:!0,onChange:this.handleStageChange,label:"AWS stage"})),l&&r.createElement(u.default,{gap:"spacing-xs",alignItems:"center"},r.createElement("span",null,r.createElement(m.default,{color:"content-color-error"})),r.createElement("span",null,r.createElement(p.default,{color:"content-color-error"},"Error occurred while fetching Definition."," ",r.createElement("span",{onClick:this.fetchSchema},r.createElement(p.default,{type:"link-default"},"Retry"))))))}render(){const e=a().get(this.props,"formSource",b.IMPORT_FORM_SOURCES.DEPLOY_DASHBOARD),{isImportDisabled:t,loadingPermission:i,hasPermission:n,errorPermission:s}=this.state;return a().isEqual(e,b.IMPORT_FORM_SOURCES.DEPLOY_DASHBOARD)?r.createElement("div",null,this.renderImportModal(),r.createElement(g.default,{text:"Import Definition",type:"tertiary",icon:r.createElement(f.default,null),onClick:()=>{this.setState({showImportModal:!0}),this.bootstrap()},isDisabled:t||i||s||!n,tooltip:this.renderTooltip()})):r.createElement("div",{className:"gateway-import-schema-form-container"},this.renderFormInputs(),r.createElement("div",{className:"gateway-import-schema-form-container__segment"},this.renderSchemaActions()))}})||n},"./integrations/api-observability/components/import-schema/Azure.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return x}});var n,s=i("./node_modules/lodash/lodash.js"),a=i.n(s),r=i("../../node_modules/react/index.js"),o=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=i("../../node_modules/@postman/aether/esmLib/src/components/Tooltip/Tooltip.js"),c=i("../../node_modules/@postman/aether/esmLib/src/components/Modal/Modal.js"),d=i("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),h=i("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/SingleSelect/SingleSelect.js"),u=i("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),p=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),g=i("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),m=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-state-error-stroke-small.js"),f=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-import-stroke.js"),b=i("./integrations/api-observability/constants.ts"),y=i("./integrations/api-observability/services/AzureService.js"),_=i("./integrations/api-observability/components/base/ImportSchemaActions.js"),v=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),S=i("./integrations/api-observability/components/common/ErrorState.js"),I=i("./integrations/api-observability/components/common/ImportSchemaBanner.js"),E=i("./integrations/api-observability/services/Helper.js");let x=(0,o.observer)(n=class extends r.Component{constructor(e){super(e),this.state={loadingData:!1,services:[],schemaTypes:b.SCHEMA_TYPES,selectedSchemaType:b.SCHEMA_TYPES[0],errorData:!1,integration:a().get(this.props,"integration",{}),loadingSchema:!1,errorFetchingSchema:!1,schemaContent:null,selectedService:null,showImportModal:!1,hasPermission:!1,loadingPermission:!1,errorPermission:!1,apiDetails:{},isGitIntegrationLinked:!1,apiDefinition:{},isSchemaPresent:!1},this.fetchSchema=this.fetchSchema.bind(this),this.fetchServices=this.fetchServices.bind(this),this.handleServiceChange=this.handleServiceChange.bind(this),this.handleSchemaTypeChange=this.handleSchemaTypeChange.bind(this),this.renderFormInputs=this.renderFormInputs.bind(this),this.renderImportModal=this.renderImportModal.bind(this),this.bootstrap=this.bootstrap.bind(this),this.fetchIntegrationData=this.fetchIntegrationData.bind(this),this.renderSchemaActions=this.renderSchemaActions.bind(this),this.closeImportModal=this.closeImportModal.bind(this),this.fetchRequiredPermission=this.fetchRequiredPermission.bind(this),this.renderTooltip=this.renderTooltip.bind(this)}componentDidMount(){this.fetchRequiredPermission(),this.bootstrap(),this.setState({selectedService:this.props.selectedService})}componentDidUpdate(e){a().isEqual(e.integrationId,this.props.integrationId)||this.bootstrap(),a().isEqual(a().get(this.props,"selectedService.value.azure_api_path"),a().get(e,"selectedService.value.azure_api_path"))||this.setState({selectedService:this.props.selectedService})}fetchRequiredPermission(){this.setState({loadingPermission:!0,errorPermission:!1}),E.default.hasEditPermissionOnAPI(this.props.apiId).then((e=>{this.setState({hasPermission:e,loadingPermission:!1})})).catch((e=>{this.setState({loadingPermission:!1,errorPermission:e}),pm.logger.error("Permission fetching error ~",e)}))}fetchServices(){const{integration:e}=this.state,t=a().get(e,"variables.linked_apis",[]),i=a().map(t,(e=>({label:a().get(e,"azure_service_id"),value:e})));this.setState({services:i},(()=>{a().isArray(i)&&1===i.length&&this.handleServiceChange(i[0])}))}handleSchemaTypeChange(e){this.setState({selectedSchemaType:e},(()=>{this.state.selectedService&&this.fetchSchema()}))}fetchSchema(){this.setState({loadingSchema:!0,errorFetchingSchema:!1});const{integration:e,selectedSchemaType:t,selectedService:i}=this.state;y.default.fetchSchema(a().get(e,"id"),i.value,t.value).then((e=>{this.setState({schemaContent:e,loadingSchema:!1,errorFetchingSchema:!1})})).catch((e=>{pm.logger.error("Error occurred while fetching Definition",e),this.setState({loadingSchema:!1,errorFetchingSchema:e})}))}fetchIntegrationData(){const{integrationId:e=""}=this.props;return v.default.getIntegrationData(e&&e.toString()).then((e=>{const t=a().get(e,"body.data");if(200===e.status&&!a().isEmpty(t))return Promise.resolve(t);throw e})).catch((e=>Promise.reject(e)))}bootstrap(){this.setState({loadingData:!0,errorData:!1,errorFetchingSchema:!1,formSource:this.props.formSource});const{apiId:e,versionId:t}=this.props;Promise.all([this.fetchIntegrationData(),E.default.fetchAPIDetails(e),E.default.isSchemaPresent(e,t)]).then((([e,t,i])=>{a().get(t,"isGitIntegrationLinked")&&(i=!a().isEmpty(a().get(t,"apiDefinition.fileTree.items.files"))||!a().isEmpty(a().get(t,"apiDefinition.fileTree.items.folders"))),this.setState({integration:e,...t,loadingData:!1,errorData:!1,isSchemaPresent:i},(()=>{this.fetchServices()}))})).catch((e=>{pm.logger.error("Error occurred while fetching data",e),this.setState({loadingData:!1,errorData:e})}))}handleServiceChange(e){e&&this.setState({selectedService:e},(()=>{this.fetchSchema()}))}closeImportModal(){this.setState({showImportModal:!1,services:[],selectedService:null,selectedSchemaType:b.SCHEMA_TYPES[0]})}renderTooltip(){const{loadingPermission:e,hasPermission:t,errorPermission:i}=this.state,n=(e?"Fetching required permission":i&&"Error occurred while fetching required permission. Please try again.")||!t&&b.PERMISSION_ERROR||"Import definition from Azure";return r.createElement(l.default,{content:n,triggerEvent:"mouseenter"})}renderSchemaActions(){const{integration:e,errorStages:t,loadingSchema:i,errorFetchingSchema:n,selectedService:s,loadingData:o,errorData:l,selectedSchemaType:c,apiDetails:d,apiDefinition:h,isGitIntegrationLinked:u}=this.state,p={apiId:a().get(e,"variables.postman_api_id"),versionId:a().get(e,"executor"),integrationId:a().get(e,"id"),schemaContent:a().get(this.state,"schemaContent")};return o||l?r.createElement("div",null):r.createElement(_.default,{payload:p,disabled:!s||!c||i||n||t,tooltipText:i&&"Fetching Definition",formSource:this.props.formSource,onCancel:this.closeImportModal,onImport:this.closeImportModal,isLoading:i,rule:a().get(e,"rule"),apiDetails:d,apiDefinition:h,isGitIntegrationLinked:u})}renderImportModal(){const{showImportModal:e}=this.state;return r.createElement(c.Modal,{isOpen:e,onClose:this.closeImportModal,className:"observability-import-schema-modal"},r.createElement(c.ModalHeader,{heading:"Import Definition"}),r.createElement(c.ModalContent,{className:"observability-import-schema-modal__content"},this.renderFormInputs()),r.createElement(c.ModalFooter,null,this.renderSchemaActions()))}renderFormInputs(){const{services:e,loadingSchema:t,schemaTypes:i,selectedSchemaType:n,selectedService:s,loadingData:o,errorData:l,errorFetchingSchema:c,isSchemaPresent:g}=this.state,f=a().isEmpty(this.props.selectedService);return o?r.createElement("div",{className:"deploy-tab-container"},r.createElement(d.default,null)):l?r.createElement(S.default,{errorDetails:l}):r.createElement(r.Fragment,null,r.createElement("div",null,r.createElement(I.default,{isSchemaPresent:g})),r.createElement("div",{className:"gateway-import-schema-form-container__segment"},r.createElement(h.default,{options:i,value:n,isDisabled:t,isSearchable:!0,isClearable:!1,onChange:this.handleSchemaTypeChange,label:"Definition type"})),f&&r.createElement("div",{className:"gateway-import-schema-form-container__segment"},r.createElement(h.default,{options:e,value:s,isDisabled:t,isSearchable:!0,onChange:this.handleServiceChange,label:"Azure service"})),c&&r.createElement(u.default,{gap:"spacing-xs",alignItems:"center"},r.createElement("span",null,r.createElement(m.default,{color:"content-color-error"})),r.createElement("span",null,r.createElement(p.default,{color:"content-color-error"},"Error occurred while fetching Definition."," ",r.createElement("span",{onClick:this.fetchSchema},r.createElement(p.default,{type:"link-default"},"Retry"))))))}render(){const e=a().get(this.props,"formSource",b.IMPORT_FORM_SOURCES.DEPLOY_DASHBOARD),{loadingPermission:t,hasPermission:i,errorPermission:n}=this.state;return a().isEqual(e,b.IMPORT_FORM_SOURCES.DEPLOY_DASHBOARD)?r.createElement("div",null,this.renderImportModal(),r.createElement(g.default,{text:"Import Definition",type:"tertiary",icon:r.createElement(f.default,null),onClick:()=>{this.handleServiceChange(this.props.selectedService),this.setState({showImportModal:!0}),this.bootstrap()},isDisabled:t||!i||n,tooltip:this.renderTooltip()})):r.createElement("div",{className:"gateway-import-schema-form-container"},this.renderFormInputs(),r.createElement("div",{className:"gateway-import-schema-form-container__segment"},this.renderSchemaActions()))}})||n},"./integrations/api-observability/components/import-schema/index.js":function(e,t,i){i.r(t);var n=i("./integrations/api-observability/components/import-schema/APIGatewayAWS.js"),s=i("./integrations/api-observability/components/import-schema/Azure.js");t.default={api_gateway_aws:n.default,api_management_azure:s.default}},"./integrations/api-observability/components/import/ImportGatewayServiceConstants.js":function(e,t,i){i.r(t),i.d(t,{API_MANAGEMENT_AZURE:function(){return s},AWS_API_GATEWAY:function(){return n},CREATE_API_MODAL:function(){return y},DEFAULT_SERVICE_NAME:function(){return r},DEFINITION:function(){return g},DISABLED_IMPORT_BUTTON_TOOLTIP_TEXT:function(){return d},FILE:function(){return m},GATEWAY_SERVICES_LIST:function(){return a},GENERIC_CREATE_INTEGRATION_ERROR:function(){return h},IMPORT_ANALYTICS_ACTION:function(){return v},IMPORT_ANALYTICS_CATEGORY:function(){return _},SERVICE_CARD_DESCRIPTION:function(){return l},SERVICE_CARD_TITLE:function(){return o},SERVICE_NOT_SUPPORTED:function(){return c},SUCCESS_IMPORT_MESSAGE:function(){return p},SUCCESS_IMPORT_SCHEMA_MESSAGE:function(){return b},SUCCESS_IMPORT_SCHEMA_TITLE:function(){return f},SUCCESS_IMPORT_TITLE:function(){return u}});const n="api_gateway_aws",s="api_management_azure",a={[n]:{serviceId:"api_gateway_aws",classId:"api_gateway_aws",serviceName:"AWS API Gateway",iconUrl:"https://static.getpostman.com/assets/aws_api_gateway.svg",darkIconUrl:"https://static.getpostman.com/assets/aws_api_gateway.svg",featureFlag:""},[s]:{serviceId:"api_management_azure",classId:"api_management_azure",serviceName:"Azure API Management",iconUrl:"https://static.getpostman.com/assets/azure-apim.svg",darkIconUrl:"https://static.getpostman.com/assets/azure-apim.svg",featureFlag:"land-646-azure-apim-integration",authType:"oauth2"}},r="API Gateway",o="Import from API Gateway",l="Select an API Gateway to import an API.",c="Postman has encountered an error. If you can't find what you're looking for, contact us at help@postman.com",d="Make sure that you have entered all the mandatory fields.",h="Your API is imported successfully but something went wrong while adding an integration.",u="Imported API successfully",p="Your API is imported in current workspace successfully.",g="Definition",m="file",f="Imported API definition successfully",b="Your API definition has been successfully imported in the current API.",y="build.api.new",_="import",v="import_by_api_gateway"},"./integrations/api-observability/components/modals/DeleteIntegrationModal.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return m}});var n,s=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),a=i("../../node_modules/react/index.js"),r=i("./js/components/base/Modals.js"),o=i("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),l=(i("./js/components/base/LoadingIndicator.js"),i("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts")),c=(i("./js/services/NavigationService.js"),i("./js/stores/StoreManager.js")),d=i("./integrations/api-observability/stores/APIObservabilityStore.js"),h=i("./js/stores/IntegrationsStore.js"),u=i("./integrations/api-observability/constants.ts"),p=i("./api-dev/util/navigationHelper.js"),g=i("./node_modules/lodash/lodash.js");let m=(0,s.observer)(n=class extends a.Component{constructor(e){super(e),this.state={isDeleting:!1,apiId:this.props.model.apiId,apiVersionId:this.props.model.id},this.store=(0,c.resolveStoreInstance)(d.default),this.integrationsStore=(0,c.resolveStoreInstance)(h.default),this.handleReset=this.handleReset.bind(this)}handleReset(){let{apiId:e,apiVersionId:t}=this.state,i={apiId:e,apiVersionId:t,category:u.API_OBSERVABILITY};pm.windowEvents.emit(`${u.API_OBSERVABILITY}-integration-deleted`,{apiId:i.apiId,apiVersionId:i.apiVersionId}),(0,p.transitionToAPI)({apiId:e,apiVersionId:t},{view:u.DEPLOYMENTS_VIEW})}render(){const{integrationId:e,ruleId:t}=this.props,{isDeleting:i,apiVersionId:n}=this.state;return a.createElement("div",null,a.createElement(r.Modal,{isOpen:this.props.isOpen,onRequestClose:this.props.handleCloseModal,className:"observability-modal"},a.createElement(r.ModalHeader,null,"Delete Integration"),a.createElement(r.ModalContent,null,"Deleting this integration will cease any actions it performs immediately.Â  Are you sure you wish to continue?"),a.createElement(r.ModalFooter,null,a.createElement(o.default,{text:"Delete Integration",className:"observability-modal__delete-button",type:"destructive",isDisabled:i,isLoading:i,onClick:()=>{this.setState({isDeleting:!0}),l.default.deleteIntegration(e).then((e=>{this.setState({isDeleting:!1}),200===e.status?(pm.toasts.success("Integration deleted successfully."),this.props.handleCloseModal(),this.integrationsStore.refetchTeamIntegrations(),this.integrationsStore.setRuleSpecificTeamIntegrations(t,null),this.handleReset(),this.store.removeIntegrationInstances(n),g.isFunction(this.props.onSuccessfulDelete)&&this.props.onSuccessfulDelete()):(pm.toasts.error("Something went wrong while deleting your integration. Please try again later."),pm.logger.error("Something went wrong while deleting your integration",e))})).catch((e=>{this.setState({isDeleting:!1}),pm.toasts.error(e.error.details&&e.error.details.message||e.error.message||"Something went wrong while deleting your integration"),pm.logger.error("Error occurred while deleting integration",e)}))}}),a.createElement(o.default,{text:"Cancel",className:"observability-modal__cancel-button",isDisabled:i,type:"secondary",onClick:this.props.handleCloseModal}))))}})||n},"./integrations/api-observability/configs/Integrations.js":function(e,t,i){i.r(t),t.default={api_management_azure:{name:"Azure API Management",icon_url:"https://static.getpostman.com/assets/azure-apim.svg",dark_icon_url:"https://static.getpostman.com/assets/azure-apim.svg"}}},"./integrations/api-observability/containers/DeployTabContainer.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return y}});var n,s=i("../../node_modules/react/index.js"),a=i("./node_modules/lodash/lodash.js"),r=i.n(a),o=i("./js/stores/StoreManager.js"),l=i("./js/stores/SyncStatusStore.js"),c=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),d=i("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),h=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/error-states/ErrorState.js"),u=i("./appsdk/workbench/TabService.js"),p=i("./js/services/NavigationService.js"),g=i("./integrations/navigation/constants.js"),m=i("./integrations/api-observability/constants.ts"),f=i("./integrations/api-observability/services/index.js"),b=i("./integrations/api-observability/components/deploy/index.js");let y=(0,c.observer)(n=class extends s.Component{constructor(e){super(e),this.state={backButtonText:"API"},this.handleBackClick=this.handleBackClick.bind(this),this.isDeployEnabled=this.isDeployEnabled.bind(this)}handleBackClick(){const e=r().get(this.props,"controller.integrationData"),t=r().get(this.props,"controller.context.releaseId"),i=r().get(e,"variables.postman_api_id"),n=r().get(e,"executor");t?p.default.transitionTo("build.release",{apiId:i,versionId:n,releaseId:t}):p.default.transitionTo("build.apiVersion",{apiId:i,versionId:n},{tab:m.DEPLOYMENT_TAB}),u.default.closeByRoute(g.V10_API_DEPLOY_URL,{apiId:i,integrationId:r().get(e,"id").toString()})}isDeployEnabled(e){return!!(e&&f.default[e.rule]&&r().isFunction(f.default[e.rule].isDeployEnabled))&&f.default[e.rule].isDeployEnabled(e)}render(){let e=r().get(this.props,"controller.integrationData"),t=!(0,o.resolveStoreInstance)(l.default).isSocketConnected,i=r().get(this.props,"controller.details");if(r().get(this.props,"controller.loadingIntegrationData")||r().get(this.props,"controller.loadingAPI"))return s.createElement("div",{className:"deploy-tab-container"},s.createElement(d.default,null));if(!t&&r().get(this.props,"controller.errorInIntegrationData")){const e=r().get(this.props,"controller.errorInIntegrationData");return pm.logger.error("Error occurred while fetching integration information",e),s.createElement("div",{className:"observability-error"},s.createElement(h.default,{errorDetails:e}))}let n=b.default[e.rule];return this.isDeployEnabled(e)&&n||this.handleBackClick(),s.createElement("div",{className:"deploy-page-container"},s.createElement("div",{className:"integrations-page-container deploy-page-container__content"},s.createElement("div",{className:"integrations-add"},s.createElement("div",{className:"integrations-add-card"},s.createElement(n,{integrationData:e,context:r().get(this.props,"controller.context"),details:i})))))}})||n},"./integrations/api-observability/containers/DetailedDashboard.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return m}});var n,s=i("../../node_modules/react/index.js"),a=i("./node_modules/lodash/lodash.js"),r=i.n(a),o=i("./js/stores/StoreManager.js"),l=i("./js/stores/SyncStatusStore.js"),c=i("./integrations/api-observability/stores/APIObservabilityStore.js"),d=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),h=i("./integrations/api-observability/services/index.js"),u=i("./integrations/api-observability/components/detailed-dashboard/index.js"),p=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/error-states/ErrorState.js"),g=i("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js");let m=(0,d.observer)(n=class extends s.Component{constructor(e){super(e),this.state={},this.isDeployEnabled=this.isDeployEnabled.bind(this),this.store=(0,o.resolveStoreInstance)(c.default)}isDeployEnabled(e){return!!(e&&h.default[e.rule]&&r().isFunction(h.default[e.rule].isDeployEnabled))&&h.default[e.rule].isDeployEnabled(e)}render(){let e=r().get(this.props,"controller.integrationData"),t=r().get(this.props,"controller.context"),i=r().get(this.props,"controller.details"),n=!(0,o.resolveStoreInstance)(l.default).isSocketConnected;if(r().get(this.props,"controller.loadingIntegrationData"))return s.createElement("div",{className:"deploy-tab-container"},s.createElement(g.default,null));if(!n&&r().get(this.props,"controller.errorInIntegrationData")){const e=r().get(this.props,"controller.errorInIntegrationData");return pm.logger.error("Error occurred while fetching integration information",e),s.createElement("div",{className:"observability-error"},s.createElement(p.default,{errorDetails:e}))}const a=u.default[r().get(e,"rule")];return a?s.createElement("div",{className:"observability-detailed-dashboard-container"},s.createElement(a,{integrationData:e,context:t,details:i})):s.createElement("div",null)}})||n},"./integrations/api-observability/containers/ImportSchema.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return l}});var n,s=i("../../node_modules/react/index.js"),a=(i("./node_modules/lodash/lodash.js"),i("../../node_modules/mobx-react/dist/mobx-react.module.js")),r=i("./integrations/api-observability/components/import-schema/index.js");function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},o.apply(this,arguments)}let l=(0,a.observer)(n=class extends s.Component{constructor(e){super(e)}render(){const{integrationId:e="",rule:t="",formSource:i,apiId:n,versionId:a}=this.props,l=r.default[t];return l?s.createElement("div",{className:"gateway-import-schema-tab-container"},s.createElement(l,o({},this.props,{formSource:i,integrationId:e,apiId:n,versionId:a}))):s.createElement("div",null,"Rule not found")}})||n},"./integrations/api-observability/containers/ObservabilityEdit.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return y}});var n,s=i("../../node_modules/react/index.js"),a=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=i("./js/stores/StoreManager.js"),o=i("./integrations/api-observability/stores/APIObservabilityStore.js"),l=i("./integrations/api-observability/components/edit/index.js"),c=i("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),d=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),h=i("./js/components/base/LoadingIndicator.js"),u=i("./integrations/components/error-states/ErrorIntegrations.js"),p=i("./appsdk/workbench/TabService.js"),g=i("./js/services/NavigationService.js"),m=i("./integrations/navigation/constants.js"),f=i("./api-dev/constants/APISubViews.js"),b=i("./node_modules/lodash/lodash.js");let y=(0,a.observer)(n=class extends s.Component{constructor(e){super(e),this.state={loading:!0,error:!1,errorDetails:"",description:"",authType:"",variables:{},showHeading:!0},this.store=(0,r.resolveStoreInstance)(o.default),this.fetchIntegrationDetails=this.fetchIntegrationDetails.bind(this),this.handleTabSwitch=this.handleTabSwitch.bind(this),this.renderHeading=this.renderHeading.bind(this)}componentDidMount(){this.fetchIntegrationDetails()}fetchIntegrationDetails(){const e=this.store.getSelectedIntegration();this.setState({loading:!0},(()=>{d.default.getIntegrationData(e).then((t=>{if(200===t.status){const i=b.get(t.body,"data.executor");this.props.controller.setVersionId(i),this.setState({selectedIntegrationId:e,executor:b.get(t.body,"data.executor"),variables:b.get(t.body,"data.variables"),rule:b.get(t.body,"data.rule"),nickname:b.get(t.body,"data.name"),loading:!1})}else this.setState({error:!0,loading:!1,errorDetails:t.body})})).catch((e=>{this.setState({loading:!1,error:!0,errorDetails:e})}))}))}handleTabSwitch(){const{selectedIntegrationId:e}=this.state;p.default.closeByRoute(m.V10_API_EDIT_DEPLOYMENT_INTEGRATION_URL,{apiId:this.props.controller.apiId,integrationId:e}),g.default.transitionTo("build.apiVersion",{apiId:b.get(this.props,"controller.apiId",void 0),versionId:b.get(this.props,"controller.version",void 0)},{tab:f.DEPLOYMENT})}renderHeading(e){this.setState({showHeading:e})}render(){if(this.state.error){let e={...this.state.errorDetails};return pm.logger.error("Error occurred while loading page",this.state.errorDetails),e&&"instanceNotFoundError"==b.get(e,"error.name")&&(pm.toasts.error("The integration you are looking for does not exist!"),this.handleTabSwitch()),s.createElement("div",{className:"observability-error"},s.createElement(u.default,null))}return this.state.loading?s.createElement("div",{className:"integrations-page-container"},s.createElement(h.default,null)):s.createElement("div",{className:"integrations-page-container"},s.createElement("div",{className:"integrations-add"},s.createElement("div",{className:"integrations-add-card"},this.state.showHeading&&s.createElement(c.default,{type:"h1",text:"Edit Integration"}),s.createElement(l.default,{integrationId:this.state.selectedIntegrationId,nickname:this.state.nickname,apiId:this.state.variables.postman_api_id,apiVersionId:this.state.executor,variables:this.state.variables,rule:this.state.rule,additionalContext:this.props.controller.additionalContext,headingHandler:this.renderHeading}))))}})||n},"./integrations/api-observability/containers/ObservabilitySetup.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return C}});var n,s=i("../../node_modules/react/index.js"),a=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=i("../../node_modules/mobx/lib/mobx.module.js"),o=i("./js/stores/StoreManager.js"),l=i("./integrations/api-observability/stores/APIObservabilityStore.js"),c=i("./integrations/api-observability/components/add/index.js"),d=i("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),h=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),u=i("../../node_modules/@postman/aether/esmLib/src/components/Stepper/Stepper.js"),p=i("../../node_modules/@postman/aether/esmLib/src/components/Stepper/StepHeader.js"),g=i("../../node_modules/@postman/aether/esmLib/src/components/Stepper/Step.js"),m=i("../../node_modules/@postman/aether/esmLib/src/components/Stepper/StepPanels.js"),f=i("../../node_modules/@postman/aether/esmLib/src/components/Stepper/StepPanel.js"),b=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),y=i("./js/components/base/LoadingIndicator.js"),_=i("./integrations/api-observability/oauth/GatewayOauthConnectingView.js"),v=i("./integrations/api-observability/oauth/GatewayOauthFailedView.js"),S=i("./integrations/utils/OauthUtilityMethods.js"),I=i("./appsdk/workbench/TabService.js"),E=i("./integrations/navigation/constants.js"),x=i("./integrations/api-observability/constants.ts"),w=i("./integrations/api-observability/components/import-schema/index.js"),A=i("./integrations/api-observability/containers/ImportSchema.js"),P=i("./node_modules/lodash/lodash.js");const T={api_gateway_aws:{title:"Connect to AWS API Gateway",description:"View deployment status and history directly from Postman."},api_management_azure:{title:"Connect to Azure API Management",description:"View deployment status of your API directly from Postman."}};let C=(0,a.observer)(n=class extends s.Component{constructor(e){super(e),this.setActiveTab=e=>this.setState({activeTab:e}),this.state={loading:!0,error:!1,errorDetails:"",description:"",authType:"",pollingParams:{},rule:null,activeTab:"authenticate",activeStepIndex:0,stepStatus:[x.AETHER_STEPPER_STATUS.PROGRESS,x.AETHER_STEPPER_STATUS.PENDING],integrationId:null},this.store=(0,o.resolveStoreInstance)(l.default),this.setActiveTab=this.setActiveTab.bind(this),this.populateRuleDetails=this.populateRuleDetails.bind(this),this.handleOauthFlow=this.handleOauthFlow.bind(this),this.handleOauthCancel=this.handleOauthCancel.bind(this),this.handleRetry=this.handleRetry.bind(this),this.setActiveStepIndex=this.setActiveStepIndex.bind(this)}componentDidMount(){pm.windowEvents.addListener(`${x.API_OBSERVABILITY}-integration-added`,this.onIntegrationEventCaptured.bind(this)),this.populateRuleDetails(),this.ruleWatchDisposer=(0,r.reaction)((()=>this.store.selectedRule&&this.state.rule!==this.store.selectedRule),(e=>{this.setState({loading:!0,oauthState:null},(()=>{this.handleOauthCancel(),e&&this.populateRuleDetails()}))}))}onIntegrationEventCaptured(e){let{selectedAPI:t,selectedAPIVersion:i}=this.store;e.apiId===t&&e.apiVersionId===i&&this.setState({integrationId:e.integrationId},(()=>{this.setState({activeStepIndex:1,stepStatus:[x.AETHER_STEPPER_STATUS.COMPLETED,x.AETHER_STEPPER_STATUS.PROGRESS]})}))}componentWillUnmount(){this.state.oauthState===x.INITIATED&&this.handleOauthCancel(!1),this.ruleWatchDisposer()}populateRuleDetails(){const{selectedService:e,selectedRule:t}=this.store;this.setState({loading:!0,rule:t},(()=>{b.default.getAvailableIntegrations({service:e}).then((e=>{let i=P.get(e,["body","integrations",t],{});200!==e.status||P.isEmpty(i)?this.setState({description:"",authType:"",error:!0,errorDetails:{status:e.status}}):this.setState({description:i.description,authType:P.get(i,"auth_type","")},(()=>{this.handleOauthFlow()})),this.setState({loading:!1})})).catch((e=>{pm.logger.error("Error in fetching service specific rule details for create forms",e),this.setState({description:"",authType:"",loading:!1,error:!0,errorDetails:{status:e.status}})}))}))}async handleOauthFlow(){if("oauth2"===this.state.authType){this.setState({oauthState:x.INITIATED});try{let e={sessionId:await S.default.handleInitiateOAuth(this.store.selectedService)};this.setState({pollingParams:e});let t=await S.default.pollForToken(e);t&&this.setState({oauthDetails:t,oauthState:x.SUCCESS})}catch(e){this.setState({oauthState:x.FAILED})}}}handleOauthCancel(e){let t=this.state.pollingParams;t.cancelOauth=!0,this.setState({pollingParams:t}),e&&I.default.closeByRoute(E.V10_API_ADD_DEPLOYMENT_INTEGRATION_URL,{apiId:P.get(this.props,"controller._routeParams.apiId")})}handleRetry(){this.handleOauthFlow()}setActiveStepIndex(e){this.setState({activeStepIndex:e})}render(){const{selectedService:e,selectedRule:t,selectedAPI:i,selectedAPIVersion:n,selectedServiceName:a}=this.store,{activeStepIndex:r,stepStatus:o}=this.state;return this.state.loading?s.createElement("div",{className:"integrations-page-container"},s.createElement(y.default,null)):this.state.oauthState===x.INITIATED?s.createElement("div",null,s.createElement(_.default,{serviceId:e,serviceName:a,cancelOauth:this.handleOauthCancel})):this.state.oauthState===x.FAILED?s.createElement(v.default,{selectedServiceName:a,retryHandler:this.handleRetry,selectedService:a}):s.createElement("div",{className:"integrations-page-container"},s.createElement("div",{className:"integrations-add"},s.createElement("div",{className:"integrations-add-card"},T[t]&&s.createElement("div",null,s.createElement(d.default,{type:"h1",text:T[t].title}),s.createElement(h.default,{type:"lead",className:"integrations-add-card__description"},T[t].description)),w.default[t]?s.createElement(u.default,{activeStepIndex:r,onChange:this.setActiveStepIndex},s.createElement(p.default,null,s.createElement(g.default,{status:o[0],label:"Configure Integration",isDisabled:"completed"===o[0]}),s.createElement(g.default,{status:o[1],label:"Import Definition",isDisabled:"pending"===o[1]})),s.createElement(m.default,null,s.createElement(f.default,null,s.createElement(c.default,{rule:t,service:e,apiId:i,apiVersionId:n,additionalContext:this.props.controller.additionalContext,accessToken:P.get(this.state,"oauthDetails.accessToken"),refreshToken:P.get(this.state,"oauthDetails.refreshToken")})),s.createElement(f.default,null,s.createElement(A.default,{integrationId:this.state.integrationId,apiId:i,versionId:n,formSource:x.IMPORT_FORM_SOURCES.INTEGRATION_SETUP,rule:t})))):s.createElement(c.default,{rule:t,service:e,apiId:i,apiVersionId:n,additionalContext:this.props.controller.additionalContext,accessToken:P.get(this.state,"oauthDetails.accessToken"),refreshToken:P.get(this.state,"oauthDetails.refreshToken")}))))}})||n},"./integrations/api-observability/controllers/DeployController.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return v}});var n,s,a,r,o,l,c,d=i("./appsdk/workbench/BaseWorkbenchController.js"),h=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),u=i("../../node_modules/mobx/lib/mobx.module.js"),p=i("./js/stores/StoreManager.js"),g=i("./js/stores/SyncStatusStore.js"),m=i("./integrations/utils/CommonHelperMethods.ts"),f=i("./api-dev/interfaces/APIInterface.js"),b=i("./node_modules/lodash/lodash.js");function y(e,t,i,n){i&&Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}function _(e,t,i,n,s){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=i.slice().reverse().reduce((function(i,n){return n(e,t,i)||i}),a),s&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(s):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}let v=(n=class extends d.default{constructor(...e){super(...e),y(this,"integrationData",s,this),y(this,"loadingIntegrationData",a,this),y(this,"errorInIntegrationData",r,this),y(this,"integrationDataErrorDetails",o,this),y(this,"versionName",l,this),y(this,"LoadingAPI",c,this)}updateIntegrationDataStatus(e,t,i){this.loadingIntegrationData=e,this.errorInIntegrationData=t,this.integrationDataErrorDetails=i}updateIntegrationData(e){this.integrationData=e}setVersionName(e){this.versionName=e}setLoadingAPI(e){this.LoadingAPI=e}didCreate({routeParams:e,queryParams:t,additionalContext:i}){this.apiId=b.get(e,"apiId",null),this.version=b.get(t,"version",null),this.integrationId=b.get(e,"integrationId"),this.rule=b.get(t,"rule"),this.context=i,this.details=t,this.setTitle("Loading..."),this.apiId&&(0,f.getAPI)(this.apiId),(0,p.resolveStoreInstance)(g.default).onSyncAvailable({timeout:8e3}).then((async()=>{this.updateIntegrationDataStatus(!0,!1,"");try{let e=await h.default.getIntegrationData(this.integrationId),t=b.get(e,"body.data");if(200!==e.status||b.isEmpty(t))this.updateIntegrationData({}),this.updateIntegrationDataStatus(!1,!0,"");else{if(this.updateIntegrationData(t),this.updateIntegrationDataStatus(!1,!1,""),!this.version){const e=b.get(t,"executor");this.version=e}let e="";try{const t=await(0,m.getAPIDetails)(this.apiId);e=b.get(t,"name")}catch(e){pm.logger.error("DeployController ~ Unable to get api version details",e)}finally{this.setLoadingAPI(!1),e?(this.setVersionName(e),this.setTitle(e)):(this.setVersionName(""),this.setTitle("Unable to load"))}}}catch(e){this.updateIntegrationData({}),this.updateIntegrationDataStatus(!1,!0,e)}})).catch((()=>{this.updateIntegrationDataStatus(!1,!1,"")}))}didQueryParamsChange(e){this.rule=b.get(e,"rule"),this.details=e}},s=_(n.prototype,"integrationData",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),a=_(n.prototype,"loadingIntegrationData",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),r=_(n.prototype,"errorInIntegrationData",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),o=_(n.prototype,"integrationDataErrorDetails",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),l=_(n.prototype,"versionName",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),c=_(n.prototype,"LoadingAPI",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),_(n.prototype,"updateIntegrationDataStatus",[u.action],Object.getOwnPropertyDescriptor(n.prototype,"updateIntegrationDataStatus"),n.prototype),_(n.prototype,"updateIntegrationData",[u.action],Object.getOwnPropertyDescriptor(n.prototype,"updateIntegrationData"),n.prototype),_(n.prototype,"setVersionName",[u.action],Object.getOwnPropertyDescriptor(n.prototype,"setVersionName"),n.prototype),_(n.prototype,"setLoadingAPI",[u.action],Object.getOwnPropertyDescriptor(n.prototype,"setLoadingAPI"),n.prototype),n)},"./integrations/api-observability/controllers/DetailedDashboardController.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return S}});var n,s,a,r,o,l,c,d=i("./appsdk/workbench/BaseWorkbenchController.js"),h=i("./js/stores/StoreManager.js"),u=i("./js/stores/SyncStatusStore.js"),p=i("./integrations/api-observability/stores/APIObservabilityStore.js"),g=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),m=i("../../node_modules/mobx/lib/mobx.module.js"),f=i("./api-dev/interfaces/APIInterface.js"),b=i("./integrations/utils/CommonHelperMethods.ts"),y=i("./node_modules/lodash/lodash.js");function _(e,t,i,n){i&&Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}function v(e,t,i,n,s){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=i.slice().reverse().reduce((function(i,n){return n(e,t,i)||i}),a),s&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(s):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}let S=(n=class extends d.default{constructor(...e){super(...e),_(this,"integrationData",s,this),_(this,"loadingIntegrationData",a,this),_(this,"errorInIntegrationData",r,this),_(this,"integrationDataErrorDetails",o,this),_(this,"details",l,this),_(this,"version",c,this)}setVersionId(e){this.version=e}updateIntegrationDataStatus(e,t,i){this.loadingIntegrationData=e,this.errorInIntegrationData=t,this.integrationDataErrorDetails=i}updateIntegrationData(e){this.integrationData=e}updateDetails(e){this.details=e}didCreate({routeParams:e,queryParams:t,additionalContext:i}){const n=y.get(t,"version",null);if(this.setVersionId(n),this.store=(0,h.resolveStoreInstance)(p.default),this.apiId=y.get(e,"apiId",null),this.integrationId=y.get(e,"integrationId"),this.rule=y.get(t,"rule"),this.updateDetails(t),this.context=i,this.setTitle("Loading..."),this.apiId&&(0,f.getAPI)(this.apiId),y.get(this.context,"integration")){const e=y.get(this.context,"integration"),t=y.get(e,"executor");this.updateIntegrationData(e),this.updateIntegrationDataStatus(!1,!1,""),!this.version&&this.setVersionId(t),this.updateTabTitleUsingVersionName()}else(0,h.resolveStoreInstance)(u.default).onSyncAvailable({timeout:8e3}).then((async()=>{this.updateIntegrationDataStatus(!0,!1,"");try{let e=await g.default.getIntegrationData(this.integrationId),t=y.get(e,"body.data");if(200!==e.status||y.isEmpty(t))this.updateIntegrationData({}),this.updateIntegrationDataStatus(!1,!0,"");else{const e=y.get(t,"executor");!this.version&&this.setVersionId(e),this.updateIntegrationData(t),this.updateIntegrationDataStatus(!1,!1,"")}}catch(e){this.updateIntegrationData({}),this.updateIntegrationDataStatus(!1,!0,e)}})).then((()=>{this.updateTabTitleUsingVersionName()})).catch((()=>{this.updateIntegrationDataStatus(!1,!1,"")}))}async updateTabTitleUsingVersionName(){let e="";try{const t=await(0,b.getAPIDetails)(this.apiId);e=y.get(t,"name")}catch(e){pm.logger.error("DetailedDashboardController ~ Error while fetching API meta",e)}finally{this.LoadingAPI=!1,this.versionName=e,e?this.setTitle(e):this.setTitle("Unable to load")}}didQueryParamsChange(e){this.updateDetails(e)}},s=v(n.prototype,"integrationData",[m.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),a=v(n.prototype,"loadingIntegrationData",[m.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),r=v(n.prototype,"errorInIntegrationData",[m.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),o=v(n.prototype,"integrationDataErrorDetails",[m.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),l=v(n.prototype,"details",[m.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),c=v(n.prototype,"version",[m.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v(n.prototype,"setVersionId",[m.action],Object.getOwnPropertyDescriptor(n.prototype,"setVersionId"),n.prototype),v(n.prototype,"updateIntegrationDataStatus",[m.action],Object.getOwnPropertyDescriptor(n.prototype,"updateIntegrationDataStatus"),n.prototype),v(n.prototype,"updateIntegrationData",[m.action],Object.getOwnPropertyDescriptor(n.prototype,"updateIntegrationData"),n.prototype),v(n.prototype,"updateDetails",[m.action],Object.getOwnPropertyDescriptor(n.prototype,"updateDetails"),n.prototype),n)},"./integrations/api-observability/controllers/ObservabilityController.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return p}});var n,s,a=i("./appsdk/workbench/BaseWorkbenchController.js"),r=i("./js/stores/StoreManager.js"),o=i("./integrations/api-observability/stores/APIObservabilityStore.js"),l=i("../../node_modules/mobx/lib/mobx.module.js"),c=i("./integrations/utils/CommonHelperMethods.ts"),d=i("./api-dev/interfaces/APIInterface.js"),h=i("./node_modules/lodash/lodash.js");function u(e,t,i,n,s){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=i.slice().reverse().reduce((function(i,n){return n(e,t,i)||i}),a),s&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(s):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}let p=(n=class extends a.default{constructor(...e){var t,i,n,a;super(...e),t=this,i="version",a=this,(n=s)&&Object.defineProperty(t,i,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(a):void 0})}setVersionId(e){this.version=e,this.store.setSelectedAPIVersion(e)}didCreate({routeParams:e,queryParams:t,additionalContext:i}){this.store=(0,r.resolveStoreInstance)(o.default),t&&t.category&&this.store.setActiveCategory(t.category),t&&t.service&&this.store.setSelectedService(t.service),t&&t.rule&&this.store.setSelectedRule(t.rule),t&&t.name&&this.store.setSelectedServiceName(t.name);const n=h.get(e,"integrationId")||h.get(t,"integration_id"),s=h.get(t,"version",null);n&&this.store.setSelectedIntegration(n),this.apiId=h.get(e,"apiId",null),this.apiId&&(0,d.getAPI)(this.apiId),this.apiId&&this.store.setSelectedAPI(this.apiId),s?this.setVersionId(s):(0,c.getAPIDetails)(this.apiId).then((e=>{const t=h.get(e,"version.id");this.setVersionId(t)})),this.additionalContext=i}didQueryParamsChange(e){e&&e.version&&this.store.setSelectedAPIVersion(e.version),e&&e.category&&this.store.setActiveCategory(e.category),e&&e.integration_id&&this.store.setSelectedIntegration(e.integration_id),e&&e.service&&this.store.setSelectedService(e.service),e&&e.rule&&this.store.setSelectedRule(e.rule)}beforeDestroy(){this.store=null}},s=u(n.prototype,"version",[l.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u(n.prototype,"setVersionId",[l.action],Object.getOwnPropertyDescriptor(n.prototype,"setVersionId"),n.prototype),n)},"./integrations/api-observability/gateway-actions.js":function(e,t,i){i.r(t),i.d(t,{FETCH_API_GATEWAY_META:function(){return s},FETCH_AWS_GATEWAY_APIS:function(){return n},FETCH_EXTERNAL_ID:function(){return r},FETCH_STAGES:function(){return a}});const n="fetch-aws-gateway-apis",s="fetch-api-gateway-meta",a="fetch-stages",r="fetch-external-id"},"./integrations/api-observability/oauth/GatewayOauthConnectingView.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return o}});var n,s=i("../../node_modules/react/index.js"),a=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=i("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js");let o=(0,a.observer)(n=class extends s.Component{constructor(e){super(e),this.state={}}render(){const{serviceId:e,serviceName:t}=this.props;return s.createElement("div",{className:"connect-api-gateway-tab"},s.createElement("div",{className:"api-gateway-connecting"},s.createElement("div",{className:"api-gateway-connecting__illustration_wrapper"},s.createElement("div",{className:`api-gateway-connecting__illustration__${e}`})),s.createElement("span",{className:"api-gateway-connecting__text-primary"},"Connecting to ",t,"..."),s.createElement("span",{className:"api-gateway-connecting__text-secondary"},"This may take up to 60 seconds."),s.createElement(r.default,{className:"api-gateway-connecting__cancel-btn",type:"outline",text:"Cancel",onClick:()=>{this.props.cancelOauth(!0)}})))}})||n},"./integrations/api-observability/oauth/GatewayOauthFailedView.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return l}});var n,s=i("../../node_modules/react/index.js"),a=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=i("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/UnableToLoad.js"),o=i("./api-dev/components/common/ErrorHandler/ErrorHandler.js");let l=(0,a.observer)(n=class extends s.Component{render(){const{selectedServiceName:e}=this.props;return s.createElement("div",{className:"connect-api-gateway-tab"},s.createElement(o.default,{blankState:s.createElement(r.default,null),title:`${e} authorization failed`,description:"Please try again.",handler:this.props.retryHandler,buttonText:"Try Again",buttonType:"outline"}))}})||n},"./integrations/api-observability/services/ApiGatewayService.js":function(e,t,i){i.r(t);var n=i("./node_modules/lodash/lodash.js"),s=i.n(n),a=(i("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),i("./integrations/api-observability/services/GatewayIntegrationsService.js")),r=i("./integrations/api-observability/constants.ts"),o=i("./integrations/api-observability/gateway-actions.js");t.default={fetchApiGateways:e=>a.default.performPreConfigAction(s().get(e,"rule"),e,o.FETCH_AWS_GATEWAY_APIS).then((e=>{if(e.status&&200===e.status)return Promise.resolve(s().get(e.body,"data.Items")||s().get(e.body,"data.items"));throw e})).catch((e=>Promise.reject(e))),fetchApiGatewaysUsingIntegrationId:e=>a.default.performAction(e,{},o.FETCH_AWS_GATEWAY_APIS).then((e=>{if(e.status&&200===e.status)return Promise.resolve(s().get(e.body.data,"Items")||s().get(e.body.data,"items"));throw e})).catch((e=>Promise.reject(e))),fetchDeployments:e=>a.default.listDeployments(e).then((e=>{if(e.status&&200===e.status){let t=s().get(e,"body.data.items")||s().get(e,"body.data.Items")||[];return t.sort(((e,t)=>{let i=e.CreatedDate||e.createdDate,n=t.CreatedDate||t.createdDate;return new Date(n)-new Date(i)})),Promise.resolve(t.splice(0,r.AWS_TOTAL_DEPLOYMENTS))}return Promise.reject({statusCode:e.status,...e.body})})).catch((e=>Promise.reject(e))),fetchAPIGatewayMeta:e=>a.default.performAction(e,{},o.FETCH_API_GATEWAY_META).then((e=>e.status&&200===e.status?Promise.resolve(s().get(e.body,"data")):Promise.reject({statusCode:e.status,...e.body}))).catch((e=>Promise.reject(e))),fetchStages:e=>a.default.performAction(e,{},o.FETCH_STAGES).then((e=>{if(e.status&&200===e.status)return Promise.resolve(s().get(e.body,"data.Items")||s().get(e.body,"data.item"));throw e})).catch((e=>Promise.reject(e))),fetchCloudWatchAggregateMetrics:(e,t)=>new Promise(((i,n)=>{a.default.performAction(e,{stage:t},r.FETCH_CLOUDWATCH_AGGREGATE_METRICS).then((e=>{i(s().get(e,"body.data"))})).catch((e=>{n(e)}))})),fetchCloudWatchTimeSeriesMetrics:(e,t)=>a.default.performAction(e,t,r.FETCH_CLOUDWATCH_TIMESERIES_METRICS),fetchExternalId:e=>new Promise(((t,i)=>{a.default.performPreConfigAction(s().get(e,"rule"),e,o.FETCH_EXTERNAL_ID).then((e=>{t(s().get(e,"body.data.externalId"))})).catch((e=>{i(e)}))})),deploySchema:(e,t)=>a.default.createDeployment(e,t),fetchPostmanExports:e=>a.default.listDeployments(e,!1,!0).then((e=>{if(e.status&&200===e.status)return Promise.resolve(e.body.data);throw e})).catch((e=>Promise.reject(e))),isDeployEnabled:(e,t)=>s().get(e,"variables.aws_api_type")===r.API_GATEWAY_TYPES.HTTP,isOverviewEnabled:e=>!0,fetchDeployOptionString:e=>a.default.performAction(e,{},o.FETCH_API_GATEWAY_META).then((e=>{if(e.status&&200===e.status)return Promise.resolve(`Deploy Schema on ${s().get(e,"body.data.Name")||s().get(e,"body.data.name")}`);throw e})).catch((e=>Promise.reject(e)))}},"./integrations/api-observability/services/AzureService.js":function(e,t,i){i.r(t);var n=i("./node_modules/lodash/lodash.js"),s=i.n(n),a=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/HTTPGatewayService.ts"),r=i("./integrations/api-observability/services/GatewayIntegrationsService.js"),o=i("./integrations/api-observability/constants.ts"),l=i("./integrations/utils/CommonHelperMethods.ts");t.default={fetchServicesMeta:(e=[],t)=>Promise.all(s().map(e,(e=>{const{azure_resource_group_id:i,azure_subscription_id:n,azure_service_id:s}=e,a={azure_subscription_id:n,azure_resource_group_id:i,azure_service_id:s};return r.default.performAction(t,a,o.AZURE_GATEWAY_ACTIONS.GET_SERVICE_META)}))).then((e=>{const t={};return s().each(e,(e=>{if(200!==e.status)throw e;{const i=s().get(e,"body.data");t[s().get(e,"body.data.id")]={id:s().get(i,"id"),name:s().get(i,"name"),location:s().get(i,"location"),gatewayUrl:s().get(i,"properties.gatewayUrl"),developerPortalUrl:s().get(i,"properties.developerPortalUrl"),publicIPAddresses:s().get(i,"properties.publicIPAddresses"),privateIPAddresses:s().get(i,"properties.privateIPAddresses")}}})),Promise.resolve(t)})).catch((e=>Promise.reject(e))),fetchApiMeta:(e,t)=>{const{azure_resource_group_id:i,azure_subscription_id:n,azure_service_id:a,azure_api_id:l}=e,c={azure_subscription_id:n,azure_resource_group_id:i,azure_service_id:a,azure_api_id:l};return r.default.performAction(t,c,o.AZURE_GATEWAY_ACTIONS.GET_API_META).then((e=>{if(200===e.status){const t=s().get(e,"body.data"),i={id:s().get(t,"id"),name:s().get(t,"properties.displayName"),version:s().get(t,"properties.apiVersion")};return Promise.resolve(i)}throw e})).catch((e=>Promise.reject(e)))},fetchServiceMeta:(e,t)=>{const{azure_resource_group_id:i,azure_subscription_id:n,azure_service_id:a}=e,l={azure_subscription_id:n,azure_resource_group_id:i,azure_service_id:a};return r.default.performAction(t,l,o.AZURE_GATEWAY_ACTIONS.GET_SERVICE_META).then((e=>{if(200===e.status){const t=s().get(e,"body.data"),i={id:s().get(t,"id"),name:s().get(t,"name"),location:s().get(t,"location"),gatewayUrl:s().get(t,"properties.gatewayUrl"),developerPortalUrl:s().get(t,"properties.developerPortalUrl"),publicIPAddresses:s().get(t,"properties.publicIPAddresses"),privateIPAddresses:s().get(t,"properties.privateIPAddresses")};return Promise.resolve(i)}throw e})).catch((e=>Promise.reject(e)))},fetchSubscriptionMeta:(e,t)=>{const{azure_subscription_id:i}=e,n={azure_subscription_id:i};return r.default.performAction(t,n,o.AZURE_GATEWAY_ACTIONS.GET_SUBSCRIPTION_META).then((e=>{if(200===e.status){const t=s().get(e,"body.data"),i={id:s().get(t,"subscriptionId"),name:s().get(t,"displayName")};return Promise.resolve(i)}throw e})).catch((e=>Promise.reject(e)))},fetchSubscriptionsMeta:(e=[],t)=>Promise.all(s().map(e,(e=>{const{azure_subscription_id:i}=e,n={azure_subscription_id:i};return r.default.performAction(t,n,o.AZURE_GATEWAY_ACTIONS.GET_SUBSCRIPTION_META)}))).then((e=>{const t={};return s().each(e,(e=>{if(200!==e.status)throw e;{const i=s().get(e,"body.data");t[s().get(e,"body.data.subscriptionId")]={id:s().get(i,"subscriptionId"),name:s().get(i,"displayName")}}})),Promise.resolve(t)})).catch((e=>Promise.reject(e))),fetchChangelog:(e,t)=>{const{azure_resource_group_id:i,azure_subscription_id:n,azure_service_id:a,azure_api_id:c}=e,d={azure_subscription_id:n,azure_resource_group_id:i,azure_service_id:a,azure_api_id:c};return r.default.performAction(t,d,o.AZURE_GATEWAY_ACTIONS.LIST_API_RELEASES).then((e=>{if(200===e.status){const t=s().get(e,"body.data"),i=s().map(t.value,(e=>({createdAt:(0,l.formatUtcDate)(s().get(e,"properties.createdDateTime")),updatedAt:(0,l.formatUtcDate)(s().get(e,"properties.updatedDateTime")),description:s().get(e,"properties.notes")})));return Promise.resolve(i)}throw e})).catch((e=>Promise.reject(e)))},fetchExports:(e,t)=>a.HTTPGatewayService.request({data:{service:"integrations",method:"get",path:`/gateway-integrations/${t}/list`,query:{exportOnly:!0,internal:!0,azure_api_path:s().get(e,"azure_api_path")}}}).then((e=>{if(200==e.status&&s().get(e,"body.data")){const t=s().map(e.body.data,(e=>({createdAt:(0,l.formatUtcDate)(e.createdAt),azure_api_path:s().get(e,"data.azure_api_path"),azure_revision_id:s().get(e,"data.azure_revision_id"),schemaSource:s().get(e,"data.schemaSource")})));return Promise.resolve(t)}throw e})).catch((e=>Promise.reject(e))),fetchRevisions:(e,t)=>{const{azure_resource_group_id:i,azure_subscription_id:n,azure_service_id:a,azure_api_id:c}=e,d={azure_subscription_id:n,azure_resource_group_id:i,azure_service_id:a,azure_api_id:c};return r.default.performAction(t,d,o.AZURE_GATEWAY_ACTIONS.LIST_API_REVISIONS).then((e=>{if(200===e.status){const t=s().get(e,"body.data"),i=(s().map(t.value,(e=>({azure_revision_id:s().get(e,"apiRevision"),createdAt:(0,l.formatUtcDate)(s().get(e,"createdDateTime")),description:s().get(e,"description"),privateUrl:s().get(e,"privateUrl"),isOnline:{value:s().get(e,"isOnline"),azure_revision_id:s().get(e,"apiRevision"),isDisabled:!1,disabledText:e.isCurrent&&"Current revision cannot be made offline."},isCurrent:{value:s().get(e,"isCurrent"),azure_revision_id:s().get(e,"apiRevision"),isDisabled:!1,disabledText:e.isCurrent&&"Current revision cannot be disabled."}})))||[]).reduce(((e,t)=>t.isCurrent.value?[t,...e]:[...e,t]),[]);return Promise.resolve(i||[])}throw e})).catch((e=>Promise.reject(e)))},toggleOnlineRevision:(e,t,i=!1,n)=>{const{azure_resource_group_id:s,azure_subscription_id:a,azure_service_id:l,azure_api_id:c,azure_api_path:d}=e,h={azure_subscription_id:a,azure_resource_group_id:s,azure_service_id:l,azure_api_id:c,azure_api_path:d,azure_revision_id:t,azure_revision_action_type:"toggle-revision-status",azure_revision_online:i};return r.default.performAction(n,h,o.AZURE_GATEWAY_ACTIONS.PERFORM_REVISION_ACTION).then((e=>{if(200===e.status)return Promise.resolve(e);throw e})).catch((e=>Promise.reject(e)))},toggleCurrentRevision:(e,t,i,n)=>{const{azure_resource_group_id:s,azure_subscription_id:a,azure_service_id:l,azure_api_id:c,azure_api_path:d}=e,h={azure_subscription_id:a,azure_resource_group_id:s,azure_service_id:l,azure_api_id:c,azure_api_path:d,azure_revision_id:t,azure_release_notes:i,azure_revision_action_type:"make-revision-current"};return r.default.performAction(n,h,o.AZURE_GATEWAY_ACTIONS.PERFORM_REVISION_ACTION).then((e=>{if(200===e.status)return Promise.resolve(e);throw e})).catch((e=>Promise.reject(e)))},fetchRevisionMapping:(e,t,i)=>{const n=s().map(t,(e=>e.azure_revision_id)),{azure_api_path:a}=e,l={azure_api_path:a,azure_revisions:n,integrationId:i};return r.default.performAction(i,l,o.AZURE_GATEWAY_ACTIONS.GET_REVISION_SOURCE_MAPPING).then((e=>{if(200===e.status)return Promise.resolve(s().get(e,"body.data"));throw e})).catch((e=>Promise.reject(e)))},isDeployEnabled:(e,t)=>t!==o.RELEASE_CONTEXTBAR,deploySchema:(e,t)=>r.default.createDeployment(e,t),fetchSubscriptions:(e,t,i)=>new Promise(((n,a)=>{r.default.performPreConfigAction(e,t,i).then((e=>{let t=s().get(e,"body.data.value",[]),i=s().map(t,(e=>({label:e.displayName,value:e.subscriptionId})));n(i)})).catch((e=>{pm.toasts.error("Something went wrong while fetching Azure Subscriptions"),pm.logger.error("Something went wrong while fetching Azure Subscriptions",e),a(e)}))})),fetchSubscriptionsWithIntegrationId:(e,t,i)=>new Promise(((n,a)=>{r.default.performAction(e,t,i).then((e=>{let t=s().get(e,"body.data.value",[]),i=s().map(t,(e=>({label:e.displayName,value:e.subscriptionId})));n(i)})).catch((e=>{pm.logger.error("Something went wrong while fetching Azure Subscriptions",e),a(e)}))})),fetchResourceGroups:(e,t,i)=>new Promise(((n,a)=>{r.default.performPreConfigAction(e,t,i).then((e=>{let t=s().get(e,"body.data.value",[]),i=s().map(t,(e=>({label:e.name,value:e.name})));n(i)})).catch((e=>{pm.toasts.error("Something went wrong while fetching Azure Resource Groups"),pm.logger.error("Something went wrong while fetching Azure Resource Groups",e),a(e)}))})),fetchResourceGroupsWithIntegrationId:(e,t,i)=>new Promise(((n,a)=>{r.default.performAction(e,t,i).then((e=>{let t=s().get(e,"body.data.value",[]),i=s().map(t,(e=>({label:e.name,value:e.name})));n(i)})).catch((e=>{pm.logger.error("Something went wrong while fetching Azure Resource Groups",e),a(e)}))})),fetchServices:(e,t,i)=>new Promise(((n,a)=>{r.default.performPreConfigAction(e,t,i).then((e=>{let t=s().get(e,"body.data.value",[]),i=s().map(t,(e=>({label:e.name,value:e.name,path:e.id})));n(i)})).catch((e=>{pm.toasts.error("Something went wrong while fetching Azure Services"),pm.logger.error("Something went wrong while fetching Azure Services",e),a(e)}))})),fetchServicesWithIntegrationId:(e,t,i)=>new Promise(((n,a)=>{r.default.performAction(e,t,i).then((e=>{let t=s().get(e,"body.data.value",[]),i=s().map(t,(e=>({label:e.name,value:e.name,path:e.id})));n(i)})).catch((e=>{pm.logger.error("Something went wrong while fetching Azure Services",e),a(e)}))})),fetchApis:(e,t,i)=>new Promise(((n,a)=>{r.default.performPreConfigAction(e,t,i).then((e=>{let t=s().get(e,"body.data.value",[]),i=s().filter(t,(e=>!s().get(e,"properties.type")||"http"===s().get(e,"properties.type"))),a=s().map(i,(e=>({label:e.name,value:e.name,path:e.id})));n(a)})).catch((e=>{pm.toasts.error("Something went wrong while fetching Azure APIs"),pm.logger.error("Something went wrong while fetching Azure APIs",e),a(e)}))})),fetchApisWithIntegrationId:(e,t,i)=>new Promise(((n,a)=>{r.default.performAction(e,t,i).then((e=>{let t=s().get(e,"body.data.value",[]),i=s().filter(t,(e=>!s().get(e,"properties.type")||"http"===s().get(e,"properties.type"))),a=s().map(i,(e=>({label:e.name,value:e.name,path:e.id})));n(a)})).catch((e=>{pm.logger.error("Something went wrong while fetching Azure APIs",e),a(e)}))})),fetchSchema:(e,t,i)=>{const{azure_resource_group_id:n,azure_subscription_id:a,azure_service_id:l,azure_api_id:c}=t,d={azure_subscription_id:a,azure_resource_group_id:n,azure_service_id:l,azure_api_id:c,azure_export_format:i};return r.default.performAction(e,d,o.AZURE_GATEWAY_ACTIONS.EXPORT_API).then((e=>{if(200===e.status){const t=s().get(e,"body.data.versions.0.schemas.0"),i={content:s().get(t,"schema",""),language:s().get(t,"language"),type:s().get(t,"type")};return Promise.resolve(i)}throw new Error("Something went wrong while fetching schema")})).catch((e=>Promise.reject(e)))}}},"./integrations/api-observability/services/GatewayIntegrationsService.js":function(e,t,i){i.r(t);var n=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/HTTPGatewayService.ts");t.default={createDeployment:(e,t)=>n.HTTPGatewayService.request({data:{service:"integrations",method:"post",path:`/gateway-integrations/${e}/deploy`,body:t}}),listDeployments:(e,t=!1,i=!1)=>{const s={};return t&&(s.exportOnly=!0,s.internal=!0),i&&(s.internal=!0),n.HTTPGatewayService.request({data:{service:"integrations",method:"get",path:`/gateway-integrations/${e}/list`,query:{...s}}})},performAction:(e,t,i)=>n.HTTPGatewayService.request({data:{service:"integrations",method:"post",path:`/gateway-integrations/${e}/actions/${i}`,body:t}}),performPreConfigAction:(e,t,i)=>n.HTTPGatewayService.request({data:{service:"integrations",method:"post",path:`/gateway-integrations/actions/${i}`,body:{...t,classId:e}}})}},"./integrations/api-observability/services/Helper.js":function(e,t,i){i.r(t);var n=i("./integrations/api-observability/services/index.js"),s=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),a=i("./integrations/api-observability/constants.ts"),r=i("./js/modules/services/AnalyticsService.js"),o=i("./node_modules/async/dist/async.js"),l=i.n(o),c=i("./js/stores/StoreManager.js"),d=i("./js/stores/SyncStatusStore.js"),h=i("./js/stores/CurrentUserStore.js"),u=i("./onboarding/src/common/LaunchDarkly.js"),p=i("./api-dev/constants/Permissions.js"),g=i("./api-dev/services/APIPermissionService.js"),m=i("./api-dev/interfaces/APIInterface.js"),f=i("./api-dev/services/APIDevService.js"),b=i("./node_modules/lodash/lodash.js");t.default={shouldRenderDeploy:(e,t)=>!!(e&&e.rule&&n.default[e.rule]&&b.isFunction(n.default[e.rule].isDeployEnabled))&&n.default[e.rule].isDeployEnabled(e,t),getDeployOptionContext:(e,t)=>{if(!e)return t("API version missing");l().waterfall([function(t){return s.default.getConfiguredIntegrationsByEntityAndClientCategory("apiversion",e,[a.API_OBSERVABILITY]).then((e=>e[a.API_OBSERVABILITY].length>0?t(null,e[a.API_OBSERVABILITY][0]):t(null,null))).catch((e=>t(e)))},function(e,t){return e&&e.rule?n.default[e.rule]&&b.isFunction(n.default[e.rule].fetchDeployOptionString)?n.default[e.rule].fetchDeployOptionString(e.id).then((i=>t(null,{integration:e,deployString:i}))).catch((i=>t(null,{integration:e,deployString:"Deploy Schema"}))):t(null,{integration:e,deployString:"Deploy Schema"}):t(null,{integration:null,deployString:"Deploy Schema"})}],((e,i)=>(e&&(pm.logger.error("Error occurred while fetching configured integration",e),pm.toasts.error("Error occurred while fetching configured integration")),t(e,i))))},shouldRenderGatewayIntegration:e=>{const t=(0,c.resolveStoreInstance)(h.default).isLoggedIn||!1,i=b.get(e,"apiPermissionStore.canViewAPIIntegrations",!1),n=u.launchDarkly.getFlag("api-deployments-tab-enabled",!1);return!!(t&&i&&n)},truncate:e=>e.length>35?e.substring(0,35)+"...":e,addDeployClickAnalytics:(e,t)=>{e&&e.rule&&r.default.addEventV2({category:"gateway-integration",action:t,label:e.rule,value:1})},hasEditPermissionOnAPI:e=>e?(0,c.resolveStoreInstance)(d.default).onSyncAvailable({timeout:8e3}).then((()=>{const t=(0,c.resolveStoreInstance)(h.default).id,i=[p.UPDATE_API_META],n=g.default.getAPIPermissionQueryObject(i,[{id:e}],t);return g.default.fetchPermissions(n).then((t=>Promise.resolve(b.get(t,`${e}:UPDATE_API_META.allowed`)))).catch((e=>{throw e}))})).catch((e=>Promise.reject(e))):Promise.reject("API id is required to fetch permissions"),fetchAPIDetails:async e=>{if(!e)return{};try{let t=await(0,m.getAPI)(e),i=await(0,m.isAPIGitLinked)(e),n={apiDetails:t,isGitIntegrationLinked:i,apiDefinition:{}};if(i){const t=await(0,m.getAPILinkedEntityModel)(e,{name:"branch"},"apiDefinition","");return n=b.merge({},n,{apiDefinition:t}),n}return n}catch(e){return Promise.reject(e)}},isSchemaPresent:(e,t)=>f.default.getRelations(e,t).then((e=>{const t=b.get(e,"apiDefinition")&&b.get(b.keys(e.apiDefinition),0),i=b.get(e,"schema")&&b.get(b.keys(e.schema),0);return!b.isEmpty(t)||!b.isEmpty(i)})).catch((e=>Promise.reject(e))),addAzureServicesAnalytics:e=>{const t=b.get(e,"rule",""),i=b.get(e,"variables.linked_apis",[]),n=b.size(i)||0;r.default.addEventV2({category:a.GATEWAY_INTEGRATION_ANALYTICS_EVENT_CATEGORY,action:a.AZURE_APIM.SERVICE_ANALYTICS_ACTION,label:t,value:n})}}},"./integrations/api-observability/services/index.js":function(e,t,i){i.r(t);var n=i("./integrations/api-observability/services/ApiGatewayService.js"),s=i("./integrations/api-observability/services/AzureService.js");t.default={api_gateway_aws:n.default,api_management_azure:s.default}},"./integrations/api-observability/stores/APIObservabilityStore.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return F}});var n,s,a,r,o,l,c,d,h,u,p,g,m,f,b,y,_,v,S,I,E,x,w,A=i("../../node_modules/mobx/lib/mobx.module.js"),P=i("./node_modules/lodash/lodash.js"),T=i.n(P),C=i("./js/stores/StoreManager.js"),D=i("./js/stores/SyncStatusStore.js"),j=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),k=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationInstanceService.ts"),O=i("./integrations/api-observability/stores/fallbackCategoryIntegrations.js"),M=i("./integrations/api-observability/configs/Integrations.js"),R=i("./js/stores/IntegrationsStore.js"),L=i("./integrations/api-observability/constants.ts");function N(e,t,i,n){i&&Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}function z(e,t,i,n,s){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=i.slice().reverse().reduce((function(i,n){return n(e,t,i)||i}),a),s&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(s):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}let F=(s=z((n=class{constructor(){N(this,"isHydrating",s,this),N(this,"availableIntegrations",a,this),N(this,"configuredIntegrations",r,this),N(this,"categoryIntegrations",o,this),N(this,"builds",l,this),N(this,"activeRule",c,this),N(this,"activeService",d,this),N(this,"errorAvailableIntegrations",h,this),N(this,"errorConfiguredIntegrations",u,this),N(this,"loadingAvailableIntegrations",p,this),N(this,"loadingConfiguredIntegrations",g,this),N(this,"selectedAPI",m,this),N(this,"selectedAPIVersion",f,this),N(this,"selectedService",b,this),N(this,"selectedServiceName",y,this),N(this,"selectedIntegration",_,this),N(this,"selectedRule",v,this),N(this,"category",S,this),N(this,"isAdding",I,this),N(this,"integrationInstance",E,this),N(this,"integrationClass",x,this),N(this,"loadingIntegrationInstanceAndClass",w,this),this.integrationsStore=(0,C.resolveStoreInstance)(R.default)}initializeApiObservabilityStore(e){(0,C.resolveStoreInstance)(D.default).onSyncAvailable({timeout:L.SYNC_STATUS_TIMEOUT}).then((()=>{this.updateIsHydrating(!0);const{apiId:t,apiVersionId:i,category:n}=e;this.setSelectedAPI(t),this.setSelectedAPIVersion(i),this.setActiveCategory(n),this.fetchAvailableIntegrations(),this.fetchConfiguredIntegrations(i,L.categoryToEntityType[n],[L.categoryToClientCategory[n]])})).catch((()=>{this.updateLoadingAvailableIntegrations(!1)})).finally((()=>{this.updateIsHydrating(!1)}))}initializeApiObservabilityStoreV2(e){(0,C.resolveStoreInstance)(D.default).onSyncAvailable({timeout:L.SYNC_STATUS_TIMEOUT}).then((()=>{this.updateIsHydrating(!0);const{apiId:t,apiVersionId:i,category:n}=e;this.setSelectedAPI(t),this.setSelectedAPIVersion(i),this.setActiveCategory(n),this.fetchConfiguredIntegrations(i,L.categoryToEntityType[n],[L.categoryToClientCategory[n]])})).catch((e=>{pm.logger.error("APIObservabilityStore~InitializeApiObservabilityStoreV2~Error while initialising API Observability Store: ",e)})).finally((()=>{this.updateIsHydrating(!1)}))}clearStore(e){this.loadingAvailableIntegrations[e.apiVersionId]=void 0,this.loadingConfiguredIntegrations[e.apiVersionId]=void 0,this.configuredIntegrations[e.apiVersionId]=void 0}setActiveCategory(e){this.category=e}setSelectedIntegration(e){this.selectedIntegration[this.category]=e}setActiveService(e){this.activeService=e}setSelectedServiceName(e){this.selectedServiceName=e}setActiveRule(e){this.activeRule=e}setSelectedAPI(e){this.selectedAPI=e}setSelectedAPIVersion(e){this.selectedAPIVersion=e}setSelectedRule(e){this.selectedRule=e}setSelectedService(e){this.selectedService=e}updateLoadingAvailableIntegrations(e){this.loadingAvailableIntegrations[this.selectedAPIVersion]=e}updateLoadingConfiguredIntegrations(e){this.loadingConfiguredIntegrations[this.selectedAPIVersion]=e}updateErrorAvailableIntegrations(e){this.errorAvailableIntegrations[this.selectedAPIVersion]=e}updateErrorConfiguredIntegrations(e){this.errorConfiguredIntegrations[this.selectedAPIVersion]=e}updateAvailableIntegrations(e){this.availableIntegrations=[...e]}updateSelectedAPIVersion(e){this.selectedAPIVersion=e,this.fetchConfiguredIntegrations(this.selectedAPIVersion,L.categoryToEntityType[this.category],[L.categoryToClientCategory[this.category]])}getAvailableIntegrations(){return(0,A.toJS)(this.availableIntegrations)}getSelectedIntegration(){return this.selectedIntegration[this.category]}getSelectedAPIVersion(){return this.selectedAPIVersion}updateConfiguredIntegrations(e){this.configuredIntegrations[this.selectedAPIVersion]=[...e]}updateCategoryIntegrations(e){T().isEmpty(e)?this.categoryIntegrations=[...O.fallbackCategoryIntegrations]:this.categoryIntegrations=[...e]}getConfiguredIntegrations(e){return(0,A.toJS)(this.configuredIntegrations[e])}getCategoryIntegrations(){return(0,A.toJS)(this.categoryIntegrations)}updateIsHydrating(e){this.isHydrating=e}updateIsAdding(e){this.isAdding=e}findIntegrationsByCategory(){const e=[],t=L.categoryToClientCategory[this.category];T().forEach((0,A.toJS)(this.availableIntegrations),(i=>{const n={},s=i.integrations[i.id];T().forEach(s,((e,i)=>{e.client_categories.includes(t)&&(n[i]=e)})),T().isEmpty(n)||(i.integrations[i.id]={...n},e.push(i))})),this.updateCategoryIntegrations(T().map(e,(e=>e.id&&!T().isEmpty(M.default[e.id])?{...e,...M.default[e.id]}:e)))}fetchAvailableIntegrations(){return this.updateLoadingAvailableIntegrations(!0),this.updateErrorAvailableIntegrations(!1),j.default.getAvailableIntegrations().then((e=>{const t=T().get(e,"body.services",[]);if(200!==e.status||T().isEmpty(t))throw e;this.updateAvailableIntegrations(T().map(t,((e,t)=>({id:t,...e})))),this.category&&this.findIntegrationsByCategory(),this.updateLoadingAvailableIntegrations(!1)})).catch((e=>{this.updateErrorAvailableIntegrations(e),this.updateLoadingAvailableIntegrations(!1),pm.logger.error("Error occurred while fetching the available integrations")}))}fetchConfiguredIntegrations(e,t,i){this.updateLoadingConfiguredIntegrations(!0),this.updateErrorConfiguredIntegrations(!1),j.default.getConfiguredIntegrationsByEntityAndClientCategory(t,e,i).then((e=>{this.updateConfiguredIntegrations(e[i[0]]),this.updateLoadingConfiguredIntegrations(!1)})).catch((e=>{this.updateErrorConfiguredIntegrations(e),this.updateLoadingConfiguredIntegrations(!1),pm.logger.error("Error occurred while fetching the configured integrations")}))}async fetchIntegrationInstance(e,t){this.setLoadingIntegrationInstancesAndClass(t,!0);try{const i=await k.default.getConfiguredIntegrationsForAnEntity(e,t,[L.API_OBSERVABILITY]);let n=T().get(i,"body.data",[]),s=T().map(n,"class"),a=[];if(!T().isEmpty(s)){const e=this.integrationsStore.getIntegrationClasses(),t=s[0];a=T().find(e,(e=>e.id===t))}this.updateIntegrationClass([a],t),this.updateIntegrationInstance(n,t),this.setLoadingIntegrationInstancesAndClass(t,!1)}catch(e){pm.logger.error("APIObservabilityStore ~ Error in fetching integration instance details",t,e),this.setLoadingIntegrationInstancesAndClass(t,!1)}}setLoadingIntegrationInstancesAndClass(e,t){this.loadingIntegrationInstanceAndClass[e||this.selectedAPIVersion]=t}updateIntegrationInstance(e,t){this.integrationInstance[t||this.selectedAPIVersion]=e}updateIntegrationClass(e,t){this.integrationClass[t||this.selectedAPIVersion]=e}getIntegrationInstance(e){return this.integrationInstance[e]}getIntegrationClass(e){return this.integrationClass[e]}resetPowerUpVariables(e){const{apiVersionId:t}=e;this.setLoadingIntegrationInstancesAndClass(t,!0),this.updateIntegrationClass([],t),this.updateIntegrationInstance([],t)}removeIntegrationInstances(e){this.integrationClass[e]=[],this.integrationInstance[e]=[]}}).prototype,"isHydrating",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),a=z(n.prototype,"availableIntegrations",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),r=z(n.prototype,"configuredIntegrations",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),o=z(n.prototype,"categoryIntegrations",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return O.fallbackCategoryIntegrations}}),l=z(n.prototype,"builds",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),c=z(n.prototype,"activeRule",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=z(n.prototype,"activeService",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=z(n.prototype,"errorAvailableIntegrations",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),u=z(n.prototype,"errorConfiguredIntegrations",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),p=z(n.prototype,"loadingAvailableIntegrations",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),g=z(n.prototype,"loadingConfiguredIntegrations",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),m=z(n.prototype,"selectedAPI",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=z(n.prototype,"selectedAPIVersion",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=z(n.prototype,"selectedService",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=z(n.prototype,"selectedServiceName",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=z(n.prototype,"selectedIntegration",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),v=z(n.prototype,"selectedRule",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=z(n.prototype,"category",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=z(n.prototype,"isAdding",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),E=z(n.prototype,"integrationInstance",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),x=z(n.prototype,"integrationClass",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),w=z(n.prototype,"loadingIntegrationInstanceAndClass",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),z(n.prototype,"initializeApiObservabilityStore",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"initializeApiObservabilityStore"),n.prototype),z(n.prototype,"clearStore",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"clearStore"),n.prototype),z(n.prototype,"setActiveCategory",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"setActiveCategory"),n.prototype),z(n.prototype,"setSelectedIntegration",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"setSelectedIntegration"),n.prototype),z(n.prototype,"setActiveService",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"setActiveService"),n.prototype),z(n.prototype,"setSelectedServiceName",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"setSelectedServiceName"),n.prototype),z(n.prototype,"setActiveRule",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"setActiveRule"),n.prototype),z(n.prototype,"setSelectedAPI",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"setSelectedAPI"),n.prototype),z(n.prototype,"setSelectedAPIVersion",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"setSelectedAPIVersion"),n.prototype),z(n.prototype,"setSelectedRule",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"setSelectedRule"),n.prototype),z(n.prototype,"setSelectedService",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"setSelectedService"),n.prototype),z(n.prototype,"updateLoadingAvailableIntegrations",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"updateLoadingAvailableIntegrations"),n.prototype),z(n.prototype,"updateLoadingConfiguredIntegrations",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"updateLoadingConfiguredIntegrations"),n.prototype),z(n.prototype,"updateErrorAvailableIntegrations",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"updateErrorAvailableIntegrations"),n.prototype),z(n.prototype,"updateErrorConfiguredIntegrations",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"updateErrorConfiguredIntegrations"),n.prototype),z(n.prototype,"updateAvailableIntegrations",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"updateAvailableIntegrations"),n.prototype),z(n.prototype,"updateSelectedAPIVersion",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"updateSelectedAPIVersion"),n.prototype),z(n.prototype,"getAvailableIntegrations",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"getAvailableIntegrations"),n.prototype),z(n.prototype,"getSelectedIntegration",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"getSelectedIntegration"),n.prototype),z(n.prototype,"getSelectedAPIVersion",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"getSelectedAPIVersion"),n.prototype),z(n.prototype,"updateConfiguredIntegrations",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"updateConfiguredIntegrations"),n.prototype),z(n.prototype,"updateCategoryIntegrations",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"updateCategoryIntegrations"),n.prototype),z(n.prototype,"getConfiguredIntegrations",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"getConfiguredIntegrations"),n.prototype),z(n.prototype,"getCategoryIntegrations",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"getCategoryIntegrations"),n.prototype),z(n.prototype,"updateIsHydrating",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"updateIsHydrating"),n.prototype),z(n.prototype,"updateIsAdding",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"updateIsAdding"),n.prototype),z(n.prototype,"findIntegrationsByCategory",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"findIntegrationsByCategory"),n.prototype),z(n.prototype,"fetchAvailableIntegrations",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchAvailableIntegrations"),n.prototype),z(n.prototype,"fetchConfiguredIntegrations",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchConfiguredIntegrations"),n.prototype),z(n.prototype,"fetchIntegrationInstance",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"fetchIntegrationInstance"),n.prototype),z(n.prototype,"setLoadingIntegrationInstancesAndClass",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"setLoadingIntegrationInstancesAndClass"),n.prototype),z(n.prototype,"updateIntegrationInstance",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"updateIntegrationInstance"),n.prototype),z(n.prototype,"updateIntegrationClass",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"updateIntegrationClass"),n.prototype),z(n.prototype,"resetPowerUpVariables",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"resetPowerUpVariables"),n.prototype),z(n.prototype,"removeIntegrationInstances",[A.action],Object.getOwnPropertyDescriptor(n.prototype,"removeIntegrationInstances"),n.prototype),n)},"./integrations/api-observability/stores/fallbackCategoryIntegrations.js":function(e,t,i){i.r(t),i.d(t,{fallbackCategoryIntegrations:function(){return n}});const n=[{id:"api_gateway_aws",categories:["Deployment"],name:"AWS API Gateway",icon:"pm-icon-aws-api-gateway",icon_url:"https://static.getpostman.com/assets/aws_api_gateway.png",dark_icon_url:null,description:"Stay on top of your API Deployments",extended_description:"Observe deployments inside Postman",integrations:{api_gateway_aws:{api_gateway_aws:{name:"Observe API deployments",description:"Connect to AWS API Gateway to view deployments from across all stages, logs and metrics inside Postman",categories:["Deployment"],summary:"",client_categories:["api-gateway-observability"],type:"multiple",entity:"apiversion",scope:"user",sync_data:[],variables:[],auth_type:"token",canCreateIntegration:!0}}},setup_details:"",service_data:[],summary:"",misc:"",oauth_initiator_host:null}]},"./integrations/api-observability/utils/chartHelpers.js":function(e,t,i){i.r(t),t.default={getChartOptions(e){const{unit:t,title:i,currentTheme:n}=e;return{scales:{x:{type:"time",color:n["content-color-secondary"],time:{unit:t},title:{display:!(!i||!i.x),text:i&&i.x?i.x:"",color:n["content-color-secondary"],font:"Inter",padding:{top:4,bottom:4}},ticks:{display:!0,color:n["content-color-secondary"],padding:8,align:"end"},grid:{drawOnChartArea:!1,drawTicks:!1,borderColor:n["grey-05"],color:n["grey-05"],z:-1},offset:!0},y:{title:{display:!(!i||!i.y),text:i&&i.y?i.y:"",color:n["content-color-secondary"],font:"Inter",padding:{top:4,bottom:4}},grid:{drawOnChartArea:!1,drawTicks:!1,borderColor:n["grey-05"],color:n["grey-05"]},ticks:{display:!0,padding:8,precision:0,crossAlign:"near",color:n["content-color-secondary"],autoSkipPadding:20},beginAtZero:!0}},plugins:{legend:{display:!1},responsive:!0,datalabels:{display:!1,anchor:"center",clamp:!0,font:{weight:600,size:11,lineHeight:1.8}}}}}}},"./integrations/components/error-states/ErrorIntegrations.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return c}});var n,s=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),a=i("../../node_modules/react/index.js"),r=i("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/InternalServerError.js"),o=i("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/PageNotFound.js"),l=i("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/UnauthorizedError.js");let c=(0,s.observer)(n=class extends a.Component{constructor(e){super(e),this.state={error:{}}}componentDidMount(){let{error:e}=this.props;e?this.setState({statusCode:e.statusCode,title:e.title,message:e.message}):this.setState({title:"Something went wrong",message:"Something went wrong while performing this action. Please refresh the page and try again."})}render(){let{statusCode:e,title:t,message:i}=this.state;return a.createElement("div",null,a.createElement("div",{className:"team-integrations-error-state"},a.createElement("div",{className:"team-integrations-error-state__illustration-wrapper team-integrations-error-state__illustration-wrapper--collections"},(!e||e>499&&e<600)&&a.createElement(r.default,null),404===e&&a.createElement(o.default,null),e>399&&e<500&&404!==e&&a.createElement(l.default,null)),a.createElement("div",{className:"team-integrations-error-state__title"},t),a.createElement("div",{className:"team-integrations-error-state__subtitle"},i)))}})||n},"./integrations/components/error-states/IntegrationNotSupported.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return u}});var n=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),s=i("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),a=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/error-states/ErrorState.js"),r=i("../../node_modules/react/index.js"),o=i("./integrations/utils/CommonHelperMethods.ts"),l=i("./js/services/NavigationService.js"),c=i("./js/external-navigation/ExternalNavigationService.js"),d=i("./integrations/constants/integrationsConstants.ts");function h(e){let{apiId:t,apiVersionId:i,tab:s}=e,a={apiId:t,versionId:i},h={tab:s},u=(0,o.getURLFromBasePathAndRoute)(pm.artemisUrl,l.default.getURLForRoute("build.apiVersion",a,h));return r.createElement("div",{className:"unsupported-integrations-error-cta__subtitle"},"browser"===window.SDK_PLATFORM?r.createElement("span",null,d.INTEGRATION_NOT_SUPPORTED_SUBTITLE_WEB_APP):r.createElement("div",null,r.createElement("span",null,d.INTEGRATION_NOT_SUPPORTED_SUBTITLE_DESKTOP),r.createElement("span",{onClick:()=>(0,c.openExternalLink)(u||"#","_blank"),className:"unsupported-integrations-error-cta__subtitle__link"},r.createElement(n.default,{type:"link-primary",isExternal:!0},"web app"))))}function u(e){let t={title:"browser"===window.SDK_PLATFORM?d.INTEGRATION_NOT_SUPPORTED_TITLE_WEB_APP:d.INTEGRATION_NOT_SUPPORTED_TITLE_DESKTOP,subtitle:h(e)};return r.createElement("div",{className:"unsupported-integrations-error-cta"},r.createElement(s.default,{direction:"column",justifyContent:"center",alignItem:"center",alignSelf:"center"},r.createElement(a.default,{errorDetails:t})))}},"./integrations/utils/OauthUtilityMethods.js":function(e,t,i){i.r(t);var n=i("./integrations/services/OAuthService.js"),s=i("./node_modules/lodash/lodash.js"),a=i.n(s),r=i("./js/stores/StoreManager.js"),o=i("./js/stores/SyncStatusStore.js"),l=i("./js/services/NavigationService.js");t.default={handleInitiateOAuth:(e,t)=>{let i={};return t&&(i.tokenType=t),new Promise(((t,s)=>{n.default.initiateAuthorization(e,i).then((i=>{let n,r=i.body;if(200===i.status&&!a().isEmpty(r))return n=`${window.postman_integrations_public_url}/oauth/authorize/${e}?sessionId=${r.sessionId}`,l.default.openURL(n,{target:"_blank"}),t(a().get(r,"sessionId"));pm.logger.warn("OauthUtilityMethods~handleInitiateOAuth: Something went wrong while opening authorization",i.body),pm.toasts.error("Something went wrong while initiating authorization"),s(new Error("Something went wrong"))})).catch((e=>{let t=!(0,r.resolveStoreInstance)(o.default).isSocketConnected?"You need to be online to complete the authorization ":"Something went wrong while initiating authorization";pm.logger.warn("OauthUtilityMethods~handleInitiateOAuth: Something went wrong while opening authorization",e),pm.toasts.error(t),s(e)}))}))},pollForToken(e){let t=0;if(!e.sessionId){let e="Something went wrong while fetching authorization information";throw pm.logger.warn("OauthUtilityMethods~pollForToken: sessionId is required."),pm.toasts.error(e),new Error(e)}const i=(s,l)=>{t++,n.default.getSession(e.sessionId).then((n=>{let r=n.body;return 30===t?(pm.toasts.error("Service timed out while performing authorization"),l(new Error("Exceeded max attempts"))):e.cancelOauth?s():r.token&&!a().isEmpty(r.token)?r.error?(pm.logger.warn("OauthUtilityMethods~pollForToken: Error while getting a session for the user",r.error),pm.toasts.error("Something went wrong while fetching authorization information"),l(new Error("Error while getting a session for the user"))):r.token?s(r.token):(pm.toasts.error("Authorization failed. Please try again."),l(new Error("Authorization could not be completed."))):void setTimeout(i,2e3,s,l)})).catch((e=>{if(e.error){let t=!(0,r.resolveStoreInstance)(o.default).isSocketConnected?"You need to be online to complete the authorization ":"Something went wrong while fetching authorization information";pm.logger.warn("OauthUtilityMethods~pollForToken: Error while getting a session for the user",e.error),pm.toasts.error(t)}return l(e)}))};return new Promise(i)}}},"./js/components/base/PasswordInput.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return p}});var n=i("../../node_modules/react/index.js"),s=i("./node_modules/classnames/index.js"),a=i.n(s),r=i("./js/components/base/Inputs.js"),o=i("./js/components/base/AutoSuggest/AutoSuggestInput.js"),l=i("./js/components/base/Buttons.js"),c=i("./node_modules/prop-types/index.js"),d=i.n(c),h=i("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js");function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},u.apply(this,arguments)}class p extends n.Component{constructor(e){super(e),this.state={masked:!0,error:"",warning:""},this.handleToggle=this.handleToggle.bind(this)}UNSAFE_componentWillReceiveProps(e){this.handleValidationState(e)}handleToggle(){this.setState({masked:!this.state.masked})}handleValidationState(e){const{validation:t,value:i}=e;if(t){let n,s;for(let a=0;a<t.length;a++){const{validator:r,message:o,type:l}=t[a]||{};if("function"==typeof r&&!r(i,e)){n=l,s=o;break}}if(n)return this.state[n]!==s&&this.setState({[n]:s})}this.setState({error:"",warning:""})}getValidationIcon(){return this.state.error?n.createElement(l.Button,{type:"icon",className:"password-input__error-btn",tooltip:this.state.error},n.createElement(h.default,{name:"icon-state-error-stroke",size:"small"})):this.state.warning?n.createElement(l.Button,{type:"icon",className:"password-input__warning-btn",tooltip:this.state.warning},n.createElement(h.default,{name:"icon-state-warning-stroke",size:"small"})):void 0}getPasswordInput(e){return this.props.enableVariableSuggestions?this.state.masked?n.createElement(r.Input,u({},e,{type:"password"})):n.createElement(o.AutoSuggestInput,u({},e,{enableVariableSuggestions:!0,type:"text"})):n.createElement(r.Input,u({},e,{type:this.state.masked?"password":"text"}))}render(){let{className:e,...t}=this.props;return n.createElement("div",{className:a()("password-input",e)},this.getPasswordInput(t),n.createElement("div",{className:"password-input-message"},this.getValidationIcon()),n.createElement("div",{className:"password-input__toggle",onClick:this.handleToggle},this.state.masked?n.createElement(h.default,{name:"icon-action-hide-stroke",title:"Show"}):n.createElement(h.default,{name:"icon-action-view-stroke",title:"Hide"})))}}p.propTypes={className:d().string,inputStyle:d().oneOf(["box","line"]),size:d().oneOf(["huge"]),enableVariableSuggestions:d().bool,validation:d().arrayOf(d().shape({validator:d().func.isRequired,message:d().string,type:d().oneOf(["error","warning"])}))},p.defaultProps={enableVariableSuggestions:!1}},"./js/components/base/SelectDropdown.js":function(e,t,i){i.r(t),i.d(t,{LoadingLabel:function(){return c},default:function(){return d}});var n=i("../../node_modules/react/index.js"),s=i("./node_modules/classnames/index.js"),a=i.n(s),r=i("./node_modules/react-select-v1/dist/react-select.es.js"),o=i("./js/components/base/LoadingIndicator.js");function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},l.apply(this,arguments)}function c(e){return n.createElement(n.Fragment,null,e.loadingLabel||"Loading...",n.createElement("span",{className:"pm-select-loader"},n.createElement(o.default,null)))}class d extends n.Component{constructor(e){super(e)}render(){const{options:e,onValueClick:t,size:i,className:s,label:o,isClearable:d,isCreatable:h,autoBlur:u=!0}=this.props;return h?n.createElement(r.default.Creatable,l({},this.props,{value:!this.props.loading&&this.props.value,autoBlur:u,className:a()({"pm-select--block":this.props.block,"pm-select--loading":this.props.loading},"pm-select",`pm-select-${i}`,s),clearable:!!d,onBlurResetsInput:!0,onChange:t,options:e,placeholder:this.props.loading?n.createElement(c,this.props):o,scrollMenuIntoView:!1})):n.createElement(r.default,l({},this.props,{value:!this.props.loading&&this.props.value,autoBlur:u,className:a()({"pm-select--block":this.props.block,"pm-select--loading":this.props.loading},"pm-select",`pm-select-${i}`,s),clearable:!!d,onBlurResetsInput:!0,onChange:t,options:e,placeholder:this.props.loading?n.createElement(c,this.props):o,scrollMenuIntoView:!1}))}}d.defaultProps={size:"sm"},d.displayName="SelectDropdown"},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/AddIntegrationActions.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return d}});var n=i("../../node_modules/react/index.js"),s=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/CancelButton.js"),a=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/AddButton.js"),r=i("./js/stores/StoreManager.js"),o=i("./js/stores/IntegrationsStore.js"),l=i("../../node_modules/mobx/lib/mobx.module.js");function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},c.apply(this,arguments)}function d(e){let{disabled:t,workspaceId:i,payload:d,integrationFormActions:h,source:u,showDivider:p,...g}=e,m="basic_auth"!==(f=(0,l.toJS)((0,r.resolveStoreInstance)(o.default).authType))&&"token"!==f;var f;return u||(u="team_integrations_create_forms"),n.createElement("div",null,p&&n.createElement("hr",{className:"integration-add-actions-separator"}),n.createElement(a.default,c({disabled:t,workspaceId:i,payload:d},g,{redirect:e.redirect,integrationFormActions:h,source:u,alignLeft:m})),n.createElement(s.default,c({alignLeft:m,integrationFormActions:h,payload:d,source:u},g)))}d.defaultProps={showDivider:!0}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/AuthUserSegment.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return s}});var n=i("../../node_modules/react/index.js");function s(e){const{imageSrc:t,displayField:i}=e;return n.createElement("div",{className:"integrations-add-card__authed-user"},n.createElement("div",{className:"integrations-add-card__authed-user__text"},"Authenticated as"),t&&n.createElement("img",{src:t,className:"integrations-add-card__authed-user-image"}),n.createElement("span",{className:"integrations-add-card__authed-user__name"},i))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/CustomLink.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return s}});var n=i("../../node_modules/react/index.js");function s(e){const{className:t,extUrl:i,target:s}=e;return n.createElement("a",{className:t,href:i,rel:"_blank"===s?"noopener noreferrer":"",target:s,onClick:e.onClick},e.children)}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/EntitySelector.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return A}});var n,s=i("../../node_modules/react/index.js"),a=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SelectSegmentV2.js"),r=i("./js/stores/ActiveWorkspaceStore.js"),o=i("./js/stores/StoreManager.js"),l=i("./js/stores/IntegrationsStore.js"),c=i("./monitors/services/MonitorService.js"),d=i("./js/services/NavigationService.js"),h=i("./api-dev/services/APIDevService.js"),u=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),p=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),g=(i("./js/modules/services/RemoteSyncRequestService.js"),i("./integrations/constants/integrationsConstants.ts")),m=i("./runtime-repl/collection/_api/CollectionInterface.js"),f=i("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),b=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),y=i("./js/external-navigation/ExternalNavigationService.js"),_=i("./api-dev/interfaces/APIInterface.js"),v=i("../../node_modules/mobx/lib/mobx.module.js"),S=i("./node_modules/lodash/lodash.js"),I=i.n(S);const E="Malformed response",x={collections:"Please select a collection",monitors:"Please select a monitor",apis:"Please select an API",apiversions:"Please select an API version"},w={collections:"You don't have access to this collection.",monitors:"You don't have access to this monitor.",apis:"You don't have access to this API.",apiversions:"You don't have access to this APIVersion."};let A=(0,u.observer)(n=class extends s.Component{constructor(e){super(e),this.store=(0,o.resolveStoreInstance)(l.default),this.workspaceStore=(0,o.resolveStoreInstance)(r.default),this.state={entities:[],entityVersions:[],loading:!1,error:!1,firstLoad:!0},this.fetchEntities=this.fetchEntities.bind(this),this.fetchCollections=this.fetchCollections.bind(this),this.fetchMonitors=this.fetchMonitors.bind(this),this.fetchUptimeMonitors=this.fetchUptimeMonitors.bind(this),this.fetchAPIs=this.fetchAPIs.bind(this),this.fetchAPIVersions=this.fetchAPIVersions.bind(this),this.onTargetSelect=this.onTargetSelect.bind(this),this.getEmptyStateError=this.getEmptyStateError.bind(this),this.updateSelectedEntity=this.updateSelectedEntity.bind(this),this.getFormattedResponse=this.getFormattedResponse.bind(this),this.validateDropdownVisibility=this.validateDropdownVisibility.bind(this)}async componentDidMount(){const{entity:e,workspaceId:t}=this.props;(e===g.entityTypes.API_VERSIONS||t)&&(this.setState({shouldHideDropdown:e===g.entityTypes.API_VERSIONS}),await this.fetchEntities(),await this.validateDropdownVisibility()),(0,v.reaction)((()=>this.workspaceStore.dependencies),(async()=>{await this.fetchEntities(),await this.validateDropdownVisibility()}))}async componentDidUpdate(e){e.workspaceId===this.props.workspaceId&&e.apiId===this.props.apiId||(await this.fetchEntities(),await this.validateDropdownVisibility())}getFormattedResponse(e){let t=!1,i=[];return i=e.map((e=>e.name&&e.id?{...e,label:I().get(e,"name"),value:I().get(e,"id")}:(t=!0,{}))),{newEntities:i,malformedResponse:t}}updateSelectedEntity(e){this.store.setSelectedEntity(I().find(e,{value:this.store.selectedEntity.value}))}async fetchEntities(){this.setState({loading:!0,error:""}),this.props.entity===g.entityTypes.COLLECTIONS&&this.fetchCollections(this.props.workspaceId),this.props.entity===g.entityTypes.MONITORS&&this.fetchMonitors(this.props.workspaceId),this.props.entity===g.entityTypes.UPTIME_MONITORS&&this.fetchUptimeMonitors(this.props.workspaceId),this.props.entity===g.entityTypes.APIS&&this.fetchAPIs(this.props.workspaceId),this.props.entity===g.entityTypes.API_VERSIONS&&await this.fetchAPIVersions(this.props.apiId)}getEmptyStateError(){return x[this.props.entity]?x[this.props.entity]:""}fetchAndAssignPermissions(e,t,i,n){return new Promise(((n,s)=>{const a=e.map((e=>({id:I().get(e,"apiversion"===i?"api":"id")})));let r=null;g.INTEGRATION_FORM_MODE.ADD,r=p.default.fetchCreatePermissions,r(t,i,a).then((t=>(I().forEach(I().zip(e,t.body),(e=>{const[t,i]=e;t.disabled=!i.hasPermission})),n(e)))).catch((e=>{pm.logger.error(e),s(e)}))}))}fetchCollections(e){e?(0,m.getCollectionsInWorkspace)(e).then((e=>{const{newEntities:t,malformedResponse:i}=this.getFormattedResponse(e);if(i)throw new Error(E);return t})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return this.fetchAndAssignPermissions(e,this.props.rule,"collection",this.props.mode)})).then((e=>{this.props.entity===g.entityTypes.COLLECTIONS&&this.store.selectedEntity&&this.updateSelectedEntity(e),this.setState({entities:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load collections",loading:!1}),pm.toasts.error("Something went wrong while fetching collections"),pm.logger.error("Error while fetching collections",e)})):this.setState({loading:!1})}fetchMonitors(e){e?c.default.getJobTemplatesByWorkspace({workspaceId:e}).then((e=>{const t=I().get(e,"body.data",[]),{newEntities:i,malformedResponse:n}=this.getFormattedResponse(t);if(n)throw new Error(E);return i})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return this.fetchAndAssignPermissions(e,this.props.rule,"monitor",this.props.mode)})).then((e=>this.props.performEntityChecks?this.props.performEntityChecks(e):e)).then((e=>{this.props.entity===g.entityTypes.MONITORS&&this.store.selectedEntity&&this.updateSelectedEntity(e),this.setState({entities:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load monitors",loading:!1}),pm.toasts.error("Something went wrong while fetching monitors"),pm.logger.error("Error ocurred while fetching monitors",e)})):this.setState({loading:!1})}fetchUptimeMonitors(e){e?c.default.getMonitorsByWorkspace({workspaceId:e}).then((e=>{const t=I().get(e,"body.data",[]),{newEntities:i,malformedResponse:n}=this.getFormattedResponse(t);if(n)throw new Error(E);return i})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return e})).then((e=>this.props.performEntityChecks?this.props.performEntityChecks(e):e)).then((e=>{this.props.entity===g.entityTypes.UPTIME_MONITORS&&this.store.selectedEntity&&this.updateSelectedEntity(e),this.setState({entities:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load uptime monitors",loading:!1}),pm.logger.error("Error ocurred while fetching uptime monitors",e)})):this.setState({loading:!1})}fetchAPIs(e){e?h.default.getWorkspaceAPIs(e).then((e=>{const{newEntities:t,malformedResponse:i}=this.getFormattedResponse(e);if(i)throw new Error(E);return t})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return this.fetchAndAssignPermissions(e,this.props.rule,"api",this.props.mode)})).then((e=>{this.props.entity===g.entityTypes.APIS&&this.store.selectedEntity&&this.updateSelectedEntity(e),this.setState({entities:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load APIs",loading:!1}),pm.toasts.error("Something went wrong while fetching APIs"),pm.logger.error("Error ocurred while fetching APIs",e)})):this.setState({loading:!1})}async fetchAPIVersions(e){if(this.setState({shouldHideDropdown:!0}),e)try{const t=await h.default.getVersions(e);let{newEntities:i,malformedResponse:n}=this.getFormattedResponse(t);if(n)throw new Error(E);if(this.props.rule&&this.props.mode){const e="apiversion";i=await this.fetchAndAssignPermissions(i,this.props.rule,e,this.props.mode)}this.props.entity===g.entityTypes.API_VERSIONS&&this.store.selectedEntityVersion&&this.store.setSelectedEntityVersion(I().find(i,{value:this.store.selectedEntityVersion.value})),this.setState({entityVersions:i,loading:!1})}catch(e){this.setState({error:"Unable to load API versions",loading:!1}),pm.toasts.error("Something went wrong while fetching API versions"),pm.logger.error("Error ocurred while fetching API versions",e)}else this.setState({loading:!1})}onTargetSelect(e){I().isEmpty(e)?(this.store.resetSelectedEntityVersion(),this.props.entity!==g.entityTypes.API_VERSIONS&&this.store.resetSelectedEntity(),this.setState({firstLoad:!1,loading:!1})):this.props.entity===g.entityTypes.API_VERSIONS?this.store.setSelectedEntityVersion(e):(this.store.resetSelectedEntityVersion(),this.store.setSelectedEntity(e))}renderCreateMonitor(){return s.createElement(f.default,{alignItems:"center",direction:"column"},s.createElement("div",null,"This workspace doesn't have any monitors."),s.createElement("div",{onClick:()=>{"workspace"===I().split(d.default.getCurrentURL(),"/",1)[0]?d.default.transitionTo("build.create-monitor",{wid:this.props.workspaceId}):(0,y.openExternalLink)(d.default.getBaseURL()+"/"+d.default.getURLForRoute("build.create-monitor",{wid:this.props.workspaceId}),"_blank")}},s.createElement(b.default,{type:"link-primary"},"Create a new monitor")))}renderEmptyStateOptions(){if(this.props.entity===g.entityTypes.MONITORS)return this.renderCreateMonitor()}async validateDropdownVisibility(){const{entity:e,apiId:t}=this.props,{entityVersions:i}=this.state;if(e===g.entityTypes.API_VERSIONS){const e=await(0,_.hasAPIMigrated)(t);this.setState({shouldHideDropdown:e}),e&&this.store.setSelectedEntityVersion(i[0])}else this.setState({shouldHideDropdown:!1})}render(){const{loading:e,error:t,entities:i,entityVersions:n,firstLoad:r,shouldHideDropdown:o}=this.state,{selectedEntity:l,selectedEntityVersion:c}=this.store;return o?null:s.createElement(a.default,{title:this.props.title,isClearable:!0,description:this.props.description,disabled:this.props.disabled||e,options:this.props.entity===g.entityTypes.API_VERSIONS?n:i,value:this.props.value||(this.props.entity===g.entityTypes.API_VERSIONS?c:l),entityType:this.props.entity,onTargetSelect:this.props.onTargetSelect||this.onTargetSelect,error:t,label:this.props.label,loading:e,tooltipMessage:this.props.tooltipMessage||I().get(w,this.props.entity),emptyStateError:!e&&(this.props.entity===g.entityTypes.API_VERSIONS?n.length>0&&!c:i.length>0&&!l)&&!r&&this.getEmptyStateError(),handleRetry:this.fetchEntities,noOptionsForDropdown:this.renderEmptyStateOptions(),workspaceId:this.props.workspaceId})}})||n},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/EntitySelectorV2.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return v}});var n,s=i("../../node_modules/react/index.js"),a=i("./js/stores/StoreManager.js"),r=i("./js/stores/IntegrationsStore.js"),o=i("./monitors/services/MonitorService.js"),l=i("./api-dev/services/APIDevService.js"),c=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),d=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),h=i("./integrations/constants/integrationsConstants.ts"),u=i("./runtime-repl/collection/_api/CollectionInterface.js"),p=i("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),g=i("./js/components/base/LoadingIndicator.js"),m=i("./integrations/api-observability/components/base/CustomDropdown.js"),f=i("./node_modules/lodash/lodash.js");const b="Malformed response",y={collections:"Please select a collection",monitors:"Please select a monitor",uptimeMonitors:"Please select an uptime monitor",apis:"Please select an API",apiversions:"Please select an API version"},_={collections:"Select a collection",monitors:"Select a monitor",uptimeMonitors:"Select an uptime monitor",apis:"Select an API",apiversions:"Select an API version"};let v=(0,c.observer)(n=class extends s.Component{constructor(e){super(e),this.store=(0,a.resolveStoreInstance)(r.default),this.state={entities:[],entityVersions:[],loading:!1,error:!1,firstLoad:!0},this.fetchEntities=this.fetchEntities.bind(this),this.fetchCollections=this.fetchCollections.bind(this),this.fetchMonitors=this.fetchMonitors.bind(this),this.fetchUptimeMonitors=this.fetchUptimeMonitors.bind(this),this.fetchAPIs=this.fetchAPIs.bind(this),this.fetchAPIVersions=this.fetchAPIVersions.bind(this),this.onTargetSelect=this.onTargetSelect.bind(this),this.getEmptyStateError=this.getEmptyStateError.bind(this),this.updateSelectedEntity=this.updateSelectedEntity.bind(this),this.getFormattedResponse=this.getFormattedResponse.bind(this)}componentDidMount(){(this.props.entity===h.entityTypes.API_VERSIONS||this.props.workspaceId)&&this.fetchEntities()}componentDidUpdate(e){e.workspaceId===this.props.workspaceId&&e.apiId===this.props.apiId||this.fetchEntities()}getFormattedResponse(e){let t=!1,i=[];return i=e.map((e=>e.name&&e.id?{...e,label:f.get(e,"name"),value:f.get(e,"id")}:(t=!0,{}))),{newEntities:i,malformedResponse:t}}updateSelectedEntity(e){this.store.setSelectedEntity(f.find(e,{value:this.store.selectedEntity.value})||[])}fetchEntities(){this.setState({loading:!0,error:""}),this.props.entity===h.entityTypes.COLLECTIONS&&this.fetchCollections(this.props.workspaceId),this.props.entity===h.entityTypes.MONITORS&&this.fetchMonitors(this.props.workspaceId),this.props.entity===h.entityTypes.UPTIME_MONITORS&&this.fetchUptimeMonitors(this.props.workspaceId),this.props.entity===h.entityTypes.APIS&&this.fetchAPIs(this.props.workspaceId),this.props.entity===h.entityTypes.API_VERSIONS&&this.fetchAPIVersions(this.props.apiId)}getEmptyStateError(){return y[this.props.entity]?y[this.props.entity]:""}fetchAndAssignPermissions(e,t,i,n){return new Promise(((n,s)=>{const a=e.map((e=>({id:f.get(e,"apiversion"===i?"api":"id")})));let r=null;h.INTEGRATION_FORM_MODE.ADD,r=d.default.fetchCreatePermissions,r(t,i,a).then((t=>(f.forEach(f.zip(e,t.body),(e=>{const[t,i]=e;t.disabled=!i.hasPermission})),n(e)))).catch((e=>{pm.logger.error(e),s(e)}))}))}fetchCollections(e){e?(0,u.getCollectionsInWorkspace)(e).then((e=>{const{newEntities:t,malformedResponse:i}=this.getFormattedResponse(e);if(i)throw new Error(b);return t})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return this.fetchAndAssignPermissions(e,this.props.rule,"collection",this.props.mode)})).then((e=>{this.props.entity===h.entityTypes.COLLECTIONS&&this.store.selectedEntity&&this.updateSelectedEntity(e),this.setState({entities:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load collections",loading:!1}),pm.toasts.error("Something went wrong while fetching collections"),pm.logger.error("Error while fetching collections",e)})):this.setState({loading:!1})}fetchMonitors(e){e?o.default.getJobTemplatesByWorkspace({workspaceId:e}).then((e=>{const t=f.get(e,"body.data",[]),{newEntities:i,malformedResponse:n}=this.getFormattedResponse(t);if(n)throw new Error(b);return i})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return this.fetchAndAssignPermissions(e,this.props.rule,"monitor",this.props.mode)})).then((e=>{this.props.entity===h.entityTypes.MONITORS&&this.store.selectedEntity&&this.updateSelectedEntity(e),this.setState({entities:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load monitors",loading:!1}),pm.toasts.error("Something went wrong while fetching monitors"),pm.logger.error("Error ocurred while fetching monitors",e)})):this.setState({loading:!1})}fetchUptimeMonitors(e){e?o.default.getMonitorsByWorkspace({workspaceId:e}).then((e=>{const t=f.get(e,"body.data",[]),{newEntities:i,malformedResponse:n}=this.getFormattedResponse(t);if(n)throw new Error(b);return i})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return this.fetchAndAssignPermissions(e,this.props.rule,"uptimeMonitor",this.props.mode)})).then((e=>{this.props.entity===h.entityTypes.UPTIME_MONITORS&&this.store.selectedEntity&&this.updateSelectedEntity(e),this.setState({entities:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load uptime monitors",loading:!1}),pm.logger.error("Error ocurred while fetching uptime monitors",e)})):this.setState({loading:!1})}fetchAPIs(e){e?l.default.getWorkspaceAPIs(e).then((e=>{const{newEntities:t,malformedResponse:i}=this.getFormattedResponse(e);if(i)throw new Error(b);return t})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return this.fetchAndAssignPermissions(e,this.props.rule,"api",this.props.mode)})).then((e=>{this.props.entity===h.entityTypes.APIS&&this.store.selectedEntity&&this.updateSelectedEntity(e),this.setState({entities:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load APIs.",loading:!1}),pm.toasts.error("Something went wrong while fetching APIs"),pm.logger.error("Error ocurred while fetching APIs",e)})):this.setState({loading:!1})}fetchAPIVersions(e){e?l.default.getVersions(e).then((e=>{const{newEntities:t,malformedResponse:i}=this.getFormattedResponse(e);if(i)throw new Error(b);return t})).then((e=>{if(!this.props.rule||!this.props.mode)return e;return this.fetchAndAssignPermissions(e,this.props.rule,"apiversion",this.props.mode)})).then((e=>{this.props.entity===h.entityTypes.API_VERSIONS&&this.store.selectedEntityVersion&&this.store.setSelectedEntityVersion(f.find(e,{value:this.store.selectedEntityVersion.value})||[]),this.setState({entityVersions:e,loading:!1})})).catch((e=>{this.setState({error:"Unable to load API versions.",loading:!1}),pm.toasts.error("Something went wrong while fetching API versions"),pm.logger.error("Error ocurred while fetching API versions",e)})):this.setState({loading:!1})}onTargetSelect(e){f.isEmpty(e)?(this.store.setSelectedEntityVersion([]),this.props.entity!==h.entityTypes.API_VERSIONS&&this.store.setSelectedEntity([]),this.setState({firstLoad:!1,loading:!1})):this.props.entity===h.entityTypes.API_VERSIONS?this.store.setSelectedEntityVersion(e):(this.store.setSelectedEntityVersion([]),this.store.setSelectedEntity(e))}getValidationState(){const{loading:e,error:t,entities:i,entityVersions:n,firstLoad:a}=this.state,{selectedEntity:r,selectedEntityVersion:o}=this.store;return t||!e&&(this.props.entity===h.entityTypes.API_VERSIONS?n.length>0&&!f.get(o,"value"):i.length>0&&!f.get(r,"value"))&&!a?{status:"error",message:t?s.createElement("div",null,t,s.createElement("span",{className:"dropdown-retry",onClick:()=>{this.fetchEntities()}},"Retry")):this.getEmptyStateError()}:{}}renderLoadingState(){return s.createElement(p.default,{justifyContent:"space-between"},s.createElement("div",null,"Loading..."),s.createElement(g.default,{className:"loading-indicator-aether__dropdown"}))}getPlaceHolder(){return _[this.props.entity]?_[this.props.entity]:""}render(){const{loading:e,entities:t,entityVersions:i}=this.state,{selectedEntity:n,selectedEntityVersion:a}=this.store;return s.createElement(m.default,{label:this.props.title,isClearable:!0,helperText:this.props.description,isDisabled:this.props.disabled||e,className:e?"dropdown-icon-remove":"",placeholder:e?this.renderLoadingState():this.getPlaceHolder(),options:this.props.entity===h.entityTypes.API_VERSIONS?i:t,value:this.props.entity===h.entityTypes.API_VERSIONS?a:n,onChange:this.onTargetSelect,validationState:this.getValidationState()})}})||n},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/FieldSegment.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return l}});var n=i("../../node_modules/react/index.js"),s=i("./js/components/base/Inputs.js"),a=i("./node_modules/lodash/lodash.js"),r=i.n(a);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},o.apply(this,arguments)}function l(e){const{description:t,title:i,optional:a,optionalText:l,id:c,disabled:d,error:h,...u}=e;return n.createElement("div",{className:"integrations-add-card__segment"},n.createElement("div",{className:"integrations-add-card__label-title"},i," ",a?n.createElement("span",null,"(",l||"optional",")"):""),n.createElement("div",{className:"integrations-add-card__label-description"},t),n.createElement("div",{className:"integrations-add-card__input"},n.createElement(s.Input,o({inputStyle:"box",type:"text",disabled:d,error:r().isEmpty(h)?"":"This is a mandatory field"},u)),r().isEmpty(h)?"":n.createElement("div",{className:"integrations-add-card__error"},h)))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/NicknameFieldSegment.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return l}});var n=i("../../node_modules/react/index.js"),s=i("./js/components/base/Inputs.js"),a=i("./node_modules/lodash/lodash.js"),r=i.n(a);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},o.apply(this,arguments)}function l(e){const{id:t,error:i,...a}=e;return n.createElement("div",{className:"integrations-add-card__segment"},n.createElement("div",{className:"integrations-add-card__label-title"}," Nickname "),n.createElement("div",{className:"integrations-add-card__label-description"},"Helps in identifying the integrations."),n.createElement("div",{className:"integrations-add-card__input"},n.createElement(s.Input,o({id:t,inputStyle:"box",type:"text",error:r().isEmpty(i)?"":"This is a mandatory field"},a)),r().isEmpty(i)?"":n.createElement("div",{className:"integrations-add-card__error"},i)))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/NicknameFieldSegmentV2.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return c}});var n=i("../../node_modules/react/index.js"),s=(i("./js/components/base/Inputs.js"),i("./node_modules/lodash/lodash.js")),a=i.n(s),r=i("../../node_modules/@postman/aether/esmLib/src/components/TextInput/TextInput.js"),o=i("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js");function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},l.apply(this,arguments)}function c(e){const{id:t,error:i,...s}=e;return n.createElement("div",{className:"integrations-add-card__segment"},n.createElement(r.default,l({id:t,label:n.createElement(o.default,{text:"Nickname"}),helperText:"Give a nickname to your integration.",validationStatus:a().isEmpty(i)?"":"error",validationMessage:a().isEmpty(i)?"":"This is a mandatory field"},s)))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SelectSegment.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return o}});var n=i("../../node_modules/react/index.js"),s=i("./js/components/base/InputSelectV2.js"),a=i("./js/components/base/SearchHighlighter.js"),r=i("./node_modules/lodash/lodash.js");class o extends n.Component{constructor(e){super(e),this.selectedTarget=this.selectedTarget.bind(this)}getFilteredList(e,t,i={}){return!t||i.firstRender?e:r.filter(e,(e=>e.id&&r.includes(e.name.toLowerCase(),t.toLowerCase())))}selectedTarget(){var e=this.props.filterItems,t=this.props.selectedTarget,i=r.find(e,(e=>e.id===t.id));return i||{id:"none",name:this.props.initialLabel||"No result found"}}getOption(e,t,i={}){const s=e.name,r=e.id;return t&&!i.firstRender?n.createElement("div",{className:"input-select-item",key:r},n.createElement(a.default,{source:s,query:t})):n.createElement("div",{className:"input-select-item",key:r},s)}render(){var{title:e,description:t,customLabel:i,showCustomLabel:a,filterItems:r}=this.props;return n.createElement("div",{className:"integrations-add-card__segment"},n.createElement("div",{className:"integrations-add-card__label-title"},e),n.createElement("div",{className:"integrations-add-card__label-description"},t),n.createElement("div",{className:"integrations-add-card__input"},n.createElement(s.InputSelectV2,{style:{width:"100%"},onSelect:this.props.onTargetSelect,getFilteredList:this.getFilteredList.bind(this,r),optionRenderer:this.getOption,selectedItem:this.selectedTarget(),placeholder:this.props.placeholder,ref:"inputSelect",disabled:this.props.disabled,menuClassName:"integrations-target-selector-menu",getInputValue:e=>e.name||""}),a?i:""))}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SelectSegmentV2.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return d}});var n=i("../../node_modules/react/index.js"),s=i("./js/components/base/SelectDropdown.js"),a=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/DropdownOption.js"),r=i("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),o=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),l=i("./version-control/common/ForkLabel.js"),c=i("./node_modules/lodash/lodash.js");class d extends n.Component{constructor(e){super(e),this.optionRenderer=e=>n.createElement(a.default,{option:e,workspaceId:this.props.workspaceId,entityType:this.props.entityType,tooltipMessage:e.disabledMessage||this.props.tooltipMessage}),this.validateEmptyString=this.validateEmptyString.bind(this),this.selectedTarget=this.selectedTarget.bind(this),this.optionRenderer=this.optionRenderer.bind(this)}filterOnLabel(e,t){return!t||(e.label&&"string"==typeof e.label?!(!t||!e.label.toLowerCase().includes(t.toLowerCase())):!e.name||"string"!=typeof e.name||e.name.toLowerCase().includes(t.toLowerCase()))}validateEmptyString(e){const t=e&&e.label&&e.label.trim();return!c.isEmpty(t)}selectedTarget(){if(this.props.multi)return this.props.value;var e=this.props.options,t=this.props.value,i=null;if(t&&(i=c.find(e,(e=>c.isEqual(e.value,t.value)))),i){let e,t;var s,a,d,h,u;return i.isForked?(e={id:null===(s=i)||void 0===s?void 0:s.id,forkLabel:null===(a=i)||void 0===a?void 0:a.forkLabel,model:null===(d=i)||void 0===d?void 0:d.type},t={id:null===(h=i)||void 0===h?void 0:h.baseCollectionUid,model:null===(u=i)||void 0===u?void 0:u.type},i={...i,label:n.createElement(r.default,{alignItems:"center",direction:"row",gap:"spacing-xs",className:"input-select-item",width:"100%"},n.createElement(o.default,{isTruncated:!0,maxWidth:"80%",color:"content-color-primary"},i.label),n.createElement(l.default,{forkedEntity:e,baseEntity:t,label:i.forkLabel}))}):i}return null}promptTextForCreateOption(e,t=""){return`${t} "${e}" `}render(){var{title:e,description:t,options:i,error:a,isCreatable:r,isClearable:o,noResultsForSearch:l,optional:d,noOptionsForDropdown:h,loading:u,disabled:p,handleRetry:g,checkForValidInput:m,customInputMessage:f,emptyStateError:b,label:y}=this.props;return n.createElement("div",{className:"integrations-add-card__segment"},n.createElement("div",{className:"integrations-add-card__label-title"},e," ",d?n.createElement("span",null,"(optional)"):""),n.createElement("div",{className:"integrations-add-card__label-description"},t),n.createElement("div",{className:"integrations-add-card__input"},n.createElement(s.default,{isCreatable:r,isClearable:o,multi:this.props.multi,label:y,optionRenderer:this.optionRenderer,loading:u,className:(b||a)&&"is-error",disabled:p,value:this.selectedTarget(),onValueClick:this.props.onTargetSelect,filterOption:this.filterOnLabel,noResultsText:i&&0!==i.length?l:h,options:i,isValidNewOption:m||this.validateEmptyString,placeholder:this.props.placeholder,ref:"inputSelect",promptTextCreator:e=>this.promptTextForCreateOption(e,f),menuClassName:"integrations-target-selector-menu",getInputValue:e=>e.name||""}),b?n.createElement("span",{className:"integrations-add-card__error"},b):a?n.createElement("span",{className:"integrations-add-card__error"},a+". ",c.isFunction(g)&&n.createElement("span",{onClick:g,className:"integrations-add-card__error__btn"},"Retry")):""))}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SensitiveFieldSegment.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return p}});var n=i("../../node_modules/react/index.js"),s=i("./js/components/base/PasswordInput.js"),a=i("./node_modules/lodash/lodash.js"),r=i.n(a),o=i("./node_modules/classnames/index.js"),l=i.n(o),c=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/InlineFormActions.js"),d=i("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js");function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},h.apply(this,arguments)}const u=(e,t)=>l()(e,{"hide-toggle":!r().isEmpty(t)});function p(e){const{isInlineSaveVisible:t,inlineSaveButtonData:i,onSave:a,value:o}=e,{isSaveDisabled:l,integrationId:p,payload:g}=i||{};return n.createElement(d.default,{direction:"row",justifyContent:"space-between",alignItems:"center",width:"616px"},n.createElement("div",{className:"integrations-form__segment__input__inline-token"},(e=>{const{description:t,title:i,optional:a,id:o,customLink:l,error:c,descriptionClass:d,maskedPlaceholderWhenEmpty:p,...g}=e;return n.createElement("div",{className:"integrations-add-card__segment"},n.createElement("div",{className:"integrations-add-card__label-title"},i," ",a?n.createElement("span",null,"(optional)"):""),n.createElement("div",{className:d||"integrations-add-card__label-description"},t," ",l),n.createElement("div",{className:"integrations-add-card__input"},n.createElement(s.default,h({inputStyle:"box",type:"text",error:r().isEmpty(c)?"":"This is a mandatory field",placeholder:p?"************":""},g,{className:u(e.className,e.error)})),r().isEmpty(c)?"":n.createElement("div",{className:"integrations-add-card__error"},c)))})(e)),t&&n.createElement(c.default,{isSaveDisabled:l,integrationId:p,payload:g,onSave:a,value:o}))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SensitiveFieldSegmentV2.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return l}});var n=i("../../node_modules/react/index.js"),s=i("./node_modules/lodash/lodash.js"),a=i.n(s),r=(i("./node_modules/classnames/index.js"),i("../../node_modules/@postman/aether/esmLib/src/components/TextInput/TextInput.js"));function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},o.apply(this,arguments)}function l(e){const{description:t,title:i,optional:s,id:l,customLink:c,error:d,descriptionClass:h,maskedPlaceholderWhenEmpty:u,...p}=e;return n.createElement("div",{className:"integrations-add-card__segment"},n.createElement("div",{className:"integrations-add-card__label-title-v2"},i," ",s?n.createElement("span",null,"(optional)"):""),n.createElement("div",{className:h||"integrations-add-card__label-description"},t," ",c),n.createElement("div",{className:"integrations-add-card__input"},n.createElement(r.default,o({type:"password",placeholder:u?"************":""},p)),a().isEmpty(d)?"":n.createElement("div",{className:"integrations-add-card__error"},d)))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/WorkspaceSelector.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return p}});var n,s=i("../../node_modules/react/index.js"),a=i("./collaboration/workspace/controller/WorkspaceController.ts"),r=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SelectSegmentV2.js"),o=i("./js/stores/StoreManager.js"),l=i("./js/stores/IntegrationsStore.js"),c=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),d=i("./node_modules/async/dist/async.js"),h=i("./integrations/constants/integrationsConstants.ts"),u=i("./node_modules/lodash/lodash.js");let p=(0,c.observer)(n=class extends s.Component{constructor(e){super(e),this.store=(0,o.resolveStoreInstance)(l.default),this.state={workspaces:[],loading:!1,error:"",firstLoad:!0,shouldDisableDropdown:!1},this.fetchAllWorkspaces=this.fetchAllWorkspaces.bind(this),this.onTargetSelect=this.onTargetSelect.bind(this)}componentDidMount(){let{selectedWorkspace:e}=this.props;e?this.setState({workspaces:[e],shouldDisableDropdown:!0},(()=>{this.store.setSelectedWorkspace(e),this.setState({firstLoad:!1})})):this.fetchAllWorkspaces()}fetchAllWorkspaces(){this.setState({loading:!0,error:""});let e,t=[];(0,d.doUntil)((i=>{a.default.findAll({limit:50,...e&&{cursor:e}}).then((n=>(e=u.get(n,"meta.nextCursor"),t=u.unionBy(t,n.data,"id"),i()))).catch((e=>i(e)))}),(()=>u.isEmpty(e)),(e=>{if(e)this.setState({error:"Unable to load workspaces",loading:!1}),pm.toasts.error("Something went wrong while fetching workspaces"),pm.logger.error("Could not find workspaces",e);else{let i=!1;const n=t.map((e=>e.id&&e.name?{...e,label:e.name,value:e.id}:(i=!0,{})));i&&(this.setState({error:"Unable to load workspaces",loading:!1}),pm.toasts.error("Something went wrong while fetching workspaces"),pm.logger.error("Received malformed responses while fetching workspaces",e)),this.setState({workspaces:n,loading:!1})}}))}onTargetSelect(e){this.store.resetSelectedEntity(),this.store.resetSelectedEntityVersion(),u.isEmpty(e)?(this.store.resetAddIntegrationDependencies(),this.setState({firstLoad:!1})):this.store.setSelectedWorkspace(e)}render(){const{loading:e,error:t,workspaces:i,firstLoad:n,shouldDisableDropdown:a}=this.state,{selectedWorkspace:o}=this.store;return!a&&s.createElement(r.default,{title:"Choose workspace",description:this.props.description,disabled:this.props.disabled||e||a,error:t,entityType:h.entityTypes.WORKSPACES,loading:e,label:this.props.label,isClearable:!0,handleRetry:()=>this.fetchAllWorkspaces(),emptyStateError:!e&&i.length>0&&!o&&!n&&"Please select a workspace",options:i,value:o,onTargetSelect:this.onTargetSelect})}})||n},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/WorkspaceSelectorV2.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return b}});var n,s=i("../../node_modules/react/index.js"),a=i("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),r=i("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),o=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),l=i("./js/stores/StoreManager.js"),c=i("./js/stores/IntegrationsStore.js"),d=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),h=i("./node_modules/prop-types/index.js"),u=i.n(h),p=i("./integrations/api-observability/components/base/CustomDropdown.js"),g=i("./collaboration/workspace/controller/WorkspaceControllerWithGateway.ts"),m=i("./node_modules/lodash/lodash.js");const f="Received malformed workspace response";let b=(0,d.observer)(n=class extends s.Component{constructor(e){super(e),this.store=(0,l.resolveStoreInstance)(c.default),this.state={workspaces:[],loading:!1,error:null,firstLoad:!0,shouldDisableDropdown:!1,cursor:"",selectedWorkspace:{}},this.fetchWorkspaces=this.fetchWorkspaces.bind(this),this.fetchSearchedWorkspaces=this.fetchSearchedWorkspaces.bind(this),this.onTargetSelect=this.onTargetSelect.bind(this),this.getCustomOption=this.getCustomOption.bind(this)}componentDidMount(){let{selectedWorkspace:e}=this.props;e&&this.setState({workspaces:[e],shouldDisableDropdown:!0},(()=>{this.store.setSelectedWorkspace(e),this.setState({firstLoad:!1})}))}async fetchWorkspaces(e){let t;this.setState({error:null});try{e?t=await g.default.findAllWithGateway({cursor:this.state.cursor,sort:{by:"name",order:"ASC"}}):(this.setState({loading:!0}),t=await g.default.findAllWithGateway({sort:{by:"name",order:"ASC"}}),this.setState({loading:!1}));const[i,n]=this.validateAndMapResponse(t);return n&&this.setState({error:f}),[i,t.meta.nextCursor]}catch(e){this.setState({error:"Unable to load workspaces.",loading:!1}),pm.toasts.error("Something went wrong while fetching workspaces"),pm.logger.error("Could not find workspaces",e)}}validateAndMapResponse(e){let t=!1;const i=m.map(e.data,(e=>e.id&&e.name?{...e,label:e.name,value:e.id}:(t=!0,{})));return[m.compact(i),t]}async fetchSearchedWorkspaces(e,t){let i;try{e?i=await g.default.findAllWithGateway({cursor:this.state.cursor,name:t,limit:50}):(this.setState({loading:!0}),i=await g.default.findAllWithGateway({name:t,limit:50}),this.setState({loading:!1}));const[n,s]=this.validateAndMapResponse(i);return s&&this.setState({error:f}),[n,i.meta.nextCursor]}catch(e){this.setState({error:"Unable to load workspaces.",loading:!1}),pm.toasts.error("Something went wrong while fetching workspaces"),pm.logger.error("Could not find workspaces",e)}}onTargetSelect(e){this.store.setSelectedEntity([]),this.store.setSelectedEntityVersion([]),m.isEmpty(e)?(this.store.resetSelectedWorkspace([]),this.setState({firstLoad:!1,selectedWorkspace:{}})):(this.store.setSelectedWorkspace(e),this.setState({firstLoad:!1,selectedWorkspace:e})),this.props.onChange&&this.props.onChange(e)}renderLoadingState(){return s.createElement(a.default,{className:"loading-placeholder"},s.createElement("div",null,"Loading..."),s.createElement(r.default,null))}getValidationState(){let{firstLoad:e,loading:t,workspaces:i,selectedWorkspace:n}=this.state;return!t&&i.length>0&&!m.get(n,"value")&&!e?{status:"error",message:"Please select a workspace."}:{}}getCustomOption(e){return s.createElement(a.default,{maxWidth:"parent",grow:1,shrink:1,minWidth:"0px",alignItems:"center",gap:"spacing-s"},s.createElement(o.default,{isTruncated:!0},e.label))}render(){const{loading:e,workspaces:t,shouldDisableDropdown:i}=this.state,{selectedWorkspace:n}=this.store;return!i&&s.createElement("div",{className:"integrations-add-card__segment"},s.createElement(p.default,{label:this.props.label||"Choose workspace",helperText:this.props.description,isDisabled:this.props.disabled||i,placeholder:e?this.renderLoadingState():"Select Workspace",className:e?"dropdown-icon-remove":"",isClearable:!0,isSearchable:!0,validationState:this.getValidationState(),options:t||[],value:n,onChange:this.onTargetSelect,emptyStateMessage:"No workspaces found",customOptionComponent:this.getCustomOption,asyncLoader:async({offset:e,search:i,shouldReset:n})=>{let s,a;return[s,a]=i?await this.fetchSearchedWorkspaces(e,i):await this.fetchWorkspaces(e),n?this.setState({workspaces:s,cursor:a}):this.setState({workspaces:m.union(t,s),cursor:a}),!m.isEmpty(a)}}))}})||n;b.propTypes={label:u().string,description:u().string,disabled:u().bool,onChange:u().func}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/AddButton.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return _}});var n,s=i("../../node_modules/react/index.js"),a=i("./js/components/base/Buttons.js"),r=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),o=i("./js/stores/StoreManager.js"),l=i("./js/stores/IntegrationsStore.js"),c=i("./js/services/NavigationService.js"),d=i("./integrations/navigation/constants.js"),h=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),u=i("./js/modules/services/AnalyticsService.js"),p=i("./integrations/utils/CommonHelperMethods.ts"),g=i("./node_modules/classnames/index.js"),m=i.n(g),f=i("./js/components/base/LoadingIndicator.js"),b=i("./node_modules/lodash/lodash.js");function y(){return y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},y.apply(this,arguments)}let _=(0,h.observer)(n=class extends s.Component{constructor(e){super(e),this.store=(0,o.resolveStoreInstance)(l.default)}render(){const{disabled:e,payload:t,workspaceId:i,rule:n,service:o,alignLeft:l,integrationFormActions:h,source:g,labels:_,...v}=this.props,S=(null==_?void 0:_.add)||"Add Integration";let I=g||"team_integrations_create_forms";return s.createElement("div",{"data-testid":"add-integration-button",className:m()("integrations-add-actions__button--container",{"align-left":l})},s.createElement(a.Button,y({type:"primary",className:"integrations-add-actions__button--save-changes",disabled:e||this.store.isAdding,tooltip:e?"Make sure that you have entered all the mandatory fields":"",size:"small",onClick:()=>{this.store.updateIsAdding(!0),this.props.handleAddIntegration?this.props.handleAddIntegration():r.default.createIntegration(i||null,t).then((e=>{if(this.store.updateIsAdding(!1),200===e.status&&b.get(e,"body.model_id"))if(pm.toasts.success("Added a new integration"),u.default.addEventV2({category:"integrations",action:n+"_created_integration",label:I,value:1}),(0,p.postAddIntegrationActions)(n),h)h(t);else if("api_github"===n&&"github"===o)c.default.transitionTo(d.EDIT_INTEGRATIONS_IDENTIFIER,{integrationId:b.get(e,"body.data.id")},{apiId:t.executor,workspaceId:i});else if(this.props.redirect){const{identifier:e,routeParams:t,queryParams:i}=this.props.redirect;c.default.transitionTo(e,t,i)}else c.default.transitionTo(d.TEAM_INTEGRATIONS_IDENTIFIER,{serviceId:o,ruleId:n});else pm.toasts.error("Something went wrong while adding a new integration")})).catch((e=>{this.store.updateIsAdding(!1),pm.toasts.error(b.get(e,"error.details.message")||b.get(e,"error.message")||"Something went wrong while adding a new integration"),pm.logger.error("Something went wrong while adding a new integration",e)}))}},v)," ",this.store.isAdding?s.createElement(f.default,null):S))}})||n},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/CancelButton.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return p}});var n,s=i("../../node_modules/react/index.js"),a=i("./js/stores/StoreManager.js"),r=i("./js/stores/IntegrationsStore.js"),o=i("./js/components/base/Buttons.js"),l=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),c=i("./js/services/NavigationService.js"),d=i("./node_modules/classnames/index.js"),h=i.n(d);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},u.apply(this,arguments)}let p=(0,l.observer)(n=class extends s.Component{constructor(e){super(e),this.store=(0,a.resolveStoreInstance)(r.default)}render(){const{onClickHandler:e,service:t,alignLeft:i,integrationFormActions:n,payload:a,labels:r,...l}=this.props,d=(null==r?void 0:r.cancel)||"Cancel";return s.createElement("div",{"data-testid":"cancel-integration-addition-button",className:h()("integrations-add-actions__button--container",{"align-left":i})},s.createElement(o.Button,u({className:"integrations-add-actions__button--cancel",disabled:this.store.isAdding,type:"secondary",size:"small",onClick:()=>{n?n(a,"cancel"):(c.default.back(),this.store.resetAddIntegrationDependencies())}},l)," ",d," "))}})||n},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/DropdownOption.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return b}});var n=i("../../node_modules/react/index.js"),s=i("./js/components/base/Tooltips.js"),a=i("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),r=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),o=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-entity-collection-stroke.js"),l=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-entity-forkedCollection-stroke.js"),c=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-entity-api-stroke.js"),d=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-entity-monitor-stroke.js"),h=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-descriptive-versions-stroke.js"),u=i("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),p=i("./integrations/constants/integrationsConstants.ts"),g=i("./collaboration/utils/util.js"),m=i("./version-control/common/ForkLabel.js"),f=i("./node_modules/lodash/lodash.js");class b extends n.Component{constructor(e){super(e),this.state={showTooltip:!1},this.setShowTooltip=this.setShowTooltip.bind(this)}setShowTooltip(e){this.setState({showTooltip:e})}render(){const{option:e,tooltipMessage:t,entityType:i,workspaceId:b}=this.props;let y,_;return e.isForked&&(y={id:e.id,forkLabel:e.forkLabel,model:e.type},_={id:e.baseCollectionUid,model:e.type}),n.createElement("div",{className:e.disabled?"disabled-option":"",ref:e=>this.optionRef=e,onMouseEnter:()=>this.setShowTooltip(!0),onMouseLeave:()=>this.setShowTooltip(!1)},t&&!f.isEmpty(t)&&e.disabled&&n.createElement(s.Tooltip,{show:this.state.showTooltip,target:this.optionRef,placement:"left"},n.createElement(s.TooltipBody,null,t)),n.createElement(a.default,{direction:"row",gap:"spacing-s",alignItems:"center",alignSelf:"auto",className:"target-input-flex"},((e,t)=>{let i=e.disabled?"content-color-tertiary":"",s={[p.entityTypes.COLLECTIONS]:n.createElement(o.default,{color:i}),[p.entityTypes.COLLECTIONS_FORKED]:n.createElement(l.default,{color:i}),[p.entityTypes.APIS]:n.createElement(c.default,{color:i}),[p.entityTypes.MONITORS]:n.createElement(d.default,{color:i}),[p.entityTypes.API_VERSIONS]:n.createElement(h.default,{color:i})};return t===p.entityTypes.WORKSPACES?n.createElement(u.default,{name:g.default.getWorkspaceIconName(e),color:"content-color-tertiary"}):t===p.entityTypes.COLLECTIONS&&e&&e.forkLabel?s[p.entityTypes.COLLECTIONS_FORKED]:s[t]})(e,i),n.createElement(a.default,{direction:"row",gap:"spacing-xs",className:"input-select-item",width:"100%"},n.createElement(r.default,{isTruncated:!0,maxWidth:"80%"},e.label),e.isForked&&n.createElement(m.default,{workspaceId:b,forkedEntity:y,baseEntity:_,label:e.forkLabel}))))}}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/base/ExternalLink.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return r}});var n=i("../../node_modules/react/index.js"),s=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),a=i("./js/external-navigation/ExternalNavigationService.js");function r(e){const{extUrl:t}=e;return n.createElement("span",{onClick:()=>(0,a.openExternalLink)(t,"_blank")},n.createElement(s.default,{type:"link-default",isExternal:!0},e.children))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/index.js":function(e,t,i){i.r(t),i.d(t,{AddIntegrationActions:function(){return p.default},AuthUserSegment:function(){return m.default},CustomLink:function(){return g.default},EntitySelector:function(){return h.default},EntitySelectorV2:function(){return u.default},FieldSegment:function(){return n.default},NicknameFieldSegment:function(){return s.default},NicknameFieldSegmentV2:function(){return a.default},SelectSegment:function(){return o.default},SelectSegmentV2:function(){return l.default},SensitiveFieldSegment:function(){return r.default},SensitiveFieldSegmentV2:function(){return f.default},WorkspaceSelector:function(){return c.default},WorkspaceSelectorV2:function(){return d.default}});var n=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/FieldSegment.js"),s=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/NicknameFieldSegment.js"),a=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/NicknameFieldSegmentV2.js"),r=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SensitiveFieldSegment.js"),o=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SelectSegment.js"),l=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SelectSegmentV2.js"),c=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/WorkspaceSelector.js"),d=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/WorkspaceSelectorV2.js"),h=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/EntitySelector.js"),u=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/EntitySelectorV2.js"),p=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/AddIntegrationActions.js"),g=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/CustomLink.js"),m=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/AuthUserSegment.js"),f=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/components/add/common/SensitiveFieldSegmentV2.js")},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/edit/common/InlineFormActions.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return l}});var n=i("../../node_modules/react/index.js"),s=i("../../node_modules/@postman/aether/esmLib/src/components/ButtonGroup/ButtonGroup.js"),a=i("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),r=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),o=i("./onboarding/src/features/Homepage/pages/IntegrationsPage/constants/EditForm.js");function l(e){const{isSaveDisabled:t,integrationId:i,payload:l,value:c}=e,[d,h]=(0,n.useState)(!1);return n.createElement(s.default,{className:"integrations-edit-actions__button--container-inline"},n.createElement(a.default,{type:"secondary",text:"Cancel",isDisabled:d,onClick:()=>{e.onSave("",o.RESET)}}),n.createElement(a.default,{type:"primary",text:"Save",isDisabled:t,isLoading:d,onClick:()=>{h(!0),r.default.updateIntegration(i,l).then((t=>{e.onSave(c)})).catch((e=>{pm.toasts.error("Something went wrong while saving the changes. Please try again.",{title:"Unable to save changes"}),pm.logger.error("Something went wrong while saving the changes.",e)})).finally((()=>{h(!1)}))}}))}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/components/error-states/ErrorState.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return c}});var n=i("../../node_modules/react/index.js"),s=i("./node_modules/prop-types/index.js"),a=i.n(s),r=i("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/UnauthorizedError.js"),o=i("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/PageNotFound.js"),l=i("./node_modules/lodash/lodash.js");class c extends n.Component{constructor(e){super(e)}render(){return n.createElement("div",{className:"team-integrations-error-state"},n.createElement("div",{className:"team-integrations-error-state__illustration-wrapper team-integrations-error-state__illustration-wrapper--collections"},function(e){let t=n.createElement(r.default,null);return"team_integrations_in_detail"===e.origin||l.isEqual(l.get(e,"error.name"),"instanceNotFoundError")&&(t=n.createElement(o.default,null)),t}(this.props.errorDetails)),n.createElement("div",{className:"team-integrations-error-state__title"},function(e){let t=e.title||"Something went wrong";return 404===e.status||400===e.status?t="We can't seem to find this page":"ESOCKETTIMEDOUT"===l.get(e,"error.details.code","")&&(t="Your request timed out"),"team_integrations_in_detail"===e.origin||l.isEqual(l.get(e,"error.name"),"instanceNotFoundError")&&(t="Couldn't find the run log for this Integration"),t}(this.props.errorDetails)),n.createElement("div",{className:"team-integrations-error-state__subtitle"},function(e){let t=e.subtitle||"Try refreshing the page. If you keep getting this error, contact help@postman.com.";return 404!==e.status&&400!==e.status||(t="Looks like the page you're looking for doesn't exist."),"team_integrations_in_detail"===e.origin||l.isEqual(l.get(e,"error.name"),"instanceNotFoundError")&&(t="This integration may have been deleted or the URL maybe incorrect."),t}(this.props.errorDetails)))}}c.propTypes={errorDetails:a().object,origin:a().string}},"./onboarding/src/features/Homepage/pages/IntegrationsPage/constants/EditForm.js":function(e,t,i){i.r(t),i.d(t,{RESET:function(){return n}});const n="reset"},"./node_modules/chartjs-adapter-moment/dist/chartjs-adapter-moment.esm.js":function(e,t,i){i.r(t);var n=i("./node_modules/moment/moment.js"),s=i.n(n),a=i("./node_modules/chart.js/dist/chart.js");const r={datetime:"MMM D, YYYY, h:mm:ss a",millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"};a._adapters._date.override("function"==typeof s()?{_id:"moment",formats:function(){return r},parse:function(e,t){return"string"==typeof e&&"string"==typeof t?e=s()(e,t):e instanceof s()||(e=s()(e)),e.isValid()?e.valueOf():null},format:function(e,t){return s()(e).format(t)},add:function(e,t,i){return s()(e).add(t,i).valueOf()},diff:function(e,t,i){return s()(e).diff(s()(t),i)},startOf:function(e,t,i){return e=s()(e),"isoWeek"===t?(i=Math.trunc(Math.min(Math.max(0,i),6)),e.isoWeekday(i).startOf("day").valueOf()):e.startOf(t).valueOf()},endOf:function(e,t){return s()(e).endOf(t).valueOf()}}:{})},"./node_modules/chartjs-plugin-datalabels/dist/chartjs-plugin-datalabels.esm.js":function(e,t,i){i.r(t);var n=i("./node_modules/chart.js/helpers/helpers.js"),s=i("./node_modules/chart.js/dist/chart.js"),a=i("./node_modules/chart.js/dist/chunks/helpers.segment.js"),r=function(){if("undefined"!=typeof window){if(window.devicePixelRatio)return window.devicePixelRatio;var e=window.screen;if(e)return(e.deviceXDPI||1)/(e.logicalXDPI||1)}return 1}(),o=function(e){var t,i=[];for(e=[].concat(e);e.length;)"string"==typeof(t=e.pop())?i.unshift.apply(i,t.split("\n")):Array.isArray(t)?e.push.apply(e,t):(0,n.isNullOrUndef)(e)||i.unshift(""+t);return i},l=function(e,t,i){var n,s=[].concat(t),a=s.length,r=e.font,o=0;for(e.font=i.string,n=0;n<a;++n)o=Math.max(e.measureText(s[n]).width,o);return e.font=r,{height:a*i.lineHeight,width:o}},c=function(e,t,i){return Math.max(e,Math.min(t,i))},d=function(e,t){var i,n,s,a,r=e.slice(),o=[];for(i=0,s=t.length;i<s;++i)a=t[i],-1===(n=r.indexOf(a))?o.push([a,1]):r.splice(n,1);for(i=0,s=r.length;i<s;++i)o.push([r[i],-1]);return o};function h(e,t){var i=t.x,n=t.y;if(null===i)return{x:0,y:-1};if(null===n)return{x:1,y:0};var s=e.x-i,a=e.y-n,r=Math.sqrt(s*s+a*a);return{x:r?s/r:0,y:r?a/r:-1}}function u(e,t,i){var n=0;return e<i.left?n|=1:e>i.right&&(n|=2),t<i.top?n|=8:t>i.bottom&&(n|=4),n}function p(e,t){var i,n,s=t.anchor,a=e;return t.clamp&&(a=function(e,t){for(var i,n,s,a=e.x0,r=e.y0,o=e.x1,l=e.y1,c=u(a,r,t),d=u(o,l,t);c|d&&!(c&d);)8&(i=c||d)?(n=a+(o-a)*(t.top-r)/(l-r),s=t.top):4&i?(n=a+(o-a)*(t.bottom-r)/(l-r),s=t.bottom):2&i?(s=r+(l-r)*(t.right-a)/(o-a),n=t.right):1&i&&(s=r+(l-r)*(t.left-a)/(o-a),n=t.left),i===c?c=u(a=n,r=s,t):d=u(o=n,l=s,t);return{x0:a,x1:o,y0:r,y1:l}}(a,t.area)),"start"===s?(i=a.x0,n=a.y0):"end"===s?(i=a.x1,n=a.y1):(i=(a.x0+a.x1)/2,n=(a.y0+a.y1)/2),function(e,t,i,n,s){switch(s){case"center":i=n=0;break;case"bottom":i=0,n=1;break;case"right":i=1,n=0;break;case"left":i=-1,n=0;break;case"top":i=0,n=-1;break;case"start":i=-i,n=-n;break;case"end":break;default:s*=Math.PI/180,i=Math.cos(s),n=Math.sin(s)}return{x:e,y:t,vx:i,vy:n}}(i,n,e.vx,e.vy,t.align)}var g=function(e,t){var i=(e.startAngle+e.endAngle)/2,n=Math.cos(i),s=Math.sin(i),a=e.innerRadius,r=e.outerRadius;return p({x0:e.x+n*a,y0:e.y+s*a,x1:e.x+n*r,y1:e.y+s*r,vx:n,vy:s},t)},m=function(e,t){var i=h(e,t.origin),n=i.x*e.options.radius,s=i.y*e.options.radius;return p({x0:e.x-n,y0:e.y-s,x1:e.x+n,y1:e.y+s,vx:i.x,vy:i.y},t)},f=function(e,t){var i=h(e,t.origin),n=e.x,s=e.y,a=0,r=0;return e.horizontal?(n=Math.min(e.x,e.base),a=Math.abs(e.base-e.x)):(s=Math.min(e.y,e.base),r=Math.abs(e.base-e.y)),p({x0:n,y0:s+r,x1:n+a,y1:s,vx:i.x,vy:i.y},t)},b=function(e,t){var i=h(e,t.origin);return p({x0:e.x,y0:e.y,x1:e.x,y1:e.y,vx:i.x,vy:i.y},t)},y=function(e){return Math.round(e*r)/r};function _(e,t){var i=t.chart.getDatasetMeta(t.datasetIndex).vScale;if(!i)return null;if(void 0!==i.xCenter&&void 0!==i.yCenter)return{x:i.xCenter,y:i.yCenter};var n=i.getBasePixel();return e.horizontal?{x:n,y:null}:{x:null,y:n}}function v(e,t,i){var n=i.backgroundColor,s=i.borderColor,a=i.borderWidth;(n||s&&a)&&(e.beginPath(),function(e,t,i,n,s,a){var r=Math.PI/2;if(a){var o=Math.min(a,s/2,n/2),l=t+o,c=i+o,d=t+n-o,h=i+s-o;e.moveTo(t,c),l<d&&c<h?(e.arc(l,c,o,-Math.PI,-r),e.arc(d,c,o,-r,0),e.arc(d,h,o,0,r),e.arc(l,h,o,r,Math.PI)):l<d?(e.moveTo(l,i),e.arc(d,c,o,-r,r),e.arc(l,c,o,r,Math.PI+r)):c<h?(e.arc(l,c,o,-Math.PI,0),e.arc(l,h,o,0,Math.PI)):e.arc(l,c,o,-Math.PI,Math.PI),e.closePath(),e.moveTo(t,i)}else e.rect(t,i,n,s)}(e,y(t.x)+a/2,y(t.y)+a/2,y(t.w)-a,y(t.h)-a,i.borderRadius),e.closePath(),n&&(e.fillStyle=n,e.fill()),s&&a&&(e.strokeStyle=s,e.lineWidth=a,e.lineJoin="miter",e.stroke()))}function S(e,t,i){var n=e.shadowBlur,s=i.stroked,a=y(i.x),r=y(i.y),o=y(i.w);s&&e.strokeText(t,a,r,o),i.filled&&(n&&s&&(e.shadowBlur=0),e.fillText(t,a,r,o),n&&s&&(e.shadowBlur=n))}var I=function(e,t,i,n){var s=this;s._config=e,s._index=n,s._model=null,s._rects=null,s._ctx=t,s._el=i};(0,n.merge)(I.prototype,{_modelize:function(e,t,i,r){var o,c=this,d=c._index,h=(0,n.toFont)((0,n.resolve)([i.font,{}],r,d)),u=(0,n.resolve)([i.color,a.d.color],r,d);return{align:(0,n.resolve)([i.align,"center"],r,d),anchor:(0,n.resolve)([i.anchor,"center"],r,d),area:r.chart.chartArea,backgroundColor:(0,n.resolve)([i.backgroundColor,null],r,d),borderColor:(0,n.resolve)([i.borderColor,null],r,d),borderRadius:(0,n.resolve)([i.borderRadius,0],r,d),borderWidth:(0,n.resolve)([i.borderWidth,0],r,d),clamp:(0,n.resolve)([i.clamp,!1],r,d),clip:(0,n.resolve)([i.clip,!1],r,d),color:u,display:e,font:h,lines:t,offset:(0,n.resolve)([i.offset,0],r,d),opacity:(0,n.resolve)([i.opacity,1],r,d),origin:_(c._el,r),padding:(0,n.toPadding)((0,n.resolve)([i.padding,0],r,d)),positioner:(o=c._el,o instanceof s.ArcElement?g:o instanceof s.PointElement?m:o instanceof s.BarElement?f:b),rotation:(0,n.resolve)([i.rotation,0],r,d)*(Math.PI/180),size:l(c._ctx,t,h),textAlign:(0,n.resolve)([i.textAlign,"start"],r,d),textShadowBlur:(0,n.resolve)([i.textShadowBlur,0],r,d),textShadowColor:(0,n.resolve)([i.textShadowColor,u],r,d),textStrokeColor:(0,n.resolve)([i.textStrokeColor,u],r,d),textStrokeWidth:(0,n.resolve)([i.textStrokeWidth,0],r,d)}},update:function(e){var t,i,s,a=this,r=null,l=null,c=a._index,d=a._config,h=(0,n.resolve)([d.display,!0],e,c);h&&(t=e.dataset.data[c],i=(0,n.valueOrDefault)((0,n.callback)(d.formatter,[t,e]),t),(s=(0,n.isNullOrUndef)(i)?[]:o(i)).length&&(l=function(e){var t=e.borderWidth||0,i=e.padding,n=e.size.height,s=e.size.width,a=-s/2,r=-n/2;return{frame:{x:a-i.left-t,y:r-i.top-t,w:s+i.width+2*t,h:n+i.height+2*t},text:{x:a,y:r,w:s,h:n}}}(r=a._modelize(h,s,d,e)))),a._model=r,a._rects=l},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(e,t){var i,n=e.ctx,s=this._model,a=this._rects;this.visible()&&(n.save(),s.clip&&(i=s.area,n.beginPath(),n.rect(i.left,i.top,i.right-i.left,i.bottom-i.top),n.clip()),n.globalAlpha=c(0,s.opacity,1),n.translate(y(t.x),y(t.y)),n.rotate(s.rotation),v(n,a.frame,s),function(e,t,i,n){var s,a=n.textAlign,r=n.color,o=!!r,l=n.font,c=t.length,d=n.textStrokeColor,h=n.textStrokeWidth,u=d&&h;if(c&&(o||u))for(i=function(e,t,i){var n=i.lineHeight,s=e.w,a=e.x;return"center"===t?a+=s/2:"end"!==t&&"right"!==t||(a+=s),{h:n,w:s,x:a,y:e.y+n/2}}(i,a,l),e.font=l.string,e.textAlign=a,e.textBaseline="middle",e.shadowBlur=n.textShadowBlur,e.shadowColor=n.textShadowColor,o&&(e.fillStyle=r),u&&(e.lineJoin="round",e.lineWidth=h,e.strokeStyle=d),s=0,c=t.length;s<c;++s)S(e,t[s],{stroked:u,filled:o,w:i.w,x:i.x,y:i.y+i.h*s})}(n,s.lines,a.text,s),n.restore())}});var E=Number.MIN_SAFE_INTEGER||-9007199254740991,x=Number.MAX_SAFE_INTEGER||9007199254740991;function w(e,t,i){var n=Math.cos(i),s=Math.sin(i),a=t.x,r=t.y;return{x:a+n*(e.x-a)-s*(e.y-r),y:r+s*(e.x-a)+n*(e.y-r)}}function A(e,t){var i,n,s,a,r,o=x,l=E,c=t.origin;for(i=0;i<e.length;++i)s=(n=e[i]).x-c.x,a=n.y-c.y,r=t.vx*s+t.vy*a,o=Math.min(o,r),l=Math.max(l,r);return{min:o,max:l}}function P(e,t){var i=t.x-e.x,n=t.y-e.y,s=Math.sqrt(i*i+n*n);return{vx:(t.x-e.x)/s,vy:(t.y-e.y)/s,origin:e,ln:s}}var T=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};function C(e,t,i){var n=t.positioner(e,t),s=n.vx,a=n.vy;if(!s&&!a)return{x:n.x,y:n.y};var r=i.w,o=i.h,l=t.rotation,c=Math.abs(r/2*Math.cos(l))+Math.abs(o/2*Math.sin(l)),d=Math.abs(r/2*Math.sin(l))+Math.abs(o/2*Math.cos(l)),h=1/Math.max(Math.abs(s),Math.abs(a));return c*=s*h,d*=a*h,c+=t.offset*s,d+=t.offset*a,{x:n.x+c,y:n.y+d}}(0,n.merge)(T.prototype,{center:function(){var e=this._rect;return{x:e.x+e.w/2,y:e.y+e.h/2}},update:function(e,t,i){this._rotation=i,this._rect={x:t.x+e.x,y:t.y+e.y,w:t.w,h:t.h}},contains:function(e){var t=this,i=t._rect;return!((e=w(e,t.center(),-t._rotation)).x<i.x-1||e.y<i.y-1||e.x>i.x+i.w+2||e.y>i.y+i.h+2)},intersects:function(e){var t,i,n,s=this._points(),a=e._points(),r=[P(s[0],s[1]),P(s[0],s[3])];for(this._rotation!==e._rotation&&r.push(P(a[0],a[1]),P(a[0],a[3])),t=0;t<r.length;++t)if(i=A(s,r[t]),n=A(a,r[t]),i.max<n.min||n.max<i.min)return!1;return!0},_points:function(){var e=this,t=e._rect,i=e._rotation,n=e.center();return[w({x:t.x,y:t.y},n,i),w({x:t.x+t.w,y:t.y},n,i),w({x:t.x+t.w,y:t.y+t.h},n,i),w({x:t.x,y:t.y+t.h},n,i)]}});var D={prepare:function(e){var t,i,n,s,a,r=[];for(t=0,n=e.length;t<n;++t)for(i=0,s=e[t].length;i<s;++i)a=e[t][i],r.push(a),a.$layout={_box:new T,_hidable:!1,_visible:!0,_set:t,_idx:i};return r.sort((function(e,t){var i=e.$layout,n=t.$layout;return i._idx===n._idx?n._set-i._set:n._idx-i._idx})),this.update(r),r},update:function(e){var t,i,n,s,a,r=!1;for(t=0,i=e.length;t<i;++t)s=(n=e[t]).model(),(a=n.$layout)._hidable=s&&"auto"===s.display,a._visible=n.visible(),r|=a._hidable;r&&function(e){var t,i,n,s,a,r,o;for(t=0,i=e.length;t<i;++t)(s=(n=e[t]).$layout)._visible&&(o=new Proxy(n._el,{get:(e,t)=>e.getProps([t],!0)[t]}),a=n.geometry(),r=C(o,n.model(),a),s._box.update(r,a,n.rotation()));(function(e,t){var i,n,s,a;for(i=e.length-1;i>=0;--i)for(s=e[i].$layout,n=i-1;n>=0&&s._visible;--n)(a=e[n].$layout)._visible&&s._box.intersects(a._box)&&t(s,a)})(e,(function(e,t){var i=e._hidable,n=t._hidable;i&&n||n?t._visible=!1:i&&(e._visible=!1)}))}(e)},lookup:function(e,t){var i,n;for(i=e.length-1;i>=0;--i)if((n=e[i].$layout)&&n._visible&&n._box.contains(t))return e[i];return null},draw:function(e,t){var i,n,s,a,r,o;for(i=0,n=t.length;i<n;++i)(a=(s=t[i]).$layout)._visible&&(r=s.geometry(),o=C(s._el,s.model(),r),a._box.update(o,r,s.rotation()),s.draw(e,o))}},j="$default";function k(e,t,i){if(t){var s,a=i.$context,r=i.$groups;t[r._set]&&(s=t[r._set][r._key])&&!0===(0,n.callback)(s,[a])&&(e.$datalabels._dirty=!0,i.update(a))}}function O(e,t){var i,n,s=e.$datalabels,a=s._listeners;if(a.enter||a.leave){if("mousemove"===t.type)n=D.lookup(s._labels,t);else if("mouseout"!==t.type)return;i=s._hovered,s._hovered=n,function(e,t,i,n){var s,a;(i||n)&&(i?n?i!==n&&(a=s=!0):a=!0:s=!0,a&&k(e,t.leave,i),s&&k(e,t.enter,n))}(e,a,i,n)}}var M={id:"datalabels",defaults:{align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:function(e){if((0,n.isNullOrUndef)(e))return null;var t,i,s,a=e;if((0,n.isObject)(e))if((0,n.isNullOrUndef)(e.label))if((0,n.isNullOrUndef)(e.r))for(a="",s=0,i=(t=Object.keys(e)).length;s<i;++s)a+=(0!==s?", ":"")+t[s]+": "+e[t[s]];else a=e.r;else a=e.label;return""+a},labels:void 0,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0},beforeInit:function(e){e.$datalabels={_actives:[]}},beforeUpdate:function(e){var t=e.$datalabels;t._listened=!1,t._listeners={},t._datasets=[],t._labels=[]},afterDatasetUpdate:function(e,t,i){var s,a,r,o,l,c,d,h,u=t.index,p=e.$datalabels,g=p._datasets[u]=[],m=e.isDatasetVisible(u),f=e.data.datasets[u],b=function(e,t){var i,s,a,r=e.datalabels,o=[];return!1===r?null:(!0===r&&(r={}),t=(0,n.merge)({},[t,r]),s=t.labels||{},a=Object.keys(s),delete t.labels,a.length?a.forEach((function(e){s[e]&&o.push((0,n.merge)({},[t,s[e],{_key:e}]))})):o.push(t),i=o.reduce((function(e,t){return(0,n.each)(t.listeners||{},(function(i,n){e[n]=e[n]||{},e[n][t._key||j]=i})),delete t.listeners,e}),{}),{labels:o,listeners:i})}(f,i),y=t.meta.data||[],_=e.ctx;for(_.save(),s=0,r=y.length;s<r;++s)if((d=y[s]).$datalabels=[],m&&d&&e.getDataVisibility(s)&&!d.skip)for(a=0,o=b.labels.length;a<o;++a)c=(l=b.labels[a])._key,(h=new I(l,_,d,s)).$groups={_set:u,_key:c||j},h.$context={active:!1,chart:e,dataIndex:s,dataset:f,datasetIndex:u},h.update(h.$context),d.$datalabels.push(h),g.push(h);_.restore(),(0,n.merge)(p._listeners,b.listeners,{merger:function(e,i,n){i[e]=i[e]||{},i[e][t.index]=n[e],p._listened=!0}})},afterUpdate:function(e,t){e.$datalabels._labels=D.prepare(e.$datalabels._datasets,t)},afterDatasetsDraw:function(e){D.draw(e,e.$datalabels._labels)},beforeEvent:function(e,t){if(e.$datalabels._listened){var i=t.event;switch(i.type){case"mousemove":case"mouseout":O(e,i);break;case"click":!function(e,t){var i=e.$datalabels,n=i._listeners.click,s=n&&D.lookup(i._labels,t);s&&k(e,n,s)}(e,i)}}},afterEvent:function(e){var t,i,n,s,a,r,o,l=e.$datalabels,c=l._actives,h=l._actives=e.getActiveElements(),u=d(c,h);for(t=0,i=u.length;t<i;++t)if((a=u[t])[1])for(n=0,s=(o=a[0].element.$datalabels||[]).length;n<s;++n)(r=o[n]).$context.active=1===a[1],r.update(r.$context);(l._dirty||u.length)&&(D.update(l._labels),e.render()),delete l._dirty}};t.default=M},"./integrations/constants/v10IntegrationConstants.ts":function(e,t,i){i.r(t),i.d(t,{DEPLOYMENTS:function(){return s},PERFORMANCE:function(){return a},TESTS:function(){return n}});const n="tests",s="deployments",a="performance"},"./onboarding/src/features/Homepage/pages/IntegrationsPage/FormUpdateChecker.ts":function(e,t,i){i.r(t),i.d(t,{isFormUpdated:function(){return a}});var n=i("./node_modules/lodash/lodash.js"),s=i.n(n);function a(e,t){const i=s().pick(t,s().keys(e));return!s().isEqual(e,i)}},"./node_modules/@kurkle/color/dist/color.esm.js":function(e,t,i){function n(e){return e+.5|0}i.r(t),i.d(t,{Color:function(){return W},b2n:function(){return l},b2p:function(){return r},default:function(){return H},hexParse:function(){return m},hexString:function(){return f},hsl2rgb:function(){return E},hslString:function(){return C},hsv2rgb:function(){return w},hueParse:function(){return P},hwb2rgb:function(){return x},lim:function(){return s},n2b:function(){return o},n2p:function(){return c},nameParse:function(){return O},p2b:function(){return a},rgb2hsl:function(){return S},rgbParse:function(){return R},rgbString:function(){return L},rotate:function(){return T},round:function(){return n}});const s=(e,t,i)=>Math.max(Math.min(e,i),t);function a(e){return s(n(2.55*e),0,255)}function r(e){return s(n(e/2.55),0,100)}function o(e){return s(n(255*e),0,255)}function l(e){return s(n(e/2.55)/100,0,1)}function c(e){return s(n(100*e),0,100)}const d={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},h=[..."0123456789ABCDEF"],u=e=>h[15&e],p=e=>h[(240&e)>>4]+h[15&e],g=e=>(240&e)>>4==(15&e);function m(e){var t,i=e.length;return"#"===e[0]&&(4===i||5===i?t={r:255&17*d[e[1]],g:255&17*d[e[2]],b:255&17*d[e[3]],a:5===i?17*d[e[4]]:255}:7!==i&&9!==i||(t={r:d[e[1]]<<4|d[e[2]],g:d[e[3]]<<4|d[e[4]],b:d[e[5]]<<4|d[e[6]],a:9===i?d[e[7]]<<4|d[e[8]]:255})),t}function f(e){var t=(e=>g(e.r)&&g(e.g)&&g(e.b)&&g(e.a))(e)?u:p;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}const b=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function y(e,t,i){const n=t*Math.min(i,1-i),s=(t,s=(t+e/30)%12)=>i-n*Math.max(Math.min(s-3,9-s,1),-1);return[s(0),s(8),s(4)]}function _(e,t,i){const n=(n,s=(n+e/60)%6)=>i-i*t*Math.max(Math.min(s,4-s,1),0);return[n(5),n(3),n(1)]}function v(e,t,i){const n=y(e,1,.5);let s;for(t+i>1&&(s=1/(t+i),t*=s,i*=s),s=0;s<3;s++)n[s]*=1-t-i,n[s]+=t;return n}function S(e){const t=e.r/255,i=e.g/255,n=e.b/255,s=Math.max(t,i,n),a=Math.min(t,i,n),r=(s+a)/2;let o,l,c;return s!==a&&(c=s-a,l=r>.5?c/(2-s-a):c/(s+a),o=function(e,t,i,n,s){return e===s?(t-i)/n+(t<i?6:0):t===s?(i-e)/n+2:(e-t)/n+4}(t,i,n,c,s),o=60*o+.5),[0|o,l||0,r]}function I(e,t,i,n){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,i,n)).map(o)}function E(e,t,i){return I(y,e,t,i)}function x(e,t,i){return I(v,e,t,i)}function w(e,t,i){return I(_,e,t,i)}function A(e){return(e%360+360)%360}function P(e){const t=b.exec(e);let i,n=255;if(!t)return;t[5]!==i&&(n=t[6]?a(+t[5]):o(+t[5]));const s=A(+t[2]),r=+t[3]/100,l=+t[4]/100;return i="hwb"===t[1]?x(s,r,l):"hsv"===t[1]?w(s,r,l):E(s,r,l),{r:i[0],g:i[1],b:i[2],a:n}}function T(e,t){var i=S(e);i[0]=A(i[0]+t),i=E(i),e.r=i[0],e.g=i[1],e.b=i[2]}function C(e){if(!e)return;const t=S(e),i=t[0],n=c(t[1]),s=c(t[2]);return e.a<255?`hsla(${i}, ${n}%, ${s}%, ${l(e.a)})`:`hsl(${i}, ${n}%, ${s}%)`}const D={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},j={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let k;function O(e){k||(k=function(){const e={},t=Object.keys(j),i=Object.keys(D);let n,s,a,r,o;for(n=0;n<t.length;n++){for(r=o=t[n],s=0;s<i.length;s++)a=i[s],o=o.replace(a,D[a]);a=parseInt(j[r],16),e[o]=[a>>16&255,a>>8&255,255&a]}return e}(),k.transparent=[0,0,0,0]);const t=k[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}const M=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function R(e){const t=M.exec(e);let i,n,r,o=255;if(t){if(t[7]!==i){const e=+t[7];o=t[8]?a(e):s(255*e,0,255)}return i=+t[1],n=+t[3],r=+t[5],i=255&(t[2]?a(i):s(i,0,255)),n=255&(t[4]?a(n):s(n,0,255)),r=255&(t[6]?a(r):s(r,0,255)),{r:i,g:n,b:r,a:o}}}function L(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${l(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const N=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,z=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function F(e,t,i){if(e){let n=S(e);n[t]=Math.max(0,Math.min(n[t]+n[t]*i,0===t?360:1)),n=E(n),e.r=n[0],e.g=n[1],e.b=n[2]}}function V(e,t){return e?Object.assign(t||{},e):e}function B(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=o(e[3]))):(t=V(e,{r:0,g:0,b:0,a:1})).a=o(t.a),t}class W{constructor(e){if(e instanceof W)return e;const t=typeof e;let i;var n;"object"===t?i=B(e):"string"===t&&(i=m(e)||O(e)||("r"===(n=e).charAt(0)?R(n):P(n))),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=V(this._rgb);return e&&(e.a=l(e.a)),e}set rgb(e){this._rgb=B(e)}rgbString(){return this._valid?L(this._rgb):void 0}hexString(){return this._valid?f(this._rgb):void 0}hslString(){return this._valid?C(this._rgb):void 0}mix(e,t){if(e){const i=this.rgb,n=e.rgb;let s;const a=t===s?.5:t,r=2*a-1,o=i.a-n.a,l=((r*o==-1?r:(r+o)/(1+r*o))+1)/2;s=1-l,i.r=255&l*i.r+s*n.r+.5,i.g=255&l*i.g+s*n.g+.5,i.b=255&l*i.b+s*n.b+.5,i.a=a*i.a+(1-a)*n.a,this.rgb=i}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,i){const n=z(l(e.r)),s=z(l(e.g)),a=z(l(e.b));return{r:o(N(n+i*(z(l(t.r))-n))),g:o(N(s+i*(z(l(t.g))-s))),b:o(N(a+i*(z(l(t.b))-a))),a:e.a+i*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new W(this.rgb)}alpha(e){return this._rgb.a=o(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=n(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return F(this._rgb,2,e),this}darken(e){return F(this._rgb,2,-e),this}saturate(e){return F(this._rgb,1,e),this}desaturate(e){return F(this._rgb,1,-e),this}rotate(e){return T(this._rgb,e),this}}function H(e){return new W(e)}},"./node_modules/chart.js/auto/auto.js":function(e,t,i){i.r(t),i.d(t,{Animation:function(){return n.Animation},Animations:function(){return n.Animations},ArcElement:function(){return n.ArcElement},BarController:function(){return n.BarController},BarElement:function(){return n.BarElement},BasePlatform:function(){return n.BasePlatform},BasicPlatform:function(){return n.BasicPlatform},BubbleController:function(){return n.BubbleController},CategoryScale:function(){return n.CategoryScale},Chart:function(){return n.Chart},Colors:function(){return n.Colors},DatasetController:function(){return n.DatasetController},Decimation:function(){return n.Decimation},DomPlatform:function(){return n.DomPlatform},DoughnutController:function(){return n.DoughnutController},Element:function(){return n.Element},Filler:function(){return n.Filler},Interaction:function(){return n.Interaction},Legend:function(){return n.Legend},LineController:function(){return n.LineController},LineElement:function(){return n.LineElement},LinearScale:function(){return n.LinearScale},LogarithmicScale:function(){return n.LogarithmicScale},PieController:function(){return n.PieController},PointElement:function(){return n.PointElement},PolarAreaController:function(){return n.PolarAreaController},RadarController:function(){return n.RadarController},RadialLinearScale:function(){return n.RadialLinearScale},Scale:function(){return n.Scale},ScatterController:function(){return n.ScatterController},SubTitle:function(){return n.SubTitle},Ticks:function(){return n.Ticks},TimeScale:function(){return n.TimeScale},TimeSeriesScale:function(){return n.TimeSeriesScale},Title:function(){return n.Title},Tooltip:function(){return n.Tooltip},_adapters:function(){return n._adapters},_detectPlatform:function(){return n._detectPlatform},animator:function(){return n.animator},controllers:function(){return n.controllers},defaults:function(){return n.defaults},elements:function(){return n.elements},layouts:function(){return n.layouts},plugins:function(){return n.plugins},registerables:function(){return n.registerables},registry:function(){return n.registry},scales:function(){return n.scales}});var n=i("./node_modules/chart.js/dist/chart.js");n.Chart.register(...n.registerables),t.default=n.Chart},"./node_modules/chart.js/dist/chart.js":function(e,t,i){i.r(t),i.d(t,{Animation:function(){return c},Animations:function(){return d},ArcElement:function(){return gt},BarController:function(){return j},BarElement:function(){return kt},BasePlatform:function(){return ce},BasicPlatform:function(){return de},BubbleController:function(){return k},CategoryScale:function(){return Oi},Chart:function(){return lt},Colors:function(){return Vt},DatasetController:function(){return I},Decimation:function(){return Ht},DomPlatform:function(){return xe},DoughnutController:function(){return O},Element:function(){return Ae},Filler:function(){return ri},Interaction:function(){return q},Legend:function(){return di},LineController:function(){return M},LineElement:function(){return Et},LinearScale:function(){return Li},LogarithmicScale:function(){return Wi},PieController:function(){return L},PointElement:function(){return wt},PolarAreaController:function(){return R},RadarController:function(){return N},RadialLinearScale:function(){return Qi},Scale:function(){return Re},ScatterController:function(){return z},SubTitle:function(){return gi},Ticks:function(){return n.aL},TimeScale:function(){return rn},TimeSeriesScale:function(){return ln},Title:function(){return ui},Tooltip:function(){return Ci},_adapters:function(){return W},_detectPlatform:function(){return we},animator:function(){return r},controllers:function(){return F},defaults:function(){return n.d},elements:function(){return Ot},layouts:function(){return le},plugins:function(){return Di},registerables:function(){return dn},registry:function(){return ze},scales:function(){return cn}});var n=i("./node_modules/chart.js/dist/chunks/helpers.segment.js"),s=i("../../node_modules/console-browserify/index.js");class a{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,i,n){const s=t.listeners[n],a=t.duration;s.forEach((n=>n({chart:e,initial:t.initial,numSteps:a,currentStep:Math.min(i-t.start,a)})))}_refresh(){this._request||(this._running=!0,this._request=n.r.call(window,(()=>{this._update(),this._request=null,this._running&&this._refresh()})))}_update(e=Date.now()){let t=0;this._charts.forEach(((i,n)=>{if(!i.running||!i.items.length)return;const s=i.items;let a,r=s.length-1,o=!1;for(;r>=0;--r)a=s[r],a._active?(a._total>i.duration&&(i.duration=a._total),a.tick(e),o=!0):(s[r]=s[s.length-1],s.pop());o&&(n.draw(),this._notify(n,i,e,"progress")),s.length||(i.running=!1,this._notify(n,i,e,"complete"),i.initial=!1),t+=s.length})),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let i=t.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,i)),i}listen(e,t,i){this._getAnims(e).listeners[t].push(i)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce(((e,t)=>Math.max(e,t._duration)),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const i=t.items;let n=i.length-1;for(;n>=0;--n)i[n].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var r=new a;const o="transparent",l={boolean:(e,t,i)=>i>.5?t:e,color(e,t,i){const s=(0,n.c)(e||o),a=s.valid&&(0,n.c)(t||o);return a&&a.valid?a.mix(s,i).hexString():t},number:(e,t,i)=>e+(t-e)*i};class c{constructor(e,t,i,s){const a=t[i];s=(0,n.a)([e.to,s,a,e.from]);const r=(0,n.a)([e.from,a,s]);this._active=!0,this._fn=e.fn||l[e.type||typeof r],this._easing=n.e[e.easing]||n.e.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=i,this._from=r,this._to=s,this._promises=void 0}active(){return this._active}update(e,t,i){if(this._active){this._notify(!1);const s=this._target[this._prop],a=i-this._start,r=this._duration-a;this._start=i,this._duration=Math.floor(Math.max(r,e.duration)),this._total+=a,this._loop=!!e.loop,this._to=(0,n.a)([e.to,t,s,e.from]),this._from=(0,n.a)([e.from,s,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,i=this._duration,n=this._prop,s=this._from,a=this._loop,r=this._to;let o;if(this._active=s!==r&&(a||t<i),!this._active)return this._target[n]=r,void this._notify(!0);t<0?this._target[n]=s:(o=t/i%2,o=a&&o>1?2-o:o,o=this._easing(Math.min(1,Math.max(0,o))),this._target[n]=this._fn(s,r,o))}wait(){const e=this._promises||(this._promises=[]);return new Promise(((t,i)=>{e.push({res:t,rej:i})}))}_notify(e){const t=e?"res":"rej",i=this._promises||[];for(let e=0;e<i.length;e++)i[e][t]()}}class d{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!(0,n.i)(e))return;const t=Object.keys(n.d.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach((s=>{const a=e[s];if(!(0,n.i)(a))return;const r={};for(const e of t)r[e]=a[e];((0,n.b)(a.properties)&&a.properties||[s]).forEach((e=>{e!==s&&i.has(e)||i.set(e,r)}))}))}_animateOptions(e,t){const i=t.options,n=function(e,t){if(!t)return;let i=e.options;if(!i)return void(e.options=t);i.$shared&&(e.options=i=Object.assign({},i,{$shared:!1,$animations:{}}));return i}(e,i);if(!n)return[];const s=this._createAnimations(n,i);return i.$shared&&function(e,t){const i=[],n=Object.keys(t);for(let t=0;t<n.length;t++){const s=e[n[t]];s&&s.active()&&i.push(s.wait())}return Promise.all(i)}(e.options.$animations,i).then((()=>{e.options=i}),(()=>{})),s}_createAnimations(e,t){const i=this._properties,n=[],s=e.$animations||(e.$animations={}),a=Object.keys(t),r=Date.now();let o;for(o=a.length-1;o>=0;--o){const l=a[o];if("$"===l.charAt(0))continue;if("options"===l){n.push(...this._animateOptions(e,t));continue}const d=t[l];let h=s[l];const u=i.get(l);if(h){if(u&&h.active()){h.update(u,d,r);continue}h.cancel()}u&&u.duration?(s[l]=h=new c(u,e,l,d),n.push(h)):e[l]=d}return n}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const i=this._createAnimations(e,t);return i.length?(r.add(this._chart,i),!0):void 0}}function h(e,t){const i=e&&e.options||{},n=i.reverse,s=void 0===i.min?t:0,a=void 0===i.max?t:0;return{start:n?a:s,end:n?s:a}}function u(e,t){const i=[],n=e._getSortedDatasetMetas(t);let s,a;for(s=0,a=n.length;s<a;++s)i.push(n[s].index);return i}function p(e,t,i,s={}){const a=e.keys,r="single"===s.mode;let o,l,c,d;if(null!==t){for(o=0,l=a.length;o<l;++o){if(c=+a[o],c===i){if(s.all)continue;break}d=e.values[c],(0,n.g)(d)&&(r||0===t||(0,n.s)(t)===(0,n.s)(d))&&(t+=d)}return t}}function g(e,t){const i=e&&e.options.stacked;return i||void 0===i&&void 0!==t.stack}function m(e,t,i){const n=e[t]||(e[t]={});return n[i]||(n[i]={})}function f(e,t,i,n){for(const s of t.getMatchingVisibleMetas(n).reverse()){const t=e[s.index];if(i&&t>0||!i&&t<0)return s.index}return null}function b(e,t){const{chart:i,_cachedMeta:n}=e,s=i._stacks||(i._stacks={}),{iScale:a,vScale:r,index:o}=n,l=a.axis,c=r.axis,d=function(e,t,i){return`${e.id}.${t.id}.${i.stack||i.type}`}(a,r,n),h=t.length;let u;for(let e=0;e<h;++e){const i=t[e],{[l]:a,[c]:h}=i;u=(i._stacks||(i._stacks={}))[c]=m(s,d,a),u[o]=h,u._top=f(u,r,!0,n.type),u._bottom=f(u,r,!1,n.type);(u._visualValues||(u._visualValues={}))[o]=h}}function y(e,t){const i=e.scales;return Object.keys(i).filter((e=>i[e].axis===t)).shift()}function _(e,t){const i=e.controller.index,n=e.vScale&&e.vScale.axis;if(n){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[n]||void 0===t[n][i])return;delete t[n][i],void 0!==t[n]._visualValues&&void 0!==t[n]._visualValues[i]&&delete t[n]._visualValues[i]}}}const v=e=>"reset"===e||"none"===e,S=(e,t)=>t?e:Object.assign({},e);class I{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=g(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&s.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&_(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,i=this.getDataset(),s=(e,t,i,n)=>"x"===e?t:"r"===e?n:i,a=t.xAxisID=(0,n.v)(i.xAxisID,y(e,"x")),r=t.yAxisID=(0,n.v)(i.yAxisID,y(e,"y")),o=t.rAxisID=(0,n.v)(i.rAxisID,y(e,"r")),l=t.indexAxis,c=t.iAxisID=s(l,a,r,o),d=t.vAxisID=s(l,r,a,o);t.xScale=this.getScaleForId(a),t.yScale=this.getScaleForId(r),t.rScale=this.getScaleForId(o),t.iScale=this.getScaleForId(c),t.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&(0,n.u)(this._data,this),e._stacked&&_(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),i=this._data;if((0,n.i)(t))this._data=function(e){const t=Object.keys(e),i=new Array(t.length);let n,s,a;for(n=0,s=t.length;n<s;++n)a=t[n],i[n]={x:a,y:e[a]};return i}(t);else if(i!==t){if(i){(0,n.u)(i,this);const e=this._cachedMeta;_(e),e._parsed=[]}t&&Object.isExtensible(t)&&(0,n.l)(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,i=this.getDataset();let n=!1;this._dataCheck();const s=t._stacked;t._stacked=g(t.vScale,t),t.stack!==i.stack&&(n=!0,_(t),t.stack=i.stack),this._resyncElements(e),(n||s!==t._stacked)&&b(this,t._parsed)}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:i,_data:s}=this,{iScale:a,_stacked:r}=i,o=a.axis;let l,c,d,h=0===e&&t===s.length||i._sorted,u=e>0&&i._parsed[e-1];if(!1===this._parsing)i._parsed=s,i._sorted=!0,d=s;else{d=(0,n.b)(s[e])?this.parseArrayData(i,s,e,t):(0,n.i)(s[e])?this.parseObjectData(i,s,e,t):this.parsePrimitiveData(i,s,e,t);const a=()=>null===c[o]||u&&c[o]<u[o];for(l=0;l<t;++l)i._parsed[l+e]=c=d[l],h&&(a()&&(h=!1),u=c);i._sorted=h}r&&b(this,d)}parsePrimitiveData(e,t,i,n){const{iScale:s,vScale:a}=e,r=s.axis,o=a.axis,l=s.getLabels(),c=s===a,d=new Array(n);let h,u,p;for(h=0,u=n;h<u;++h)p=h+i,d[h]={[r]:c||s.parse(l[p],p),[o]:a.parse(t[p],p)};return d}parseArrayData(e,t,i,n){const{xScale:s,yScale:a}=e,r=new Array(n);let o,l,c,d;for(o=0,l=n;o<l;++o)c=o+i,d=t[c],r[o]={x:s.parse(d[0],c),y:a.parse(d[1],c)};return r}parseObjectData(e,t,i,s){const{xScale:a,yScale:r}=e,{xAxisKey:o="x",yAxisKey:l="y"}=this._parsing,c=new Array(s);let d,h,u,p;for(d=0,h=s;d<h;++d)u=d+i,p=t[u],c[d]={x:a.parse((0,n.f)(p,o),u),y:r.parse((0,n.f)(p,l),u)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,i){const n=this.chart,s=this._cachedMeta,a=t[e.axis];return p({keys:u(n,!0),values:t._stacks[e.axis]._visualValues},a,s.index,{mode:i})}updateRangeFromParsed(e,t,i,n){const s=i[t.axis];let a=null===s?NaN:s;const r=n&&i._stacks[t.axis];n&&r&&(n.values=r,a=p(n,s,this._cachedMeta.index)),e.min=Math.min(e.min,a),e.max=Math.max(e.max,a)}getMinMax(e,t){const i=this._cachedMeta,s=i._parsed,a=i._sorted&&e===i.iScale,r=s.length,o=this._getOtherScale(e),l=((e,t,i)=>e&&!t.hidden&&t._stacked&&{keys:u(i,!0),values:null})(t,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:h}=function(e){const{min:t,max:i,minDefined:n,maxDefined:s}=e.getUserBounds();return{min:n?t:Number.NEGATIVE_INFINITY,max:s?i:Number.POSITIVE_INFINITY}}(o);let p,g;function m(){g=s[p];const t=g[o.axis];return!(0,n.g)(g[e.axis])||d>t||h<t}for(p=0;p<r&&(m()||(this.updateRangeFromParsed(c,e,g,l),!a));++p);if(a)for(p=r-1;p>=0;--p)if(!m()){this.updateRangeFromParsed(c,e,g,l);break}return c}getAllParsedValues(e){const t=this._cachedMeta._parsed,i=[];let s,a,r;for(s=0,a=t.length;s<a;++s)r=t[s][e.axis],(0,n.g)(r)&&i.push(r);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,i=t.iScale,n=t.vScale,s=this.getParsed(e);return{label:i?""+i.getLabelForValue(s[i.axis]):"",value:n?""+n.getLabelForValue(s[n.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,i,s,a;return(0,n.i)(e)?(t=e.top,i=e.right,s=e.bottom,a=e.left):t=i=s=a=e,{top:t,right:i,bottom:s,left:a,disabled:!1===e}}((0,n.v)(this.options.clip,function(e,t,i){if(!1===i)return!1;const n=h(e,i),s=h(t,i);return{top:s.end,right:n.end,bottom:s.start,left:n.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,i=this._cachedMeta,n=i.data||[],s=t.chartArea,a=[],r=this._drawStart||0,o=this._drawCount||n.length-r,l=this.options.drawActiveElementsOnTop;let c;for(i.dataset&&i.dataset.draw(e,s,r,o),c=r;c<r+o;++c){const t=n[c];t.hidden||(t.active&&l?a.push(t):t.draw(e,s))}for(c=0;c<a.length;++c)a[c].draw(e,s)}getStyle(e,t){const i=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,t,i){const s=this.getDataset();let a;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];a=t.$context||(t.$context=function(e,t,i){return(0,n.j)(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:i,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),a.parsed=this.getParsed(e),a.raw=s.data[e],a.index=a.dataIndex=e}else a=this.$context||(this.$context=function(e,t){return(0,n.j)(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),a.dataset=s,a.index=a.datasetIndex=this.index;return a.active=!!t,a.mode=i,a}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",i){const s="active"===t,a=this._cachedDataOpts,r=e+"-"+t,o=a[r],l=this.enableOptionSharing&&(0,n.h)(i);if(o)return S(o,l);const c=this.chart.config,d=c.datasetElementScopeKeys(this._type,e),h=s?[`${e}Hover`,"hover",e,""]:[e,""],u=c.getOptionScopes(this.getDataset(),d),p=Object.keys(n.d.elements[e]),g=c.resolveNamedOptions(u,p,(()=>this.getContext(i,s,t)),h);return g.$shared&&(g.$shared=l,a[r]=Object.freeze(S(g,l))),g}_resolveAnimations(e,t,i){const n=this.chart,s=this._cachedDataOpts,a=`animation-${t}`,r=s[a];if(r)return r;let o;if(!1!==n.options.animation){const n=this.chart.config,s=n.datasetAnimationScopeKeys(this._type,t),a=n.getOptionScopes(this.getDataset(),s);o=n.createResolver(a,this.getContext(e,i,t))}const l=new d(n,o&&o.animations);return o&&o._cacheable&&(s[a]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||v(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const i=this.resolveDataElementOptions(e,t),n=this._sharedOptions,s=this.getSharedOptions(i),a=this.includeOptions(t,s)||s!==n;return this.updateSharedOptions(s,t,i),{sharedOptions:s,includeOptions:a}}updateElement(e,t,i,n){v(n)?Object.assign(e,i):this._resolveAnimations(t,n).update(e,i)}updateSharedOptions(e,t,i){e&&!v(t)&&this._resolveAnimations(void 0,t).update(e,i)}_setStyle(e,t,i,n){e.active=n;const s=this.getStyle(t,n);this._resolveAnimations(t,i,n).update(e,{options:!n&&this.getSharedOptions(s)||s})}removeHoverStyle(e,t,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,t,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,i=this._cachedMeta.data;for(const[e,t,i]of this._syncList)this[e](t,i);this._syncList=[];const n=i.length,s=t.length,a=Math.min(s,n);a&&this.parse(0,a),s>n?this._insertElements(n,s-n,e):s<n&&this._removeElements(s,n-s)}_insertElements(e,t,i=!0){const n=this._cachedMeta,s=n.data,a=e+t;let r;const o=e=>{for(e.length+=t,r=e.length-1;r>=a;r--)e[r]=e[r-t]};for(o(s),r=e;r<a;++r)s[r]=new this.dataElementType;this._parsing&&o(n._parsed),this.parse(e,t),i&&this.updateElements(s,e,t,"reset")}updateElements(e,t,i,n){}_removeElements(e,t){const i=this._cachedMeta;if(this._parsing){const n=i._parsed.splice(e,t);i._stacked&&_(i,n)}i.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,i,n]=e;this[t](i,n)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function E(e){const t=e.iScale,i=function(e,t){if(!e._cache.$bar){const i=e.getMatchingVisibleMetas(t);let s=[];for(let t=0,n=i.length;t<n;t++)s=s.concat(i[t].controller.getAllParsedValues(e));e._cache.$bar=(0,n._)(s.sort(((e,t)=>e-t)))}return e._cache.$bar}(t,e.type);let s,a,r,o,l=t._length;const c=()=>{32767!==r&&-32768!==r&&((0,n.h)(o)&&(l=Math.min(l,Math.abs(r-o)||l)),o=r)};for(s=0,a=i.length;s<a;++s)r=t.getPixelForValue(i[s]),c();for(o=void 0,s=0,a=t.ticks.length;s<a;++s)r=t.getPixelForTick(s),c();return l}function x(e,t,i,s){return(0,n.b)(e)?function(e,t,i,n){const s=i.parse(e[0],n),a=i.parse(e[1],n),r=Math.min(s,a),o=Math.max(s,a);let l=r,c=o;Math.abs(r)>Math.abs(o)&&(l=o,c=r),t[i.axis]=c,t._custom={barStart:l,barEnd:c,start:s,end:a,min:r,max:o}}(e,t,i,s):t[i.axis]=i.parse(e,s),t}function w(e,t,i,n){const s=e.iScale,a=e.vScale,r=s.getLabels(),o=s===a,l=[];let c,d,h,u;for(c=i,d=i+n;c<d;++c)u=t[c],h={},h[s.axis]=o||s.parse(r[c],c),l.push(x(u,h,a,c));return l}function A(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function P(e,t,i,n){let s=t.borderSkipped;const a={};if(!s)return void(e.borderSkipped=a);if(!0===s)return void(e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:r,end:o,reverse:l,top:c,bottom:d}=function(e){let t,i,n,s,a;return e.horizontal?(t=e.base>e.x,i="left",n="right"):(t=e.base<e.y,i="bottom",n="top"),t?(s="end",a="start"):(s="start",a="end"),{start:i,end:n,reverse:t,top:s,bottom:a}}(e);"middle"===s&&i&&(e.enableBorderRadius=!0,(i._top||0)===n?s=c:(i._bottom||0)===n?s=d:(a[T(d,r,o,l)]=!0,s=c)),a[T(s,r,o,l)]=!0,e.borderSkipped=a}function T(e,t,i,n){var s,a,r;return n?(r=i,e=C(e=(s=e)===(a=t)?r:s===r?a:s,i,t)):e=C(e,t,i),e}function C(e,t,i){return"start"===e?t:"end"===e?i:e}function D(e,{inflateAmount:t},i){e.inflateAmount="auto"===t?1===i?.33:0:t}class j extends I{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,t,i,n){return w(e,t,i,n)}parseArrayData(e,t,i,n){return w(e,t,i,n)}parseObjectData(e,t,i,s){const{iScale:a,vScale:r}=e,{xAxisKey:o="x",yAxisKey:l="y"}=this._parsing,c="x"===a.axis?o:l,d="x"===r.axis?o:l,h=[];let u,p,g,m;for(u=i,p=i+s;u<p;++u)m=t[u],g={},g[a.axis]=a.parse((0,n.f)(m,c),u),h.push(x((0,n.f)(m,d),g,r,u));return h}updateRangeFromParsed(e,t,i,n){super.updateRangeFromParsed(e,t,i,n);const s=i._custom;s&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:i,vScale:n}=t,s=this.getParsed(e),a=s._custom,r=A(a)?"["+a.start+", "+a.end+"]":""+n.getLabelForValue(s[n.axis]);return{label:""+i.getLabelForValue(s[i.axis]),value:r}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,i,s){const a="reset"===s,{index:r,_cachedMeta:{vScale:o}}=this,l=o.getBasePixel(),c=o.isHorizontal(),d=this._getRuler(),{sharedOptions:h,includeOptions:u}=this._getSharedOptions(t,s);for(let p=t;p<t+i;p++){const t=this.getParsed(p),i=a||(0,n.k)(t[o.axis])?{base:l,head:l}:this._calculateBarValuePixels(p),g=this._calculateBarIndexPixels(p,d),m=(t._stacks||{})[o.axis],f={horizontal:c,base:i.base,enableBorderRadius:!m||A(t._custom)||r===m._top||r===m._bottom,x:c?i.head:g.center,y:c?g.center:i.head,height:c?g.size:Math.abs(i.size),width:c?Math.abs(i.size):g.size};u&&(f.options=h||this.resolveDataElementOptions(p,e[p].active?"active":s));const b=f.options||e[p].options;P(f,b,m,r),D(f,b,d.ratio),this.updateElement(e[p],p,f,s)}}_getStacks(e,t){const{iScale:i}=this._cachedMeta,s=i.getMatchingVisibleMetas(this._type).filter((e=>e.controller.options.grouped)),a=i.options.stacked,r=[],o=e=>{const i=e.controller.getParsed(t),s=i&&i[e.vScale.axis];if((0,n.k)(s)||isNaN(s))return!0};for(const i of s)if((void 0===t||!o(i))&&((!1===a||-1===r.indexOf(i.stack)||void 0===a&&void 0===i.stack)&&r.push(i.stack),i.index===e))break;return r.length||r.push(void 0),r}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,t,i){const n=this._getStacks(e,i),s=void 0!==t?n.indexOf(t):-1;return-1===s?n.length-1:s}_getRuler(){const e=this.options,t=this._cachedMeta,i=t.iScale,n=[];let s,a;for(s=0,a=t.data.length;s<a;++s)n.push(i.getPixelForValue(this.getParsed(s)[i.axis],s));const r=e.barThickness;return{min:r||E(t),pixels:n,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:e.grouped,ratio:r?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:i,index:s},options:{base:a,minBarLength:r}}=this,o=a||0,l=this.getParsed(e),c=l._custom,d=A(c);let h,u,p=l[t.axis],g=0,m=i?this.applyStack(t,l,i):p;m!==p&&(g=m-p,m=p),d&&(p=c.barStart,m=c.barEnd-c.barStart,0!==p&&(0,n.s)(p)!==(0,n.s)(c.barEnd)&&(g=0),g+=p);const f=(0,n.k)(a)||d?g:a;let b=t.getPixelForValue(f);if(h=this.chart.getDataVisibility(e)?t.getPixelForValue(g+m):b,u=h-b,Math.abs(u)<r){u=function(e,t,i){return 0!==e?(0,n.s)(e):(t.isHorizontal()?1:-1)*(t.min>=i?1:-1)}(u,t,o)*r,p===o&&(b-=u/2);const e=t.getPixelForDecimal(0),a=t.getPixelForDecimal(1),c=Math.min(e,a),g=Math.max(e,a);b=Math.max(Math.min(b,g),c),h=b+u,i&&!d&&(l._stacks[t.axis]._visualValues[s]=t.getValueForPixel(h)-t.getValueForPixel(b))}if(b===t.getPixelForValue(o)){const e=(0,n.s)(u)*t.getLineWidthForValue(o)/2;b+=e,u-=e}return{size:u,base:b,head:h,center:h+u/2}}_calculateBarIndexPixels(e,t){const i=t.scale,s=this.options,a=s.skipNull,r=(0,n.v)(s.maxBarThickness,1/0);let o,l;if(t.grouped){const i=a?this._getStackCount(e):t.stackCount,c="flex"===s.barThickness?function(e,t,i,n){const s=t.pixels,a=s[e];let r=e>0?s[e-1]:null,o=e<s.length-1?s[e+1]:null;const l=i.categoryPercentage;null===r&&(r=a-(null===o?t.end-t.start:o-a)),null===o&&(o=a+a-r);const c=a-(a-Math.min(r,o))/2*l;return{chunk:Math.abs(o-r)/2*l/n,ratio:i.barPercentage,start:c}}(e,t,s,i):function(e,t,i,s){const a=i.barThickness;let r,o;return(0,n.k)(a)?(r=t.min*i.categoryPercentage,o=i.barPercentage):(r=a*s,o=1),{chunk:r/s,ratio:o,start:t.pixels[e]-r/2}}(e,t,s,i),d=this._getStackIndex(this.index,this._cachedMeta.stack,a?e:void 0);o=c.start+c.chunk*d+c.chunk/2,l=Math.min(r,c.chunk*c.ratio)}else o=i.getPixelForValue(this.getParsed(e)[i.axis],e),l=Math.min(r,t.min*t.ratio);return{base:o-l/2,head:o+l/2,center:o,size:l}}draw(){const e=this._cachedMeta,t=e.vScale,i=e.data,n=i.length;let s=0;for(;s<n;++s)null!==this.getParsed(s)[t.axis]&&i[s].draw(this._ctx)}}class k extends I{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,i,n){const s=super.parsePrimitiveData(e,t,i,n);for(let e=0;e<s.length;e++)s[e]._custom=this.resolveDataElementOptions(e+i).radius;return s}parseArrayData(e,t,i,s){const a=super.parseArrayData(e,t,i,s);for(let e=0;e<a.length;e++){const s=t[i+e];a[e]._custom=(0,n.v)(s[2],this.resolveDataElementOptions(e+i).radius)}return a}parseObjectData(e,t,i,s){const a=super.parseObjectData(e,t,i,s);for(let e=0;e<a.length;e++){const s=t[i+e];a[e]._custom=(0,n.v)(s&&s.r&&+s.r,this.resolveDataElementOptions(e+i).radius)}return a}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let i=e.length-1;i>=0;--i)t=Math.max(t,e[i].size(this.resolveDataElementOptions(i))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart.data.labels||[],{xScale:n,yScale:s}=t,a=this.getParsed(e),r=n.getLabelForValue(a.x),o=s.getLabelForValue(a.y),l=a._custom;return{label:i[e]||"",value:"("+r+", "+o+(l?", "+l:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,i,n){const s="reset"===n,{iScale:a,vScale:r}=this._cachedMeta,{sharedOptions:o,includeOptions:l}=this._getSharedOptions(t,n),c=a.axis,d=r.axis;for(let h=t;h<t+i;h++){const t=e[h],i=!s&&this.getParsed(h),u={},p=u[c]=s?a.getPixelForDecimal(.5):a.getPixelForValue(i[c]),g=u[d]=s?r.getBasePixel():r.getPixelForValue(i[d]);u.skip=isNaN(p)||isNaN(g),l&&(u.options=o||this.resolveDataElementOptions(h,t.active?"active":n),s&&(u.options.radius=0)),this.updateElement(t,h,u,n)}}resolveDataElementOptions(e,t){const i=this.getParsed(e);let s=super.resolveDataElementOptions(e,t);s.$shared&&(s=Object.assign({},s,{$shared:!1}));const a=s.radius;return"active"!==t&&(s.radius=0),s.radius+=(0,n.v)(i&&i._custom,a),s}}class O extends I{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:i,color:n}}=e.legend.options;return t.labels.map(((t,s)=>{const a=e.getDatasetMeta(0).controller.getStyle(s);return{text:t,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,fontColor:n,lineWidth:a.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(s),index:s}}))}return[]}},onClick(e,t,i){i.chart.toggleDataVisibility(t.index),i.chart.update()}}}};constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const i=this.getDataset().data,s=this._cachedMeta;if(!1===this._parsing)s._parsed=i;else{let a,r,o=e=>+i[e];if((0,n.i)(i[e])){const{key:e="value"}=this._parsing;o=t=>+(0,n.f)(i[t],e)}for(a=e,r=e+t;a<r;++a)s._parsed[a]=o(a)}}_getRotation(){return(0,n.t)(this.options.rotation-90)}_getCircumference(){return(0,n.t)(this.options.circumference)}_getRotationExtents(){let e=n.T,t=-n.T;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const n=this.chart.getDatasetMeta(i).controller,s=n._getRotation(),a=n._getCircumference();e=Math.min(e,s),t=Math.max(t,s+a)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:i}=t,s=this._cachedMeta,a=s.data,r=this.getMaxBorderWidth()+this.getMaxOffset(a)+this.options.spacing,o=Math.max((Math.min(i.width,i.height)-r)/2,0),l=Math.min((0,n.m)(this.options.cutout,o),1),c=this._getRingWeight(this.index),{circumference:d,rotation:h}=this._getRotationExtents(),{ratioX:u,ratioY:p,offsetX:g,offsetY:m}=function(e,t,i){let s=1,a=1,r=0,o=0;if(t<n.T){const l=e,c=l+t,d=Math.cos(l),h=Math.sin(l),u=Math.cos(c),p=Math.sin(c),g=(e,t,s)=>(0,n.p)(e,l,c,!0)?1:Math.max(t,t*i,s,s*i),m=(e,t,s)=>(0,n.p)(e,l,c,!0)?-1:Math.min(t,t*i,s,s*i),f=g(0,d,u),b=g(n.H,h,p),y=m(n.P,d,u),_=m(n.P+n.H,h,p);s=(f-y)/2,a=(b-_)/2,r=-(f+y)/2,o=-(b+_)/2}return{ratioX:s,ratioY:a,offsetX:r,offsetY:o}}(h,d,l),f=(i.width-r)/u,b=(i.height-r)/p,y=Math.max(Math.min(f,b)/2,0),_=(0,n.n)(this.options.radius,y),v=(_-Math.max(_*l,0))/this._getVisibleDatasetWeightTotal();this.offsetX=g*_,this.offsetY=m*_,s.total=this.calculateTotal(),this.outerRadius=_-v*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-v*c,0),this.updateElements(a,0,a.length,e)}_circumference(e,t){const i=this.options,s=this._cachedMeta,a=this._getCircumference();return t&&i.animation.animateRotate||!this.chart.getDataVisibility(e)||null===s._parsed[e]||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*a/n.T)}updateElements(e,t,i,n){const s="reset"===n,a=this.chart,r=a.chartArea,o=a.options.animation,l=(r.left+r.right)/2,c=(r.top+r.bottom)/2,d=s&&o.animateScale,h=d?0:this.innerRadius,u=d?0:this.outerRadius,{sharedOptions:p,includeOptions:g}=this._getSharedOptions(t,n);let m,f=this._getRotation();for(m=0;m<t;++m)f+=this._circumference(m,s);for(m=t;m<t+i;++m){const t=this._circumference(m,s),i=e[m],a={x:l+this.offsetX,y:c+this.offsetY,startAngle:f,endAngle:f+t,circumference:t,outerRadius:u,innerRadius:h};g&&(a.options=p||this.resolveDataElementOptions(m,i.active?"active":n)),f+=t,this.updateElement(i,m,a,n)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let i,n=0;for(i=0;i<t.length;i++){const s=e._parsed[i];null===s||isNaN(s)||!this.chart.getDataVisibility(i)||t[i].hidden||(n+=Math.abs(s))}return n}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?n.T*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart,s=i.data.labels||[],a=(0,n.o)(t._parsed[e],i.options.locale);return{label:s[e]||"",value:a}}getMaxBorderWidth(e){let t=0;const i=this.chart;let n,s,a,r,o;if(!e)for(n=0,s=i.data.datasets.length;n<s;++n)if(i.isDatasetVisible(n)){a=i.getDatasetMeta(n),e=a.data,r=a.controller;break}if(!e)return 0;for(n=0,s=e.length;n<s;++n)o=r.resolveDataElementOptions(n),"inner"!==o.borderAlign&&(t=Math.max(t,o.borderWidth||0,o.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let i=0,n=e.length;i<n;++i){const e=this.resolveDataElementOptions(i);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(t+=this._getRingWeight(i));return t}_getRingWeight(e){return Math.max((0,n.v)(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class M extends I{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:i,data:s=[],_dataset:a}=t,r=this.chart._animationsDisabled;let{start:o,count:l}=(0,n.q)(t,s,r);this._drawStart=o,this._drawCount=l,(0,n.w)(t)&&(o=0,l=s.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!a._decimated,i.points=s;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(i,void 0,{animated:!r,options:c},e),this.updateElements(s,o,l,e)}updateElements(e,t,i,s){const a="reset"===s,{iScale:r,vScale:o,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:d,includeOptions:h}=this._getSharedOptions(t,s),u=r.axis,p=o.axis,{spanGaps:g,segment:m}=this.options,f=(0,n.x)(g)?g:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||a||"none"===s,y=t+i,_=e.length;let v=t>0&&this.getParsed(t-1);for(let i=0;i<_;++i){const g=e[i],_=b?g:{};if(i<t||i>=y){_.skip=!0;continue}const S=this.getParsed(i),I=(0,n.k)(S[p]),E=_[u]=r.getPixelForValue(S[u],i),x=_[p]=a||I?o.getBasePixel():o.getPixelForValue(l?this.applyStack(o,S,l):S[p],i);_.skip=isNaN(E)||isNaN(x)||I,_.stop=i>0&&Math.abs(S[u]-v[u])>f,m&&(_.parsed=S,_.raw=c.data[i]),h&&(_.options=d||this.resolveDataElementOptions(i,g.active?"active":s)),b||this.updateElement(g,i,_,s),v=S}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,i=t.options&&t.options.borderWidth||0,n=e.data||[];if(!n.length)return i;const s=n[0].size(this.resolveDataElementOptions(0)),a=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(i,s,a)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}class R extends I{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:i,color:n}}=e.legend.options;return t.labels.map(((t,s)=>{const a=e.getDatasetMeta(0).controller.getStyle(s);return{text:t,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,fontColor:n,lineWidth:a.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(s),index:s}}))}return[]}},onClick(e,t,i){i.chart.toggleDataVisibility(t.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart,s=i.data.labels||[],a=(0,n.o)(t._parsed[e].r,i.options.locale);return{label:s[e]||"",value:a}}parseObjectData(e,t,i,s){return n.y.bind(this)(e,t,i,s)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach(((e,i)=>{const n=this.getParsed(i).r;!isNaN(n)&&this.chart.getDataVisibility(i)&&(n<t.min&&(t.min=n),n>t.max&&(t.max=n))})),t}_updateRadius(){const e=this.chart,t=e.chartArea,i=e.options,n=Math.min(t.right-t.left,t.bottom-t.top),s=Math.max(n/2,0),a=(s-Math.max(i.cutoutPercentage?s/100*i.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=s-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,t,i,s){const a="reset"===s,r=this.chart,o=r.options.animation,l=this._cachedMeta.rScale,c=l.xCenter,d=l.yCenter,h=l.getIndexAngle(0)-.5*n.P;let u,p=h;const g=360/this.countVisibleElements();for(u=0;u<t;++u)p+=this._computeAngle(u,s,g);for(u=t;u<t+i;u++){const t=e[u];let i=p,n=p+this._computeAngle(u,s,g),m=r.getDataVisibility(u)?l.getDistanceFromCenterForValue(this.getParsed(u).r):0;p=n,a&&(o.animateScale&&(m=0),o.animateRotate&&(i=n=h));const f={x:c,y:d,innerRadius:0,outerRadius:m,startAngle:i,endAngle:n,options:this.resolveDataElementOptions(u,t.active?"active":s)};this.updateElement(t,u,f,s)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach(((e,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&t++})),t}_computeAngle(e,t,i){return this.chart.getDataVisibility(e)?(0,n.t)(this.resolveDataElementOptions(e,t).angle||i):0}}class L extends O{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}class N extends I{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(e){const t=this._cachedMeta.vScale,i=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(i[t.axis])}}parseObjectData(e,t,i,s){return n.y.bind(this)(e,t,i,s)}update(e){const t=this._cachedMeta,i=t.dataset,n=t.data||[],s=t.iScale.getLabels();if(i.points=n,"resize"!==e){const t=this.resolveDatasetElementOptions(e);this.options.showLine||(t.borderWidth=0);const a={_loop:!0,_fullLoop:s.length===n.length,options:t};this.updateElement(i,void 0,a,e)}this.updateElements(n,0,n.length,e)}updateElements(e,t,i,n){const s=this._cachedMeta.rScale,a="reset"===n;for(let r=t;r<t+i;r++){const t=e[r],i=this.resolveDataElementOptions(r,t.active?"active":n),o=s.getPointPositionForValue(r,this.getParsed(r).r),l=a?s.xCenter:o.x,c=a?s.yCenter:o.y,d={x:l,y:c,angle:o.angle,skip:isNaN(l)||isNaN(c),options:i};this.updateElement(t,r,d,n)}}}class z extends I{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(e){const t=this._cachedMeta,i=this.chart.data.labels||[],{xScale:n,yScale:s}=t,a=this.getParsed(e),r=n.getLabelForValue(a.x),o=s.getLabelForValue(a.y);return{label:i[e]||"",value:"("+r+", "+o+")"}}update(e){const t=this._cachedMeta,{data:i=[]}=t,s=this.chart._animationsDisabled;let{start:a,count:r}=(0,n.q)(t,i,s);if(this._drawStart=a,this._drawCount=r,(0,n.w)(t)&&(a=0,r=i.length),this.options.showLine){const{dataset:n,_dataset:a}=t;n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!a._decimated,n.points=i;const r=this.resolveDatasetElementOptions(e);r.segment=this.options.segment,this.updateElement(n,void 0,{animated:!s,options:r},e)}this.updateElements(i,a,r,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,i,s){const a="reset"===s,{iScale:r,vScale:o,_stacked:l,_dataset:c}=this._cachedMeta,d=this.resolveDataElementOptions(t,s),h=this.getSharedOptions(d),u=this.includeOptions(s,h),p=r.axis,g=o.axis,{spanGaps:m,segment:f}=this.options,b=(0,n.x)(m)?m:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||a||"none"===s;let _=t>0&&this.getParsed(t-1);for(let d=t;d<t+i;++d){const t=e[d],i=this.getParsed(d),m=y?t:{},v=(0,n.k)(i[g]),S=m[p]=r.getPixelForValue(i[p],d),I=m[g]=a||v?o.getBasePixel():o.getPixelForValue(l?this.applyStack(o,i,l):i[g],d);m.skip=isNaN(S)||isNaN(I)||v,m.stop=d>0&&Math.abs(i[p]-_[p])>b,f&&(m.parsed=i,m.raw=c.data[d]),u&&(m.options=h||this.resolveDataElementOptions(d,t.active?"active":s)),y||this.updateElement(t,d,m,s),_=i}this.updateSharedOptions(h,s,d)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let e=0;for(let i=t.length-1;i>=0;--i)e=Math.max(e,t[i].size(this.resolveDataElementOptions(i))/2);return e>0&&e}const i=e.dataset,n=i.options&&i.options.borderWidth||0;if(!t.length)return n;const s=t[0].size(this.resolveDataElementOptions(0)),a=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(n,s,a)/2}}var F=Object.freeze({__proto__:null,BarController:j,BubbleController:k,DoughnutController:O,LineController:M,PolarAreaController:R,PieController:L,RadarController:N,ScatterController:z});function V(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class B{static override(e){Object.assign(B.prototype,e)}constructor(e){this.options=e||{}}init(){}formats(){return V()}parse(){return V()}format(){return V()}add(){return V()}diff(){return V()}startOf(){return V()}endOf(){return V()}}var W={_date:B};function H(e,t,i,s){const{controller:a,data:r,_sorted:o}=e,l=a._cachedMeta.iScale;if(l&&t===l.axis&&"r"!==t&&o&&r.length){const e=l._reversePixels?n.A:n.B;if(!s)return e(r,t,i);if(a._sharedOptions){const n=r[0],s="function"==typeof n.getRange&&n.getRange(t);if(s){const n=e(r,t,i-s),a=e(r,t,i+s);return{lo:n.lo,hi:a.hi}}}}return{lo:0,hi:r.length-1}}function G(e,t,i,n,s){const a=e.getSortedVisibleDatasetMetas(),r=i[t];for(let e=0,i=a.length;e<i;++e){const{index:i,data:o}=a[e],{lo:l,hi:c}=H(a[e],t,r,s);for(let e=l;e<=c;++e){const t=o[e];t.skip||n(t,i,e)}}}function U(e,t,i,s,a){const r=[];if(!a&&!e.isPointInArea(t))return r;return G(e,i,t,(function(i,o,l){(a||(0,n.C)(i,e.chartArea,0))&&i.inRange(t.x,t.y,s)&&r.push({element:i,datasetIndex:o,index:l})}),!0),r}function Y(e,t,i,n,s,a){let r=[];const o=function(e){const t=-1!==e.indexOf("x"),i=-1!==e.indexOf("y");return function(e,n){const s=t?Math.abs(e.x-n.x):0,a=i?Math.abs(e.y-n.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(a,2))}}(i);let l=Number.POSITIVE_INFINITY;return G(e,i,t,(function(i,c,d){const h=i.inRange(t.x,t.y,s);if(n&&!h)return;const u=i.getCenterPoint(s);if(!(!!a||e.isPointInArea(u))&&!h)return;const p=o(t,u);p<l?(r=[{element:i,datasetIndex:c,index:d}],l=p):p===l&&r.push({element:i,datasetIndex:c,index:d})})),r}function $(e,t,i,s,a,r){return r||e.isPointInArea(t)?"r"!==i||s?Y(e,t,i,s,a,r):function(e,t,i,s){let a=[];return G(e,i,t,(function(e,i,r){const{startAngle:o,endAngle:l}=e.getProps(["startAngle","endAngle"],s),{angle:c}=(0,n.D)(e,{x:t.x,y:t.y});(0,n.p)(c,o,l)&&a.push({element:e,datasetIndex:i,index:r})})),a}(e,t,i,a):[]}function K(e,t,i,n,s){const a=[],r="x"===i?"inXRange":"inYRange";let o=!1;return G(e,i,t,((e,n,l)=>{e[r](t[i],s)&&(a.push({element:e,datasetIndex:n,index:l}),o=o||e.inRange(t.x,t.y,s))})),n&&!o?[]:a}var q={evaluateInteractionItems:G,modes:{index(e,t,i,s){const a=(0,n.z)(t,e),r=i.axis||"x",o=i.includeInvisible||!1,l=i.intersect?U(e,a,r,s,o):$(e,a,r,!1,s,o),c=[];return l.length?(e.getSortedVisibleDatasetMetas().forEach((e=>{const t=l[0].index,i=e.data[t];i&&!i.skip&&c.push({element:i,datasetIndex:e.index,index:t})})),c):[]},dataset(e,t,i,s){const a=(0,n.z)(t,e),r=i.axis||"xy",o=i.includeInvisible||!1;let l=i.intersect?U(e,a,r,s,o):$(e,a,r,!1,s,o);if(l.length>0){const t=l[0].datasetIndex,i=e.getDatasetMeta(t).data;l=[];for(let e=0;e<i.length;++e)l.push({element:i[e],datasetIndex:t,index:e})}return l},point:(e,t,i,s)=>U(e,(0,n.z)(t,e),i.axis||"xy",s,i.includeInvisible||!1),nearest(e,t,i,s){const a=(0,n.z)(t,e),r=i.axis||"xy",o=i.includeInvisible||!1;return $(e,a,r,i.intersect,s,o)},x:(e,t,i,s)=>K(e,(0,n.z)(t,e),"x",i.intersect,s),y:(e,t,i,s)=>K(e,(0,n.z)(t,e),"y",i.intersect,s)}};const X=["left","top","right","bottom"];function Q(e,t){return e.filter((e=>e.pos===t))}function Z(e,t){return e.filter((e=>-1===X.indexOf(e.pos)&&e.box.axis===t))}function J(e,t){return e.sort(((e,i)=>{const n=t?i:e,s=t?e:i;return n.weight===s.weight?n.index-s.index:n.weight-s.weight}))}function ee(e,t){const i=function(e){const t={};for(const i of e){const{stack:e,pos:n,stackWeight:s}=i;if(!e||!X.includes(n))continue;const a=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=s}return t}(e),{vBoxMaxWidth:n,hBoxMaxHeight:s}=t;let a,r,o;for(a=0,r=e.length;a<r;++a){o=e[a];const{fullSize:r}=o.box,l=i[o.stack],c=l&&o.stackWeight/l.weight;o.horizontal?(o.width=c?c*n:r&&t.availableWidth,o.height=s):(o.width=n,o.height=c?c*s:r&&t.availableHeight)}return i}function te(e,t,i,n){return Math.max(e[i],t[i])+Math.max(e[n],t[n])}function ie(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function ne(e,t,i,s){const{pos:a,box:r}=i,o=e.maxPadding;if(!(0,n.i)(a)){i.size&&(e[a]-=i.size);const t=s[i.stack]||{size:0,count:1};t.size=Math.max(t.size,i.horizontal?r.height:r.width),i.size=t.size/t.count,e[a]+=i.size}r.getPadding&&ie(o,r.getPadding());const l=Math.max(0,t.outerWidth-te(o,e,"left","right")),c=Math.max(0,t.outerHeight-te(o,e,"top","bottom")),d=l!==e.w,h=c!==e.h;return e.w=l,e.h=c,i.horizontal?{same:d,other:h}:{same:h,other:d}}function se(e,t){const i=t.maxPadding;function n(e){const n={left:0,top:0,right:0,bottom:0};return e.forEach((e=>{n[e]=Math.max(t[e],i[e])})),n}return n(e?["left","right"]:["top","bottom"])}function ae(e,t,i,n){const s=[];let a,r,o,l,c,d;for(a=0,r=e.length,c=0;a<r;++a){o=e[a],l=o.box,l.update(o.width||t.w,o.height||t.h,se(o.horizontal,t));const{same:r,other:h}=ne(t,i,o,n);c|=r&&s.length,d=d||h,l.fullSize||s.push(o)}return c&&ae(s,t,i,n)||d}function re(e,t,i,n,s){e.top=i,e.left=t,e.right=t+n,e.bottom=i+s,e.width=n,e.height=s}function oe(e,t,i,s){const a=i.padding;let{x:r,y:o}=t;for(const l of e){const e=l.box,c=s[l.stack]||{count:1,placed:0,weight:1},d=l.stackWeight/c.weight||1;if(l.horizontal){const s=t.w*d,r=c.size||e.height;(0,n.h)(c.start)&&(o=c.start),e.fullSize?re(e,a.left,o,i.outerWidth-a.right-a.left,r):re(e,t.left+c.placed,o,s,r),c.start=o,c.placed+=s,o=e.bottom}else{const s=t.h*d,o=c.size||e.width;(0,n.h)(c.start)&&(r=c.start),e.fullSize?re(e,r,a.top,o,i.outerHeight-a.bottom-a.top):re(e,r,t.top+c.placed,o,s),c.start=r,c.placed+=s,r=e.right}}t.x=r,t.y=o}var le={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const i=e.boxes?e.boxes.indexOf(t):-1;-1!==i&&e.boxes.splice(i,1)},configure(e,t,i){t.fullSize=i.fullSize,t.position=i.position,t.weight=i.weight},update(e,t,i,s){if(!e)return;const a=(0,n.E)(e.options.layout.padding),r=Math.max(t-a.width,0),o=Math.max(i-a.height,0),l=function(e){const t=function(e){const t=[];let i,n,s,a,r,o;for(i=0,n=(e||[]).length;i<n;++i)s=e[i],({position:a,options:{stack:r,stackWeight:o=1}}=s),t.push({index:i,box:s,pos:a,horizontal:s.isHorizontal(),weight:s.weight,stack:r&&a+r,stackWeight:o});return t}(e),i=J(t.filter((e=>e.box.fullSize)),!0),n=J(Q(t,"left"),!0),s=J(Q(t,"right")),a=J(Q(t,"top"),!0),r=J(Q(t,"bottom")),o=Z(t,"x"),l=Z(t,"y");return{fullSize:i,leftAndTop:n.concat(a),rightAndBottom:s.concat(l).concat(r).concat(o),chartArea:Q(t,"chartArea"),vertical:n.concat(s).concat(l),horizontal:a.concat(r).concat(o)}}(e.boxes),c=l.vertical,d=l.horizontal;(0,n.F)(e.boxes,(e=>{"function"==typeof e.beforeLayout&&e.beforeLayout()}));const h=c.reduce(((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1),0)||1,u=Object.freeze({outerWidth:t,outerHeight:i,padding:a,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/h,hBoxMaxHeight:o/2}),p=Object.assign({},a);ie(p,(0,n.E)(s));const g=Object.assign({maxPadding:p,w:r,h:o,x:a.left,y:a.top},a),m=ee(c.concat(d),u);ae(l.fullSize,g,u,m),ae(c,g,u,m),ae(d,g,u,m)&&ae(c,g,u,m),function(e){const t=e.maxPadding;function i(i){const n=Math.max(t[i]-e[i],0);return e[i]+=n,n}e.y+=i("top"),e.x+=i("left"),i("right"),i("bottom")}(g),oe(l.leftAndTop,g,u,m),g.x+=g.w,g.y+=g.h,oe(l.rightAndBottom,g,u,m),e.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},(0,n.F)(l.chartArea,(t=>{const i=t.box;Object.assign(i,e.chartArea),i.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})}))}};class ce{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,i){}removeEventListener(e,t,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,i,n){return t=Math.max(0,t||e.width),i=i||e.height,{width:t,height:Math.max(0,n?Math.floor(t/n):i)}}isAttached(e){return!0}updateConfig(e){}}class de extends ce{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const he={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},ue=e=>null===e||""===e;const pe=!!n.K&&{passive:!0};function ge(e,t,i){e.canvas.removeEventListener(t,i,pe)}function me(e,t){for(const i of e)if(i===t||i.contains(t))return!0}function fe(e,t,i){const n=e.canvas,s=new MutationObserver((e=>{let t=!1;for(const i of e)t=t||me(i.addedNodes,n),t=t&&!me(i.removedNodes,n);t&&i()}));return s.observe(document,{childList:!0,subtree:!0}),s}function be(e,t,i){const n=e.canvas,s=new MutationObserver((e=>{let t=!1;for(const i of e)t=t||me(i.removedNodes,n),t=t&&!me(i.addedNodes,n);t&&i()}));return s.observe(document,{childList:!0,subtree:!0}),s}const ye=new Map;let _e=0;function ve(){const e=window.devicePixelRatio;e!==_e&&(_e=e,ye.forEach(((t,i)=>{i.currentDevicePixelRatio!==e&&t()})))}function Se(e,t,i){const s=e.canvas,a=s&&(0,n.I)(s);if(!a)return;const r=(0,n.L)(((e,t)=>{const n=a.clientWidth;i(e,t),n<a.clientWidth&&i()}),window),o=new ResizeObserver((e=>{const t=e[0],i=t.contentRect.width,n=t.contentRect.height;0===i&&0===n||r(i,n)}));return o.observe(a),function(e,t){ye.size||window.addEventListener("resize",ve),ye.set(e,t)}(e,r),o}function Ie(e,t,i){i&&i.disconnect(),"resize"===t&&function(e){ye.delete(e),ye.size||window.removeEventListener("resize",ve)}(e)}function Ee(e,t,i){const s=e.canvas,a=(0,n.L)((t=>{null!==e.ctx&&i(function(e,t){const i=he[e.type]||e.type,{x:s,y:a}=(0,n.z)(e,t);return{type:i,chart:t,native:e,x:void 0!==s?s:null,y:void 0!==a?a:null}}(t,e))}),e);return function(e,t,i){e.addEventListener(t,i,pe)}(s,t,a),a}class xe extends ce{acquireContext(e,t){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(function(e,t){const i=e.style,s=e.getAttribute("height"),a=e.getAttribute("width");if(e.$chartjs={initial:{height:s,width:a,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",i.boxSizing=i.boxSizing||"border-box",ue(a)){const t=(0,n.J)(e,"width");void 0!==t&&(e.width=t)}if(ue(s))if(""===e.style.height)e.height=e.width/(t||2);else{const t=(0,n.J)(e,"height");void 0!==t&&(e.height=t)}}(e,t),i):null}releaseContext(e){const t=e.canvas;if(!t.$chartjs)return!1;const i=t.$chartjs.initial;["height","width"].forEach((e=>{const s=i[e];(0,n.k)(s)?t.removeAttribute(e):t.setAttribute(e,s)}));const s=i.style||{};return Object.keys(s).forEach((e=>{t.style[e]=s[e]})),t.width=t.width,delete t.$chartjs,!0}addEventListener(e,t,i){this.removeEventListener(e,t);const n=e.$proxies||(e.$proxies={}),s={attach:fe,detach:be,resize:Se}[t]||Ee;n[t]=s(e,t,i)}removeEventListener(e,t){const i=e.$proxies||(e.$proxies={}),n=i[t];if(!n)return;({attach:Ie,detach:Ie,resize:Ie}[t]||ge)(e,t,n),i[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,i,s){return(0,n.G)(e,t,i,s)}isAttached(e){const t=(0,n.I)(e);return!(!t||!t.isConnected)}}function we(e){return!(0,n.M)()||"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas?de:xe}class Ae{static defaults={};static defaultRoutes=void 0;active=!1;tooltipPosition(e){const{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}hasValue(){return(0,n.x)(this.x)&&(0,n.x)(this.y)}getProps(e,t){const i=this.$animations;if(!t||!i)return this;const n={};return e.forEach((e=>{n[e]=i[e]&&i[e].active()?i[e]._to:this[e]})),n}}function Pe(e,t){const i=e.options.ticks,s=function(e){const t=e.options.offset,i=e._tickSize(),n=e._length/i+(t?0:1),s=e._maxLength/i;return Math.floor(Math.min(n,s))}(e),a=Math.min(i.maxTicksLimit||s,s),r=i.major.enabled?function(e){const t=[];let i,n;for(i=0,n=e.length;i<n;i++)e[i].major&&t.push(i);return t}(t):[],o=r.length,l=r[0],c=r[o-1],d=[];if(o>a)return function(e,t,i,n){let s,a=0,r=i[0];for(n=Math.ceil(n),s=0;s<e.length;s++)s===r&&(t.push(e[s]),a++,r=i[a*n])}(t,d,r,o/a),d;const h=function(e,t,i){const s=function(e){const t=e.length;let i,n;if(t<2)return!1;for(n=e[0],i=1;i<t;++i)if(e[i]-e[i-1]!==n)return!1;return n}(e),a=t.length/i;if(!s)return Math.max(a,1);const r=(0,n.N)(s);for(let e=0,t=r.length-1;e<t;e++){const t=r[e];if(t>a)return t}return Math.max(a,1)}(r,t,a);if(o>0){let e,i;const s=o>1?Math.round((c-l)/(o-1)):null;for(Te(t,d,h,(0,n.k)(s)?0:l-s,l),e=0,i=o-1;e<i;e++)Te(t,d,h,r[e],r[e+1]);return Te(t,d,h,c,(0,n.k)(s)?t.length:c+s),d}return Te(t,d,h),d}function Te(e,t,i,s,a){const r=(0,n.v)(s,0),o=Math.min((0,n.v)(a,e.length),e.length);let l,c,d,h=0;for(i=Math.ceil(i),a&&(l=a-s,i=l/Math.floor(l/i)),d=r;d<0;)h++,d=Math.round(r+h*i);for(c=Math.max(r,0);c<o;c++)c===d&&(t.push(e[c]),h++,d=Math.round(r+h*i))}const Ce=(e,t,i)=>"top"===t||"left"===t?e[t]+i:e[t]-i;function De(e,t){const i=[],n=e.length/t,s=e.length;let a=0;for(;a<s;a+=n)i.push(e[Math.floor(a)]);return i}function je(e,t,i){const n=e.ticks.length,s=Math.min(t,n-1),a=e._startPixel,r=e._endPixel,o=1e-6;let l,c=e.getPixelForTick(s);if(!(i&&(l=1===n?Math.max(c-a,r-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(s-1))/2,c+=s<t?l:-l,c<a-o||c>r+o)))return c}function ke(e){return e.drawTicks?e.tickLength:0}function Oe(e,t){if(!e.display)return 0;const i=(0,n.a0)(e.font,t),s=(0,n.E)(e.padding);return((0,n.b)(e.text)?e.text.length:1)*i.lineHeight+s.height}function Me(e,t,i){let s=(0,n.a1)(e);return(i&&"right"!==t||!i&&"right"===t)&&(s=(e=>"left"===e?"right":"right"===e?"left":e)(s)),s}class Re extends Ae{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:i,_suggestedMax:s}=this;return e=(0,n.O)(e,Number.POSITIVE_INFINITY),t=(0,n.O)(t,Number.NEGATIVE_INFINITY),i=(0,n.O)(i,Number.POSITIVE_INFINITY),s=(0,n.O)(s,Number.NEGATIVE_INFINITY),{min:(0,n.O)(e,i),max:(0,n.O)(t,s),minDefined:(0,n.g)(e),maxDefined:(0,n.g)(t)}}getMinMax(e){let t,{min:i,max:s,minDefined:a,maxDefined:r}=this.getUserBounds();if(a&&r)return{min:i,max:s};const o=this.getMatchingVisibleMetas();for(let n=0,l=o.length;n<l;++n)t=o[n].controller.getMinMax(this,e),a||(i=Math.min(i,t.min)),r||(s=Math.max(s,t.max));return i=r&&i>s?s:i,s=a&&i>s?i:s,{min:(0,n.O)(i,(0,n.O)(s,i)),max:(0,n.O)(s,(0,n.O)(i,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){(0,n.Q)(this.options.beforeUpdate,[this])}update(e,t,i){const{beginAtZero:s,grace:a,ticks:r}=this.options,o=r.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=(0,n.R)(this,a,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=o<this.ticks.length;this._convertTicksToLabels(l?De(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),r.display&&(r.autoSkip||"auto"===r.source)&&(this.ticks=Pe(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,i=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,i=!i),this._startPixel=e,this._endPixel=t,this._reversePixels=i,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){(0,n.Q)(this.options.afterUpdate,[this])}beforeSetDimensions(){(0,n.Q)(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){(0,n.Q)(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),(0,n.Q)(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){(0,n.Q)(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let i,s,a;for(i=0,s=e.length;i<s;i++)a=e[i],a.label=(0,n.Q)(t.callback,[a.value,i,e],this)}afterTickToLabelConversion(){(0,n.Q)(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){(0,n.Q)(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,i=this.ticks.length,s=t.minRotation||0,a=t.maxRotation;let r,o,l,c=s;if(!this._isVisible()||!t.display||s>=a||i<=1||!this.isHorizontal())return void(this.labelRotation=s);const d=this._getLabelSizes(),h=d.widest.width,u=d.highest.height,p=(0,n.S)(this.chart.width-h,0,this.maxWidth);r=e.offset?this.maxWidth/i:p/(i-1),h+6>r&&(r=p/(i-(e.offset?.5:1)),o=this.maxHeight-ke(e.grid)-t.padding-Oe(e.title,this.chart.options.font),l=Math.sqrt(h*h+u*u),c=(0,n.U)(Math.min(Math.asin((0,n.S)((d.highest.height+6)/r,-1,1)),Math.asin((0,n.S)(o/l,-1,1))-Math.asin((0,n.S)(u/l,-1,1)))),c=Math.max(s,Math.min(a,c))),this.labelRotation=c}afterCalculateLabelRotation(){(0,n.Q)(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){(0,n.Q)(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:i,title:s,grid:a}}=this,r=this._isVisible(),o=this.isHorizontal();if(r){const r=Oe(s,t.options.font);if(o?(e.width=this.maxWidth,e.height=ke(a)+r):(e.height=this.maxHeight,e.width=ke(a)+r),i.display&&this.ticks.length){const{first:t,last:s,widest:a,highest:r}=this._getLabelSizes(),l=2*i.padding,c=(0,n.t)(this.labelRotation),d=Math.cos(c),h=Math.sin(c);if(o){const t=i.mirror?0:h*a.width+d*r.height;e.height=Math.min(this.maxHeight,e.height+t+l)}else{const t=i.mirror?0:d*a.width+h*r.height;e.width=Math.min(this.maxWidth,e.width+t+l)}this._calculatePadding(t,s,h,d)}}this._handleMargins(),o?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,i,n){const{ticks:{align:s,padding:a},position:r}=this.options,o=0!==this.labelRotation,l="top"!==r&&"x"===this.axis;if(this.isHorizontal()){const r=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,h=0;o?l?(d=n*e.width,h=i*t.height):(d=i*e.height,h=n*t.width):"start"===s?h=t.width:"end"===s?d=e.width:"inner"!==s&&(d=e.width/2,h=t.width/2),this.paddingLeft=Math.max((d-r+a)*this.width/(this.width-r),0),this.paddingRight=Math.max((h-c+a)*this.width/(this.width-c),0)}else{let i=t.height/2,n=e.height/2;"start"===s?(i=0,n=e.height):"end"===s&&(i=t.height,n=0),this.paddingTop=i+a,this.paddingBottom=n+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){(0,n.Q)(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,i;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,i=e.length;t<i;t++)(0,n.k)(e[t].label)&&(e.splice(t,1),i--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let i=this.ticks;t<i.length&&(i=De(i,t)),this._labelSizes=e=this._computeLabelSizes(i,i.length)}return e}_computeLabelSizes(e,t){const{ctx:i,_longestTextCache:s}=this,a=[],r=[];let o,l,c,d,h,u,p,g,m,f,b,y=0,_=0;for(o=0;o<t;++o){if(d=e[o].label,h=this._resolveTickFontOptions(o),i.font=u=h.string,p=s[u]=s[u]||{data:{},gc:[]},g=h.lineHeight,m=f=0,(0,n.k)(d)||(0,n.b)(d)){if((0,n.b)(d))for(l=0,c=d.length;l<c;++l)b=d[l],(0,n.k)(b)||(0,n.b)(b)||(m=(0,n.V)(i,p.data,p.gc,m,b),f+=g)}else m=(0,n.V)(i,p.data,p.gc,m,d),f=g;a.push(m),r.push(f),y=Math.max(m,y),_=Math.max(f,_)}!function(e,t){(0,n.F)(e,(e=>{const i=e.gc,n=i.length/2;let s;if(n>t){for(s=0;s<n;++s)delete e.data[i[s]];i.splice(0,n)}}))}(s,t);const v=a.indexOf(y),S=r.indexOf(_),I=e=>({width:a[e]||0,height:r[e]||0});return{first:I(0),last:I(t-1),widest:I(v),highest:I(S),widths:a,heights:r}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return(0,n.W)(this._alignToPixels?(0,n.X)(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const i=t[e];return i.$context||(i.$context=function(e,t,i){return(0,n.j)(e,{tick:i,index:t,type:"tick"})}(this.getContext(),e,i))}return this.$context||(this.$context=(i=this.chart.getContext(),s=this,(0,n.j)(i,{scale:s,type:"scale"})));var i,s}_tickSize(){const e=this.options.ticks,t=(0,n.t)(this.labelRotation),i=Math.abs(Math.cos(t)),s=Math.abs(Math.sin(t)),a=this._getLabelSizes(),r=e.autoSkipPadding||0,o=a?a.widest.width+r:0,l=a?a.highest.height+r:0;return this.isHorizontal()?l*i>o*s?o/i:l/s:l*s<o*i?l/i:o/s}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,i=this.chart,s=this.options,{grid:a,position:r,border:o}=s,l=a.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),h=ke(a),u=[],p=o.setContext(this.getContext()),g=p.display?p.width:0,m=g/2,f=function(e){return(0,n.X)(i,e,g)};let b,y,_,v,S,I,E,x,w,A,P,T;if("top"===r)b=f(this.bottom),I=this.bottom-h,x=b-m,A=f(e.top)+m,T=e.bottom;else if("bottom"===r)b=f(this.top),A=e.top,T=f(e.bottom)-m,I=b+m,x=this.top+h;else if("left"===r)b=f(this.right),S=this.right-h,E=b-m,w=f(e.left)+m,P=e.right;else if("right"===r)b=f(this.left),w=e.left,P=f(e.right)-m,S=b+m,E=this.left+h;else if("x"===t){if("center"===r)b=f((e.top+e.bottom)/2+.5);else if((0,n.i)(r)){const e=Object.keys(r)[0],t=r[e];b=f(this.chart.scales[e].getPixelForValue(t))}A=e.top,T=e.bottom,I=b+m,x=I+h}else if("y"===t){if("center"===r)b=f((e.left+e.right)/2);else if((0,n.i)(r)){const e=Object.keys(r)[0],t=r[e];b=f(this.chart.scales[e].getPixelForValue(t))}S=b-m,E=S-h,w=e.left,P=e.right}const C=(0,n.v)(s.ticks.maxTicksLimit,d),D=Math.max(1,Math.ceil(d/C));for(y=0;y<d;y+=D){const e=this.getContext(y),t=a.setContext(e),s=o.setContext(e),r=t.lineWidth,d=t.color,h=s.dash||[],p=s.dashOffset,g=t.tickWidth,m=t.tickColor,f=t.tickBorderDash||[],b=t.tickBorderDashOffset;_=je(this,y,l),void 0!==_&&(v=(0,n.X)(i,_,r),c?S=E=w=P=v:I=x=A=T=v,u.push({tx1:S,ty1:I,tx2:E,ty2:x,x1:w,y1:A,x2:P,y2:T,width:r,color:d,borderDash:h,borderDashOffset:p,tickWidth:g,tickColor:m,tickBorderDash:f,tickBorderDashOffset:b}))}return this._ticksLength=d,this._borderValue=b,u}_computeLabelItems(e){const t=this.axis,i=this.options,{position:s,ticks:a}=i,r=this.isHorizontal(),o=this.ticks,{align:l,crossAlign:c,padding:d,mirror:h}=a,u=ke(i.grid),p=u+d,g=h?-d:p,m=-(0,n.t)(this.labelRotation),f=[];let b,y,_,v,S,I,E,x,w,A,P,T,C="middle";if("top"===s)I=this.bottom-g,E=this._getXAxisLabelAlignment();else if("bottom"===s)I=this.top+g,E=this._getXAxisLabelAlignment();else if("left"===s){const e=this._getYAxisLabelAlignment(u);E=e.textAlign,S=e.x}else if("right"===s){const e=this._getYAxisLabelAlignment(u);E=e.textAlign,S=e.x}else if("x"===t){if("center"===s)I=(e.top+e.bottom)/2+p;else if((0,n.i)(s)){const e=Object.keys(s)[0],t=s[e];I=this.chart.scales[e].getPixelForValue(t)+p}E=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===s)S=(e.left+e.right)/2-p;else if((0,n.i)(s)){const e=Object.keys(s)[0],t=s[e];S=this.chart.scales[e].getPixelForValue(t)}E=this._getYAxisLabelAlignment(u).textAlign}"y"===t&&("start"===l?C="top":"end"===l&&(C="bottom"));const D=this._getLabelSizes();for(b=0,y=o.length;b<y;++b){_=o[b],v=_.label;const e=a.setContext(this.getContext(b));x=this.getPixelForTick(b)+a.labelOffset,w=this._resolveTickFontOptions(b),A=w.lineHeight,P=(0,n.b)(v)?v.length:1;const t=P/2,i=e.color,l=e.textStrokeColor,d=e.textStrokeWidth;let u,p=E;if(r?(S=x,"inner"===E&&(p=b===y-1?this.options.reverse?"left":"right":0===b?this.options.reverse?"right":"left":"center"),T="top"===s?"near"===c||0!==m?-P*A+A/2:"center"===c?-D.highest.height/2-t*A+A:-D.highest.height+A/2:"near"===c||0!==m?A/2:"center"===c?D.highest.height/2-t*A:D.highest.height-P*A,h&&(T*=-1),0===m||e.showLabelBackdrop||(S+=A/2*Math.sin(m))):(I=x,T=(1-P)*A/2),e.showLabelBackdrop){const t=(0,n.E)(e.backdropPadding),i=D.heights[b],s=D.widths[b];let a=T-t.top,r=0-t.left;switch(C){case"middle":a-=i/2;break;case"bottom":a-=i}switch(E){case"center":r-=s/2;break;case"right":r-=s}u={left:r,top:a,width:s+t.width,height:i+t.height,color:e.backdropColor}}f.push({label:v,font:w,textOffset:T,options:{rotation:m,color:i,strokeColor:l,strokeWidth:d,textAlign:p,textBaseline:C,translation:[S,I],backdrop:u}})}return f}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-(0,n.t)(this.labelRotation))return"top"===e?"left":"right";let i="center";return"start"===t.align?i="left":"end"===t.align?i="right":"inner"===t.align&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:i,mirror:n,padding:s}}=this.options,a=e+s,r=this._getLabelSizes().widest.width;let o,l;return"left"===t?n?(l=this.right+s,"near"===i?o="left":"center"===i?(o="center",l+=r/2):(o="right",l+=r)):(l=this.right-a,"near"===i?o="right":"center"===i?(o="center",l-=r/2):(o="left",l=this.left)):"right"===t?n?(l=this.left+s,"near"===i?o="right":"center"===i?(o="center",l-=r/2):(o="left",l-=r)):(l=this.left+a,"near"===i?o="left":"center"===i?(o="center",l+=r/2):(o="right",l=this.right)):o="right",{textAlign:o,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:i,top:n,width:s,height:a}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(i,n,s,a),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const i=this.ticks.findIndex((t=>t.value===e));if(i>=0){return t.setContext(this.getContext(i)).lineWidth}return 0}drawGrid(e){const t=this.options.grid,i=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,a;const r=(e,t,n)=>{n.width&&n.color&&(i.save(),i.lineWidth=n.width,i.strokeStyle=n.color,i.setLineDash(n.borderDash||[]),i.lineDashOffset=n.borderDashOffset,i.beginPath(),i.moveTo(e.x,e.y),i.lineTo(t.x,t.y),i.stroke(),i.restore())};if(t.display)for(s=0,a=n.length;s<a;++s){const e=n[s];t.drawOnChartArea&&r({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&r({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:i,grid:s}}=this,a=i.setContext(this.getContext()),r=i.display?a.width:0;if(!r)return;const o=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,d,h,u;this.isHorizontal()?(c=(0,n.X)(e,this.left,r)-r/2,d=(0,n.X)(e,this.right,o)+o/2,h=u=l):(h=(0,n.X)(e,this.top,r)-r/2,u=(0,n.X)(e,this.bottom,o)+o/2,c=d=l),t.save(),t.lineWidth=a.width,t.strokeStyle=a.color,t.beginPath(),t.moveTo(c,h),t.lineTo(d,u),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,i=this._computeLabelArea();i&&(0,n.Y)(t,i);const s=this.getLabelItems(e);for(const e of s){const i=e.options,s=e.font,a=e.label,r=e.textOffset;(0,n.Z)(t,a,0,r,s,i)}i&&(0,n.$)(t)}drawTitle(){const{ctx:e,options:{position:t,title:i,reverse:s}}=this;if(!i.display)return;const a=(0,n.a0)(i.font),r=(0,n.E)(i.padding),o=i.align;let l=a.lineHeight/2;"bottom"===t||"center"===t||(0,n.i)(t)?(l+=r.bottom,(0,n.b)(i.text)&&(l+=a.lineHeight*(i.text.length-1))):l+=r.top;const{titleX:c,titleY:d,maxWidth:h,rotation:u}=function(e,t,i,s){const{top:a,left:r,bottom:o,right:l,chart:c}=e,{chartArea:d,scales:h}=c;let u,p,g,m=0;const f=o-a,b=l-r;if(e.isHorizontal()){if(p=(0,n.a2)(s,r,l),(0,n.i)(i)){const e=Object.keys(i)[0],n=i[e];g=h[e].getPixelForValue(n)+f-t}else g="center"===i?(d.bottom+d.top)/2+f-t:Ce(e,i,t);u=l-r}else{if((0,n.i)(i)){const e=Object.keys(i)[0],n=i[e];p=h[e].getPixelForValue(n)-b+t}else p="center"===i?(d.left+d.right)/2-b+t:Ce(e,i,t);g=(0,n.a2)(s,o,a),m="left"===i?-n.H:n.H}return{titleX:p,titleY:g,maxWidth:u,rotation:m}}(this,l,t,o);(0,n.Z)(e,i.text,0,0,a,{color:i.color,maxWidth:h,rotation:u,textAlign:Me(o,t,s),textBaseline:"middle",translation:[c,d]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,i=(0,n.v)(e.grid&&e.grid.z,-1),s=(0,n.v)(e.border&&e.border.z,0);return this._isVisible()&&this.draw===Re.prototype.draw?[{z:i,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",n=[];let s,a;for(s=0,a=t.length;s<a;++s){const a=t[s];a[i]!==this.id||e&&a.type!==e||n.push(a)}return n}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return(0,n.a0)(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Le{constructor(e,t,i){this.type=e,this.scope=t,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let i;(function(e){return"id"in e&&"defaults"in e})(t)&&(i=this.register(t));const s=this.items,a=e.id,r=this.scope+"."+a;if(!a)throw new Error("class does not have id: "+e);return a in s||(s[a]=e,function(e,t,i){const s=(0,n.a4)(Object.create(null),[i?n.d.get(i):{},n.d.get(t),e.defaults]);n.d.set(t,s),e.defaultRoutes&&function(e,t){Object.keys(t).forEach((i=>{const s=i.split("."),a=s.pop(),r=[e].concat(s).join("."),o=t[i].split("."),l=o.pop(),c=o.join(".");n.d.route(r,a,c,l)}))}(t,e.defaultRoutes);e.descriptors&&n.d.describe(t,e.descriptors)}(e,r,i),this.override&&n.d.override(e.id,e.overrides)),r}get(e){return this.items[e]}unregister(e){const t=this.items,i=e.id,s=this.scope;i in t&&delete t[i],s&&i in n.d[s]&&(delete n.d[s][i],this.override&&delete n.a3[i])}}class Ne{constructor(){this.controllers=new Le(I,"datasets",!0),this.elements=new Le(Ae,"elements"),this.plugins=new Le(Object,"plugins"),this.scales=new Le(Re,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,i){[...t].forEach((t=>{const s=i||this._getRegistryForType(t);i||s.isForType(t)||s===this.plugins&&t.id?this._exec(e,s,t):(0,n.F)(t,(t=>{const n=i||this._getRegistryForType(t);this._exec(e,n,t)}))}))}_exec(e,t,i){const s=(0,n.a5)(e);(0,n.Q)(i["before"+s],[],i),t[e](i),(0,n.Q)(i["after"+s],[],i)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const i=this._typedRegistries[t];if(i.isForType(e))return i}return this.plugins}_get(e,t,i){const n=t.get(e);if(void 0===n)throw new Error('"'+e+'" is not a registered '+i+".");return n}}var ze=new Ne;class Fe{constructor(){this._init=[]}notify(e,t,i,n){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=n?this._descriptors(e).filter(n):this._descriptors(e),a=this._notify(s,e,t,i);return"afterDestroy"===t&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),a}_notify(e,t,i,s){s=s||{};for(const a of e){const e=a.plugin,r=e[i],o=[t,s,a.options];if(!1===(0,n.Q)(r,o,e)&&s.cancelable)return!1}return!0}invalidate(){(0,n.k)(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const i=e&&e.config,s=(0,n.v)(i.options&&i.options.plugins,{}),a=function(e){const t={},i=[],n=Object.keys(ze.plugins.items);for(let e=0;e<n.length;e++)i.push(ze.getPlugin(n[e]));const s=e.plugins||[];for(let e=0;e<s.length;e++){const n=s[e];-1===i.indexOf(n)&&(i.push(n),t[n.id]=!0)}return{plugins:i,localIds:t}}(i);return!1!==s||t?function(e,{plugins:t,localIds:i},n,s){const a=[],r=e.getContext();for(const o of t){const t=o.id,l=Ve(n[t],s);null!==l&&a.push({plugin:o,options:Be(e.config,{plugin:o,local:i[t]},l,r)})}return a}(e,a,s,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],i=this._cache,n=(e,t)=>e.filter((e=>!t.some((t=>e.plugin.id===t.plugin.id))));this._notify(n(t,i),e,"stop"),this._notify(n(i,t),e,"start")}}function Ve(e,t){return t||!1!==e?!0===e?{}:e:null}function Be(e,{plugin:t,local:i},n,s){const a=e.pluginScopeKeys(t),r=e.getOptionScopes(n,a);return i&&t.defaults&&r.push(t.defaults),e.createResolver(r,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function We(e,t){const i=n.d.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||i.indexAxis||"x"}function He(e,t){if("x"===e||"y"===e||"r"===e)return e;var i;if(e=t.axis||("top"===(i=t.position)||"bottom"===i?"x":"left"===i||"right"===i?"y":void 0)||e.length>1&&He(e[0].toLowerCase(),t))return e;throw new Error(`Cannot determine type of '${name}' axis. Please provide 'axis' or 'position' option.`)}function Ge(e){const t=e.options||(e.options={});t.plugins=(0,n.v)(t.plugins,{}),t.scales=function(e,t){const i=n.a3[e.type]||{scales:{}},a=t.scales||{},r=We(e.type,t),o=Object.create(null);return Object.keys(a).forEach((e=>{const t=a[e];if(!(0,n.i)(t))return s.error(`Invalid scale configuration for scale: ${e}`);if(t._proxy)return s.warn(`Ignoring resolver passed as options for scale: ${e}`);const l=He(e,t),c=function(e,t){return e===t?"_index_":"_value_"}(l,r),d=i.scales||{};o[e]=(0,n.ab)(Object.create(null),[{axis:l},t,d[l],d[c]])})),e.data.datasets.forEach((i=>{const s=i.type||e.type,r=i.indexAxis||We(s,t),l=(n.a3[s]||{}).scales||{};Object.keys(l).forEach((e=>{const t=function(e,t){let i=e;return"_index_"===e?i=t:"_value_"===e&&(i="x"===t?"y":"x"),i}(e,r),s=i[t+"AxisID"]||t;o[s]=o[s]||Object.create(null),(0,n.ab)(o[s],[{axis:t},a[s],l[e]])}))})),Object.keys(o).forEach((e=>{const t=o[e];(0,n.ab)(t,[n.d.scales[t.type],n.d.scale])})),o}(e,t)}function Ue(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const Ye=new Map,$e=new Set;function Ke(e,t){let i=Ye.get(e);return i||(i=t(),Ye.set(e,i),$e.add(i)),i}const qe=(e,t,i)=>{const s=(0,n.f)(t,i);void 0!==s&&e.add(s)};class Xe{constructor(e){this._config=function(e){return(e=e||{}).data=Ue(e.data),Ge(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Ue(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Ge(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Ke(e,(()=>[[`datasets.${e}`,""]]))}datasetAnimationScopeKeys(e,t){return Ke(`${e}.transition.${t}`,(()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]]))}datasetElementScopeKeys(e,t){return Ke(`${e}-${t}`,(()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]]))}pluginScopeKeys(e){const t=e.id;return Ke(`${this.type}-plugin-${t}`,(()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]]))}_cachedScopes(e,t){const i=this._scopeCache;let n=i.get(e);return n&&!t||(n=new Map,i.set(e,n)),n}getOptionScopes(e,t,i){const{options:s,type:a}=this,r=this._cachedScopes(e,i),o=r.get(t);if(o)return o;const l=new Set;t.forEach((t=>{e&&(l.add(e),t.forEach((t=>qe(l,e,t)))),t.forEach((e=>qe(l,s,e))),t.forEach((e=>qe(l,n.a3[a]||{},e))),t.forEach((e=>qe(l,n.d,e))),t.forEach((e=>qe(l,n.a6,e)))}));const c=Array.from(l);return 0===c.length&&c.push(Object.create(null)),$e.has(t)&&r.set(t,c),c}chartOptionScopes(){const{options:e,type:t}=this;return[e,n.a3[t]||{},n.d.datasets[t]||{},{type:t},n.d,n.a6]}resolveNamedOptions(e,t,i,s=[""]){const a={$shared:!0},{resolver:r,subPrefixes:o}=Qe(this._resolverCache,e,s);let l=r;if(function(e,t){const{isScriptable:i,isIndexable:s}=(0,n.aa)(e);for(const a of t){const t=i(a),r=s(a),o=(r||t)&&e[a];if(t&&((0,n.a7)(o)||Ze(o))||r&&(0,n.b)(o))return!0}return!1}(r,t)){a.$shared=!1,i=(0,n.a7)(i)?i():i;const t=this.createResolver(e,i,o);l=(0,n.a8)(r,i,t)}for(const e of t)a[e]=l[e];return a}createResolver(e,t,i=[""],s){const{resolver:a}=Qe(this._resolverCache,e,i);return(0,n.i)(t)?(0,n.a8)(a,t,void 0,s):a}}function Qe(e,t,i){let s=e.get(t);s||(s=new Map,e.set(t,s));const a=i.join();let r=s.get(a);if(!r){r={resolver:(0,n.a9)(t,i),subPrefixes:i.filter((e=>!e.toLowerCase().includes("hover")))},s.set(a,r)}return r}const Ze=e=>(0,n.i)(e)&&Object.getOwnPropertyNames(e).reduce(((t,i)=>t||(0,n.a7)(e[i])),!1);const Je=["top","bottom","left","right","chartArea"];function et(e,t){return"top"===e||"bottom"===e||-1===Je.indexOf(e)&&"x"===t}function tt(e,t){return function(i,n){return i[e]===n[e]?i[t]-n[t]:i[e]-n[e]}}function it(e){const t=e.chart,i=t.options.animation;t.notifyPlugins("afterRender"),(0,n.Q)(i&&i.onComplete,[e],t)}function nt(e){const t=e.chart,i=t.options.animation;(0,n.Q)(i&&i.onProgress,[e],t)}function st(e){return(0,n.M)()&&"string"==typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const at={},rt=e=>{const t=st(e);return Object.values(at).filter((e=>e.canvas===t)).pop()};function ot(e,t,i){const n=Object.keys(e);for(const s of n){const n=+s;if(n>=t){const a=e[s];delete e[s],(i>0||n>t)&&(e[n+i]=a)}}}class lt{static defaults=n.d;static instances=at;static overrides=n.a3;static registry=ze;static version="4.2.0";static getChart=rt;static register(...e){ze.add(...e),ct()}static unregister(...e){ze.remove(...e),ct()}constructor(e,t){const i=this.config=new Xe(t),a=st(e),o=rt(a);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const l=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||we(a)),this.platform.updateConfig(i);const c=this.platform.acquireContext(a,l.aspectRatio),d=c&&c.canvas,h=d&&d.height,u=d&&d.width;this.id=(0,n.ac)(),this.ctx=c,this.canvas=d,this.width=u,this.height=h,this._options=l,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Fe,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=(0,n.ad)((e=>this.update(e)),l.resizeDelay||0),this._dataChanges=[],at[this.id]=this,c&&d?(r.listen(this,"complete",it),r.listen(this,"progress",nt),this._initialize(),this.attached&&this.update()):s.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:i,height:s,_aspectRatio:a}=this;return(0,n.k)(e)?t&&a?a:s?i/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return ze}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():(0,n.ae)(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return(0,n.af)(this.canvas,this.ctx),this}stop(){return r.stop(this),this}resize(e,t){r.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const i=this.options,s=this.canvas,a=i.maintainAspectRatio&&this.aspectRatio,r=this.platform.getMaximumSize(s,e,t,a),o=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=r.width,this.height=r.height,this._aspectRatio=this.aspectRatio,(0,n.ae)(this,o,!0)&&(this.notifyPlugins("resize",{size:r}),(0,n.Q)(i.onResize,[this,r],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};(0,n.F)(e,((e,t)=>{e.id=t}))}buildOrUpdateScales(){const e=this.options,t=e.scales,i=this.scales,s=Object.keys(i).reduce(((e,t)=>(e[t]=!1,e)),{});let a=[];t&&(a=a.concat(Object.keys(t).map((e=>{const i=t[e],n=He(e,i),s="r"===n,a="x"===n;return{options:i,dposition:s?"chartArea":a?"bottom":"left",dtype:s?"radialLinear":a?"category":"linear"}})))),(0,n.F)(a,(t=>{const a=t.options,r=a.id,o=He(r,a),l=(0,n.v)(a.type,t.dtype);void 0!==a.position&&et(a.position,o)===et(t.dposition)||(a.position=t.dposition),s[r]=!0;let c=null;if(r in i&&i[r].type===l)c=i[r];else{c=new(ze.getScale(l))({id:r,type:l,ctx:this.ctx,chart:this}),i[c.id]=c}c.init(a,e)})),(0,n.F)(s,((e,t)=>{e||delete i[t]})),(0,n.F)(i,(e=>{le.configure(this,e,e.options),le.addBox(this,e)}))}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,i=e.length;if(e.sort(((e,t)=>e.index-t.index)),i>t){for(let e=t;e<i;++e)this._destroyDatasetMeta(e);e.splice(t,i-t)}this._sortedMetasets=e.slice(0).sort(tt("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach(((e,i)=>{0===t.filter((t=>t===e._dataset)).length&&this._destroyDatasetMeta(i)}))}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=t.length;i<s;i++){const s=t[i];let a=this.getDatasetMeta(i);const r=s.type||this.config.type;if(a.type&&a.type!==r&&(this._destroyDatasetMeta(i),a=this.getDatasetMeta(i)),a.type=r,a.indexAxis=s.indexAxis||We(r,this.options),a.order=s.order||0,a.index=i,a.label=""+s.label,a.visible=this.isDatasetVisible(i),a.controller)a.controller.updateIndex(i),a.controller.linkScales();else{const t=ze.getController(r),{datasetElementType:s,dataElementType:o}=n.d.datasets[r];Object.assign(t,{dataElementType:ze.getElement(o),datasetElementType:s&&ze.getElement(s)}),a.controller=new t(this,i),e.push(a.controller)}}return this._updateMetasets(),e}_resetElements(){(0,n.F)(this.data.datasets,((e,t)=>{this.getDatasetMeta(t).controller.reset()}),this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const i=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let r=0;for(let e=0,t=this.data.datasets.length;e<t;e++){const{controller:t}=this.getDatasetMeta(e),i=!s&&-1===a.indexOf(t);t.buildOrUpdateElements(i),r=Math.max(+t.getMaxOverflow(),r)}r=this._minPadding=i.layout.autoPadding?r:0,this._updateLayout(r),s||(0,n.F)(a,(e=>{e.reset()})),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(tt("z","_idx"));const{_active:o,_lastEvent:l}=this;l?this._eventHandler(l,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){(0,n.F)(this.scales,(e=>{le.removeBox(this,e)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),i=new Set(e.events);(0,n.ag)(t,i)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:i,start:n,count:s}of t){ot(e,n,"_removeElements"===i?-s:s)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,i=t=>new Set(e.filter((e=>e[0]===t)).map(((e,t)=>t+","+e.splice(1).join(",")))),s=i(0);for(let e=1;e<t;e++)if(!(0,n.ag)(s,i(e)))return;return Array.from(s).map((e=>e.split(","))).map((e=>({method:e[1],start:+e[2],count:+e[3]})))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;le.update(this,this.width,this.height,e);const t=this.chartArea,i=t.width<=0||t.height<=0;this._layers=[],(0,n.F)(this.boxes,(e=>{i&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))}),this),this._layers.forEach(((e,t)=>{e._idx=t})),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,i=this.data.datasets.length;t<i;++t)this._updateDataset(t,(0,n.a7)(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const i=this.getDatasetMeta(e),n={meta:i,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",n)&&(i.controller._update(t),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(r.has(this)?this.attached&&!r.running(this)&&r.start(this):(this.draw(),it({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resize(e,t),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,i=[];let n,s;for(n=0,s=t.length;n<s;++n){const s=t[n];e&&!s.visible||i.push(s)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,i=e._clip,s=!i.disabled,a=function(e){const{xScale:t,yScale:i}=e;if(t&&i)return{left:t.left,right:t.right,top:i.top,bottom:i.bottom}}(e)||this.chartArea,r={meta:e,index:e.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",r)&&(s&&(0,n.Y)(t,{left:!1===i.left?0:a.left-i.left,right:!1===i.right?this.width:a.right+i.right,top:!1===i.top?0:a.top-i.top,bottom:!1===i.bottom?this.height:a.bottom+i.bottom}),e.controller.draw(),s&&(0,n.$)(t),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return(0,n.C)(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,i,n){const s=q.modes[t];return"function"==typeof s?s(this,e,i,n):[]}getDatasetMeta(e){const t=this.data.datasets[e],i=this._metasets;let n=i.filter((e=>e&&e._dataset===t)).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},i.push(n)),n}getContext(){return this.$context||(this.$context=(0,n.j)(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const i=this.getDatasetMeta(e);return"boolean"==typeof i.hidden?!i.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,i){const s=i?"show":"hide",a=this.getDatasetMeta(e),r=a.controller._resolveAnimations(void 0,s);(0,n.h)(t)?(a.data[t].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),r.update(a,{visible:i}),this.update((t=>t.datasetIndex===e?s:void 0)))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),r.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),(0,n.af)(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete at[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,i=(i,n)=>{t.addEventListener(this,i,n),e[i]=n},s=(e,t,i)=>{e.offsetX=t,e.offsetY=i,this._eventHandler(e)};(0,n.F)(this.options.events,(e=>i(e,s)))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,i=(i,n)=>{t.addEventListener(this,i,n),e[i]=n},n=(i,n)=>{e[i]&&(t.removeEventListener(this,i,n),delete e[i])},s=(e,t)=>{this.canvas&&this.resize(e,t)};let a;const r=()=>{n("attach",r),this.attached=!0,this.resize(),i("resize",s),i("detach",a)};a=()=>{this.attached=!1,n("resize",s),this._stop(),this._resize(0,0),i("attach",r)},t.isAttached(this.canvas)?r():a()}unbindEvents(){(0,n.F)(this._listeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._listeners={},(0,n.F)(this._responsiveListeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._responsiveListeners=void 0}updateHoverStyle(e,t,i){const n=i?"set":"remove";let s,a,r,o;for("dataset"===t&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+n+"DatasetHoverStyle"]()),r=0,o=e.length;r<o;++r){a=e[r];const t=a&&this.getDatasetMeta(a.datasetIndex).controller;t&&t[n+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],i=e.map((({datasetIndex:e,index:t})=>{const i=this.getDatasetMeta(e);if(!i)throw new Error("No dataset found at index "+e);return{datasetIndex:e,element:i.data[t],index:t}}));!(0,n.ah)(i,t)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,t))}notifyPlugins(e,t,i){return this._plugins.notify(this,e,t,i)}isPluginEnabled(e){return 1===this._plugins._cache.filter((t=>t.plugin.id===e)).length}_updateHoverStyles(e,t,i){const n=this.options.hover,s=(e,t)=>e.filter((e=>!t.some((t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)))),a=s(t,e),r=i?e:s(e,t);a.length&&this.updateHoverStyle(a,n.mode,!1),r.length&&n.mode&&this.updateHoverStyle(r,n.mode,!0)}_eventHandler(e,t){const i={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},n=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",i,n))return;const s=this._handleEvent(e,t,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,n),(s||i.changed)&&this.render(),this}_handleEvent(e,t,i){const{_active:s=[],options:a}=this,r=t,o=this._getActiveElements(e,s,i,r),l=(0,n.ai)(e),c=function(e,t,i,n){return i&&"mouseout"!==e.type?n?t:e:null}(e,this._lastEvent,i,l);i&&(this._lastEvent=null,(0,n.Q)(a.onHover,[e,o,this],this),l&&(0,n.Q)(a.onClick,[e,o,this],this));const d=!(0,n.ah)(o,s);return(d||t)&&(this._active=o,this._updateHoverStyles(o,s,t)),this._lastEvent=c,d}_getActiveElements(e,t,i,n){if("mouseout"===e.type)return[];if(!i)return t;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,n)}}function ct(){return(0,n.F)(lt.instances,(e=>e._plugins.invalidate()))}function dt(e,t,i,s){const a=(r=e.options.borderRadius,(0,n.ak)(r,["outerStart","outerEnd","innerStart","innerEnd"]));var r;const o=(i-t)/2,l=Math.min(o,s*t/2),c=e=>{const t=(i-Math.min(o,e))*s/2;return(0,n.S)(e,0,Math.min(o,t))};return{outerStart:c(a.outerStart),outerEnd:c(a.outerEnd),innerStart:(0,n.S)(a.innerStart,0,l),innerEnd:(0,n.S)(a.innerEnd,0,l)}}function ht(e,t,i,n){return{x:i+e*Math.cos(t),y:n+e*Math.sin(t)}}function ut(e,t,i,s,a,r){const{x:o,y:l,startAngle:c,pixelMargin:d,innerRadius:h}=t,u=Math.max(t.outerRadius+s+i-d,0),p=h>0?h+s+i+d:0;let g=0;const m=a-c;if(s){const e=((h>0?h-s:0)+(u>0?u-s:0))/2;g=(m-(0!==e?m*e/(e+s):m))/2}const f=(m-Math.max(.001,m*u-i/n.P)/u)/2,b=c+f+g,y=a-f-g,{outerStart:_,outerEnd:v,innerStart:S,innerEnd:I}=dt(t,p,u,y-b),E=u-_,x=u-v,w=b+_/E,A=y-v/x,P=p+S,T=p+I,C=b+S/P,D=y-I/T;if(e.beginPath(),r){const t=(w+A)/2;if(e.arc(o,l,u,w,t),e.arc(o,l,u,t,A),v>0){const t=ht(x,A,o,l);e.arc(t.x,t.y,v,A,y+n.H)}const i=ht(T,y,o,l);if(e.lineTo(i.x,i.y),I>0){const t=ht(T,D,o,l);e.arc(t.x,t.y,I,y+n.H,D+Math.PI)}const s=(y-I/p+(b+S/p))/2;if(e.arc(o,l,p,y-I/p,s,!0),e.arc(o,l,p,s,b+S/p,!0),S>0){const t=ht(P,C,o,l);e.arc(t.x,t.y,S,C+Math.PI,b-n.H)}const a=ht(E,b,o,l);if(e.lineTo(a.x,a.y),_>0){const t=ht(E,w,o,l);e.arc(t.x,t.y,_,b-n.H,w)}}else{e.moveTo(o,l);const t=Math.cos(w)*u+o,i=Math.sin(w)*u+l;e.lineTo(t,i);const n=Math.cos(A)*u+o,s=Math.sin(A)*u+l;e.lineTo(n,s)}e.closePath()}function pt(e,t,i,s,a){const{fullCircles:r,startAngle:o,circumference:l,options:c}=t,{borderWidth:d,borderJoinStyle:h}=c,u="inner"===c.borderAlign;if(!d)return;u?(e.lineWidth=2*d,e.lineJoin=h||"round"):(e.lineWidth=d,e.lineJoin=h||"bevel");let p=t.endAngle;if(r){ut(e,t,i,s,p,a);for(let t=0;t<r;++t)e.stroke();isNaN(l)||(p=o+(l%n.T||n.T))}u&&function(e,t,i){const{startAngle:s,pixelMargin:a,x:r,y:o,outerRadius:l,innerRadius:c}=t;let d=a/l;e.beginPath(),e.arc(r,o,l,s-d,i+d),c>a?(d=a/c,e.arc(r,o,c,i+d,s-d,!0)):e.arc(r,o,a,i+n.H,s-n.H),e.closePath(),e.clip()}(e,t,p),r||(ut(e,t,i,s,p,a),e.stroke())}class gt extends Ae{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};static defaultRoutes={backgroundColor:"backgroundColor"};constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,i){const s=this.getProps(["x","y"],i),{angle:a,distance:r}=(0,n.D)(s,{x:e,y:t}),{startAngle:o,endAngle:l,innerRadius:c,outerRadius:d,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),u=this.options.spacing/2,p=(0,n.v)(h,l-o)>=n.T||(0,n.p)(a,o,l),g=(0,n.aj)(r,c+u,d+u);return p&&g}getCenterPoint(e){const{x:t,y:i,startAngle:n,endAngle:s,innerRadius:a,outerRadius:r}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],e),{offset:o,spacing:l}=this.options,c=(n+s)/2,d=(a+r+l+o)/2;return{x:t+Math.cos(c)*d,y:i+Math.sin(c)*d}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:i}=this,s=(t.offset||0)/4,a=(t.spacing||0)/2,r=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=i>n.T?Math.floor(i/n.T):0,0===i||this.innerRadius<0||this.outerRadius<0)return;e.save();const o=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(o)*s,Math.sin(o)*s);const l=s*(1-Math.sin(Math.min(n.P,i||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,i,s,a){const{fullCircles:r,startAngle:o,circumference:l}=t;let c=t.endAngle;if(r){ut(e,t,i,s,c,a);for(let t=0;t<r;++t)e.fill();isNaN(l)||(c=o+(l%n.T||n.T))}ut(e,t,i,s,c,a),e.fill()}(e,this,l,a,r),pt(e,this,l,a,r),e.restore()}}function mt(e,t,i=t){e.lineCap=(0,n.v)(i.borderCapStyle,t.borderCapStyle),e.setLineDash((0,n.v)(i.borderDash,t.borderDash)),e.lineDashOffset=(0,n.v)(i.borderDashOffset,t.borderDashOffset),e.lineJoin=(0,n.v)(i.borderJoinStyle,t.borderJoinStyle),e.lineWidth=(0,n.v)(i.borderWidth,t.borderWidth),e.strokeStyle=(0,n.v)(i.borderColor,t.borderColor)}function ft(e,t,i){e.lineTo(i.x,i.y)}function bt(e,t,i={}){const n=e.length,{start:s=0,end:a=n-1}=i,{start:r,end:o}=t,l=Math.max(s,r),c=Math.min(a,o),d=s<r&&a<r||s>o&&a>o;return{count:n,start:l,loop:t.loop,ilen:c<l&&!d?n+c-l:c-l}}function yt(e,t,i,s){const{points:a,options:r}=t,{count:o,start:l,loop:c,ilen:d}=bt(a,i,s),h=function(e){return e.stepped?n.ar:e.tension||"monotone"===e.cubicInterpolationMode?n.as:ft}(r);let u,p,g,{move:m=!0,reverse:f}=s||{};for(u=0;u<=d;++u)p=a[(l+(f?d-u:u))%o],p.skip||(m?(e.moveTo(p.x,p.y),m=!1):h(e,g,p,f,r.stepped),g=p);return c&&(p=a[(l+(f?d:0))%o],h(e,g,p,f,r.stepped)),!!c}function _t(e,t,i,n){const s=t.points,{count:a,start:r,ilen:o}=bt(s,i,n),{move:l=!0,reverse:c}=n||{};let d,h,u,p,g,m,f=0,b=0;const y=e=>(r+(c?o-e:e))%a,_=()=>{p!==g&&(e.lineTo(f,g),e.lineTo(f,p),e.lineTo(f,m))};for(l&&(h=s[y(0)],e.moveTo(h.x,h.y)),d=0;d<=o;++d){if(h=s[y(d)],h.skip)continue;const t=h.x,i=h.y,n=0|t;n===u?(i<p?p=i:i>g&&(g=i),f=(b*f+t)/++b):(_(),e.lineTo(t,i),u=n,b=0,p=g=i),m=i}_()}function vt(e){const t=e.options,i=t.borderDash&&t.borderDash.length;return!(e._decimated||e._loop||t.tension||"monotone"===t.cubicInterpolationMode||t.stepped||i)?_t:yt}const St="function"==typeof Path2D;function It(e,t,i,n){St&&!t.options.segment?function(e,t,i,n){let s=t._path;s||(s=t._path=new Path2D,t.path(s,i,n)&&s.closePath()),mt(e,t.options),e.stroke(s)}(e,t,i,n):function(e,t,i,n){const{segments:s,options:a}=t,r=vt(t);for(const o of s)mt(e,a,o.style),e.beginPath(),r(e,t,o,{start:i,end:i+n-1})&&e.closePath(),e.stroke()}(e,t,i,n)}class Et extends Ae{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const i=this.options;if((i.tension||"monotone"===i.cubicInterpolationMode)&&!i.stepped&&!this._pointsUpdated){const s=i.spanGaps?this._loop:this._fullLoop;(0,n.al)(this._points,i,e,s,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=(0,n.am)(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,i=e.length;return i&&t[e[i-1].end]}interpolate(e,t){const i=this.options,s=e[t],a=this.points,r=(0,n.an)(this,{property:t,start:s,end:s});if(!r.length)return;const o=[],l=function(e){return e.stepped?n.ao:e.tension||"monotone"===e.cubicInterpolationMode?n.ap:n.aq}(i);let c,d;for(c=0,d=r.length;c<d;++c){const{start:n,end:d}=r[c],h=a[n],u=a[d];if(h===u){o.push(h);continue}const p=l(h,u,Math.abs((s-h[t])/(u[t]-h[t])),i.stepped);p[t]=e[t],o.push(p)}return 1===o.length?o[0]:o}pathSegment(e,t,i){return vt(this)(e,this,t,i)}path(e,t,i){const n=this.segments,s=vt(this);let a=this._loop;t=t||0,i=i||this.points.length-t;for(const r of n)a&=s(e,this,r,{start:t,end:t+i-1});return!!a}draw(e,t,i,n){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),It(e,this,i,n),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function xt(e,t,i,n){const s=e.options,{[i]:a}=e.getProps([i],n);return Math.abs(t-a)<s.radius+s.hitRadius}class wt extends Ae{static id="point";static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,i){const n=this.options,{x:s,y:a}=this.getProps(["x","y"],i);return Math.pow(e-s,2)+Math.pow(t-a,2)<Math.pow(n.hitRadius+n.radius,2)}inXRange(e,t){return xt(this,e,"x",t)}inYRange(e,t){return xt(this,e,"y",t)}getCenterPoint(e){const{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}size(e){let t=(e=e||this.options||{}).radius||0;t=Math.max(t,t&&e.hoverRadius||0);return 2*(t+(t&&e.borderWidth||0))}draw(e,t){const i=this.options;this.skip||i.radius<.1||!(0,n.C)(this,t,this.size(i)/2)||(e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.fillStyle=i.backgroundColor,(0,n.at)(e,i,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function At(e,t){const{x:i,y:n,base:s,width:a,height:r}=e.getProps(["x","y","base","width","height"],t);let o,l,c,d,h;return e.horizontal?(h=r/2,o=Math.min(i,s),l=Math.max(i,s),c=n-h,d=n+h):(h=a/2,o=i-h,l=i+h,c=Math.min(n,s),d=Math.max(n,s)),{left:o,top:c,right:l,bottom:d}}function Pt(e,t,i,s){return e?0:(0,n.S)(t,i,s)}function Tt(e){const t=At(e),i=t.right-t.left,s=t.bottom-t.top,a=function(e,t,i){const s=e.options.borderWidth,a=e.borderSkipped,r=(0,n.av)(s);return{t:Pt(a.top,r.top,0,i),r:Pt(a.right,r.right,0,t),b:Pt(a.bottom,r.bottom,0,i),l:Pt(a.left,r.left,0,t)}}(e,i/2,s/2),r=function(e,t,i){const{enableBorderRadius:s}=e.getProps(["enableBorderRadius"]),a=e.options.borderRadius,r=(0,n.aw)(a),o=Math.min(t,i),l=e.borderSkipped,c=s||(0,n.i)(a);return{topLeft:Pt(!c||l.top||l.left,r.topLeft,0,o),topRight:Pt(!c||l.top||l.right,r.topRight,0,o),bottomLeft:Pt(!c||l.bottom||l.left,r.bottomLeft,0,o),bottomRight:Pt(!c||l.bottom||l.right,r.bottomRight,0,o)}}(e,i/2,s/2);return{outer:{x:t.left,y:t.top,w:i,h:s,radius:r},inner:{x:t.left+a.l,y:t.top+a.t,w:i-a.l-a.r,h:s-a.t-a.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(a.t,a.l)),topRight:Math.max(0,r.topRight-Math.max(a.t,a.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(a.b,a.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(a.b,a.r))}}}}function Ct(e,t,i,s){const a=null===t,r=null===i,o=e&&!(a&&r)&&At(e,s);return o&&(a||(0,n.aj)(t,o.left,o.right))&&(r||(0,n.aj)(i,o.top,o.bottom))}function Dt(e,t){e.rect(t.x,t.y,t.w,t.h)}function jt(e,t,i={}){const n=e.x!==i.x?-t:0,s=e.y!==i.y?-t:0,a=(e.x+e.w!==i.x+i.w?t:0)-n,r=(e.y+e.h!==i.y+i.h?t:0)-s;return{x:e.x+n,y:e.y+s,w:e.w+a,h:e.h+r,radius:e.radius}}class kt extends Ae{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:i,backgroundColor:s}}=this,{inner:a,outer:r}=Tt(this),o=(l=r.radius).topLeft||l.topRight||l.bottomLeft||l.bottomRight?n.au:Dt;var l;e.save(),r.w===a.w&&r.h===a.h||(e.beginPath(),o(e,jt(r,t,a)),e.clip(),o(e,jt(a,-t,r)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),o(e,jt(a,t)),e.fillStyle=s,e.fill(),e.restore()}inRange(e,t,i){return Ct(this,e,t,i)}inXRange(e,t){return Ct(this,e,null,t)}inYRange(e,t){return Ct(this,null,e,t)}getCenterPoint(e){const{x:t,y:i,base:n,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(t+n)/2:t,y:s?i:(i+n)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}var Ot=Object.freeze({__proto__:null,ArcElement:gt,LineElement:Et,PointElement:wt,BarElement:kt});const Mt=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Rt=Mt.map((e=>e.replace("rgb(","rgba(").replace(")",", 0.5)")));function Lt(e){return Mt[e%Mt.length]}function Nt(e){return Rt[e%Rt.length]}function zt(e){let t=0;return(i,n)=>{const s=e.getDatasetMeta(n).controller;s instanceof O?t=function(e,t){return e.backgroundColor=e.data.map((()=>Lt(t++))),t}(i,t):s instanceof R?t=function(e,t){return e.backgroundColor=e.data.map((()=>Nt(t++))),t}(i,t):s&&(t=function(e,t){return e.borderColor=Lt(t),e.backgroundColor=Nt(t),++t}(i,t))}}function Ft(e){let t;for(t in e)if(e[t].borderColor||e[t].backgroundColor)return!0;return!1}var Vt={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(e,t,i){if(!i.enabled)return;const{data:{datasets:n},options:s}=e.config,{elements:a}=s;if(!i.forceOverride&&(Ft(n)||(r=s)&&(r.borderColor||r.backgroundColor)||a&&Ft(a)))return;var r;const o=zt(e);n.forEach(o)}};function Bt(e){if(e._decimated){const t=e._data;delete e._decimated,delete e._data,Object.defineProperty(e,"data",{value:t})}}function Wt(e){e.data.datasets.forEach((e=>{Bt(e)}))}var Ht={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(e,t,i)=>{if(!i.enabled)return void Wt(e);const s=e.width;e.data.datasets.forEach(((t,a)=>{const{_data:r,indexAxis:o}=t,l=e.getDatasetMeta(a),c=r||t.data;if("y"===(0,n.a)([o,e.options.indexAxis]))return;if(!l.controller.supportsDecimation)return;const d=e.scales[l.xAxisID];if("linear"!==d.type&&"time"!==d.type)return;if(e.options.parsing)return;let{start:h,count:u}=function(e,t){const i=t.length;let s,a=0;const{iScale:r}=e,{min:o,max:l,minDefined:c,maxDefined:d}=r.getUserBounds();return c&&(a=(0,n.S)((0,n.B)(t,r.axis,o).lo,0,i-1)),s=d?(0,n.S)((0,n.B)(t,r.axis,l).hi+1,a,i)-a:i-a,{start:a,count:s}}(l,c);if(u<=(i.threshold||4*s))return void Bt(t);let p;switch((0,n.k)(r)&&(t._data=c,delete t.data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(e){this._data=e}})),i.algorithm){case"lttb":p=function(e,t,i,n,s){const a=s.samples||n;if(a>=i)return e.slice(t,t+i);const r=[],o=(i-2)/(a-2);let l=0;const c=t+i-1;let d,h,u,p,g,m=t;for(r[l++]=e[m],d=0;d<a-2;d++){let n,s=0,a=0;const c=Math.floor((d+1)*o)+1+t,f=Math.min(Math.floor((d+2)*o)+1,i)+t,b=f-c;for(n=c;n<f;n++)s+=e[n].x,a+=e[n].y;s/=b,a/=b;const y=Math.floor(d*o)+1+t,_=Math.min(Math.floor((d+1)*o)+1,i)+t,{x:v,y:S}=e[m];for(u=p=-1,n=y;n<_;n++)p=.5*Math.abs((v-s)*(e[n].y-S)-(v-e[n].x)*(a-S)),p>u&&(u=p,h=e[n],g=n);r[l++]=h,m=g}return r[l++]=e[c],r}(c,h,u,s,i);break;case"min-max":p=function(e,t,i,s){let a,r,o,l,c,d,h,u,p,g,m=0,f=0;const b=[],y=t+i-1,_=e[t].x,v=e[y].x-_;for(a=t;a<t+i;++a){r=e[a],o=(r.x-_)/v*s,l=r.y;const t=0|o;if(t===c)l<p?(p=l,d=a):l>g&&(g=l,h=a),m=(f*m+r.x)/++f;else{const i=a-1;if(!(0,n.k)(d)&&!(0,n.k)(h)){const t=Math.min(d,h),n=Math.max(d,h);t!==u&&t!==i&&b.push({...e[t],x:m}),n!==u&&n!==i&&b.push({...e[n],x:m})}a>0&&i!==u&&b.push(e[i]),b.push(r),c=t,f=0,p=g=l,d=h=u=a}}return b}(c,h,u,s);break;default:throw new Error(`Unsupported decimation algorithm '${i.algorithm}'`)}t._decimated=p}))},destroy(e){Wt(e)}};function Gt(e,t,i,s){if(s)return;let a=t[e],r=i[e];return"angle"===e&&(a=(0,n.ay)(a),r=(0,n.ay)(r)),{property:e,start:a,end:r}}function Ut(e,t,i){for(;t>e;t--){const e=i[t];if(!isNaN(e.x)&&!isNaN(e.y))break}return t}function Yt(e,t,i,n){return e&&t?n(e[i],t[i]):e?e[i]:t?t[i]:0}function $t(e,t){let i=[],s=!1;return(0,n.b)(e)?(s=!0,i=e):i=function(e,t){const{x:i=null,y:n=null}=e||{},s=t.points,a=[];return t.segments.forEach((({start:e,end:t})=>{t=Ut(e,t,s);const r=s[e],o=s[t];null!==n?(a.push({x:r.x,y:n}),a.push({x:o.x,y:n})):null!==i&&(a.push({x:i,y:r.y}),a.push({x:i,y:o.y}))})),a}(e,t),i.length?new Et({points:i,options:{tension:0},_loop:s,_fullLoop:s}):null}function Kt(e){return e&&!1!==e.fill}function qt(e,t,i){let s=e[t].fill;const a=[t];let r;if(!i)return s;for(;!1!==s&&-1===a.indexOf(s);){if(!(0,n.g)(s))return s;if(r=e[s],!r)return!1;if(r.visible)return s;a.push(s),s=r.fill}return!1}function Xt(e,t,i){const s=function(e){const t=e.options,i=t.fill;let s=(0,n.v)(i&&i.target,i);void 0===s&&(s=!!t.backgroundColor);if(!1===s||null===s)return!1;if(!0===s)return"origin";return s}(e);if((0,n.i)(s))return!isNaN(s.value)&&s;let a=parseFloat(s);return(0,n.g)(a)&&Math.floor(a)===a?function(e,t,i,n){"-"!==e&&"+"!==e||(i=t+i);if(i===t||i<0||i>=n)return!1;return i}(s[0],t,a,i):["origin","start","end","stack","shape"].indexOf(s)>=0&&s}function Qt(e,t,i){const n=[];for(let s=0;s<i.length;s++){const a=i[s],{first:r,last:o,point:l}=Zt(a,t,"x");if(!(!l||r&&o))if(r)n.unshift(l);else if(e.push(l),!o)break}e.push(...n)}function Zt(e,t,i){const s=e.interpolate(t,i);if(!s)return{};const a=s[i],r=e.segments,o=e.points;let l=!1,c=!1;for(let e=0;e<r.length;e++){const t=r[e],s=o[t.start][i],d=o[t.end][i];if((0,n.aj)(a,s,d)){l=a===s,c=a===d;break}}return{first:l,last:c,point:s}}class Jt{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,i){const{x:s,y:a,radius:r}=this;return t=t||{start:0,end:n.T},e.arc(s,a,r,t.end,t.start,!0),!i.bounds}interpolate(e){const{x:t,y:i,radius:n}=this,s=e.angle;return{x:t+Math.cos(s)*n,y:i+Math.sin(s)*n,angle:s}}}function ei(e){const{chart:t,fill:i,line:s}=e;if((0,n.g)(i))return function(e,t){const i=e.getDatasetMeta(t);return i&&e.isDatasetVisible(t)?i.dataset:null}(t,i);if("stack"===i)return function(e){const{scale:t,index:i,line:n}=e,s=[],a=n.segments,r=n.points,o=function(e,t){const i=[],n=e.getMatchingVisibleMetas("line");for(let e=0;e<n.length;e++){const s=n[e];if(s.index===t)break;s.hidden||i.unshift(s.dataset)}return i}(t,i);o.push($t({x:null,y:t.bottom},n));for(let e=0;e<a.length;e++){const t=a[e];for(let e=t.start;e<=t.end;e++)Qt(s,r[e],o)}return new Et({points:s,options:{}})}(e);if("shape"===i)return!0;const a=function(e){if((e.scale||{}).getPointPositionForValue)return function(e){const{scale:t,fill:i}=e,s=t.options,a=t.getLabels().length,r=s.reverse?t.max:t.min,o=function(e,t,i){let s;return s="start"===e?i:"end"===e?t.options.reverse?t.min:t.max:(0,n.i)(e)?e.value:t.getBaseValue(),s}(i,t,r),l=[];if(s.grid.circular){const e=t.getPointPositionForValue(0,r);return new Jt({x:e.x,y:e.y,radius:t.getDistanceFromCenterForValue(o)})}for(let e=0;e<a;++e)l.push(t.getPointPositionForValue(e,o));return l}(e);return function(e){const{scale:t={},fill:i}=e,s=function(e,t){let i=null;return"start"===e?i=t.bottom:"end"===e?i=t.top:(0,n.i)(e)?i=t.getPixelForValue(e.value):t.getBasePixel&&(i=t.getBasePixel()),i}(i,t);if((0,n.g)(s)){const e=t.isHorizontal();return{x:e?s:null,y:e?null:s}}return null}(e)}(e);return a instanceof Jt?a:$t(a,s)}function ti(e,t,i){const s=ei(t),{line:a,scale:r,axis:o}=t,l=a.options,c=l.fill,d=l.backgroundColor,{above:h=d,below:u=d}=c||{};s&&a.points.length&&((0,n.Y)(e,i),function(e,t){const{line:i,target:n,above:s,below:a,area:r,scale:o}=t,l=i._loop?"angle":t.axis;e.save(),"x"===l&&a!==s&&(ii(e,n,r.top),ni(e,{line:i,target:n,color:s,scale:o,property:l}),e.restore(),e.save(),ii(e,n,r.bottom));ni(e,{line:i,target:n,color:a,scale:o,property:l}),e.restore()}(e,{line:a,target:s,above:h,below:u,area:i,scale:r,axis:o}),(0,n.$)(e))}function ii(e,t,i){const{segments:n,points:s}=t;let a=!0,r=!1;e.beginPath();for(const o of n){const{start:n,end:l}=o,c=s[n],d=s[Ut(n,l,s)];a?(e.moveTo(c.x,c.y),a=!1):(e.lineTo(c.x,i),e.lineTo(c.x,c.y)),r=!!t.pathSegment(e,o,{move:r}),r?e.closePath():e.lineTo(d.x,i)}e.lineTo(t.first().x,i),e.closePath(),e.clip()}function ni(e,t){const{line:i,target:s,property:a,color:r,scale:o}=t,l=function(e,t,i){const s=e.segments,a=e.points,r=t.points,o=[];for(const e of s){let{start:s,end:l}=e;l=Ut(s,l,a);const c=Gt(i,a[s],a[l],e.loop);if(!t.segments){o.push({source:e,target:c,start:a[s],end:a[l]});continue}const d=(0,n.an)(t,c);for(const t of d){const s=Gt(i,r[t.start],r[t.end],t.loop),l=(0,n.ax)(e,a,s);for(const e of l)o.push({source:e,target:t,start:{[i]:Yt(c,s,"start",Math.max)},end:{[i]:Yt(c,s,"end",Math.min)}})}}return o}(i,s,a);for(const{source:t,target:n,start:c,end:d}of l){const{style:{backgroundColor:l=r}={}}=t,h=!0!==s;e.save(),e.fillStyle=l,si(e,o,h&&Gt(a,c,d)),e.beginPath();const u=!!i.pathSegment(e,t);let p;if(h){u?e.closePath():ai(e,s,d,a);const t=!!s.pathSegment(e,n,{move:u,reverse:!0});p=u&&t,p||ai(e,s,c,a)}e.closePath(),e.fill(p?"evenodd":"nonzero"),e.restore()}}function si(e,t,i){const{top:n,bottom:s}=t.chart.chartArea,{property:a,start:r,end:o}=i||{};"x"===a&&(e.beginPath(),e.rect(r,n,o-r,s-n),e.clip())}function ai(e,t,i,n){const s=t.interpolate(i,n);s&&e.lineTo(s.x,s.y)}var ri={id:"filler",afterDatasetsUpdate(e,t,i){const n=(e.data.datasets||[]).length,s=[];let a,r,o,l;for(r=0;r<n;++r)a=e.getDatasetMeta(r),o=a.dataset,l=null,o&&o.options&&o instanceof Et&&(l={visible:e.isDatasetVisible(r),index:r,fill:Xt(o,r,n),chart:e,axis:a.controller.options.indexAxis,scale:a.vScale,line:o}),a.$filler=l,s.push(l);for(r=0;r<n;++r)l=s[r],l&&!1!==l.fill&&(l.fill=qt(s,r,i.propagate))},beforeDraw(e,t,i){const n="beforeDraw"===i.drawTime,s=e.getSortedVisibleDatasetMetas(),a=e.chartArea;for(let t=s.length-1;t>=0;--t){const i=s[t].$filler;i&&(i.line.updateControlPoints(a,i.axis),n&&i.fill&&ti(e.ctx,i,a))}},beforeDatasetsDraw(e,t,i){if("beforeDatasetsDraw"!==i.drawTime)return;const n=e.getSortedVisibleDatasetMetas();for(let t=n.length-1;t>=0;--t){const i=n[t].$filler;Kt(i)&&ti(e.ctx,i,e.chartArea)}},beforeDatasetDraw(e,t,i){const n=t.meta.$filler;Kt(n)&&"beforeDatasetDraw"===i.drawTime&&ti(e.ctx,n,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const oi=(e,t)=>{let{boxHeight:i=t,boxWidth:n=t}=e;return e.usePointStyle&&(i=Math.min(i,t),n=e.pointStyleWidth||Math.min(n,t)),{boxWidth:n,boxHeight:i,itemHeight:Math.max(t,i)}};class li extends Ae{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,i){this.maxWidth=e,this.maxHeight=t,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=(0,n.Q)(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter((t=>e.filter(t,this.chart.data)))),e.sort&&(t=t.sort(((t,i)=>e.sort(t,i,this.chart.data)))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const i=e.labels,s=(0,n.a0)(i.font),a=s.size,r=this._computeTitleHeight(),{boxWidth:o,itemHeight:l}=oi(i,a);let c,d;t.font=s.string,this.isHorizontal()?(c=this.maxWidth,d=this._fitRows(r,a,o,l)+10):(d=this.maxHeight,c=this._fitCols(r,s,o,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(d,e.maxHeight||this.maxHeight)}_fitRows(e,t,i,n){const{ctx:s,maxWidth:a,options:{labels:{padding:r}}}=this,o=this.legendHitBoxes=[],l=this.lineWidths=[0],c=n+r;let d=e;s.textAlign="left",s.textBaseline="middle";let h=-1,u=-c;return this.legendItems.forEach(((e,p)=>{const g=i+t/2+s.measureText(e.text).width;(0===p||l[l.length-1]+g+2*r>a)&&(d+=c,l[l.length-(p>0?0:1)]=0,u+=c,h++),o[p]={left:0,top:u,row:h,width:g,height:n},l[l.length-1]+=g+r})),d}_fitCols(e,t,i,n){const{ctx:s,maxHeight:a,options:{labels:{padding:r}}}=this,o=this.legendHitBoxes=[],l=this.columnSizes=[],c=a-e;let d=r,h=0,u=0,p=0,g=0;return this.legendItems.forEach(((e,a)=>{const{itemWidth:m,itemHeight:f}=function(e,t,i,n,s){const a=function(e,t,i,n){let s=e.text;s&&"string"!=typeof s&&(s=s.reduce(((e,t)=>e.length>t.length?e:t)));return t+i.size/2+n.measureText(s).width}(n,e,t,i),r=function(e,t,i){let n=e;"string"!=typeof t.text&&(n=ci(t,i));return n}(s,n,t.lineHeight);return{itemWidth:a,itemHeight:r}}(i,t,s,e,n);a>0&&u+f+2*r>c&&(d+=h+r,l.push({width:h,height:u}),p+=h+r,g++,h=u=0),o[a]={left:p,top:u,col:g,width:m,height:f},h=Math.max(h,m),u+=f+r})),d+=h,l.push({width:h,height:u}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:i,labels:{padding:s},rtl:a}}=this,r=(0,n.az)(a,this.left,this.width);if(this.isHorizontal()){let a=0,o=(0,n.a2)(i,this.left+s,this.right-this.lineWidths[a]);for(const l of t)a!==l.row&&(a=l.row,o=(0,n.a2)(i,this.left+s,this.right-this.lineWidths[a])),l.top+=this.top+e+s,l.left=r.leftForLtr(r.x(o),l.width),o+=l.width+s}else{let a=0,o=(0,n.a2)(i,this.top+e+s,this.bottom-this.columnSizes[a].height);for(const l of t)l.col!==a&&(a=l.col,o=(0,n.a2)(i,this.top+e+s,this.bottom-this.columnSizes[a].height)),l.top=o,l.left+=this.left+s,l.left=r.leftForLtr(r.x(l.left),l.width),o+=l.height+s}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;(0,n.Y)(e,this),this._draw(),(0,n.$)(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:i,ctx:s}=this,{align:a,labels:r}=e,o=n.d.color,l=(0,n.az)(e.rtl,this.left,this.width),c=(0,n.a0)(r.font),{padding:d}=r,h=c.size,u=h/2;let p;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:g,boxHeight:m,itemHeight:f}=oi(r,h),b=this.isHorizontal(),y=this._computeTitleHeight();p=b?{x:(0,n.a2)(a,this.left+d,this.right-i[0]),y:this.top+d+y,line:0}:{x:this.left+d,y:(0,n.a2)(a,this.top+y+d,this.bottom-t[0].height),line:0},(0,n.aA)(this.ctx,e.textDirection);const _=f+d;this.legendItems.forEach(((v,S)=>{s.strokeStyle=v.fontColor,s.fillStyle=v.fontColor;const I=s.measureText(v.text).width,E=l.textAlign(v.textAlign||(v.textAlign=r.textAlign)),x=g+u+I;let w=p.x,A=p.y;l.setWidth(this.width),b?S>0&&w+x+d>this.right&&(A=p.y+=_,p.line++,w=p.x=(0,n.a2)(a,this.left+d,this.right-i[p.line])):S>0&&A+_>this.bottom&&(w=p.x=w+t[p.line].width+d,p.line++,A=p.y=(0,n.a2)(a,this.top+y+d,this.bottom-t[p.line].height));if(function(e,t,i){if(isNaN(g)||g<=0||isNaN(m)||m<0)return;s.save();const a=(0,n.v)(i.lineWidth,1);if(s.fillStyle=(0,n.v)(i.fillStyle,o),s.lineCap=(0,n.v)(i.lineCap,"butt"),s.lineDashOffset=(0,n.v)(i.lineDashOffset,0),s.lineJoin=(0,n.v)(i.lineJoin,"miter"),s.lineWidth=a,s.strokeStyle=(0,n.v)(i.strokeStyle,o),s.setLineDash((0,n.v)(i.lineDash,[])),r.usePointStyle){const o={radius:m*Math.SQRT2/2,pointStyle:i.pointStyle,rotation:i.rotation,borderWidth:a},c=l.xPlus(e,g/2),d=t+u;(0,n.aD)(s,o,c,d,r.pointStyleWidth&&g)}else{const r=t+Math.max((h-m)/2,0),o=l.leftForLtr(e,g),c=(0,n.aw)(i.borderRadius);s.beginPath(),Object.values(c).some((e=>0!==e))?(0,n.au)(s,{x:o,y:r,w:g,h:m,radius:c}):s.rect(o,r,g,m),s.fill(),0!==a&&s.stroke()}s.restore()}(l.x(w),A,v),w=(0,n.aB)(E,w+g+u,b?w+x:this.right,e.rtl),function(e,t,i){(0,n.Z)(s,i.text,e,t+f/2,c,{strikethrough:i.hidden,textAlign:l.textAlign(i.textAlign)})}(l.x(w),A,v),b)p.x+=x+d;else if("string"!=typeof v.text){const e=c.lineHeight;p.y+=ci(v,e)}else p.y+=_})),(0,n.aC)(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,i=(0,n.a0)(t.font),s=(0,n.E)(t.padding);if(!t.display)return;const a=(0,n.az)(e.rtl,this.left,this.width),r=this.ctx,o=t.position,l=i.size/2,c=s.top+l;let d,h=this.left,u=this.width;if(this.isHorizontal())u=Math.max(...this.lineWidths),d=this.top+c,h=(0,n.a2)(e.align,h,this.right-u);else{const t=this.columnSizes.reduce(((e,t)=>Math.max(e,t.height)),0);d=c+(0,n.a2)(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const p=(0,n.a2)(o,h,h+u);r.textAlign=a.textAlign((0,n.a1)(o)),r.textBaseline="middle",r.strokeStyle=t.color,r.fillStyle=t.color,r.font=i.string,(0,n.Z)(r,t.text,p,d,i)}_computeTitleHeight(){const e=this.options.title,t=(0,n.a0)(e.font),i=(0,n.E)(e.padding);return e.display?t.lineHeight+i.height:0}_getLegendItemAt(e,t){let i,s,a;if((0,n.aj)(e,this.left,this.right)&&(0,n.aj)(t,this.top,this.bottom))for(a=this.legendHitBoxes,i=0;i<a.length;++i)if(s=a[i],(0,n.aj)(e,s.left,s.left+s.width)&&(0,n.aj)(t,s.top,s.top+s.height))return this.legendItems[i];return null}handleEvent(e){const t=this.options;if(!function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t))return;const i=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const r=this._hoveredItem,o=(a=i,null!==(s=r)&&null!==a&&s.datasetIndex===a.datasetIndex&&s.index===a.index);r&&!o&&(0,n.Q)(t.onLeave,[e,r,this],this),this._hoveredItem=i,i&&!o&&(0,n.Q)(t.onHover,[e,i,this],this)}else i&&(0,n.Q)(t.onClick,[e,i,this],this);var s,a}}function ci(e,t){return t*(e.text?e.text.length+.5:0)}var di={id:"legend",_element:li,start(e,t,i){const n=e.legend=new li({ctx:e.ctx,options:i,chart:e});le.configure(e,n,i),le.addBox(e,n)},stop(e){le.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,i){const n=e.legend;le.configure(e,n,i),n.options=i},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,i){const n=t.datasetIndex,s=i.chart;s.isDatasetVisible(n)?(s.hide(n),t.hidden=!0):(s.show(n),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:i,pointStyle:s,textAlign:a,color:r,useBorderRadius:o,borderRadius:l}}=e.legend.options;return e._getSortedDatasetMetas().map((e=>{const c=e.controller.getStyle(i?0:void 0),d=(0,n.E)(c.borderWidth);return{text:t[e.index].label,fillStyle:c.backgroundColor,fontColor:r,hidden:!e.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:c.borderColor,pointStyle:s||c.pointStyle,rotation:c.rotation,textAlign:a||c.textAlign,borderRadius:o&&(l||c.borderRadius),datasetIndex:e.index}}),this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class hi extends Ae{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const i=this.options;if(this.left=0,this.top=0,!i.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const s=(0,n.b)(i.text)?i.text.length:1;this._padding=(0,n.E)(i.padding);const a=s*(0,n.a0)(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=a:this.width=a}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:i,bottom:s,right:a,options:r}=this,o=r.align;let l,c,d,h=0;return this.isHorizontal()?(c=(0,n.a2)(o,i,a),d=t+e,l=a-i):("left"===r.position?(c=i+e,d=(0,n.a2)(o,s,t),h=-.5*n.P):(c=a-e,d=(0,n.a2)(o,t,s),h=.5*n.P),l=s-t),{titleX:c,titleY:d,maxWidth:l,rotation:h}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const i=(0,n.a0)(t.font),s=i.lineHeight/2+this._padding.top,{titleX:a,titleY:r,maxWidth:o,rotation:l}=this._drawArgs(s);(0,n.Z)(e,t.text,0,0,i,{color:t.color,maxWidth:o,rotation:l,textAlign:(0,n.a1)(t.align),textBaseline:"middle",translation:[a,r]})}}var ui={id:"title",_element:hi,start(e,t,i){!function(e,t){const i=new hi({ctx:e.ctx,options:t,chart:e});le.configure(e,i,t),le.addBox(e,i),e.titleBlock=i}(e,i)},stop(e){const t=e.titleBlock;le.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,i){const n=e.titleBlock;le.configure(e,n,i),n.options=i},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const pi=new WeakMap;var gi={id:"subtitle",start(e,t,i){const n=new hi({ctx:e.ctx,options:i,chart:e});le.configure(e,n,i),le.addBox(e,n),pi.set(e,n)},stop(e){le.removeBox(e,pi.get(e)),pi.delete(e)},beforeUpdate(e,t,i){const n=pi.get(e);le.configure(e,n,i),n.options=i},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const mi={average(e){if(!e.length)return!1;let t,i,n=0,s=0,a=0;for(t=0,i=e.length;t<i;++t){const i=e[t].element;if(i&&i.hasValue()){const e=i.tooltipPosition();n+=e.x,s+=e.y,++a}}return{x:n/a,y:s/a}},nearest(e,t){if(!e.length)return!1;let i,s,a,r=t.x,o=t.y,l=Number.POSITIVE_INFINITY;for(i=0,s=e.length;i<s;++i){const s=e[i].element;if(s&&s.hasValue()){const e=s.getCenterPoint(),i=(0,n.aE)(t,e);i<l&&(l=i,a=s)}}if(a){const e=a.tooltipPosition();r=e.x,o=e.y}return{x:r,y:o}}};function fi(e,t){return t&&((0,n.b)(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function bi(e){return("string"==typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function yi(e,t){const{element:i,datasetIndex:n,index:s}=t,a=e.getDatasetMeta(n).controller,{label:r,value:o}=a.getLabelAndValue(s);return{chart:e,label:r,parsed:a.getParsed(s),raw:e.data.datasets[n].data[s],formattedValue:o,dataset:a.getDataset(),dataIndex:s,datasetIndex:n,element:i}}function _i(e,t){const i=e.chart.ctx,{body:s,footer:a,title:r}=e,{boxWidth:o,boxHeight:l}=t,c=(0,n.a0)(t.bodyFont),d=(0,n.a0)(t.titleFont),h=(0,n.a0)(t.footerFont),u=r.length,p=a.length,g=s.length,m=(0,n.E)(t.padding);let f=m.height,b=0,y=s.reduce(((e,t)=>e+t.before.length+t.lines.length+t.after.length),0);if(y+=e.beforeBody.length+e.afterBody.length,u&&(f+=u*d.lineHeight+(u-1)*t.titleSpacing+t.titleMarginBottom),y){f+=g*(t.displayColors?Math.max(l,c.lineHeight):c.lineHeight)+(y-g)*c.lineHeight+(y-1)*t.bodySpacing}p&&(f+=t.footerMarginTop+p*h.lineHeight+(p-1)*t.footerSpacing);let _=0;const v=function(e){b=Math.max(b,i.measureText(e).width+_)};return i.save(),i.font=d.string,(0,n.F)(e.title,v),i.font=c.string,(0,n.F)(e.beforeBody.concat(e.afterBody),v),_=t.displayColors?o+2+t.boxPadding:0,(0,n.F)(s,(e=>{(0,n.F)(e.before,v),(0,n.F)(e.lines,v),(0,n.F)(e.after,v)})),_=0,i.font=h.string,(0,n.F)(e.footer,v),i.restore(),b+=m.width,{width:b,height:f}}function vi(e,t,i,n){const{x:s,width:a}=i,{width:r,chartArea:{left:o,right:l}}=e;let c="center";return"center"===n?c=s<=(o+l)/2?"left":"right":s<=a/2?c="left":s>=r-a/2&&(c="right"),function(e,t,i,n){const{x:s,width:a}=n,r=i.caretSize+i.caretPadding;return"left"===e&&s+a+r>t.width||"right"===e&&s-a-r<0||void 0}(c,e,t,i)&&(c="center"),c}function Si(e,t,i){const n=i.yAlign||t.yAlign||function(e,t){const{y:i,height:n}=t;return i<n/2?"top":i>e.height-n/2?"bottom":"center"}(e,i);return{xAlign:i.xAlign||t.xAlign||vi(e,t,i,n),yAlign:n}}function Ii(e,t,i,s){const{caretSize:a,caretPadding:r,cornerRadius:o}=e,{xAlign:l,yAlign:c}=i,d=a+r,{topLeft:h,topRight:u,bottomLeft:p,bottomRight:g}=(0,n.aw)(o);let m=function(e,t){let{x:i,width:n}=e;return"right"===t?i-=n:"center"===t&&(i-=n/2),i}(t,l);const f=function(e,t,i){let{y:n,height:s}=e;return"top"===t?n+=i:n-="bottom"===t?s+i:s/2,n}(t,c,d);return"center"===c?"left"===l?m+=d:"right"===l&&(m-=d):"left"===l?m-=Math.max(h,p)+a:"right"===l&&(m+=Math.max(u,g)+a),{x:(0,n.S)(m,0,s.width-t.width),y:(0,n.S)(f,0,s.height-t.height)}}function Ei(e,t,i){const s=(0,n.E)(i.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-s.right:e.x+s.left}function xi(e){return fi([],bi(e))}function wi(e,t){const i=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return i?e.override(i):e}const Ai={beforeTitle:n.aF,title(e){if(e.length>0){const t=e[0],i=t.chart.data.labels,n=i?i.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(n>0&&t.dataIndex<n)return i[t.dataIndex]}return""},afterTitle:n.aF,beforeBody:n.aF,beforeLabel:n.aF,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const i=e.formattedValue;return(0,n.k)(i)||(t+=i),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:n.aF,afterBody:n.aF,beforeFooter:n.aF,footer:n.aF,afterFooter:n.aF};function Pi(e,t,i,n){const s=e[t].call(i,n);return void 0===s?Ai[t].call(i,n):s}class Ti extends Ae{static positioners=mi;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,i=this.options.setContext(this.getContext()),n=i.enabled&&t.options.animation&&i.animations,s=new d(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,i=this._tooltipItems,(0,n.j)(e,{tooltip:t,tooltipItems:i,type:"tooltip"})));var e,t,i}getTitle(e,t){const{callbacks:i}=t,n=Pi(i,"beforeTitle",this,e),s=Pi(i,"title",this,e),a=Pi(i,"afterTitle",this,e);let r=[];return r=fi(r,bi(n)),r=fi(r,bi(s)),r=fi(r,bi(a)),r}getBeforeBody(e,t){return xi(Pi(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:i}=t,s=[];return(0,n.F)(e,(e=>{const t={before:[],lines:[],after:[]},n=wi(i,e);fi(t.before,bi(Pi(n,"beforeLabel",this,e))),fi(t.lines,Pi(n,"label",this,e)),fi(t.after,bi(Pi(n,"afterLabel",this,e))),s.push(t)})),s}getAfterBody(e,t){return xi(Pi(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:i}=t,n=Pi(i,"beforeFooter",this,e),s=Pi(i,"footer",this,e),a=Pi(i,"afterFooter",this,e);let r=[];return r=fi(r,bi(n)),r=fi(r,bi(s)),r=fi(r,bi(a)),r}_createItems(e){const t=this._active,i=this.chart.data,s=[],a=[],r=[];let o,l,c=[];for(o=0,l=t.length;o<l;++o)c.push(yi(this.chart,t[o]));return e.filter&&(c=c.filter(((t,n,s)=>e.filter(t,n,s,i)))),e.itemSort&&(c=c.sort(((t,n)=>e.itemSort(t,n,i)))),(0,n.F)(c,(t=>{const i=wi(e.callbacks,t);s.push(Pi(i,"labelColor",this,t)),a.push(Pi(i,"labelPointStyle",this,t)),r.push(Pi(i,"labelTextColor",this,t))})),this.labelColors=s,this.labelPointStyles=a,this.labelTextColors=r,this.dataPoints=c,c}update(e,t){const i=this.options.setContext(this.getContext()),n=this._active;let s,a=[];if(n.length){const e=mi[i.position].call(this,n,this._eventPosition);a=this._createItems(i),this.title=this.getTitle(a,i),this.beforeBody=this.getBeforeBody(a,i),this.body=this.getBody(a,i),this.afterBody=this.getAfterBody(a,i),this.footer=this.getFooter(a,i);const t=this._size=_i(this,i),r=Object.assign({},e,t),o=Si(this.chart,i,r),l=Ii(i,r,o,this.chart);this.xAlign=o.xAlign,this.yAlign=o.yAlign,s={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(s={opacity:0});this._tooltipItems=a,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,i,n){const s=this.getCaretPosition(e,i,n);t.lineTo(s.x1,s.y1),t.lineTo(s.x2,s.y2),t.lineTo(s.x3,s.y3)}getCaretPosition(e,t,i){const{xAlign:s,yAlign:a}=this,{caretSize:r,cornerRadius:o}=i,{topLeft:l,topRight:c,bottomLeft:d,bottomRight:h}=(0,n.aw)(o),{x:u,y:p}=e,{width:g,height:m}=t;let f,b,y,_,v,S;return"center"===a?(v=p+m/2,"left"===s?(f=u,b=f-r,_=v+r,S=v-r):(f=u+g,b=f+r,_=v-r,S=v+r),y=f):(b="left"===s?u+Math.max(l,d)+r:"right"===s?u+g-Math.max(c,h)-r:this.caretX,"top"===a?(_=p,v=_-r,f=b-r,y=b+r):(_=p+m,v=_+r,f=b+r,y=b-r),S=_),{x1:f,x2:b,x3:y,y1:_,y2:v,y3:S}}drawTitle(e,t,i){const s=this.title,a=s.length;let r,o,l;if(a){const c=(0,n.az)(i.rtl,this.x,this.width);for(e.x=Ei(this,i.titleAlign,i),t.textAlign=c.textAlign(i.titleAlign),t.textBaseline="middle",r=(0,n.a0)(i.titleFont),o=i.titleSpacing,t.fillStyle=i.titleColor,t.font=r.string,l=0;l<a;++l)t.fillText(s[l],c.x(e.x),e.y+r.lineHeight/2),e.y+=r.lineHeight+o,l+1===a&&(e.y+=i.titleMarginBottom-o)}}_drawColorBox(e,t,i,s,a){const r=this.labelColors[i],o=this.labelPointStyles[i],{boxHeight:l,boxWidth:c,boxPadding:d}=a,h=(0,n.a0)(a.bodyFont),u=Ei(this,"left",a),p=s.x(u),g=l<h.lineHeight?(h.lineHeight-l)/2:0,m=t.y+g;if(a.usePointStyle){const t={radius:Math.min(c,l)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},i=s.leftForLtr(p,c)+c/2,d=m+l/2;e.strokeStyle=a.multiKeyBackground,e.fillStyle=a.multiKeyBackground,(0,n.at)(e,t,i,d),e.strokeStyle=r.borderColor,e.fillStyle=r.backgroundColor,(0,n.at)(e,t,i,d)}else{e.lineWidth=(0,n.i)(r.borderWidth)?Math.max(...Object.values(r.borderWidth)):r.borderWidth||1,e.strokeStyle=r.borderColor,e.setLineDash(r.borderDash||[]),e.lineDashOffset=r.borderDashOffset||0;const t=s.leftForLtr(p,c-d),i=s.leftForLtr(s.xPlus(p,1),c-d-2),o=(0,n.aw)(r.borderRadius);Object.values(o).some((e=>0!==e))?(e.beginPath(),e.fillStyle=a.multiKeyBackground,(0,n.au)(e,{x:t,y:m,w:c,h:l,radius:o}),e.fill(),e.stroke(),e.fillStyle=r.backgroundColor,e.beginPath(),(0,n.au)(e,{x:i,y:m+1,w:c-2,h:l-2,radius:o}),e.fill()):(e.fillStyle=a.multiKeyBackground,e.fillRect(t,m,c,l),e.strokeRect(t,m,c,l),e.fillStyle=r.backgroundColor,e.fillRect(i,m+1,c-2,l-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,t,i){const{body:s}=this,{bodySpacing:a,bodyAlign:r,displayColors:o,boxHeight:l,boxWidth:c,boxPadding:d}=i,h=(0,n.a0)(i.bodyFont);let u=h.lineHeight,p=0;const g=(0,n.az)(i.rtl,this.x,this.width),m=function(i){t.fillText(i,g.x(e.x+p),e.y+u/2),e.y+=u+a},f=g.textAlign(r);let b,y,_,v,S,I,E;for(t.textAlign=r,t.textBaseline="middle",t.font=h.string,e.x=Ei(this,f,i),t.fillStyle=i.bodyColor,(0,n.F)(this.beforeBody,m),p=o&&"right"!==f?"center"===r?c/2+d:c+2+d:0,v=0,I=s.length;v<I;++v){for(b=s[v],y=this.labelTextColors[v],t.fillStyle=y,(0,n.F)(b.before,m),_=b.lines,o&&_.length&&(this._drawColorBox(t,e,v,g,i),u=Math.max(h.lineHeight,l)),S=0,E=_.length;S<E;++S)m(_[S]),u=h.lineHeight;(0,n.F)(b.after,m)}p=0,u=h.lineHeight,(0,n.F)(this.afterBody,m),e.y-=a}drawFooter(e,t,i){const s=this.footer,a=s.length;let r,o;if(a){const l=(0,n.az)(i.rtl,this.x,this.width);for(e.x=Ei(this,i.footerAlign,i),e.y+=i.footerMarginTop,t.textAlign=l.textAlign(i.footerAlign),t.textBaseline="middle",r=(0,n.a0)(i.footerFont),t.fillStyle=i.footerColor,t.font=r.string,o=0;o<a;++o)t.fillText(s[o],l.x(e.x),e.y+r.lineHeight/2),e.y+=r.lineHeight+i.footerSpacing}}drawBackground(e,t,i,s){const{xAlign:a,yAlign:r}=this,{x:o,y:l}=e,{width:c,height:d}=i,{topLeft:h,topRight:u,bottomLeft:p,bottomRight:g}=(0,n.aw)(s.cornerRadius);t.fillStyle=s.backgroundColor,t.strokeStyle=s.borderColor,t.lineWidth=s.borderWidth,t.beginPath(),t.moveTo(o+h,l),"top"===r&&this.drawCaret(e,t,i,s),t.lineTo(o+c-u,l),t.quadraticCurveTo(o+c,l,o+c,l+u),"center"===r&&"right"===a&&this.drawCaret(e,t,i,s),t.lineTo(o+c,l+d-g),t.quadraticCurveTo(o+c,l+d,o+c-g,l+d),"bottom"===r&&this.drawCaret(e,t,i,s),t.lineTo(o+p,l+d),t.quadraticCurveTo(o,l+d,o,l+d-p),"center"===r&&"left"===a&&this.drawCaret(e,t,i,s),t.lineTo(o,l+h),t.quadraticCurveTo(o,l,o+h,l),t.closePath(),t.fill(),s.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,i=this.$animations,n=i&&i.x,s=i&&i.y;if(n||s){const i=mi[e.position].call(this,this._active,this._eventPosition);if(!i)return;const a=this._size=_i(this,e),r=Object.assign({},i,this._size),o=Si(t,e,r),l=Ii(e,r,o,t);n._to===l.x&&s._to===l.y||(this.xAlign=o.xAlign,this.yAlign=o.yAlign,this.width=a.width,this.height=a.height,this.caretX=i.x,this.caretY=i.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(t);const s={width:this.width,height:this.height},a={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const r=(0,n.E)(t.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&o&&(e.save(),e.globalAlpha=i,this.drawBackground(a,e,s,t),(0,n.aA)(e,t.textDirection),a.y+=r.top,this.drawTitle(a,e,t),this.drawBody(a,e,t),this.drawFooter(a,e,t),(0,n.aC)(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const i=this._active,s=e.map((({datasetIndex:e,index:t})=>{const i=this.chart.getDatasetMeta(e);if(!i)throw new Error("Cannot find a dataset at index "+e);return{datasetIndex:e,element:i.data[t],index:t}})),a=!(0,n.ah)(i,s),r=this._positionChanged(s,t);(a||r)&&(this._active=s,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,i=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,a=this._active||[],r=this._getActiveElements(e,a,t,i),o=this._positionChanged(r,e),l=t||!(0,n.ah)(r,a)||o;return l&&(this._active=r,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),l}_getActiveElements(e,t,i,n){const s=this.options;if("mouseout"===e.type)return[];if(!n)return t;const a=this.chart.getElementsAtEventForMode(e,s.mode,s,i);return s.reverse&&a.reverse(),a}_positionChanged(e,t){const{caretX:i,caretY:n,options:s}=this,a=mi[s.position].call(this,e,t);return!1!==a&&(i!==a.x||n!==a.y)}}var Ci={id:"tooltip",_element:Ti,positioners:mi,afterInit(e,t,i){i&&(e.tooltip=new Ti({chart:e,options:i}))},beforeUpdate(e,t,i){e.tooltip&&e.tooltip.initialize(i)},reset(e,t,i){e.tooltip&&e.tooltip.initialize(i)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const i={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",{...i,cancelable:!0}))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",i)}},afterEvent(e,t){if(e.tooltip){const i=t.replay;e.tooltip.handleEvent(t.event,i,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Ai},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},Di=Object.freeze({__proto__:null,Colors:Vt,Decimation:Ht,Filler:ri,Legend:di,SubTitle:gi,Title:ui,Tooltip:Ci});function ji(e,t,i,n){const s=e.indexOf(t);if(-1===s)return((e,t,i,n)=>("string"==typeof t?(i=e.push(t)-1,n.unshift({index:i,label:t})):isNaN(t)&&(i=null),i))(e,t,i,n);return s!==e.lastIndexOf(t)?i:s}function ki(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class Oi extends Re{static id="category";static defaults={ticks:{callback:ki}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:i,label:n}of t)e[i]===n&&e.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,t){if((0,n.k)(e))return null;const i=this.getLabels();return((e,t)=>null===e?null:(0,n.S)(Math.round(e),0,t))(t=isFinite(t)&&i[t]===e?t:ji(i,e,(0,n.v)(t,e),this._addedLabels),i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:i,max:n}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(i=0),t||(n=this.getLabels().length-1)),this.min=i,this.max=n}buildTicks(){const e=this.min,t=this.max,i=this.options.offset,n=[];let s=this.getLabels();s=0===e&&t===s.length-1?s:s.slice(e,t+1),this._valueRange=Math.max(s.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let i=e;i<=t;i++)n.push({value:i});return n}getLabelForValue(e){return ki.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!=typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function Mi(e,t,{horizontal:i,minRotation:s}){const a=(0,n.t)(s),r=(i?Math.sin(a):Math.cos(a))||.001,o=.75*t*(""+e).length;return Math.min(t/r,o)}class Ri extends Re{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return(0,n.k)(e)||("number"==typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:i}=this.getUserBounds();let{min:s,max:a}=this;const r=e=>s=t?s:e,o=e=>a=i?a:e;if(e){const e=(0,n.s)(s),t=(0,n.s)(a);e<0&&t<0?o(0):e>0&&t>0&&r(0)}if(s===a){let t=0===a?1:Math.abs(.05*a);o(a+t),e||r(s-t)}this.min=s,this.max=a}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:i,stepSize:n}=e;return n?(t=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,t>1e3&&(s.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${t} ticks. Limiting to 1000.`),t=1e3)):(t=this.computeTickLimit(),i=i||11),i&&(t=Math.min(i,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const s=function(e,t){const i=[],{bounds:s,step:a,min:r,max:o,precision:l,count:c,maxTicks:d,maxDigits:h,includeBounds:u}=e,p=a||1,g=d-1,{min:m,max:f}=t,b=!(0,n.k)(r),y=!(0,n.k)(o),_=!(0,n.k)(c),v=(f-m)/(h+1);let S,I,E,x,w=(0,n.aH)((f-m)/g/p)*p;if(w<1e-14&&!b&&!y)return[{value:m},{value:f}];x=Math.ceil(f/w)-Math.floor(m/w),x>g&&(w=(0,n.aH)(x*w/g/p)*p),(0,n.k)(l)||(S=Math.pow(10,l),w=Math.ceil(w*S)/S),"ticks"===s?(I=Math.floor(m/w)*w,E=Math.ceil(f/w)*w):(I=m,E=f),b&&y&&a&&(0,n.aI)((o-r)/a,w/1e3)?(x=Math.round(Math.min((o-r)/w,d)),w=(o-r)/x,I=r,E=o):_?(I=b?r:I,E=y?o:E,x=c-1,w=(E-I)/x):(x=(E-I)/w,x=(0,n.aJ)(x,Math.round(x),w/1e3)?Math.round(x):Math.ceil(x));const A=Math.max((0,n.aK)(w),(0,n.aK)(I));S=Math.pow(10,(0,n.k)(l)?A:l),I=Math.round(I*S)/S,E=Math.round(E*S)/S;let P=0;for(b&&(u&&I!==r?(i.push({value:r}),I<r&&P++,(0,n.aJ)(Math.round((I+P*w)*S)/S,r,Mi(r,v,e))&&P++):I<r&&P++);P<x;++P)i.push({value:Math.round((I+P*w)*S)/S});return y&&u&&E!==o?i.length&&(0,n.aJ)(i[i.length-1].value,o,Mi(o,v,e))?i[i.length-1].value=o:i.push({value:o}):y&&E!==o||i.push({value:E}),i}({maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&(0,n.aG)(s,this,"value"),e.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}configure(){const e=this.ticks;let t=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const n=(i-t)/Math.max(e.length-1,1)/2;t-=n,i+=n}this._startValue=t,this._endValue=i,this._valueRange=i-t}getLabelForValue(e){return(0,n.o)(e,this.chart.options.locale,this.options.ticks.format)}}class Li extends Ri{static id="linear";static defaults={ticks:{callback:n.aL.formatters.numeric}};determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=(0,n.g)(e)?e:0,this.max=(0,n.g)(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,i=(0,n.t)(this.options.ticks.minRotation),s=(e?Math.sin(i):Math.cos(i))||.001,a=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,a.lineHeight/s))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const Ni=e=>Math.floor((0,n.aM)(e)),zi=(e,t)=>Math.pow(10,Ni(e)+t);function Fi(e){return 1===e/Math.pow(10,Ni(e))}function Vi(e,t,i){const n=Math.pow(10,i),s=Math.floor(e/n);return Math.ceil(t/n)-s}function Bi(e,{min:t,max:i}){t=(0,n.O)(e.min,t);const s=[],a=Ni(t);let r=function(e,t){let i=Ni(t-e);for(;Vi(e,t,i)>10;)i++;for(;Vi(e,t,i)<10;)i--;return Math.min(i,Ni(e))}(t,i),o=r<0?Math.pow(10,Math.abs(r)):1;const l=Math.pow(10,r),c=a>r?Math.pow(10,a):0,d=Math.round((t-c)*o)/o,h=Math.floor((t-c)/l/10)*l*10;let u=Math.floor((d-h)/Math.pow(10,r)),p=(0,n.O)(e.min,Math.round((c+h+u*Math.pow(10,r))*o)/o);for(;p<i;)s.push({value:p,major:Fi(p),significand:u}),u>=10?u=u<15?15:20:u++,u>=20&&(r++,u=2,o=r>=0?1:o),p=Math.round((c+h+u*Math.pow(10,r))*o)/o;const g=(0,n.O)(e.max,p);return s.push({value:g,major:Fi(g),significand:u}),s}class Wi extends Re{static id="logarithmic";static defaults={ticks:{callback:n.aL.formatters.logarithmic,major:{enabled:!0}}};constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const i=Ri.prototype.parse.apply(this,[e,t]);if(0!==i)return(0,n.g)(i)&&i>0?i:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=(0,n.g)(e)?Math.max(0,e):null,this.max=(0,n.g)(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!(0,n.g)(this._userMin)&&(this.min=e===zi(this.min,0)?zi(this.min,-1):zi(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let i=this.min,n=this.max;const s=t=>i=e?i:t,a=e=>n=t?n:e;i===n&&(i<=0?(s(1),a(10)):(s(zi(i,-1)),a(zi(n,1)))),i<=0&&s(zi(n,-1)),n<=0&&a(zi(i,1)),this.min=i,this.max=n}buildTicks(){const e=this.options,t=Bi({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&(0,n.aG)(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}getLabelForValue(e){return void 0===e?"0":(0,n.o)(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=(0,n.aM)(e),this._valueRange=(0,n.aM)(this.max)-(0,n.aM)(e)}getPixelForValue(e){return void 0!==e&&0!==e||(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:((0,n.aM)(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function Hi(e){const t=e.ticks;if(t.display&&e.display){const e=(0,n.E)(t.backdropPadding);return(0,n.v)(t.font&&t.font.size,n.d.font.size)+e.height}return 0}function Gi(e,t,i,n,s){return e===n||e===s?{start:t-i/2,end:t+i/2}:e<n||e>s?{start:t-i,end:t}:{start:t,end:t+i}}function Ui(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},i=Object.assign({},t),s=[],a=[],r=e._pointLabels.length,o=e.options.pointLabels,l=o.centerPointLabels?n.P/r:0;for(let u=0;u<r;u++){const r=o.setContext(e.getPointLabelContext(u));a[u]=r.padding;const p=e.getPointPosition(u,e.drawingArea+a[u],l),g=(0,n.a0)(r.font),m=(c=e.ctx,d=g,h=e._pointLabels[u],h=(0,n.b)(h)?h:[h],{w:(0,n.aN)(c,d.string,h),h:h.length*d.lineHeight});s[u]=m;const f=(0,n.ay)(e.getIndexAngle(u)+l),b=Math.round((0,n.U)(f));Yi(i,t,f,Gi(b,p.x,m.w,0,180),Gi(b,p.y,m.h,90,270))}var c,d,h;e.setCenterPoint(t.l-i.l,i.r-t.r,t.t-i.t,i.b-t.b),e._pointLabelItems=function(e,t,i){const s=[],a=e._pointLabels.length,r=e.options,o=Hi(r)/2,l=e.drawingArea,c=r.pointLabels.centerPointLabels?n.P/a:0;for(let r=0;r<a;r++){const a=e.getPointPosition(r,l+o+i[r],c),d=Math.round((0,n.U)((0,n.ay)(a.angle+n.H))),h=t[r],u=qi(a.y,h.h,d),p=$i(d),g=Ki(a.x,h.w,p);s.push({x:a.x,y:u,textAlign:p,left:g,top:u,right:g+h.w,bottom:u+h.h})}return s}(e,s,a)}function Yi(e,t,i,n,s){const a=Math.abs(Math.sin(i)),r=Math.abs(Math.cos(i));let o=0,l=0;n.start<t.l?(o=(t.l-n.start)/a,e.l=Math.min(e.l,t.l-o)):n.end>t.r&&(o=(n.end-t.r)/a,e.r=Math.max(e.r,t.r+o)),s.start<t.t?(l=(t.t-s.start)/r,e.t=Math.min(e.t,t.t-l)):s.end>t.b&&(l=(s.end-t.b)/r,e.b=Math.max(e.b,t.b+l))}function $i(e){return 0===e||180===e?"center":e<180?"left":"right"}function Ki(e,t,i){return"right"===i?e-=t:"center"===i&&(e-=t/2),e}function qi(e,t,i){return 90===i||270===i?e-=t/2:(i>270||i<90)&&(e-=t),e}function Xi(e,t,i,s){const{ctx:a}=e;if(i)a.arc(e.xCenter,e.yCenter,t,0,n.T);else{let i=e.getPointPosition(0,t);a.moveTo(i.x,i.y);for(let n=1;n<s;n++)i=e.getPointPosition(n,t),a.lineTo(i.x,i.y)}}class Qi extends Ri{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:n.aL.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=(0,n.E)(Hi(this.options)/2),t=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(t,i)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=(0,n.g)(e)&&!isNaN(e)?e:0,this.max=(0,n.g)(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Hi(this.options))}generateTickLabels(e){Ri.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map(((e,t)=>{const i=(0,n.Q)(this.options.pointLabels.callback,[e,t],this);return i||0===i?i:""})).filter(((e,t)=>this.chart.getDataVisibility(t)))}fit(){const e=this.options;e.display&&e.pointLabels.display?Ui(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,i,n){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((i-n)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,i,n))}getIndexAngle(e){const t=n.T/(this._pointLabels.length||1),i=this.options.startAngle||0;return(0,n.ay)(e*t+(0,n.t)(i))}getDistanceFromCenterForValue(e){if((0,n.k)(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if((0,n.k)(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const i=t[e];return function(e,t,i){return(0,n.j)(e,{label:i,index:t,type:"pointLabel"})}(this.getContext(),e,i)}}getPointPosition(e,t,i=0){const s=this.getIndexAngle(e)-n.H+i;return{x:Math.cos(s)*t+this.xCenter,y:Math.sin(s)*t+this.yCenter,angle:s}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:i,right:n,bottom:s}=this._pointLabelItems[e];return{left:t,top:i,right:n,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const i=this.ctx;i.save(),i.beginPath(),Xi(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:i,grid:s,border:a}=t,r=this._pointLabels.length;let o,l,c;if(t.pointLabels.display&&function(e,t){const{ctx:i,options:{pointLabels:s}}=e;for(let a=t-1;a>=0;a--){const t=s.setContext(e.getPointLabelContext(a)),r=(0,n.a0)(t.font),{x:o,y:l,textAlign:c,left:d,top:h,right:u,bottom:p}=e._pointLabelItems[a],{backdropColor:g}=t;if(!(0,n.k)(g)){const e=(0,n.aw)(t.borderRadius),s=(0,n.E)(t.backdropPadding);i.fillStyle=g;const a=d-s.left,r=h-s.top,o=u-d+s.width,l=p-h+s.height;Object.values(e).some((e=>0!==e))?(i.beginPath(),(0,n.au)(i,{x:a,y:r,w:o,h:l,radius:e}),i.fill()):i.fillRect(a,r,o,l)}(0,n.Z)(i,e._pointLabels[a],o,l+r.lineHeight/2,r,{color:t.color,textAlign:c,textBaseline:"middle"})}}(this,r),s.display&&this.ticks.forEach(((e,t)=>{if(0!==t){l=this.getDistanceFromCenterForValue(e.value);const i=this.getContext(t),n=s.setContext(i),o=a.setContext(i);!function(e,t,i,n,s){const a=e.ctx,r=t.circular,{color:o,lineWidth:l}=t;!r&&!n||!o||!l||i<0||(a.save(),a.strokeStyle=o,a.lineWidth=l,a.setLineDash(s.dash),a.lineDashOffset=s.dashOffset,a.beginPath(),Xi(e,i,r,n),a.closePath(),a.stroke(),a.restore())}(this,n,l,r,o)}})),i.display){for(e.save(),o=r-1;o>=0;o--){const n=i.setContext(this.getPointLabelContext(o)),{color:s,lineWidth:a}=n;a&&s&&(e.lineWidth=a,e.strokeStyle=s,e.setLineDash(n.borderDash),e.lineDashOffset=n.borderDashOffset,l=this.getDistanceFromCenterForValue(t.ticks.reverse?this.min:this.max),c=this.getPointPosition(o,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,i=t.ticks;if(!i.display)return;const s=this.getIndexAngle(0);let a,r;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(s),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach(((s,o)=>{if(0===o&&!t.reverse)return;const l=i.setContext(this.getContext(o)),c=(0,n.a0)(l.font);if(a=this.getDistanceFromCenterForValue(this.ticks[o].value),l.showLabelBackdrop){e.font=c.string,r=e.measureText(s.label).width,e.fillStyle=l.backdropColor;const t=(0,n.E)(l.backdropPadding);e.fillRect(-r/2-t.left,-a-c.size/2-t.top,r+t.width,c.size+t.height)}(0,n.Z)(e,s.label,0,-a,c,{color:l.color})})),e.restore()}drawTitle(){}}const Zi={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ji=Object.keys(Zi);function en(e,t){return e-t}function tn(e,t){if((0,n.k)(t))return null;const i=e._adapter,{parser:s,round:a,isoWeekday:r}=e._parseOpts;let o=t;return"function"==typeof s&&(o=s(o)),(0,n.g)(o)||(o="string"==typeof s?i.parse(o,s):i.parse(o)),null===o?null:(a&&(o="week"!==a||!(0,n.x)(r)&&!0!==r?i.startOf(o,a):i.startOf(o,"isoWeek",r)),+o)}function nn(e,t,i,n){const s=Ji.length;for(let a=Ji.indexOf(e);a<s-1;++a){const e=Zi[Ji[a]],s=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((i-t)/(s*e.size))<=n)return Ji[a]}return Ji[s-1]}function sn(e,t,i){if(i){if(i.length){const{lo:s,hi:a}=(0,n.aP)(i,t);e[i[s]>=t?i[s]:i[a]]=!0}}else e[t]=!0}function an(e,t,i){const n=[],s={},a=t.length;let r,o;for(r=0;r<a;++r)o=t[r],s[o]=r,n.push({value:o,major:!1});return 0!==a&&i?function(e,t,i,n){const s=e._adapter,a=+s.startOf(t[0].value,n),r=t[t.length-1].value;let o,l;for(o=a;o<=r;o=+s.add(o,1,n))l=i[o],l>=0&&(t[l].major=!0);return t}(e,n,s,i):n}class rn extends Re{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const i=e.time||(e.time={}),s=this._adapter=new W._date(e.adapters.date);s.init(t),(0,n.ab)(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:tn(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,i=e.time.unit||"day";let{min:s,max:a,minDefined:r,maxDefined:o}=this.getUserBounds();function l(e){r||isNaN(e.min)||(s=Math.min(s,e.min)),o||isNaN(e.max)||(a=Math.max(a,e.max))}r&&o||(l(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||l(this.getMinMax(!1))),s=(0,n.g)(s)&&!isNaN(s)?s:+t.startOf(Date.now(),i),a=(0,n.g)(a)&&!isNaN(a)?a:+t.endOf(Date.now(),i)+1,this.min=Math.min(s,a-1),this.max=Math.max(s+1,a)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],i=e[e.length-1]),{min:t,max:i}}buildTicks(){const e=this.options,t=e.time,i=e.ticks,s="labels"===i.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const a=this.min,r=this.max,o=(0,n.aO)(s,a,r);return this._unit=t.unit||(i.autoSkip?nn(t.minUnit,this.min,this.max,this._getLabelCapacity(a)):function(e,t,i,n,s){for(let a=Ji.length-1;a>=Ji.indexOf(i);a--){const i=Ji[a];if(Zi[i].common&&e._adapter.diff(s,n,i)>=t-1)return i}return Ji[i?Ji.indexOf(i):0]}(this,o.length,t.minUnit,this.min,this.max)),this._majorUnit=i.major.enabled&&"year"!==this._unit?function(e){for(let t=Ji.indexOf(e)+1,i=Ji.length;t<i;++t)if(Zi[Ji[t]].common)return Ji[t]}(this._unit):void 0,this.initOffsets(s),e.reverse&&o.reverse(),an(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map((e=>+e.value)))}initOffsets(e=[]){let t,i,s=0,a=0;this.options.offset&&e.length&&(t=this.getDecimalForValue(e[0]),s=1===e.length?1-t:(this.getDecimalForValue(e[1])-t)/2,i=this.getDecimalForValue(e[e.length-1]),a=1===e.length?i:(i-this.getDecimalForValue(e[e.length-2]))/2);const r=e.length<3?.5:.25;s=(0,n.S)(s,0,r),a=(0,n.S)(a,0,r),this._offsets={start:s,end:a,factor:1/(s+1+a)}}_generate(){const e=this._adapter,t=this.min,i=this.max,s=this.options,a=s.time,r=a.unit||nn(a.minUnit,t,i,this._getLabelCapacity(t)),o=(0,n.v)(s.ticks.stepSize,1),l="week"===r&&a.isoWeekday,c=(0,n.x)(l)||!0===l,d={};let h,u,p=t;if(c&&(p=+e.startOf(p,"isoWeek",l)),p=+e.startOf(p,c?"day":r),e.diff(i,t,r)>1e5*o)throw new Error(t+" and "+i+" are too far apart with stepSize of "+o+" "+r);const g="data"===s.ticks.source&&this.getDataTimestamps();for(h=p,u=0;h<i;h=+e.add(h,o,r),u++)sn(d,h,g);return h!==i&&"ticks"!==s.bounds&&1!==u||sn(d,h,g),Object.keys(d).sort(((e,t)=>e-t)).map((e=>+e))}getLabelForValue(e){const t=this._adapter,i=this.options.time;return i.tooltipFormat?t.format(e,i.tooltipFormat):t.format(e,i.displayFormats.datetime)}format(e,t){const i=this.options.time.displayFormats,n=this._unit,s=t||i[n];return this._adapter.format(e,s)}_tickFormatFunction(e,t,i,s){const a=this.options,r=a.ticks.callback;if(r)return(0,n.Q)(r,[e,t,i],this);const o=a.time.displayFormats,l=this._unit,c=this._majorUnit,d=l&&o[l],h=c&&o[c],u=i[t],p=c&&h&&u&&u.major;return this._adapter.format(e,s||(p?h:d))}generateTickLabels(e){let t,i,n;for(t=0,i=e.length;t<i;++t)n=e[t],n.label=this._tickFormatFunction(n.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+i)*t.factor)}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,i=this.ctx.measureText(e).width,s=(0,n.t)(this.isHorizontal()?t.maxRotation:t.minRotation),a=Math.cos(s),r=Math.sin(s),o=this._resolveTickFontOptions(0).size;return{w:i*a+o*r,h:i*r+o*a}}_getLabelCapacity(e){const t=this.options.time,i=t.displayFormats,n=i[t.unit]||i.millisecond,s=this._tickFormatFunction(e,0,an(this,[e],this._majorUnit),n),a=this._getLabelSize(s),r=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return r>0?r:1}getDataTimestamps(){let e,t,i=this._cache.data||[];if(i.length)return i;const n=this.getMatchingVisibleMetas();if(this._normalized&&n.length)return this._cache.data=n[0].controller.getAllParsedValues(this);for(e=0,t=n.length;e<t;++e)i=i.concat(n[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(i)}getLabelTimestamps(){const e=this._cache.labels||[];let t,i;if(e.length)return e;const n=this.getLabels();for(t=0,i=n.length;t<i;++t)e.push(tn(this,n[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return(0,n._)(e.sort(en))}}function on(e,t,i){let s,a,r,o,l=0,c=e.length-1;i?(t>=e[l].pos&&t<=e[c].pos&&({lo:l,hi:c}=(0,n.B)(e,"pos",t)),({pos:s,time:r}=e[l]),({pos:a,time:o}=e[c])):(t>=e[l].time&&t<=e[c].time&&({lo:l,hi:c}=(0,n.B)(e,"time",t)),({time:s,pos:r}=e[l]),({time:a,pos:o}=e[c]));const d=a-s;return d?r+(o-r)*(t-s)/d:r}class ln extends rn{static id="timeseries";static defaults=rn.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=on(t,this.min),this._tableRange=on(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:i}=this,n=[],s=[];let a,r,o,l,c;for(a=0,r=e.length;a<r;++a)l=e[a],l>=t&&l<=i&&n.push(l);if(n.length<2)return[{time:t,pos:0},{time:i,pos:1}];for(a=0,r=n.length;a<r;++a)c=n[a+1],o=n[a-1],l=n[a],Math.round((c+o)/2)!==l&&s.push({time:l,pos:a/(r-1)});return s}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),i=this.getLabelTimestamps();return e=t.length&&i.length?this.normalize(t.concat(i)):t.length?t:i,e=this._cache.all=e,e}getDecimalForValue(e){return(on(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return on(this._table,i*this._tableRange+this._minPos,!0)}}var cn=Object.freeze({__proto__:null,CategoryScale:Oi,LinearScale:Li,LogarithmicScale:Wi,RadialLinearScale:Qi,TimeScale:rn,TimeSeriesScale:ln});const dn=[F,Ot,Di,cn]},"./node_modules/chart.js/dist/chunks/helpers.segment.js":function(e,t,i){i.r(t),i.d(t,{$:function(){return Qe},A:function(){return le},B:function(){return oe},C:function(){return qe},D:function(){return Z},E:function(){return dt},F:function(){return f},G:function(){return Ut},H:function(){return z},I:function(){return Nt},J:function(){return Kt},K:function(){return $t},L:function(){return fe},M:function(){return Lt},N:function(){return U},O:function(){return h},P:function(){return O},Q:function(){return m},R:function(){return pt},S:function(){return ne},T:function(){return M},U:function(){return X},V:function(){return He},W:function(){return se},X:function(){return Ue},Y:function(){return Xe},Z:function(){return et},_:function(){return pe},a:function(){return ut},a$:function(){return ge},a0:function(){return ht},a1:function(){return ye},a2:function(){return _e},a3:function(){return Le},a4:function(){return S},a5:function(){return T},a6:function(){return Ne},a7:function(){return D},a8:function(){return ft},a9:function(){return mt},aA:function(){return Jt},aB:function(){return ve},aC:function(){return ei},aD:function(){return Ke},aE:function(){return J},aF:function(){return a},aG:function(){return K},aH:function(){return G},aI:function(){return $},aJ:function(){return H},aK:function(){return Q},aL:function(){return Re},aM:function(){return B},aN:function(){return Ge},aO:function(){return ce},aP:function(){return re},aQ:function(){return Pe},aR:function(){return Ce},aS:function(){return y},aT:function(){return v},aU:function(){return E},aV:function(){return x},aW:function(){return A},aX:function(){return We},aY:function(){return kt},aZ:function(){return Ot},a_:function(){return Vt},aa:function(){return bt},ab:function(){return I},ac:function(){return r},ad:function(){return be},ae:function(){return Yt},af:function(){return Ye},ag:function(){return j},ah:function(){return b},ai:function(){return k},aj:function(){return ae},ak:function(){return ot},al:function(){return Rt},am:function(){return ai},an:function(){return si},ao:function(){return Xt},ap:function(){return Qt},aq:function(){return qt},ar:function(){return Ze},as:function(){return Je},at:function(){return $e},au:function(){return nt},av:function(){return lt},aw:function(){return ct},ax:function(){return ni},ay:function(){return te},az:function(){return Zt},b:function(){return l},b0:function(){return rt},b1:function(){return R},b2:function(){return L},b3:function(){return N},b4:function(){return F},b5:function(){return V},b6:function(){return ee},c:function(){return Te},d:function(){return Be},e:function(){return Ae},f:function(){return P},g:function(){return d},h:function(){return C},i:function(){return c},j:function(){return gt},k:function(){return o},l:function(){return he},m:function(){return p},n:function(){return g},o:function(){return Oe},p:function(){return ie},q:function(){return Se},r:function(){return me},s:function(){return W},t:function(){return q},u:function(){return ue},v:function(){return u},w:function(){return Ie},x:function(){return Y},y:function(){return Tt},z:function(){return Ht}});var n=i("./node_modules/@kurkle/color/dist/color.esm.js"),s=i("../../node_modules/console-browserify/index.js");function a(){}const r=(()=>{let e=0;return()=>e++})();function o(e){return null==e}function l(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function c(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function d(e){return("number"==typeof e||e instanceof Number)&&isFinite(+e)}function h(e,t){return d(e)?e:t}function u(e,t){return void 0===e?t:e}const p=(e,t)=>"string"==typeof e&&e.endsWith("%")?parseFloat(e)/100:+e/t,g=(e,t)=>"string"==typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function m(e,t,i){if(e&&"function"==typeof e.call)return e.apply(i,t)}function f(e,t,i,n){let s,a,r;if(l(e))if(a=e.length,n)for(s=a-1;s>=0;s--)t.call(i,e[s],s);else for(s=0;s<a;s++)t.call(i,e[s],s);else if(c(e))for(r=Object.keys(e),a=r.length,s=0;s<a;s++)t.call(i,e[r[s]],r[s])}function b(e,t){let i,n,s,a;if(!e||!t||e.length!==t.length)return!1;for(i=0,n=e.length;i<n;++i)if(s=e[i],a=t[i],s.datasetIndex!==a.datasetIndex||s.index!==a.index)return!1;return!0}function y(e){if(l(e))return e.map(y);if(c(e)){const t=Object.create(null),i=Object.keys(e),n=i.length;let s=0;for(;s<n;++s)t[i[s]]=y(e[i[s]]);return t}return e}function _(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function v(e,t,i,n){if(!_(e))return;const s=t[e],a=i[e];c(s)&&c(a)?S(s,a,n):t[e]=y(a)}function S(e,t,i){const n=l(t)?t:[t],s=n.length;if(!c(e))return e;const a=(i=i||{}).merger||v;let r;for(let t=0;t<s;++t){if(r=n[t],!c(r))continue;const s=Object.keys(r);for(let t=0,n=s.length;t<n;++t)a(s[t],e,r,i)}return e}function I(e,t){return S(e,t,{merger:E})}function E(e,t,i){if(!_(e))return;const n=t[e],s=i[e];c(n)&&c(s)?I(n,s):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=y(s))}function x(e,t,i,n){void 0!==t&&s.warn(e+': "'+i+'" is deprecated. Please use "'+n+'" instead')}const w={"":e=>e,x:e=>e.x,y:e=>e.y};function A(e){const t=e.split("."),i=[];let n="";for(const e of t)n+=e,n.endsWith("\\")?n=n.slice(0,-1)+".":(i.push(n),n="");return i}function P(e,t){const i=w[t]||(w[t]=function(e){const t=A(e);return e=>{for(const i of t){if(""===i)break;e=e&&e[i]}return e}}(t));return i(e)}function T(e){return e.charAt(0).toUpperCase()+e.slice(1)}const C=e=>void 0!==e,D=e=>"function"==typeof e,j=(e,t)=>{if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0};function k(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}const O=Math.PI,M=2*O,R=M+O,L=Number.POSITIVE_INFINITY,N=O/180,z=O/2,F=O/4,V=2*O/3,B=Math.log10,W=Math.sign;function H(e,t,i){return Math.abs(e-t)<i}function G(e){const t=Math.round(e);e=H(e,t,e/1e3)?t:e;const i=Math.pow(10,Math.floor(B(e))),n=e/i;return(n<=1?1:n<=2?2:n<=5?5:10)*i}function U(e){const t=[],i=Math.sqrt(e);let n;for(n=1;n<i;n++)e%n==0&&(t.push(n),t.push(e/n));return i===(0|i)&&t.push(i),t.sort(((e,t)=>e-t)).pop(),t}function Y(e){return!isNaN(parseFloat(e))&&isFinite(e)}function $(e,t){const i=Math.round(e);return i-t<=e&&i+t>=e}function K(e,t,i){let n,s,a;for(n=0,s=e.length;n<s;n++)a=e[n][i],isNaN(a)||(t.min=Math.min(t.min,a),t.max=Math.max(t.max,a))}function q(e){return e*(O/180)}function X(e){return e*(180/O)}function Q(e){if(!d(e))return;let t=1,i=0;for(;Math.round(e*t)/t!==e;)t*=10,i++;return i}function Z(e,t){const i=t.x-e.x,n=t.y-e.y,s=Math.sqrt(i*i+n*n);let a=Math.atan2(n,i);return a<-.5*O&&(a+=M),{angle:a,distance:s}}function J(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function ee(e,t){return(e-t+R)%M-O}function te(e){return(e%M+M)%M}function ie(e,t,i,n){const s=te(e),a=te(t),r=te(i),o=te(a-s),l=te(r-s),c=te(s-a),d=te(s-r);return s===a||s===r||n&&a===r||o>l&&c<d}function ne(e,t,i){return Math.max(t,Math.min(i,e))}function se(e){return ne(e,-32768,32767)}function ae(e,t,i,n=1e-6){return e>=Math.min(t,i)-n&&e<=Math.max(t,i)+n}function re(e,t,i){i=i||(i=>e[i]<t);let n,s=e.length-1,a=0;for(;s-a>1;)n=a+s>>1,i(n)?a=n:s=n;return{lo:a,hi:s}}const oe=(e,t,i,n)=>re(e,i,n?n=>{const s=e[n][t];return s<i||s===i&&e[n+1][t]===i}:n=>e[n][t]<i),le=(e,t,i)=>re(e,i,(n=>e[n][t]>=i));function ce(e,t,i){let n=0,s=e.length;for(;n<s&&e[n]<t;)n++;for(;s>n&&e[s-1]>i;)s--;return n>0||s<e.length?e.slice(n,s):e}const de=["push","pop","shift","splice","unshift"];function he(e,t){e._chartjs?e._chartjs.listeners.push(t):(Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),de.forEach((t=>{const i="_onData"+T(t),n=e[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value(...t){const s=n.apply(this,t);return e._chartjs.listeners.forEach((e=>{"function"==typeof e[i]&&e[i](...t)})),s}})})))}function ue(e,t){const i=e._chartjs;if(!i)return;const n=i.listeners,s=n.indexOf(t);-1!==s&&n.splice(s,1),n.length>0||(de.forEach((t=>{delete e[t]})),delete e._chartjs)}function pe(e){const t=new Set;let i,n;for(i=0,n=e.length;i<n;++i)t.add(e[i]);return t.size===n?e:Array.from(t)}function ge(e,t,i){return t+" "+e+"px "+i}const me="undefined"==typeof window?function(e){return e()}:window.requestAnimationFrame;function fe(e,t){let i=[],n=!1;return function(...s){i=s,n||(n=!0,me.call(window,(()=>{n=!1,e.apply(t,i)})))}}function be(e,t){let i;return function(...n){return t?(clearTimeout(i),i=setTimeout(e,t,n)):e.apply(this,n),t}}const ye=e=>"start"===e?"left":"end"===e?"right":"center",_e=(e,t,i)=>"start"===e?t:"end"===e?i:(t+i)/2,ve=(e,t,i,n)=>e===(n?"left":"right")?i:"center"===e?(t+i)/2:t;function Se(e,t,i){const n=t.length;let s=0,a=n;if(e._sorted){const{iScale:r,_parsed:o}=e,l=r.axis,{min:c,max:d,minDefined:h,maxDefined:u}=r.getUserBounds();h&&(s=ne(Math.min(oe(o,r.axis,c).lo,i?n:oe(t,l,r.getPixelForValue(c)).lo),0,n-1)),a=u?ne(Math.max(oe(o,r.axis,d,!0).hi+1,i?0:oe(t,l,r.getPixelForValue(d),!0).hi+1),s,n)-s:n-s}return{start:s,count:a}}function Ie(e){const{xScale:t,yScale:i,_scaleRanges:n}=e,s={xmin:t.min,xmax:t.max,ymin:i.min,ymax:i.max};if(!n)return e._scaleRanges=s,!0;const a=n.xmin!==t.min||n.xmax!==t.max||n.ymin!==i.min||n.ymax!==i.max;return Object.assign(n,s),a}const Ee=e=>0===e||1===e,xe=(e,t,i)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*M/i),we=(e,t,i)=>Math.pow(2,-10*e)*Math.sin((e-t)*M/i)+1,Ae={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*z),easeOutSine:e=>Math.sin(e*z),easeInOutSine:e=>-.5*(Math.cos(O*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>Ee(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Ee(e)?e:xe(e,.075,.3),easeOutElastic:e=>Ee(e)?e:we(e,.075,.3),easeInOutElastic(e){const t=.1125;return Ee(e)?e:e<.5?.5*xe(2*e,t,.45):.5+.5*we(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-Ae.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,i=2.75;return e<1/i?t*e*e:e<2/i?t*(e-=1.5/i)*e+.75:e<2.5/i?t*(e-=2.25/i)*e+.9375:t*(e-=2.625/i)*e+.984375},easeInOutBounce:e=>e<.5?.5*Ae.easeInBounce(2*e):.5*Ae.easeOutBounce(2*e-1)+.5};function Pe(e){if(e&&"object"==typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function Te(e){return Pe(e)?e:new n.Color(e)}function Ce(e){return Pe(e)?e:new n.Color(e).saturate(.5).darken(.1).hexString()}const De=["x","y","borderWidth","radius","tension"],je=["color","borderColor","backgroundColor"];const ke=new Map;function Oe(e,t,i){return function(e,t){t=t||{};const i=e+JSON.stringify(t);let n=ke.get(i);return n||(n=new Intl.NumberFormat(e,t),ke.set(i,n)),n}(t,i).format(e)}const Me={values:e=>l(e)?e:""+e,numeric(e,t,i){if(0===e)return"0";const n=this.chart.options.locale;let s,a=e;if(i.length>1){const t=Math.max(Math.abs(i[0].value),Math.abs(i[i.length-1].value));(t<1e-4||t>1e15)&&(s="scientific"),a=function(e,t){let i=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(i)>=1&&e!==Math.floor(e)&&(i=e-Math.floor(e));return i}(e,i)}const r=B(Math.abs(a)),o=Math.max(Math.min(-1*Math.floor(r),20),0),l={notation:s,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(l,this.options.ticks.format),Oe(e,n,l)},logarithmic(e,t,i){if(0===e)return"0";const n=i[t].significand||e/Math.pow(10,Math.floor(B(e)));return[1,2,3,5,10,15].includes(n)||t>.8*i.length?Me.numeric.call(this,e,t,i):""}};var Re={formatters:Me};const Le=Object.create(null),Ne=Object.create(null);function ze(e,t){if(!t)return e;const i=t.split(".");for(let t=0,n=i.length;t<n;++t){const n=i[t];e=e[n]||(e[n]=Object.create(null))}return e}function Fe(e,t,i){return"string"==typeof t?S(ze(e,t),i):S(ze(e,""),t)}class Ve{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>Ce(t.backgroundColor),this.hoverBorderColor=(e,t)=>Ce(t.borderColor),this.hoverColor=(e,t)=>Ce(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return Fe(this,e,t)}get(e){return ze(this,e)}describe(e,t){return Fe(Ne,e,t)}override(e,t){return Fe(Le,e,t)}route(e,t,i,n){const s=ze(this,e),a=ze(this,i),r="_"+t;Object.defineProperties(s,{[r]:{value:s[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[r],t=a[n];return c(e)?Object.assign({},t,e):u(e,t)},set(e){this[r]=e}}})}apply(e){e.forEach((e=>e(this)))}}var Be=new Ve({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:je},numbers:{type:"number",properties:De}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Re.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function We(e){return!e||o(e.size)||o(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function He(e,t,i,n,s){let a=t[s];return a||(a=t[s]=e.measureText(s).width,i.push(s)),a>n&&(n=a),n}function Ge(e,t,i,n){let s=(n=n||{}).data=n.data||{},a=n.garbageCollect=n.garbageCollect||[];n.font!==t&&(s=n.data={},a=n.garbageCollect=[],n.font=t),e.save(),e.font=t;let r=0;const o=i.length;let c,d,h,u,p;for(c=0;c<o;c++)if(u=i[c],null!=u&&!0!==l(u))r=He(e,s,a,r,u);else if(l(u))for(d=0,h=u.length;d<h;d++)p=u[d],null==p||l(p)||(r=He(e,s,a,r,p));e.restore();const g=a.length/2;if(g>i.length){for(c=0;c<g;c++)delete s[a[c]];a.splice(0,g)}return r}function Ue(e,t,i){const n=e.currentDevicePixelRatio,s=0!==i?Math.max(i/2,.5):0;return Math.round((t-s)*n)/n+s}function Ye(e,t){(t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore()}function $e(e,t,i,n){Ke(e,t,i,n,null)}function Ke(e,t,i,n,s){let a,r,o,l,c,d,h,u;const p=t.pointStyle,g=t.rotation,m=t.radius;let f=(g||0)*N;if(p&&"object"==typeof p&&(a=p.toString(),"[object HTMLImageElement]"===a||"[object HTMLCanvasElement]"===a))return e.save(),e.translate(i,n),e.rotate(f),e.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),void e.restore();if(!(isNaN(m)||m<=0)){switch(e.beginPath(),p){default:s?e.ellipse(i,n,s/2,m,0,0,M):e.arc(i,n,m,0,M),e.closePath();break;case"triangle":d=s?s/2:m,e.moveTo(i+Math.sin(f)*d,n-Math.cos(f)*m),f+=V,e.lineTo(i+Math.sin(f)*d,n-Math.cos(f)*m),f+=V,e.lineTo(i+Math.sin(f)*d,n-Math.cos(f)*m),e.closePath();break;case"rectRounded":c=.516*m,l=m-c,r=Math.cos(f+F)*l,h=Math.cos(f+F)*(s?s/2-c:l),o=Math.sin(f+F)*l,u=Math.sin(f+F)*(s?s/2-c:l),e.arc(i-h,n-o,c,f-O,f-z),e.arc(i+u,n-r,c,f-z,f),e.arc(i+h,n+o,c,f,f+z),e.arc(i-u,n+r,c,f+z,f+O),e.closePath();break;case"rect":if(!g){l=Math.SQRT1_2*m,d=s?s/2:l,e.rect(i-d,n-l,2*d,2*l);break}f+=F;case"rectRot":h=Math.cos(f)*(s?s/2:m),r=Math.cos(f)*m,o=Math.sin(f)*m,u=Math.sin(f)*(s?s/2:m),e.moveTo(i-h,n-o),e.lineTo(i+u,n-r),e.lineTo(i+h,n+o),e.lineTo(i-u,n+r),e.closePath();break;case"crossRot":f+=F;case"cross":h=Math.cos(f)*(s?s/2:m),r=Math.cos(f)*m,o=Math.sin(f)*m,u=Math.sin(f)*(s?s/2:m),e.moveTo(i-h,n-o),e.lineTo(i+h,n+o),e.moveTo(i+u,n-r),e.lineTo(i-u,n+r);break;case"star":h=Math.cos(f)*(s?s/2:m),r=Math.cos(f)*m,o=Math.sin(f)*m,u=Math.sin(f)*(s?s/2:m),e.moveTo(i-h,n-o),e.lineTo(i+h,n+o),e.moveTo(i+u,n-r),e.lineTo(i-u,n+r),f+=F,h=Math.cos(f)*(s?s/2:m),r=Math.cos(f)*m,o=Math.sin(f)*m,u=Math.sin(f)*(s?s/2:m),e.moveTo(i-h,n-o),e.lineTo(i+h,n+o),e.moveTo(i+u,n-r),e.lineTo(i-u,n+r);break;case"line":r=s?s/2:Math.cos(f)*m,o=Math.sin(f)*m,e.moveTo(i-r,n-o),e.lineTo(i+r,n+o);break;case"dash":e.moveTo(i,n),e.lineTo(i+Math.cos(f)*(s?s/2:m),n+Math.sin(f)*m);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function qe(e,t,i){return i=i||.5,!t||e&&e.x>t.left-i&&e.x<t.right+i&&e.y>t.top-i&&e.y<t.bottom+i}function Xe(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Qe(e){e.restore()}function Ze(e,t,i,n,s){if(!t)return e.lineTo(i.x,i.y);if("middle"===s){const n=(t.x+i.x)/2;e.lineTo(n,t.y),e.lineTo(n,i.y)}else"after"===s!=!!n?e.lineTo(t.x,i.y):e.lineTo(i.x,t.y);e.lineTo(i.x,i.y)}function Je(e,t,i,n){if(!t)return e.lineTo(i.x,i.y);e.bezierCurveTo(n?t.cp1x:t.cp2x,n?t.cp1y:t.cp2y,n?i.cp2x:i.cp1x,n?i.cp2y:i.cp1y,i.x,i.y)}function et(e,t,i,n,s,a={}){const r=l(t)?t:[t],c=a.strokeWidth>0&&""!==a.strokeColor;let d,h;for(e.save(),e.font=s.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]);o(t.rotation)||e.rotate(t.rotation);t.color&&(e.fillStyle=t.color);t.textAlign&&(e.textAlign=t.textAlign);t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,a),d=0;d<r.length;++d)h=r[d],a.backdrop&&it(e,a.backdrop),c&&(a.strokeColor&&(e.strokeStyle=a.strokeColor),o(a.strokeWidth)||(e.lineWidth=a.strokeWidth),e.strokeText(h,i,n,a.maxWidth)),e.fillText(h,i,n,a.maxWidth),tt(e,i,n,h,a),n+=s.lineHeight;e.restore()}function tt(e,t,i,n,s){if(s.strikethrough||s.underline){const a=e.measureText(n),r=t-a.actualBoundingBoxLeft,o=t+a.actualBoundingBoxRight,l=i-a.actualBoundingBoxAscent,c=i+a.actualBoundingBoxDescent,d=s.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=s.decorationWidth||2,e.moveTo(r,d),e.lineTo(o,d),e.stroke()}}function it(e,t){const i=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=i}function nt(e,t){const{x:i,y:n,w:s,h:a,radius:r}=t;e.arc(i+r.topLeft,n+r.topLeft,r.topLeft,-z,O,!0),e.lineTo(i,n+a-r.bottomLeft),e.arc(i+r.bottomLeft,n+a-r.bottomLeft,r.bottomLeft,O,z,!0),e.lineTo(i+s-r.bottomRight,n+a),e.arc(i+s-r.bottomRight,n+a-r.bottomRight,r.bottomRight,z,0,!0),e.lineTo(i+s,n+r.topRight),e.arc(i+s-r.topRight,n+r.topRight,r.topRight,0,-z,!0),e.lineTo(i+r.topLeft,n)}const st=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,at=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function rt(e,t){const i=(""+e).match(st);if(!i||"normal"===i[1])return 1.2*t;switch(e=+i[2],i[3]){case"px":return e;case"%":e/=100}return t*e}function ot(e,t){const i={},n=c(t),s=n?Object.keys(t):t,a=c(e)?n?i=>u(e[i],e[t[i]]):t=>e[t]:()=>e;for(const e of s)i[e]=+a(e)||0;return i}function lt(e){return ot(e,{top:"y",right:"x",bottom:"y",left:"x"})}function ct(e){return ot(e,["topLeft","topRight","bottomLeft","bottomRight"])}function dt(e){const t=lt(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function ht(e,t){e=e||{},t=t||Be.font;let i=u(e.size,t.size);"string"==typeof i&&(i=parseInt(i,10));let n=u(e.style,t.style);n&&!(""+n).match(at)&&(s.warn('Invalid font style specified: "'+n+'"'),n=void 0);const a={family:u(e.family,t.family),lineHeight:rt(u(e.lineHeight,t.lineHeight),i),size:i,style:n,weight:u(e.weight,t.weight),string:""};return a.string=We(a),a}function ut(e,t,i,n){let s,a,r,o=!0;for(s=0,a=e.length;s<a;++s)if(r=e[s],void 0!==r&&(void 0!==t&&"function"==typeof r&&(r=r(t),o=!1),void 0!==i&&l(r)&&(r=r[i%r.length],o=!1),void 0!==r))return n&&!o&&(n.cacheable=!1),r}function pt(e,t,i){const{min:n,max:s}=e,a=g(t,(s-n)/2),r=(e,t)=>i&&0===e?0:e+t;return{min:r(n,-Math.abs(a)),max:r(s,a)}}function gt(e,t){return Object.assign(Object.create(e),t)}function mt(e,t=[""],i=e,n,s=(()=>e[0])){C(n)||(n=At("_fallback",e));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:i,_fallback:n,_getTarget:s,override:s=>mt([s,...e],t,i,n)};return new Proxy(a,{deleteProperty:(t,i)=>(delete t[i],delete t._keys,delete e[0][i],!0),get:(i,n)=>vt(i,n,(()=>function(e,t,i,n){let s;for(const a of t)if(s=At(yt(a,e),i),C(s))return _t(e,s)?xt(i,n,e,s):s}(n,t,e,i))),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>Pt(e).includes(t),ownKeys:e=>Pt(e),set(e,t,i){const n=e._storage||(e._storage=s());return e[t]=n[t]=i,delete e._keys,!0}})}function ft(e,t,i,n){const s={_cacheable:!1,_proxy:e,_context:t,_subProxy:i,_stack:new Set,_descriptors:bt(e,n),setContext:t=>ft(e,t,i,n),override:s=>ft(e.override(s),t,i,n)};return new Proxy(s,{deleteProperty:(t,i)=>(delete t[i],delete e[i],!0),get:(e,t,i)=>vt(e,t,(()=>function(e,t,i){const{_proxy:n,_context:s,_subProxy:a,_descriptors:r}=e;let o=n[t];D(o)&&r.isScriptable(t)&&(o=function(e,t,i,n){const{_proxy:s,_context:a,_subProxy:r,_stack:o}=i;if(o.has(e))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+e);o.add(e),t=t(a,r||n),o.delete(e),_t(e,t)&&(t=xt(s._scopes,s,e,t));return t}(t,o,e,i));l(o)&&o.length&&(o=function(e,t,i,n){const{_proxy:s,_context:a,_subProxy:r,_descriptors:o}=i;if(C(a.index)&&n(e))t=t[a.index%t.length];else if(c(t[0])){const i=t,n=s._scopes.filter((e=>e!==i));t=[];for(const l of i){const i=xt(n,s,e,l);t.push(ft(i,a,r&&r[e],o))}}return t}(t,o,e,r.isIndexable));_t(t,o)&&(o=ft(o,s,a&&a[t],r));return o}(e,t,i))),getOwnPropertyDescriptor:(t,i)=>t._descriptors.allKeys?Reflect.has(e,i)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,i),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,i)=>Reflect.has(e,i),ownKeys:()=>Reflect.ownKeys(e),set:(t,i,n)=>(e[i]=n,delete t[i],!0)})}function bt(e,t={scriptable:!0,indexable:!0}){const{_scriptable:i=t.scriptable,_indexable:n=t.indexable,_allKeys:s=t.allKeys}=e;return{allKeys:s,scriptable:i,indexable:n,isScriptable:D(i)?i:()=>i,isIndexable:D(n)?n:()=>n}}const yt=(e,t)=>e?e+T(t):t,_t=(e,t)=>c(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function vt(e,t,i){if(Object.prototype.hasOwnProperty.call(e,t))return e[t];const n=i();return e[t]=n,n}function St(e,t,i){return D(e)?e(t,i):e}const It=(e,t)=>!0===e?t:"string"==typeof e?P(t,e):void 0;function Et(e,t,i,n,s){for(const a of t){const t=It(i,a);if(t){e.add(t);const a=St(t._fallback,i,s);if(C(a)&&a!==i&&a!==n)return a}else if(!1===t&&C(n)&&i!==n)return null}return!1}function xt(e,t,i,n){const s=t._rootScopes,a=St(t._fallback,i,n),r=[...e,...s],o=new Set;o.add(n);let d=wt(o,r,i,a||i,n);return null!==d&&((!C(a)||a===i||(d=wt(o,r,a,d,n),null!==d))&&mt(Array.from(o),[""],s,a,(()=>function(e,t,i){const n=e._getTarget();t in n||(n[t]={});const s=n[t];if(l(s)&&c(i))return i;return s||{}}(t,i,n))))}function wt(e,t,i,n,s){for(;i;)i=Et(e,t,i,n,s);return i}function At(e,t){for(const i of t){if(!i)continue;const t=i[e];if(C(t))return t}}function Pt(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const i of e)for(const e of Object.keys(i).filter((e=>!e.startsWith("_"))))t.add(e);return Array.from(t)}(e._scopes)),t}function Tt(e,t,i,n){const{iScale:s}=e,{key:a="r"}=this._parsing,r=new Array(n);let o,l,c,d;for(o=0,l=n;o<l;++o)c=o+i,d=t[c],r[o]={r:s.parse(P(d,a),c)};return r}const Ct=Number.EPSILON||1e-14,Dt=(e,t)=>t<e.length&&!e[t].skip&&e[t],jt=e=>"x"===e?"y":"x";function kt(e,t,i,n){const s=e.skip?t:e,a=t,r=i.skip?t:i,o=J(a,s),l=J(r,a);let c=o/(o+l),d=l/(o+l);c=isNaN(c)?0:c,d=isNaN(d)?0:d;const h=n*c,u=n*d;return{previous:{x:a.x-h*(r.x-s.x),y:a.y-h*(r.y-s.y)},next:{x:a.x+u*(r.x-s.x),y:a.y+u*(r.y-s.y)}}}function Ot(e,t="x"){const i=jt(t),n=e.length,s=Array(n).fill(0),a=Array(n);let r,o,l,c=Dt(e,0);for(r=0;r<n;++r)if(o=l,l=c,c=Dt(e,r+1),l){if(c){const e=c[t]-l[t];s[r]=0!==e?(c[i]-l[i])/e:0}a[r]=o?c?W(s[r-1])!==W(s[r])?0:(s[r-1]+s[r])/2:s[r-1]:s[r]}!function(e,t,i){const n=e.length;let s,a,r,o,l,c=Dt(e,0);for(let d=0;d<n-1;++d)l=c,c=Dt(e,d+1),l&&c&&(H(t[d],0,Ct)?i[d]=i[d+1]=0:(s=i[d]/t[d],a=i[d+1]/t[d],o=Math.pow(s,2)+Math.pow(a,2),o<=9||(r=3/Math.sqrt(o),i[d]=s*r*t[d],i[d+1]=a*r*t[d])))}(e,s,a),function(e,t,i="x"){const n=jt(i),s=e.length;let a,r,o,l=Dt(e,0);for(let c=0;c<s;++c){if(r=o,o=l,l=Dt(e,c+1),!o)continue;const s=o[i],d=o[n];r&&(a=(s-r[i])/3,o[`cp1${i}`]=s-a,o[`cp1${n}`]=d-a*t[c]),l&&(a=(l[i]-s)/3,o[`cp2${i}`]=s+a,o[`cp2${n}`]=d+a*t[c])}}(e,a,t)}function Mt(e,t,i){return Math.max(Math.min(e,i),t)}function Rt(e,t,i,n,s){let a,r,o,l;if(t.spanGaps&&(e=e.filter((e=>!e.skip))),"monotone"===t.cubicInterpolationMode)Ot(e,s);else{let i=n?e[e.length-1]:e[0];for(a=0,r=e.length;a<r;++a)o=e[a],l=kt(i,o,e[Math.min(a+1,r-(n?0:1))%r],t.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,i=o}t.capBezierPoints&&function(e,t){let i,n,s,a,r,o=qe(e[0],t);for(i=0,n=e.length;i<n;++i)r=a,a=o,o=i<n-1&&qe(e[i+1],t),a&&(s=e[i],r&&(s.cp1x=Mt(s.cp1x,t.left,t.right),s.cp1y=Mt(s.cp1y,t.top,t.bottom)),o&&(s.cp2x=Mt(s.cp2x,t.left,t.right),s.cp2y=Mt(s.cp2y,t.top,t.bottom)))}(e,i)}function Lt(){return"undefined"!=typeof window&&"undefined"!=typeof document}function Nt(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function zt(e,t,i){let n;return"string"==typeof e?(n=parseInt(e,10),-1!==e.indexOf("%")&&(n=n/100*t.parentNode[i])):n=e,n}const Ft=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function Vt(e,t){return Ft(e).getPropertyValue(t)}const Bt=["top","right","bottom","left"];function Wt(e,t,i){const n={};i=i?"-"+i:"";for(let s=0;s<4;s++){const a=Bt[s];n[a]=parseFloat(e[t+"-"+a+i])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}function Ht(e,t){if("native"in e)return e;const{canvas:i,currentDevicePixelRatio:n}=t,s=Ft(i),a="border-box"===s.boxSizing,r=Wt(s,"padding"),o=Wt(s,"border","width"),{x:l,y:c,box:d}=function(e,t){const i=e.touches,n=i&&i.length?i[0]:e,{offsetX:s,offsetY:a}=n;let r,o,l=!1;if(((e,t,i)=>(e>0||t>0)&&(!i||!i.shadowRoot))(s,a,e.target))r=s,o=a;else{const e=t.getBoundingClientRect();r=n.clientX-e.left,o=n.clientY-e.top,l=!0}return{x:r,y:o,box:l}}(e,i),h=r.left+(d&&o.left),u=r.top+(d&&o.top);let{width:p,height:g}=t;return a&&(p-=r.width+o.width,g-=r.height+o.height),{x:Math.round((l-h)/p*i.width/n),y:Math.round((c-u)/g*i.height/n)}}const Gt=e=>Math.round(10*e)/10;function Ut(e,t,i,n){const s=Ft(e),a=Wt(s,"margin"),r=zt(s.maxWidth,e,"clientWidth")||L,o=zt(s.maxHeight,e,"clientHeight")||L,l=function(e,t,i){let n,s;if(void 0===t||void 0===i){const a=Nt(e);if(a){const e=a.getBoundingClientRect(),r=Ft(a),o=Wt(r,"border","width"),l=Wt(r,"padding");t=e.width-l.width-o.width,i=e.height-l.height-o.height,n=zt(r.maxWidth,a,"clientWidth"),s=zt(r.maxHeight,a,"clientHeight")}else t=e.clientWidth,i=e.clientHeight}return{width:t,height:i,maxWidth:n||L,maxHeight:s||L}}(e,t,i);let{width:c,height:d}=l;if("content-box"===s.boxSizing){const e=Wt(s,"border","width"),t=Wt(s,"padding");c-=t.width+e.width,d-=t.height+e.height}c=Math.max(0,c-a.width),d=Math.max(0,n?c/n:d-a.height),c=Gt(Math.min(c,r,l.maxWidth)),d=Gt(Math.min(d,o,l.maxHeight)),c&&!d&&(d=Gt(c/2));return(void 0!==t||void 0!==i)&&n&&l.height&&d>l.height&&(d=l.height,c=Gt(Math.floor(d*n))),{width:c,height:d}}function Yt(e,t,i){const n=t||1,s=Math.floor(e.height*n),a=Math.floor(e.width*n);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const r=e.canvas;return r.style&&(i||!r.style.height&&!r.style.width)&&(r.style.height=`${e.height}px`,r.style.width=`${e.width}px`),(e.currentDevicePixelRatio!==n||r.height!==s||r.width!==a)&&(e.currentDevicePixelRatio=n,r.height=s,r.width=a,e.ctx.setTransform(n,0,0,n,0,0),!0)}const $t=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(e){}return e}();function Kt(e,t){const i=Vt(e,t),n=i&&i.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function qt(e,t,i,n){return{x:e.x+i*(t.x-e.x),y:e.y+i*(t.y-e.y)}}function Xt(e,t,i,n){return{x:e.x+i*(t.x-e.x),y:"middle"===n?i<.5?e.y:t.y:"after"===n?i<1?e.y:t.y:i>0?t.y:e.y}}function Qt(e,t,i,n){const s={x:e.cp2x,y:e.cp2y},a={x:t.cp1x,y:t.cp1y},r=qt(e,s,i),o=qt(s,a,i),l=qt(a,t,i),c=qt(r,o,i),d=qt(o,l,i);return qt(c,d,i)}function Zt(e,t,i){return e?function(e,t){return{x:i=>e+e+t-i,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,i):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function Jt(e,t){let i,n;"ltr"!==t&&"rtl"!==t||(i=e.canvas.style,n=[i.getPropertyValue("direction"),i.getPropertyPriority("direction")],i.setProperty("direction",t,"important"),e.prevTextDirection=n)}function ei(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function ti(e){return"angle"===e?{between:ie,compare:ee,normalize:te}:{between:ae,compare:(e,t)=>e-t,normalize:e=>e}}function ii({start:e,end:t,count:i,loop:n,style:s}){return{start:e%i,end:t%i,loop:n&&(t-e+1)%i==0,style:s}}function ni(e,t,i){if(!i)return[e];const{property:n,start:s,end:a}=i,r=t.length,{compare:o,between:l,normalize:c}=ti(n),{start:d,end:h,loop:u,style:p}=function(e,t,i){const{property:n,start:s,end:a}=i,{between:r,normalize:o}=ti(n),l=t.length;let c,d,{start:h,end:u,loop:p}=e;if(p){for(h+=l,u+=l,c=0,d=l;c<d&&r(o(t[h%l][n]),s,a);++c)h--,u--;h%=l,u%=l}return u<h&&(u+=l),{start:h,end:u,loop:p,style:e.style}}(e,t,i),g=[];let m,f,b,y=!1,_=null;const v=()=>y||l(s,b,m)&&0!==o(s,b),S=()=>!y||0===o(a,m)||l(a,b,m);for(let e=d,i=d;e<=h;++e)f=t[e%r],f.skip||(m=c(f[n]),m!==b&&(y=l(m,s,a),null===_&&v()&&(_=0===o(m,s)?e:i),null!==_&&S()&&(g.push(ii({start:_,end:e,loop:u,count:r,style:p})),_=null),i=e,b=m));return null!==_&&g.push(ii({start:_,end:h,loop:u,count:r,style:p})),g}function si(e,t){const i=[],n=e.segments;for(let s=0;s<n.length;s++){const a=ni(n[s],e.points,t);a.length&&i.push(...a)}return i}function ai(e,t){const i=e.points,n=e.options.spanGaps,s=i.length;if(!s)return[];const a=!!e._loop,{start:r,end:o}=function(e,t,i,n){let s=0,a=t-1;if(i&&!n)for(;s<t&&!e[s].skip;)s++;for(;s<t&&e[s].skip;)s++;for(s%=t,i&&(a+=s);a>s&&e[a%t].skip;)a--;return a%=t,{start:s,end:a}}(i,s,a,n);if(!0===n)return ri(e,[{start:r,end:o,loop:a}],i,t);return ri(e,function(e,t,i,n){const s=e.length,a=[];let r,o=t,l=e[t];for(r=t+1;r<=i;++r){const i=e[r%s];i.skip||i.stop?l.skip||(n=!1,a.push({start:t%s,end:(r-1)%s,loop:n}),t=o=i.stop?r:null):(o=r,l.skip&&(t=r)),l=i}return null!==o&&a.push({start:t%s,end:o%s,loop:n}),a}(i,r,o<r?o+s:o,!!e._fullLoop&&0===r&&o===s-1),i,t)}function ri(e,t,i,n){return n&&n.setContext&&i?function(e,t,i,n){const s=e._chart.getContext(),a=oi(e.options),{_datasetIndex:r,options:{spanGaps:o}}=e,l=i.length,c=[];let d=a,h=t[0].start,u=h;function p(e,t,n,s){const a=o?-1:1;if(e!==t){for(e+=l;i[e%l].skip;)e-=a;for(;i[t%l].skip;)t+=a;e%l!=t%l&&(c.push({start:e%l,end:t%l,loop:n,style:s}),d=s,h=t%l)}}for(const e of t){h=o?h:e.start;let t,a=i[h%l];for(u=h+1;u<=e.end;u++){const o=i[u%l];t=oi(n.setContext(gt(s,{type:"segment",p0:a,p1:o,p0DataIndex:(u-1)%l,p1DataIndex:u%l,datasetIndex:r}))),li(t,d)&&p(h,u-1,e.loop,d),a=o,d=t}h<u-1&&p(h,u-1,e.loop,d)}return c}(e,t,i,n):t}function oi(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function li(e,t){return t&&JSON.stringify(e)!==JSON.stringify(t)}},"./node_modules/chart.js/dist/helpers.js":function(e,t,i){i.r(t),i.d(t,{HALF_PI:function(){return n.H},INFINITY:function(){return n.b2},PI:function(){return n.P},PITAU:function(){return n.b1},QUARTER_PI:function(){return n.b4},RAD_PER_DEG:function(){return n.b3},TAU:function(){return n.T},TWO_THIRDS_PI:function(){return n.b5},_addGrace:function(){return n.R},_alignPixel:function(){return n.X},_alignStartEnd:function(){return n.a2},_angleBetween:function(){return n.p},_angleDiff:function(){return n.b6},_arrayUnique:function(){return n._},_attachContext:function(){return n.a8},_bezierCurveTo:function(){return n.as},_bezierInterpolation:function(){return n.ap},_boundSegment:function(){return n.ax},_boundSegments:function(){return n.an},_capitalize:function(){return n.a5},_computeSegments:function(){return n.am},_createResolver:function(){return n.a9},_decimalPlaces:function(){return n.aK},_deprecated:function(){return n.aV},_descriptors:function(){return n.aa},_elementsEqual:function(){return n.ah},_factorize:function(){return n.N},_filterBetween:function(){return n.aO},_getParentNode:function(){return n.I},_getStartAndCountOfVisiblePoints:function(){return n.q},_int16Range:function(){return n.W},_isBetween:function(){return n.aj},_isClickEvent:function(){return n.ai},_isDomSupported:function(){return n.M},_isPointInArea:function(){return n.C},_limitValue:function(){return n.S},_longestText:function(){return n.aN},_lookup:function(){return n.aP},_lookupByKey:function(){return n.B},_measureText:function(){return n.V},_merger:function(){return n.aT},_mergerIf:function(){return n.aU},_normalizeAngle:function(){return n.ay},_parseObjectDataRadialScale:function(){return n.y},_pointInLine:function(){return n.aq},_readValueToProps:function(){return n.ak},_rlookupByKey:function(){return n.A},_scaleRangesChanged:function(){return n.w},_setMinAndMaxByKey:function(){return n.aG},_splitKey:function(){return n.aW},_steppedInterpolation:function(){return n.ao},_steppedLineTo:function(){return n.ar},_textX:function(){return n.aB},_toLeftRightCenter:function(){return n.a1},_updateBezierControlPoints:function(){return n.al},addRoundedRectPath:function(){return n.au},almostEquals:function(){return n.aJ},almostWhole:function(){return n.aI},callback:function(){return n.Q},clearCanvas:function(){return n.af},clipArea:function(){return n.Y},clone:function(){return n.aS},color:function(){return n.c},createContext:function(){return n.j},debounce:function(){return n.ad},defined:function(){return n.h},distanceBetweenPoints:function(){return n.aE},drawPoint:function(){return n.at},drawPointLegend:function(){return n.aD},each:function(){return n.F},easingEffects:function(){return n.e},finiteOrDefault:function(){return n.O},fontString:function(){return n.a$},formatNumber:function(){return n.o},getAngleFromPoint:function(){return n.D},getHoverColor:function(){return n.aR},getMaximumSize:function(){return n.G},getRelativePosition:function(){return n.z},getRtlAdapter:function(){return n.az},getStyle:function(){return n.a_},isArray:function(){return n.b},isFinite:function(){return n.g},isFunction:function(){return n.a7},isNullOrUndef:function(){return n.k},isNumber:function(){return n.x},isObject:function(){return n.i},isPatternOrGradient:function(){return n.aQ},listenArrayEvents:function(){return n.l},log10:function(){return n.aM},merge:function(){return n.a4},mergeIf:function(){return n.ab},niceNum:function(){return n.aH},noop:function(){return n.aF},overrideTextDirection:function(){return n.aA},readUsedSize:function(){return n.J},renderText:function(){return n.Z},requestAnimFrame:function(){return n.r},resolve:function(){return n.a},resolveObjectKey:function(){return n.f},restoreTextDirection:function(){return n.aC},retinaScale:function(){return n.ae},setsEqual:function(){return n.ag},sign:function(){return n.s},splineCurve:function(){return n.aY},splineCurveMonotone:function(){return n.aZ},supportsEventListenerOptions:function(){return n.K},throttled:function(){return n.L},toDegrees:function(){return n.U},toDimension:function(){return n.n},toFont:function(){return n.a0},toFontString:function(){return n.aX},toLineHeight:function(){return n.b0},toPadding:function(){return n.E},toPercentage:function(){return n.m},toRadians:function(){return n.t},toTRBL:function(){return n.av},toTRBLCorners:function(){return n.aw},uid:function(){return n.ac},unclipArea:function(){return n.$},unlistenArrayEvents:function(){return n.u},valueOrDefault:function(){return n.v}});var n=i("./node_modules/chart.js/dist/chunks/helpers.segment.js")},"./node_modules/chart.js/helpers/helpers.js":function(e,t,i){i.r(t),i.d(t,{HALF_PI:function(){return n.HALF_PI},INFINITY:function(){return n.INFINITY},PI:function(){return n.PI},PITAU:function(){return n.PITAU},QUARTER_PI:function(){return n.QUARTER_PI},RAD_PER_DEG:function(){return n.RAD_PER_DEG},TAU:function(){return n.TAU},TWO_THIRDS_PI:function(){return n.TWO_THIRDS_PI},_addGrace:function(){return n._addGrace},_alignPixel:function(){return n._alignPixel},_alignStartEnd:function(){return n._alignStartEnd},_angleBetween:function(){return n._angleBetween},_angleDiff:function(){return n._angleDiff},_arrayUnique:function(){return n._arrayUnique},_attachContext:function(){return n._attachContext},_bezierCurveTo:function(){return n._bezierCurveTo},_bezierInterpolation:function(){return n._bezierInterpolation},_boundSegment:function(){return n._boundSegment},_boundSegments:function(){return n._boundSegments},_capitalize:function(){return n._capitalize},_computeSegments:function(){return n._computeSegments},_createResolver:function(){return n._createResolver},_decimalPlaces:function(){return n._decimalPlaces},_deprecated:function(){return n._deprecated},_descriptors:function(){return n._descriptors},_elementsEqual:function(){return n._elementsEqual},_factorize:function(){return n._factorize},_filterBetween:function(){return n._filterBetween},_getParentNode:function(){return n._getParentNode},_getStartAndCountOfVisiblePoints:function(){return n._getStartAndCountOfVisiblePoints},_int16Range:function(){return n._int16Range},_isBetween:function(){return n._isBetween},_isClickEvent:function(){return n._isClickEvent},_isDomSupported:function(){return n._isDomSupported},_isPointInArea:function(){return n._isPointInArea},_limitValue:function(){return n._limitValue},_longestText:function(){return n._longestText},_lookup:function(){return n._lookup},_lookupByKey:function(){return n._lookupByKey},_measureText:function(){return n._measureText},_merger:function(){return n._merger},_mergerIf:function(){return n._mergerIf},_normalizeAngle:function(){return n._normalizeAngle},_parseObjectDataRadialScale:function(){return n._parseObjectDataRadialScale},_pointInLine:function(){return n._pointInLine},_readValueToProps:function(){return n._readValueToProps},_rlookupByKey:function(){return n._rlookupByKey},_scaleRangesChanged:function(){return n._scaleRangesChanged},_setMinAndMaxByKey:function(){return n._setMinAndMaxByKey},_splitKey:function(){return n._splitKey},_steppedInterpolation:function(){return n._steppedInterpolation},_steppedLineTo:function(){return n._steppedLineTo},_textX:function(){return n._textX},_toLeftRightCenter:function(){return n._toLeftRightCenter},_updateBezierControlPoints:function(){return n._updateBezierControlPoints},addRoundedRectPath:function(){return n.addRoundedRectPath},almostEquals:function(){return n.almostEquals},almostWhole:function(){return n.almostWhole},callback:function(){return n.callback},clearCanvas:function(){return n.clearCanvas},clipArea:function(){return n.clipArea},clone:function(){return n.clone},color:function(){return n.color},createContext:function(){return n.createContext},debounce:function(){return n.debounce},defined:function(){return n.defined},distanceBetweenPoints:function(){return n.distanceBetweenPoints},drawPoint:function(){return n.drawPoint},drawPointLegend:function(){return n.drawPointLegend},each:function(){return n.each},easingEffects:function(){return n.easingEffects},finiteOrDefault:function(){return n.finiteOrDefault},fontString:function(){return n.fontString},formatNumber:function(){return n.formatNumber},getAngleFromPoint:function(){return n.getAngleFromPoint},getHoverColor:function(){return n.getHoverColor},getMaximumSize:function(){return n.getMaximumSize},getRelativePosition:function(){return n.getRelativePosition},getRtlAdapter:function(){return n.getRtlAdapter},getStyle:function(){return n.getStyle},isArray:function(){return n.isArray},isFinite:function(){return n.isFinite},isFunction:function(){return n.isFunction},isNullOrUndef:function(){return n.isNullOrUndef},isNumber:function(){return n.isNumber},isObject:function(){return n.isObject},isPatternOrGradient:function(){return n.isPatternOrGradient},listenArrayEvents:function(){return n.listenArrayEvents},log10:function(){return n.log10},merge:function(){return n.merge},mergeIf:function(){return n.mergeIf},niceNum:function(){return n.niceNum},noop:function(){return n.noop},overrideTextDirection:function(){return n.overrideTextDirection},readUsedSize:function(){return n.readUsedSize},renderText:function(){return n.renderText},requestAnimFrame:function(){return n.requestAnimFrame},resolve:function(){return n.resolve},resolveObjectKey:function(){return n.resolveObjectKey},restoreTextDirection:function(){return n.restoreTextDirection},retinaScale:function(){return n.retinaScale},setsEqual:function(){return n.setsEqual},sign:function(){return n.sign},splineCurve:function(){return n.splineCurve},splineCurveMonotone:function(){return n.splineCurveMonotone},supportsEventListenerOptions:function(){return n.supportsEventListenerOptions},throttled:function(){return n.throttled},toDegrees:function(){return n.toDegrees},toDimension:function(){return n.toDimension},toFont:function(){return n.toFont},toFontString:function(){return n.toFontString},toLineHeight:function(){return n.toLineHeight},toPadding:function(){return n.toPadding},toPercentage:function(){return n.toPercentage},toRadians:function(){return n.toRadians},toTRBL:function(){return n.toTRBL},toTRBLCorners:function(){return n.toTRBLCorners},uid:function(){return n.uid},unclipArea:function(){return n.unclipArea},unlistenArrayEvents:function(){return n.unlistenArrayEvents},valueOrDefault:function(){return n.valueOrDefault}});var n=i("./node_modules/chart.js/dist/helpers.js")}}]);