"use strict";(self.webpackChunk_postman_app_renderer=self.webpackChunk_postman_app_renderer||[]).push([[103],{"./integrations/components/context-bar/IntegrationContextBarList.js":function(e,t,n){n.r(t),n.d(t,{IntegrationContextBarList:function(){return A}});var o,i=n("../../node_modules/react/index.js"),s=n("./node_modules/prop-types/index.js"),r=n.n(s),a=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),l=n("./js/components/base/LoadingIndicator.js"),c=n("./onboarding/src/features/Homepage/pages/IntegrationsPage/services/IntegrationService.ts"),d=n("./integrations/components/context-bar/IntegrationItem.js"),m=n("./integrations/components/context-bar/IntegrationInfoMock.js"),u=n("./js/stores/SyncStatusStore.js"),p=n("./js/stores/IntegrationsStore.js"),f=n("./js/stores/StoreManager.js"),h=n("./js/stores/ActiveWorkspaceStore.js"),g=n("../../node_modules/mobx/lib/mobx.module.js"),_=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),I=n("./integrations/components/context-bar/ViewConfig.js"),E=n("./integrations/navigation/constants.js"),y=n("./integrations/constants/IntegrationTargets.ts"),v=n("./integrations/components/context-bar/util.js"),T=n("./js/modules/services/AnalyticsService.js"),b=n("./appsdk/components/link/Link.js"),N=n("./node_modules/lodash/lodash.js");const C=["GitHub","Dropbox"],x=["Slack","PagerDuty"],j=["Datadog","Coralogix"],S={collection:{categories:[y.CLIENT_CATEGORY_COLLECTION_BACKUP]},monitor:{categories:[y.CLIENT_CATEGORY_MONITOR_ANALYTICS,y.CLIENT_CATEGORY_MONITOR_NOTIFICATIONS]}};function k(e,t,n,o,i,s){switch(o){case"collection":return function(e,t,n,o){const i=[];if(N.isEmpty(N.get(e,y.CLIENT_CATEGORY_COLLECTION_BACKUP,[]))){const e=v.default.filterAvailableIntegrationsByCategory(t,y.CATEGORY_BACKUP),s=v.default.generateAddIntegrationHelperText(e,C,2),r=I.default.getCollectionBackupViewConfig(s,n,o);i.push(r)}return i}(e,t,n,i);case"monitor":return function(e,t,n,o){const i=[];if(N.isEmpty(N.get(e,y.CLIENT_CATEGORY_MONITOR_NOTIFICATIONS,[]))){const e=v.default.filterIntegrationsByClientCategories(t,[y.CLIENT_CATEGORY_MONITOR_NOTIFICATIONS]),s=v.default.generateAddIntegrationHelperText(e,x,2),r=I.default.getMonitorNotificationViewConfig(s,n,o);i.push(r)}if(N.isEmpty(N.get(e,y.CLIENT_CATEGORY_MONITOR_ANALYTICS,{}))){const e=v.default.filterIntegrationsByClientCategories(t,[y.CLIENT_CATEGORY_MONITOR_ANALYTICS]),s=v.default.generateAddIntegrationHelperText(e,j,2),r=I.default.getMonitorAnalyticsViewConfig(s,n,o);i.push(r)}return i}(e,s,n,i)}return[]}function w(e){const{entityType:t,entityId:n,configuredIntegrationsByClientCategory:o,integrationServices:s,integrationClasses:r}=e,[a,l]=(0,i.useState)([]),c=(0,f.resolveStoreInstance)(h.default).id;(0,i.useEffect)((()=>{l(k(o,s,c,t,n,r))}),[o,s,r]);const u=N.sortBy(N.uniqBy(N.flatMap(o),(e=>e.id)),(e=>e.name)),p=!N.isEmpty(u);return i.createElement(i.Fragment,null,i.createElement("div",{className:"integration-context-bar-list__integration-list"},u.map((e=>i.createElement(d.default,{key:e.name,integration:e}))),a.map((e=>i.createElement(m.default,{key:e.key,viewConfig:e}))),p&&i.createElement("div",{className:"integration-context-bar-list__browse",onClick:()=>{T.default.addEventV2({category:"integrations",action:"click",label:`integrations_browse_all_${t}`,value:1})}},i.createElement(b.default,{to:{routeIdentifier:E.BROWSE_INTEGRATIONS_IDENTIFIER,queryParams:{category:"all"}}},"Browse integrations"))))}let A=(0,_.observer)(o=class extends i.Component{constructor(e){super(e),this.entityType=e.entityType,this.entityId=e.entityId,this.state={showIntegrations:!0,loading:!1,loaded:!1,error:!1,configuredIntegrationsByClientCategory:{}},this.toggleShowIntegrations=this.toggleShowIntegrations.bind(this),this.updateComponentData=this.updateComponentData.bind(this),this.integrationsStore=(0,f.resolveStoreInstance)(p.default)}updateComponentData(){const e=S[this.entityType].categories;let t=!1;this.fetchConfiguredIntegrationsAutorun=(0,g.autorun)((()=>{if((0,f.resolveStoreInstance)(u.default).isSocketConnected){t||this.setState({loading:!0,loaded:!1});const n=y.INTERNAL_ENTITY_NAME_MAPPING[this.entityType];c.default.getConfiguredIntegrationsByEntityAndClientCategory(n,this.entityId,e).then((e=>{const n=e;this.setState({configuredIntegrationsByClientCategory:n,loaded:!0}),t=!0})).catch((e=>this.setState({error:!0}))).finally((()=>this.setState({loading:!1})))}}))}componentDidMount(){this.updateComponentData()}componentWillUnmount(){this.fetchConfiguredIntegrationsAutorun&&this.fetchConfiguredIntegrationsAutorun()}toggleShowIntegrations(){this.setState((e=>({showIntegrations:!e.showIntegrations})))}render(){const e=!(0,f.resolveStoreInstance)(u.default).isSocketConnected,t=this.integrationsStore.getIntegrationServices(),n=this.integrationsStore.getIntegrationClasses(),o=this.integrationsStore.loadingIntegrationClasses,s=this.integrationsStore.loadingIntegrationServices;return i.createElement("div",{className:"integration-context-bar-list"},i.createElement("div",{className:"integration-context-bar-list__label-wrapper",onClick:this.toggleShowIntegrations},this.state.showIntegrations?i.createElement(a.default,{className:"integration-context-bar-list__label-wrapper-toggle",name:"icon-direction-down"}):i.createElement(a.default,{className:"integration-context-bar-list__label-wrapper-toggle",name:"icon-direction-right"})),i.createElement("div",{className:"integration-context-bar-list__label-wrapper-label",onClick:this.toggleShowIntegrations},"Integrations"),this.state.showIntegrations&&e&&!this.state.loaded&&i.createElement("div",{className:"integration-context-bar-list__status-info"},"You seem to be offline"),this.state.showIntegrations&&!e&&this.state.loading||o||s?i.createElement("div",{className:"integration-context-bar-list__loading"},i.createElement(l.default,null)):null,this.state.showIntegrations&&!e&&!this.state.loading&&this.state.error&&i.createElement("span",{className:"integration-context-bar-list__status-info"},"Unable to fetch integrations"),this.state.showIntegrations&&!this.state.error&&this.state.loaded&&!o&&!s&&i.createElement(w,{configuredIntegrationsByClientCategory:this.state.configuredIntegrationsByClientCategory,entityType:this.entityType,entityId:this.entityId,integrationServices:t,integrationClasses:n}))}})||o;A.propTypes={entityId:r().string.isRequired,entityType:r().oneOf(["collection","monitor"]).isRequired}},"./integrations/components/context-bar/IntegrationInfoMock.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return i}});var o=n("../../node_modules/react/index.js");function i(e){const{viewConfig:t}=e,[n,i]=(0,o.useState)(t.header),[s,r]=(0,o.useState)(t.body),[a,l]=(0,o.useState)(t.footer);return(0,o.useEffect)((()=>{i(t.header),r(t.body),l(t.footer)}),[t]),o.createElement("div",{className:"integration-context-bar-list__info"},o.createElement("div",{key:"header",className:"integration-context-bar-list__info-header"},n&&n),o.createElement("div",{key:"body",className:"integration-context-bar-list__info-body"},s&&s),o.createElement("div",{key:"footer",className:"integration-context-bar-list__info-footer"},t.route()))}},"./integrations/components/context-bar/IntegrationItem.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return p}});var o=n("../../node_modules/react/index.js"),i=n("./node_modules/@postman/date-helper/index.js"),s=n.n(i),r=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),a=n("./integrations/navigation/constants.js"),l=n("./js/components/base/Tooltips.js"),c=n("./js/modules/services/AnalyticsService.js"),d=n("./appsdk/components/link/Link.js"),m=n("./node_modules/lodash/lodash.js");const u={created:{class:"integration-status-icon-success",icon:"icon-state-success-stroke"},active:{class:"integration-status-icon-success",icon:"icon-state-success-stroke"},failed:{class:"integration-status-icon-error",icon:"icon-state-info-stroke"}};function p(e){const{integration:t}=e,n=(0,o.useRef)(null),[i,p]=(0,o.useState)(!1);return o.createElement("div",{className:"integration-context-bar-list__item"},o.createElement("div",{className:"integration-context-bar-list__item-icon",onMouseEnter:()=>m.includes(["failed"],t.status)&&p(!0),onMouseLeave:()=>m.includes(["failed"],t.status)&&p(!1),ref:n},o.createElement(r.default,{className:u[t.status].class,name:u[t.status].icon,size:"small"}),o.createElement(l.Tooltip,{show:i,target:n.current,placement:"top",immediate:!0},o.createElement(l.TooltipBody,null,"This integration has ",o.createElement("strong",null,t.status)))),o.createElement("div",{className:"integration-context-bar-list__item-area"},o.createElement("div",{className:"integration-context-bar-list__item-label",title:t.name,onClick:()=>{c.default.addEventV2({category:"integrations",action:"click",label:"integrations_view_run_log_target",value:1})}},o.createElement("span",null,o.createElement(d.default,{to:{routeIdentifier:a.INTEGRATIONS_RUNS_PAGE_IDENTIFIER,routeParams:{integrationId:t.id}}},t.name))),o.createElement("div",null,o.createElement("span",{className:"integration-context-bar-list__item-last-run"},`Last run: ${t.lastRunAt?s().getFormattedDateAndTime(t.lastRunAt):"Not Available"}`))))}},"./integrations/components/context-bar/ViewConfig.js":function(e,t,n){n.r(t);var o=n("./js/modules/services/AnalyticsService.js"),i=n("./runtime-repl/_common/NavigationConstants.js"),s=n("./integrations/constants/IntegrationTargets.ts"),r=n("./integrations/navigation/constants.js"),a=n("../../node_modules/react/index.js"),l=n("./appsdk/components/link/Link.js");class c{constructor(e,t,n,o,i,s,r){this.key=e,this.header=t,this.body=n,this.footer=o,this.workspaceId=i,this.entityType=s,this.entityId=r}route(){}}class d extends c{constructor(e,t,n){super("backup-view-config","Back up your collection",e,"View all options",t,"collection",n)}route(){return o.default.addEventV2({category:"integrations",action:"click",label:"integrations_view_all_collection_backup",value:1}),a.createElement(l.default,{to:{routeIdentifier:r.BROWSE_INTEGRATIONS_IDENTIFIER,queryParams:{category:"backup"}},options:{additionalContext:{selectedWorkspaceId:this.workspaceId,selectedEntityId:this.entityId,selectedEntityType:"collection",redirect:{identifier:i.WORKFLOW_IDENTIFIER.OPEN_COLLECTION_WITH_WS_SELECT,routeParams:{cid:this.entityId},queryParams:{ctx:"info"}}}}},this.footer&&this.footer)}}class m extends c{constructor(e,t,n){super("activity-view-config","Send monitoring results",e,"View all options",t,"monitor",n)}route(){return o.default.addEventV2({category:"integrations",action:"click",label:"integrations_view_all_monitor_notifications",value:1}),a.createElement(l.default,{to:{routeIdentifier:r.BROWSE_INTEGRATIONS_IDENTIFIER,queryParams:{category:s.CATEGORY_NOTIFICATIONS_NAV}},options:{additionalContext:{selectedWorkspaceId:this.workspaceId,selectedEntityId:this.entityId,selectedEntityType:"monitor",redirect:{identifier:"monitor.openWithWsSelect",routeParams:{monitorPath:this.entityId},queryParams:{ctx:"info"}}}}},this.footer&&this.footer)}}class u extends c{constructor(e,t,n){super("analytics-view-config","Send monitor analytics results",e,"View all options",t,"monitor",n)}route(){return o.default.addEventV2({category:"integrations",action:"click",label:"integrations_view_all_monitor_analytics",value:1}),a.createElement(l.default,{to:{routeIdentifier:r.BROWSE_INTEGRATIONS_IDENTIFIER,queryParams:{category:s.CATEGORY_ANALYTICS_NAV}},options:{additionalContext:{selectedWorkspaceId:this.workspaceId,selectedEntityId:this.entityId,selectedEntityType:"monitor",redirect:{identifier:"monitor.openWithWsSelect",routeParams:{monitorPath:this.entityId},queryParams:{ctx:"info"}}}}},this.footer&&this.footer)}}t.default={getCollectionBackupViewConfig:function(e,t,n){return new d(e,t,n)},getMonitorNotificationViewConfig:function(e,t,n){return new m(e,t,n)},getMonitorAnalyticsViewConfig:function(e,t,n){return new u(e,t,n)}}},"./integrations/components/context-bar/util.js":function(e,t,n){n.r(t);var o=n("./node_modules/lodash/lodash.js"),i=n.n(o);t.default={generateAddIntegrationHelperText:function(e,t,n){const o=new Set(e),s=[];for(const e of t)if(o.has(e)&&(s.push(e),o.delete(e)),i().isEqual(s.length,n))break;const r=[...o];for(;!i().isEqual(s.length,n)&&!i().isEmpty(r);)s.push(r.pop());return`\n      To ${s.join(", ")} \n      ${r.length>0?`or ${r.length} other ${r.length>1?"services":"service"}`:""}\n    `},filterAvailableIntegrationsByCategory:function(e,t){return i().map(i().filter(e,(e=>{const n=i().map(e.categories,"name");return i().includes(n,t)})),(e=>e.name))},filterIntegrationsByClientCategories:function(e,t){let n=i().filter(e,(e=>{const n=i().uniq(i().map(e.clientCategories,"key"));return i().find(n,(e=>i().includes(t,e)))}));return i().uniq(i().flatMap(n,(e=>i().map(e.services,"name"))))}}},"./js/containers/new-button/services/VersionTagService.js":function(e,t,n){n.r(t),n.d(t,{fetchAllTags:function(){return a}});var o=n("./js/modules/services/RemoteSyncRequestService.js"),i=n("./js/stores/StoreManager.js"),s=n("./js/stores/CurrentUserStore.js"),r=n("./node_modules/lodash/lodash.js");async function a(e){if(!e.collectionUid)return Promise.reject(new Error("VersionTagService~fetchAllTags: collectionUid not found"));const t=(0,i.resolveStoreInstance)(s.default).id;let n=`/collections/${e.collectionUid}/tags?count=100&user_id=${t}`,a=[],l=null;do{try{const e=l?`${n}&pageId=${l}`:n,t=await o.default.request(e,{method:"get"}),i=r.get(t,"body.tags",[]);l=r.get(t,"body.nextPageId",null),a=a.concat(r.map(i,(e=>({id:r.get(e,"id"),name:r.get(e,"message")}))))}catch(e){return Promise.reject(e)}}while(l);return Promise.resolve(a)}},"./monitors/components/common/DisabledTooltipWrapper.js":function(e,t,n){n.r(t);var o=n("../../node_modules/react/index.js"),i=n("./monitors/components/common/TooltipWithButton.js"),s=n("./js/components/base/Tooltips.js"),r=n("./monitors/stores/domain/MonitorPermissionStore.js"),a=n("./js/services/NavigationService.js"),l=n("./collaboration/navigation/constants.js"),c=n("./monitors/utils/messages/index.js");class d extends o.Component{constructor(e){super(e),this.state={tooltipVisible:!1},this.tooltipTimeout,this.monitorPermissionStore=new r.default,this.mouseEnter=this.mouseEnter.bind(this),this.mouseLeave=this.mouseLeave.bind(this),this.hideTooltipImmediately=this.hideTooltipImmediately.bind(this)}hideTooltipImmediately(){this.setState({tooltipVisible:!1}),document.getElementsByClassName("is-hidden")[0].click()}mouseEnter(){this.tooltipTimeout&&clearTimeout(this.tooltipTimeout),this.setState({tooltipVisible:!0})}mouseLeave(){this.tooltipTimeout&&clearTimeout(this.tooltipTimeout),this.tooltipTimeout=setTimeout((()=>{this.setState({tooltipVisible:!1})}),400)}onRequestAccessClick(e,t){a.default.transitionTo(l.ACCESS_REQUEST_CREATE_BUILD_IDENTIFIER,null,{entityId:e,entityName:t,entityType:"monitor",type:"grant_role"}),this.hideTooltipImmediately()}getTooltipBody(){return this.props.isOffline?c.TOOLTIP_TEXT.isOffline:this.props.tooltipText?this.props.tooltipText:o.createElement(i.default,{className:"monitor-request-access-tooltip",message:c.PERMISSION_TEXT.REQUEST_ACCESS_MSG,onClick:()=>this.onRequestAccessClick(this.props.monitorId,this.props.monitorName),buttonText:c.TOOLTIP_TEXT.requestAccess})}render(){return o.createElement("span",{className:`${this.props.wrapperPrefix}-tooltip-wrapper`,ref:"tooltipWrapper",onMouseEnter:this.mouseEnter,onMouseLeave:this.mouseLeave},this.props.children,this.props.showTooltip&&o.createElement(s.Tooltip,{target:this.refs.tooltipWrapper,show:this.state.tooltipVisible,onMouseEnter:this.mouseEnter,onMouseLeave:this.mouseLeave,delay:0},o.createElement(s.TooltipBody,null,this.getTooltipBody())))}}d.defaultProps={wrapperPrefix:"monitor"},t.default=d},"./monitors/components/common/MonitorDependencyListItem.js":function(e,t,n){n.r(t);var o=n("../../node_modules/react/index.js"),i=n("./version-control/common/ForkLabel.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),r=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),a=n("./node_modules/classnames/index.js"),l=n.n(a);const c=(0,r.observer)((({item:e,className:t,type:n,hideForkLabelTooltip:r=!0})=>{if(!e)return null;if(typeof e!=typeof{}||!e.name||!e.type)return pm.logger.error("MonitorDependencyListItem:Invalid Item Type",e),null;const{type:a,name:c,isForked:d,id:m,forkLabel:u}=e,p="create-monitor-collection-item",f={id:m,forkLabel:u,model:a},h={id:"environment"===a?e.baseEnvironmentUid:e.baseCollectionUid,model:a};return o.createElement("div",{className:l()({[t]:!!t,[p]:!0})},o.createElement("div",{className:`${p}__name`,title:c},"link"===n?o.createElement(s.default,{type:"link-subtle",className:`${p}__link`},c):c),d?o.createElement("div",{className:`${p}__qualifiers`},o.createElement(i.default,{hideForkLabelTooltip:r,className:`${p}__fork-label`,label:e.forkLabel,forkedEntity:f,baseEntity:h})):null)}));t.default=c},"./monitors/components/common/MonitorOfflineContextBar.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return c}});var o=n("../../node_modules/react/index.js"),i=n("./node_modules/prop-types/index.js"),s=n.n(i),r=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/CheckInternetConnection.js"),a=n("./js/components/base/Text.js"),l=n("./monitors/utils/messages/index.js");class c extends o.Component{constructor(e){super(e)}render(){return o.createElement("div",{className:"contextbar-offline-container"},o.createElement("div",{className:"icon-section"},o.createElement(r.default,null)),o.createElement("div",{className:"contextbar-offline-container__title"},o.createElement("h4",null,this.props.title)),o.createElement("div",{className:"contextbar-offline-container__subtitle"},o.createElement(a.default,{type:"body-medium",value:this.props.message})))}}c.defaultProps={icon:"icon-state-offline-stroke",title:l.OFFLINE_TEXT.text,message:l.OFFLINE_TEXT.subText},c.propTypes={icon:s().string,title:s().string,message:s().string}},"./monitors/components/common/TooltipWithButton.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return s}});var o=n("../../node_modules/react/index.js"),i=n("./js/components/base/Buttons.js");function s(e){return o.createElement("div",{className:e.className},o.createElement("div",{className:"msg"},e.message),o.createElement(i.Button,{type:"primary",size:"small",onClick:e.onClick},e.buttonText))}},"./monitors/components/common/UserInfo.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return m}});var o=n("../../node_modules/react/index.js"),i=n("./js/components/base/Avatar.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),r=n("./js/stores/StoreManager.js"),a=n("./js/stores/CurrentUserStore.js"),l=n("./appsdk/components/link/Link.js"),c=n("./monitors/components/common/DisabledTooltipWrapper.js"),d=n("./monitors/utils/messages/index.js");class m extends o.Component{constructor(e){super(e)}render(){const e=(0,r.resolveStoreInstance)(a.default),t=this.props.allowAlias&&Number(e.id)===Number(this.props.id)?"You":this.props.name,{public_handle:n,is_accessible:m,id:u}=this.props||{};return o.createElement(c.default,{showTooltip:!m,tooltipText:this.props.hasOwnProperty("id")?d.USER_PROFILE.privateUser:d.USER_PROFILE.error},o.createElement(l.default,{to:m?n||u&&`${pm.dashboardUrl}/users/${u}`:"",className:`${this.props.containerClass} user-info ${this.props.is_accessible?"is-clickable":""}`},this.props.showAvatar&&o.createElement("div",{className:"user-info__avatar"},o.createElement(i.default,{type:"user",customPic:this.props.hasOwnProperty("profile_pic_url")?this.props.profile_pic_url:"https://res.cloudinary.com/ddn1d7iih/image/upload/t_user_profile_300/v1/user/anonymous_user.png",userId:this.props.hasOwnProperty("id")?this.props.id:0,size:"medium",target:"_blank",linkProfile:!1})),this.props.showText&&o.createElement("div",{className:"user-info__text",title:this.props.name},o.createElement(s.default,{type:"link-subtle"},t||"User"))))}}m.defaultProps={showAvatar:!0,showText:!0,containerClass:"",allowAlias:!1}},"./monitors/containers/MonitorActivityInfo.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return A}});var o,i=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),r=n("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),a=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),l=n("../../node_modules/mobx/lib/mobx.module.js"),c=n("./node_modules/moment/moment.js"),d=n.n(c),m=n("./js/components/base/Buttons.js"),u=n("./monitors/components/common/UserInfo.js"),p=n("./appsdk/components/link/Link.js"),f=n("./appsdk/contextbar/ContextBarViewHeader.js"),h=n("./js/stores/StoreManager.js"),g=n("./js/stores/SyncStatusStore.js"),_=n("./monitors/stores/domain/MonitorPermissionStore.js"),I=n("./js/utils/ClipboardHelper.js"),E=n("./monitors/components/common/MonitorOfflineContextBar.js"),y=n("./integrations/components/context-bar/IntegrationContextBarList.js"),v=n("./js/containers/new-button/services/VersionTagService.js"),T=n("./monitors/utils/messages/index.js"),b=n("./runtime-repl/collection/_api/CollectionStoreV2.js"),N=n("./runtime-repl/environment/_api/EnvironmentStoreV2.js"),C=n("./monitors/components/common/MonitorDependencyListItem.js"),x=n("./monitors/constants.js"),j=n("./js/modules/services/AnalyticsService.js"),S=n("./api-dev/components/api-info-widget/LinkedAPIInfo/LinkedAPIInfo.tsx"),k=n("./node_modules/lodash/lodash.js");function w(){return w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},w.apply(this,arguments)}let A=(0,a.observer)(o=class extends i.Component{constructor(e){super(e),this.loadCollectionInfo=async()=>{let e;try{e=await(0,b.subscribeOne)(this.props.controller.store.data.collection,{exclude:["response","request"]})}catch(e){pm.logger.warn(T.COLLECTION_FETCH_ERROR.warn,e),pm.toasts.error(k.get(e,"message")||T.COLLECTION_FETCH_ERROR.error)}finally{this.setState({collectionInfo:e,collectionLoading:!1})}},this.loadEnvironmentInfo=async()=>{let e;try{let t=this.props.controller.store.data.environment;t&&(e=await(0,N.subscribeOne)(t))}catch(e){}finally{this.setState({environment:e,environmentLoading:!1})}},this.loadVersionInfo=async()=>{let e;const t=this.props.controller.store.data.versionTag;try{const n=await this.loadOwnVersions({collectionUid:this.props.controller.store.data.collection});let o=k.find(n,["id",t]);e=o?o.name:"CURRENT"}catch(e){pm.logger.warn(T.VERSION_TAGS_ERROR.warn,e),pm.toasts.error(k.get(e,"message")||T.VERSION_TAGS_ERROR.error)}finally{this.setState({versionName:e})}},this.monitorPermissionStore=new _.default,this.showPrvtUserTooltip=this.showPrvtUserTooltip.bind(this),this.hidePrvtUserTooltip=this.hidePrvtUserTooltip.bind(this),this.state={showPrvtUserTooltip:!1,idCopySuccess:!1,forkedFromCollectionId:null,forkName:null,versionTag:null,versionName:"",environment:null,collectionLoading:!0,environmentLoading:!0},this.loadOwnVersions=this.loadOwnVersions.bind(this)}componentDidMount(){k.get(this.props,"contextData.type")===x.UPTIME_MONITOR_TYPE&&j.default.addEventV2({category:x.MONITOR_ANALYTICS_CATEGORY,action:"view_context_pane",label:"uptime_beta"}),(0,l.when)((()=>this.props.controller.store.data.collection),(()=>this.loadMonitorInfo()))}async loadMonitorInfo(){this.setState({collectionLoading:!0,environmentLoading:!0}),await(0,h.resolveStoreInstance)(g.default).onSyncAvailable(),await Promise.allSettled([this.loadCollectionInfo(),this.loadVersionInfo(),this.loadEnvironmentInfo()])}loadOwnVersions(e){return(0,v.fetchAllTags)(e).then((e=>e))}componentWillUnmount(){clearTimeout(this.clearIdCopySuccessTimeout),k.invoke(this.state,"collectionInfo.unsubscribe"),k.invoke(this.state,"environment.unsubscribe")}showPrvtUserTooltip(){this.setState({showPrvtUserTooltip:!0})}hidePrvtUserTooltip(){this.setState({showPrvtUserTooltip:!1})}fetchUserName(e,t){let n=t.reduce(((e,t)=>(e[t.id]=t,e)),{});return k.get(n,e,{}).name}canViewCreatorInfo(){return this.monitorPermissionStore.can("viewCreatorInfo",this.props.contextData.id)}copyMonitorId(e){this.state.idCopySuccess||(I.default.copy(e),this.setState({idCopySuccess:!0},(()=>{this.clearIdCopySuccessTimeout=setTimeout((()=>this.setState({idCopySuccess:!1})),3e3)})))}fetchCopyIcon(e){return e?i.createElement(r.default,{name:"icon-state-success-stroke",className:"monitor-info-context-view__entity__content__toggle__success"}):i.createElement(r.default,{name:"icon-action-copy-stroke",className:"monitor-info-context-view__entity__content__toggle__copy"})}render(){const{isOffline:e}=this.props.controller.monitorActivityDetailsStore;this.monitorInfo=k.get(this.props,"contextData",{});const t=d()(this.monitorInfo.createdAt).format("DD MMM YYYY, h:mm A");return i.createElement("div",{className:"monitor-info-context-view-wrapper"},i.createElement(f.ContextBarViewHeader,{title:this.props.title,onClose:this.props.onClose}),e&&"number"==typeof this.props.contextData.createdBy?i.createElement(E.default,null):i.createElement("div",{className:"monitor-info-context-view"},i.createElement("div",{className:"monitor-info-context-view__entity"},i.createElement("div",{className:"monitor-info-context-view__entity__label"},"ID"),i.createElement("div",{className:"monitor-info-context-view__entity__content"},i.createElement("div",{className:"monitor-info-context-view__entity__content__id"},this.monitorInfo.id),i.createElement(m.Button,{className:"monitor-info-context-view__entity__content__toggle",tooltip:this.state.idCopySuccess?"Copied":"Copy Monitor ID",type:"icon",onClick:()=>this.copyMonitorId(this.monitorInfo.id)},this.fetchCopyIcon(this.state.idCopySuccess)))),i.createElement("div",{className:"monitor-info-context-view__entity"},i.createElement(i.Fragment,null,i.createElement("div",{className:"monitor-info-context-view__entity__label"},"Created by"),i.createElement("div",{disabled:e,className:e&&"monitor-info-userinfo-offline"},i.createElement(u.default,w({},this.monitorInfo.creatorInfo,{containerClass:"monitor-info-context-view__entity__content"}))))),i.createElement("div",{className:"monitor-info-context-view__entity"},i.createElement("div",{className:"monitor-info-context-view__entity__label"},"Created at"),i.createElement("div",{className:"monitor-info-context-view__entity__content"},t)),this.monitorInfo.type===x.UPTIME_MONITOR_TYPE&&i.createElement(S.LinkedAPIInfo,{entityId:this.monitorInfo.id,entityType:"uptimemonitor",entityName:this.monitorInfo.name}),this.monitorInfo.type!=x.UPTIME_MONITOR_TYPE&&i.createElement(i.Fragment,null,i.createElement("div",{className:"monitor-info-context-view__entity"},i.createElement("div",{className:"monitor-info-context-view__entity__label"},"Collection"),i.createElement("div",{className:"monitor-info-context-view__entity__content monitor-info-context-view__entity__content--collection"},this.state.collectionLoading&&i.createElement(s.default,{color:"content-color-secondary",text:T.LOADING_STATE.generic}),this.monitorInfo.collection&&this.state.collectionInfo?i.createElement(i.Fragment,null,i.createElement(p.default,{to:e?"":{routeIdentifier:"collection.openWithWsSelect",routeParams:{cid:this.monitorInfo.collection}},className:"monitor-info-context-view__entity__content__collection"},e?i.createElement(m.Button,{type:"tertiary",className:"monitor-info-btn",disabled:e,tooltip:e&&T.TOOLTIP_TEXT.isOffline},i.createElement(C.default,{item:this.state.collectionInfo,hideForkLabelTooltip:!1})):i.createElement("div",{className:"monitor-info-text-link"},this.state.collectionInfo&&i.createElement(C.default,{type:"link",item:this.state.collectionInfo,hideForkLabelTooltip:!1}))),i.createElement("div",{className:"monitor-info-collection__collection-version-tag"},this.state.versionName)):i.createElement("span",{className:"monitor-info-context-view__entity__content__collection-empty"},!this.state.collectionLoading&&T.MONITOR_DETAILS_NO_COLLECTION))),i.createElement("div",{className:"monitor-info-context-view__entity"},i.createElement("div",{className:"monitor-info-context-view__entity__label"},"Environment"),i.createElement("div",{className:"monitor-info-context-view__entity__content monitor-info-context-view__entity__content--environment"},this.state.environmentLoading&&i.createElement(s.default,{color:"content-color-secondary",text:T.LOADING_STATE.generic}),this.state.environment?i.createElement(p.default,{to:e?"":{routeIdentifier:"build.environment",routeParams:{eid:this.monitorInfo.environment}},className:"monitor-info-context-view__entity__content__environment"},e?i.createElement(m.Button,{type:"tertiary",className:"monitor-info-btn",disabled:e,tooltip:e&&T.TOOLTIP_TEXT.isOffline},k.get(this.state.environment,"name",null)):i.createElement("div",{className:"monitor-info-text-link"},this.state.environment&&i.createElement(C.default,{type:"link",item:this.state.environment,hideForkLabelTooltip:!1}))):i.createElement("span",{className:"monitor-info-context-view__entity__content__environment-empty"},!this.state.environmentLoading&&T.NO_ENVIRONMENT))),i.createElement(S.LinkedAPIInfo,{entityId:this.monitorInfo.id,entityType:"monitor",entityName:this.monitorInfo.name}),k.includes(["dev","beta","stage","canary","prod"],window.RELEASE_CHANNEL)&&i.createElement(y.IntegrationContextBarList,{entityId:this.monitorInfo.id,entityType:"monitor"}))))}})||o},"./monitors/stores/domain/MonitorPermissionStore.js":function(e,t,n){n.r(t),n.d(t,{default:function(){return a}});var o=n("./js/stores/StoreManager.js"),i=n("./js/stores/CurrentUserStore.js"),s=n("./monitors/stores/domain/MasterMonitorStore.js"),r=(n("./monitors/constants.js"),n("./node_modules/lodash/lodash.js"));class a{constructor(){return a.instance||(this.masterMonitorStore=new s.default,a.instance=this),a.instance}isUserLoggedIn(){return(0,o.resolveStoreInstance)(i.default).isLoggedIn}can(e,t){const n=this.masterMonitorStore.getJobTemplateMetadata(t);return!(!n||!n.permissions)&&r.get(n.permissions,e,!1)}}},"./api-dev/components/api-info-widget/LinkedAPIInfo/LinkedAPIInfo.tsx":function(e,t,n){n.r(t),n.d(t,{LinkedAPIInfo:function(){return I}});var o=n("../../node_modules/react/index.js"),i=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),s=n("./node_modules/lodash/lodash.js"),r=n.n(s),a=n("./api-dev/util/EntityHelper.ts"),l=n("./appsdk/components/link/Link.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),p=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-add-stroke.js"),f=n("./api-dev/services/APIDevService.js"),h=n("./js/components/base/LoadingIndicator.js"),g=n("./js/utils/uid-helper.js"),_=function(e,t,n,o){var i,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(s<3?i(r):s>3?i(t,n,r):i(t,n))||r);return s>3&&r&&Object.defineProperty(t,n,r),r};let I=class extends o.Component{constructor(e){super(e),this.loadData=()=>{let{entityType:e,entityId:t}=this.props;this.setState({loading:!0}),"collection"===e?f.default.getAPILinkedToCollection(t).then((e=>{e.api&&this.setState({linkedApi:e.api,linkedVersion:r().first(e.api.versions)||null,isAPILinked:!0})})).catch((e=>{pm.logger.warn("LinkedAPIInfo~loadData: Failed to delete API.",e)})).finally((()=>this.setState({loading:!1}))):("environment"===e&&(t=(0,g.decomposeUID)(t).modelId),f.default.getAPIAndVersionForRelation(e,t).then((e=>{this.setState({linkedApi:e,linkedVersion:e.apiVersion,isAPILinked:!0})})).catch((e=>{pm.logger.warn("LinkedAPIInfo~loadData: Failed to delete API.",e)})).finally((()=>this.setState({loading:!1}))))},this.renderLoadingState=()=>o.createElement(c.default,{justifyContent:"center"},o.createElement(h.default,null)),this.renderAPIInfo=()=>{const{linkedApi:e,linkedVersion:t}=this.state;if(e&&t)return o.createElement(l.default,{to:{routeIdentifier:"build.apiVersion",routeParams:{apiId:e.id,versionId:t.id}}},o.createElement(d.default,{type:"body-medium"},o.createElement(d.default,{type:"link-subtle"},e.name)))},this.renderEmptyState=()=>{const{entityType:e,entityId:t,entityName:n,entityInfo:i}=this.props,s=r().get(i,[e,"permissions","edit"]);return o.createElement(c.default,{direction:"column",gap:"spacing-xs",alignItems:"flex-start"},o.createElement(d.default,{type:"para"},"This ",(0,a.getUserFriendlyNameFromType)(e)," is not added to any API"),"monitor"!==e&&o.createElement(m.default,{onClick:()=>{pm.mediator.trigger("showAddAPIRelationModal",{id:t,name:n,type:e})},isDisabled:!s,tooltip:!s&&"You don't have permission to take this action.",type:"tertiary",text:"Add to API",icon:o.createElement(p.default,null)}))},this.state={linkedApi:null,linkedVersion:null,isAPILinked:!1,loading:!1},pm.windowEvents.addListener("relation-linked",this.handleEventUpdate.bind(this,"linked")),pm.windowEvents.addListener("relation-unlinked",this.handleEventUpdate.bind(this,"unlinked"))}componentDidMount(){this.loadData()}componentWillUnmount(){pm.windowEvents.removeListener("relation-linked",this.handleEventUpdate.bind(this,"linked")),pm.windowEvents.removeListener("relation-unlinked",this.handleEventUpdate.bind(this,"unlinked"))}handleEventUpdate(e,t){const n=t.relation.modelId;this.props.entityId===n&&("linked"===e?this.setState({isAPILinked:!0,linkedApi:{id:t.apiId,name:t.apiName},linkedVersion:{id:t.versionId,name:t.versionName}}):"unlinked"===e&&this.setState({isAPILinked:!1,linkedApi:null,linkedVersion:null}))}render(){const{isAPILinked:e,loading:t}=this.state,{className:n,padding:i}=this.props;return o.createElement(c.default,{className:n,direction:"column",gap:"spacing-s",padding:i},o.createElement(u.default,{text:"API"}),t&&this.renderLoadingState(),!t&&e&&this.renderAPIInfo(),!t&&!e&&this.renderEmptyState())}};I=_([i.observer],I)},"./api-dev/util/EntityHelper.ts":function(e,t,n){n.r(t),n.d(t,{getUserFriendlyNameFromType:function(){return i}});const o={environment:"environment",mock:"mock server",monitor:"monitor",uptimemonitor:"uptime monitor",collection:"collection",documentation:"documentation",test:"test",schema:"schema",apiDefinition:"definition",unclassified:"unclassified"},i=e=>e?o[e]:""},"./integrations/constants/IntegrationTargets.ts":function(e,t,n){n.r(t),n.d(t,{CATEGORY_ANALYTICS_NAV:function(){return a},CATEGORY_BACKUP:function(){return l},CATEGORY_NOTIFICATIONS_NAV:function(){return r},CLIENT_CATEGORY_COLLECTION_BACKUP:function(){return o},CLIENT_CATEGORY_MONITOR_ANALYTICS:function(){return i},CLIENT_CATEGORY_MONITOR_NOTIFICATIONS:function(){return s},INTERNAL_ENTITY_NAME_MAPPING:function(){return c}});const o="backup-collection",i="analytics-monitor",s="notifications-monitor",r="notifications",a="analytics",l="Backup",c={monitor:"jobTemplate",collection:"collection"}}}]);