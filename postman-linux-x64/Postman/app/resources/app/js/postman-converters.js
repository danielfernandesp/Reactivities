"use strict";(self.webpackChunk_postman_app_renderer=self.webpackChunk_postman_app_renderer||[]).push([[154],{"./growth/expansion/experiments/grw-597/helpers.js":function(e,t,o){o.r(t),o.d(t,{getWorkspaceIdFromCollectionLink:function(){return c},hasCollectionLinkFromDifferentWorkspace:function(){return l},saveCollectionLinkForGRW597:function(){return a}});var r=o("./collaboration/workspace/controller/ActiveWorkspaceController.ts"),n=o("./js/stores/StoreManager.js"),s=o("./js/stores/CurrentUserStore.js"),i=o("./growth/expansion/experiments/grw-597/store.js");const l=e=>{if(e.collectionLink&&e.collectionLink.length){return c(e.collectionLink)!==r.default.getWorkspaceIdentifier()}return!1},a=e=>{if(i.default.growth597InteractionData.bucketedInVariant){let t=i.default.growth597InteractionData.importedCollections;const o=e.owner+"-"+e.id,r=(0,n.resolveStoreInstance)(s.default).name;t[o]={link:e.collectionLink,createdAt:(new Date).getTime(),importedBy:r},i.default.updateStore({importedCollections:t})}},c=e=>{const t=e.indexOf("workspace");if(-1===t)return null;const o=e.substr(t+10).indexOf("/");return-1===o?null:e.substr(t+10,o)}},"./js/modules/export/index.js":function(e,t,o){o.r(t);var r=o("./js/modules/export/export-single.js");t.default={exportSingle:r.default}},"./js/services/conversion/checkImportEnvironmentFromUrl.js":function(e,t,o){o.r(t),o.d(t,{default:function(){return d}});var r=o("./js/utils/util.js"),n=o("./js/utils/PostmanUrlUtils.js"),s=o("./js/stores/StoreManager.js"),i=o("./collaboration/workspace/model/ActiveWorkspaceBaseStore.ts"),l=o("./runtime-repl/environment/_api/EnvironmentInterfaceV2.ts"),a=o("./node_modules/lodash/lodash.js"),c=o("../../node_modules/console-browserify/index.js");function d(e){e=decodeURIComponent(e);var t,o=n.default.getHashVars(e);a.each(o,(function(e){var o=decodeURIComponent(e.key);if(0==o.indexOf("env[")&&"]"==o[o.length-1])try{var n="";try{n=atob(e.value)}catch(t){if(!a.endsWith(e.value,'"'))throw t;e.value=e.value.substring(0,e.value.length-1),n=atob(e.value)}var d=o.substring(4,o.length-1),u=JSON.parse(n),m=[];if(u instanceof Array){var p=u.length;for(t=0;t<p;t++)m.push(a.assign({type:"text",enabled:!0},u[t]))}else a.forOwn(u,(function(e,t){m.push({key:t,value:e,type:"text",enabled:!0})}));let c={id:r.default.guid(),name:d,values:m};(0,l.createEnvironment)(c,(0,s.resolveStoreInstance)(i.default).id).then((()=>pm.toasts.success("Environment "+d+" imported"))).catch((e=>pm.logger.error("Error in creating evironment",e)))}catch(e){c.log("Could not import environment")}}))}},"./js/services/conversion/importCollectionAndEnvironment.js":function(e,t,o){o.r(t),o.d(t,{default:function(){return a}});var r=o("./js/services/conversion/index.js"),n=o("./js/modules/services/AnalyticsService.js"),s=o("./js/utils/util.js"),i=o("./js/utils/PostmanUrlUtils.js"),l=o("./node_modules/lodash/lodash.js");function a(e){r.default.importFileFromUrl(e,((t,o)=>{if(t)return pm.logger.error(t);r.default.checkImportEnvironmentFromUrl(e);var a=i.default.getUrlVars(e),c=l.find(a,(function(e){return"referrer"===e.key})),d=c?decodeURIComponent(c.value):"";n.default.addEvent("collection","create","run_button",null,{referrer:d,collection_id:o.id,collection_link_id:s.default.getCollectionLinkId(e)})}))}},"./js/services/conversion/importFileFromUrl.js":function(e,t,o){o.r(t),o.d(t,{default:function(){return c},parseUrlData:function(){return d}});var r=o("./node_modules/lodash/lodash.js"),n=o.n(r),s=o("./js/controllers/Importer.js"),i=(o("./js/utils/util.js"),o("./js/utils/HttpService.js")),l=o("./js/modules/services/RemoteSyncRequestService.js"),a=o("../../node_modules/console-browserify/index.js");function c(e,t){i.default.request(e).then((({body:o})=>{try{s.default.importData(o,{origin:"import/link",link:e}).then((()=>{n().isFunction(t)&&t(null,o)}))}catch(e){"Could not parse"==e?(pm.mediator.trigger("failedCollectionImport","format not recognized"),n().isFunction(t)&&t("format not recognized")):(pm.mediator.trigger("failedCollectionImport","Could not import: "+e),n().isFunction(t)&&t("Could not import: "+e))}})).catch((({error:e})=>{a.log("Error response while importing: ",e),pm.mediator.trigger("failedCollectionImport","Error response received from URL. Check the console for more."),n().isFunction(t)&&t("Error response received from URL. Check the console for more.")}))}function d(e,t=!0){let o=new URL(e),r="localhost"===o.hostname||"127.0.0.1"===o.hostname;return"browser"!==window.SDK_PLATFORM&&"http:"!==o.protocol||r?i.default.request(e).then((({body:e})=>e)).catch((({error:e})=>(pm.logger.warn("Error while parsing url data: ",e),t&&pm.toasts.error("Error while fetching data from link."),null))):l.default.request("/ws/proxy",{method:"post",data:{path:"/api/v1/download",service:"importer",method:"post",body:{url:e}}}).then((({body:e})=>e.data)).catch((e=>{let o=n().get(e,"error.message")||"Error while fetching data from link.";return pm.logger.warn("Error while parsing url data: ",e),t&&pm.toasts.error(o),null}))}},"./js/services/conversion/importFiles.js":function(e,t,o){o.r(t),o.d(t,{default:function(){return i}});o("./node_modules/lodash/lodash.js");var r=o("./js/controllers/Importer.js"),n=o("./node_modules/async/dist/async.js"),s=o.n(n);function i(e,t,o){s().eachSeries(e,((n,s)=>{let i=new FileReader;i.onload=function(n){var i=n.currentTarget.result;if("importByFileContainer"===t&&o&&1===e.length)return o(i,{origin:"import/file"});r.default.importData(i,{origin:"import/file"},s)},i.readAsText(n)}))}},"./js/services/conversion/importFolder.js":function(e,t,o){o.r(t),o.d(t,{default:function(){return u},determineDataFormats:function(){return m}});var r=o("./node_modules/lodash/lodash.js"),n=o.n(r),s=o("./js/controllers/Importer.js"),i=o("./js/modules/services/AnalyticsService.js"),l=o("./node_modules/async/dist/async.js"),a=o.n(l),c=o("./js/services/conversion/formats/index.js"),d=o("../../node_modules/console-browserify/index.js");async function u(e,t,o,r){var l,c=n().zipObject(n().map(e,"fileName"),n().map(e,"content")),u=n().map(e,(e=>n().pick(e,"fileName"))),p={},f=[];if(l="browser"===window.SDK_PLATFORM?await m(e):await m(u))try{var v;v="browser"===window.SDK_PLATFORM?await l.convertFolder(e,r):await l.convertFolder(u,r),i.default.addEventV2({category:"collection",action:"create",label:l.id}),a().each(v,((e,t)=>{s.default.importData(e.data,{origin:"import/folder"},t)}))}catch(e){pm.toasts.error(`Error while importing ${l.name}: ${e.message}`),pm.mediator.trigger("failedCollectionImport",`Error importing ${l.name} API: ${e.message}`)}else a().eachOfSeries(c,((e,t,o)=>{s.default.importData(e,{origin:"import/folder"},((e,r)=>(n().isEmpty(n().get(r,"format.id"))?f.push(t):p[t]=r,o())))}),(()=>{n().isEmpty(p)?pm.toasts.error("Error while importing: Could not determine format"):f.length>0&&(pm.toasts.warn("Warning while importing: Some of files could not be imported. Check Developer Tools to get more info."),d.log("failedImport: Here are the files that were not imported ",f))}))}async function m(e,t){var o=n().chain(c.default).filter(["multiFileSupport",!0]).value();for(let t of o)try{if(await t.validateFolder(e))return t}catch(e){}}},"./js/services/conversion/index.js":function(e,t,o){o.r(t);var r=o("./js/services/conversion/checkImportEnvironmentFromUrl.js"),n=o("./js/services/conversion/importCollectionAndEnvironment.js"),s=o("./js/services/conversion/convertData.js"),i=o("./js/services/conversion/importFileFromUrl.js"),l=o("./js/services/conversion/importFiles.js"),a=o("./js/services/conversion/importFolder.js"),c=o("./js/services/conversion/saveEntity.js"),d=o("./js/services/conversion/importers/index.js"),u=o("./node_modules/async/dist/async.js"),m=o.n(u),p=o("./runtime-repl/runner/RunnerHelper.js"),f=o("./js/services/UIEventService.js"),v=o("./onboarding/src/common/components/InviteMembersNudge/InviteMembersNudgeConstants.js"),h=o("./growth/foundation/public/amplitude/AmplitudeService.js"),j=o("./growth/expansion/experiments/grw-597/helpers.js"),g=o("./runtime-repl/collection/_api/CollectionInterface.js"),w=o("./node_modules/lodash/lodash.js");function E(e,t){if(e)e.isUserFriendly?pm.toasts.error(e.message,{dedupeId:"failed-collection-import"}):pm.toasts.error("Failed to import collection "+t.name,{dedupeId:"failed-collection-import"});else{let e=t.owner?`${t.owner}-${t.id}`:t.id;(0,g.openCollectionInTab)(e),setTimeout((()=>{f.default.publish(v.OPEN_INVITE_MEMBERS_NUDGE_EVENT,{exporter:t.exporter,name:t.name,exportedCollectionId:t.originalCollectionId})}),3e3);let o=(0,j.hasCollectionLinkFromDifferentWorkspace)(t);h.Ampli.collectionImportImportCompleted({...o&&{has_collection_link:!!t.collectionLink}}),o&&(0,j.saveCollectionLinkForGRW597)(t)}}t.default={checkImportEnvironmentFromUrl:r.default,importCollectionAndEnvironment:n.default,importData:async function(e,t,o){if(w.isEmpty(e))return w.isFunction(o)&&o();m().series([o=>{d.default.importCollections(e.collections,t,E,(e=>{o(null,e)}))},o=>{d.default.importGlobals(e.globals,w.pick(t,["activeWorkspace","silentToasts"]),(e=>{o(null,e)}))},o=>{d.default.importHeaderPresets(e.headerPresets,w.pick(t,["currentUserID","activeWorkspace","silentToasts"]),(e=>{o(null,e)}))},o=>{d.default.importEnvironments(e.environments,w.pick(t,["currentUserID","silentToasts","activeWorkspace","importConflictResolver"]),(e=>{o(null,e)}))},t=>{d.default.importRequests(e.requests,(e=>{t(null,e)}))},o=>{d.default.importCollectionRuns(e.runsInfo,e.events,t,p.handleCollectionRunImportStatus,(e=>{o(null,e)}))}],((e,t)=>{let r={};w.forEach(w.compact(t),(e=>{r[e.type]=w.pick(e,["total","imported","failed"])})),w.isFunction(o)&&o(r)}))},convertRawData:s.default,importDataAs:s.importDataAs,stringify:s.stringify,importFileFromUrl:i.default,parseUrlData:i.parseUrlData,importFiles:l.default,importFolder:a.default,saveEntity:c.default,handleCollectionImportStatus:E}},"./js/services/conversion/saveEntity.js":function(e,t,o){o.r(t),o.d(t,{default:function(){return u}});var r=o("./js/models/services/filesystem.js"),n=o("./js/modules/export/index.js"),s=o("./js/modules/services/AnalyticsService.js"),i=o("./js/services/conversion/export-all.js"),l=o("./node_modules/lodash/lodash.js"),a=o("../../node_modules/console-browserify/index.js");const c={json:"application/json"},d="collection";function u(e,t={}){let o,u,m,p=t.type,f=l.get(t,"outputVersion","2.1.0");if(p)return n.default.exportSingle(p,e,t).then((e=>{if(!(e&&c[e.type]&&e[e.type]))throw a.warn("Invalid data or unsupported file type",e),new Error("saveEntity: invalid data received");return e})).then((e=>{o=e,u=c[o.type],m=l.get(o,"meta.fileName",p+".json")})).then((()=>JSON.stringify(o.json,null,"\t"))).then((e=>new Promise(((t,o)=>{(0,r.saveAndOpenFile)(m,e,u,((e,r)=>{if(e)return a.warn("Error while saving the exported entity",e),void o(e);t(r)}))})))).then((t=>{if(t!==i.EXPORT_STATE.SUCCESS)return;let o="browser"!==window.SDK_PLATFORM;switch(p){case d:s.default.addEvent(d,"download",f,null,{collection_id:e.id}),o&&pm.toasts.success("Your collection was exported successfully.");break;case"environment":s.default.addEvent(p,"download"),o&&pm.toasts.success("Your environment was exported successfully.");break;case"globals":s.default.addEvent(p,"download"),o&&pm.toasts.success("Your globals were exported successfully.")}})).catch((o=>{pm.toasts.error("Unable to export this entity. Please check the DevTools."),a.warn("Error while exporting an entity",e,t,o)}));a.warn(`Unsupported type '${p}' for exporting`)}},"./onboarding/src/common/components/InviteMembersNudge/InviteMembersNudgeConstants.js":function(e,t,o){o.r(t),o.d(t,{INTERACTED_EVENT_DETAIL:function(){return s},INTERACTION_EVENTS_DEFAULT_QUERY:function(){return n},OPEN_INVITE_MEMBERS_NUDGE_EVENT:function(){return r}});const r="OPEN_INVITE_MEMBERS_NUDGE",n={entityType:"user",resourceId:"skip-import-popover",resourceType:"growth"},s={isDismissed:!0}}}]);