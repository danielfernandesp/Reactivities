"use strict";(self.webpackChunk_postman_app_renderer=self.webpackChunk_postman_app_renderer||[]).push([[11],{"./api-dev/components/api-sidebar/APISidebarListEmptyItem/APISidebarListEmptyItem.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return g}});var o,n=i("../../node_modules/react/index.js"),s=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=i("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/NoAPI.js"),a=(i("./js/components/base/Buttons.js"),i("./js/stores/CurrentUserStore.js")),l=(i("./api-dev/stores/APIListStore.js"),i("./js/stores/ActiveWorkspaceStore.js")),d=i("./js/stores/StoreManager.js"),c=i("./js/stores/SyncStatusStore.js"),u=i("./js/components/base/LoadingIndicator.js"),p=i("./js/modules/services/AnalyticsService.js"),m=i("./js/modules/services/AuthHandlerService.js"),h=i("./appsdk/sidebar/SidebarEmptyState/SidebarEmptyState.js"),I=i("./appsdk/sidebar/SidebarNoResultsFound/SidebarNoResultsFound.js"),f=i("./js/services/NavigationService.js"),E=i("./api-dev/services/APIPermissionService.js"),v=i("./api-dev/util/TooltipText.js"),b=i("./node_modules/lodash/lodash.js");let g=(0,s.observer)(o=class extends n.Component{constructor(e){super(e),this.state={isCreateAPIModalOpen:!1},this.handleOffline=this.handleOffline.bind(this),this.handleLoggedOut=this.handleLoggedOut.bind(this),this.getComponent=this.getComponent.bind(this),this.createAPI=this.createAPI.bind(this)}createAPI(){return p.default.addEventV2({category:"api",action:"start_create_flow",label:"api_sidebar",value:1}),f.default.transitionTo("build.createAPI")}handleOffline(){this.props.apiListStore.refresh()}handleLoggedOut(){m.default.initiateLogin()}getComponent(e,t,i,o){const s=!b.get((0,d.resolveStoreInstance)(c.default),"isSocketConnected"),a=b.get((0,d.resolveStoreInstance)(l.default),"id"),p=E.default.hasPermission(this.props.apiListStore.permissions,"create","workspace",a),m=!s&&!b.get(this.props,"apiListStore.isCreating")&&p;return n.createElement(h.default,{illustration:n.createElement(r.default,null),title:e,message:t,action:{label:n.createElement("span",null,this.props.apiListStore.isCreating?n.createElement(u.default,null):i),handler:o,tooltip:(0,v.default)(!m,!p)},hasPermissions:m})}getContent(){let e=!(0,d.resolveStoreInstance)(a.default).isLoggedIn,t=((0,d.resolveStoreInstance)(c.default).isSocketConnected,""),i="",o="";return e?(t="Sign in to create APIs",i="APIs define related collections and environments under a consistent schema.",o="Sign in to create APIs",this.getComponent(t,i,o,this.handleLoggedOut)):this.props.query&&b.isEmpty(this.props.apiListStore.sortedAPIs)?n.createElement(I.default,{searchQuery:this.props.query,illustration:n.createElement(r.default,null)}):(t="No APIs yet",i="APIs define related collections and environments under a consistent schema.",o="Create an API",n.createElement(n.Fragment,null,this.getComponent(t,i,o,this.createAPI)))}render(){return this.getContent()}})||o},"./api-dev/components/api-sidebar/APISidebarMenuGenericSidebar/APISidebarMenu.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return b}});var o,n=i("../../node_modules/react/index.js"),s=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=i("./js/stores/ActiveWorkspaceStore.js"),a=i("./js/stores/SyncStatusStore.js"),l=i("./js/stores/CurrentUserStore.js"),d=i("./js/stores/StoreManager.js"),c=i("./api-dev/stores/APISidebarStore.js"),u=i("./api-dev/stores/APIListStore.js"),p=(i("./node_modules/classnames/index.js"),i("./js/components/base/Buttons.js"),i("./js/modules/services/AnalyticsService.js")),m=i("./js/containers/apps/requester/sidebar/SidebarListActions.js"),h=i("./api-dev/constants/Permissions.js"),I=i("./api-dev/services/APIPermissionService.js"),f=i("./js/services/NavigationService.js"),E=i("./api-dev/constants/APITooltips.js"),v=i("./js/services/SingleTabWorkbenchService.js");let b=(0,s.observer)(o=class extends n.Component{constructor(e){super(e),this.state={refreshDisabled:!1,isCreateAPIModalOpen:!1},this.getAddIconText=this.getAddIconText.bind(this),this.createAPI=this.createAPI.bind(this),this.handleSearchChange=this.handleSearchChange.bind(this),this.store=(0,d.resolveStoreInstance)(c.default),this.listStore=(0,d.resolveStoreInstance)(u.default)}createAPI(){if(!v.default.didUserCancelDiscard())return(0,d.resolveStoreInstance)(l.default).isLoggedIn?(p.default.addEventV2({category:"api",action:"start_create_flow",label:"api_sidebar_header",value:1}),f.default.transitionTo("build.createAPI")):pm.mediator.trigger("showSignInModal",{type:"createAPI",origin:"API_sidebar",continueUrl:new URL(window.location.href),subtitle:"You need an account to continue exploring Postman."})}getAddIconText(e,t,i){return e?E.IS_OFFLINE_TOOLTIP_MSG:t?i?E.API_ALREADY_CREATING:"Create new API":h.API_PERMISSION_ERROR}componentWillUnmount(){clearTimeout(this.enableRefreshTimeout)}handleSearchChange(e){this.store.setSearchQuery(e)}render(){const e=(0,d.resolveStoreInstance)(a.default).isSocketConnected,t=this.listStore.isCreating,i=e&&!t,o=(i&&!this.state.refreshDisabled&&this.listStore.isHydrating,(0,d.resolveStoreInstance)(r.default).id),s=I.default.hasPermission(this.listStore.permissions,"create","workspace",o);return n.createElement(m.default,{createNewConfig:{tooltip:this.getAddIconText(!e,s,t),disabled:!i||!s,onCreate:this.createAPI,xPathIdentifier:"addAPI"},onSearch:this.props.handleSearchChange,searchQuery:this.props.searchQuery})}})||o},"./api-dev/components/api/AddCollectionToAPI/AddCollectionToAPI.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return T}});var o=i("../../node_modules/react/index.js"),n=i("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),s=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),r=i("../../node_modules/@postman/aether/esmLib/src/components/Modal/Modal.js"),a=i("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/PageNotFound.js"),l=i("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),d=i("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/SingleSelect/SingleSelect.js"),c=i("./api-dev/services/APIDevService.js"),u=i("./js/stores/StoreManager.js"),p=i("./api-dev/stores/APIListStore.js"),m=i("./runtime-repl/collection/_api/CollectionStoreV2.js"),h=i("./api-dev/util/error.js"),I=i("./js/components/base/LoadingIndicator.js"),f=i("../../packages/version-control/change-management/index.ts"),E=i("./js/modules/services/AnalyticsService.js"),v=i("./api-dev/interfaces/APIInterface.js"),b=i("./runtime-repl/collection/_api/CollectionInterface.js"),g=i("./api-dev/constants/APITabModes.js"),_=i("./node_modules/lodash/lodash.js");function A(e){const{label:t,forkLabel:i,id:r}=e;return o.createElement(n.default,{grow:1,shrink:1,minWidth:"0px",alignItems:"center",gap:"spacing-s"},o.createElement(s.default,{isTruncated:!0},t),i&&o.createElement(f.ForkLabel,{forkDetails:{id:r,label:i,type:"collection",parent:{}},disableTooltip:!0}))}class T extends o.Component{constructor(e){super(e),this.state={selectedCollections:null,collections:[],isFetchingCollections:!1,isCreatingCollections:!1,errorFetchingCollections:!1},this.handleCollectionSelection=this.handleCollectionSelection.bind(this),this.fetchCollectionsInWorkspace=this.fetchCollectionsInWorkspace.bind(this),this.handleAddCollectionsToAPI=this.handleAddCollectionsToAPI.bind(this),this.addExistingCollectionInBranch=this.addExistingCollectionInBranch.bind(this),this.addExistingCollectionInAPIWorkbench=this.addExistingCollectionInAPIWorkbench.bind(this),this.fetchVersionId=this.fetchVersionId.bind(this)}componentDidUpdate(e){this.props.showAddCollectionsModal&&this.props.showAddCollectionsModal!==e.showAddCollectionsModal&&this.fetchCollectionsInWorkspace()}async fetchCollectionsInWorkspace(){this.setState({isFetchingCollections:!0,errorFetchingCollections:!1});try{const e=await(0,c.getWorkspaceId)(),t=await(0,m.getMeta)(e),i=_.chain(t).get("list").map((e=>_.pick(e,["id","name","forkLabel"]))).value(),o=_.keyBy(i,"id");let n=[];_.isEmpty(o)||(n=await c.default.checkConstraintsForRelationLink(this.props.apiId,this.fetchVersionId(),"unclassified",_.keys(o)));const s=_.reduce(o,(function(e,t,i){return _.find(n,(e=>e.entityId===i&&!0===e.allowed))&&e.push({value:i,label:o[i].name,forkLabel:o[i].forkLabel,id:o[i].id}),e}),[]);this.setState({collections:_.sortBy(s,["label"]),isFetchingCollections:!1,errorFetchingCollections:!1})}catch(e){(0,h.handleError)(e),this.setState({errorFetchingCollections:!0,isFetchingCollections:!1})}}handleCollectionSelection(e){this.setState((t=>({selectedCollections:e})))}fetchVersionId(){const e=(0,u.resolveStoreInstance)(p.default).find(this.props.apiId);return _.get(e,"childEntities.values.0.id")}async addExistingCollectionInBranch(e){const t=this.props.apiId,i=await(0,m.cloneCollection)(e,{format:"2.1.0"});return(0,v.addCollectionOnBranch)(t,"unclassified",i).then((async e=>{const i=(null==e?void 0:e.id)||(null==e?void 0:e.modelId),o={branch:_.get(this.props.model,"apiMode.value"),collection:i},n={type:"api",id:t};return(0,b.openCollectionInTab)(i,{tabOptions:{forceNew:!0},focusContext:"info"},n,o)}))}async addExistingCollectionInAPIWorkbench(e){var t;const i=this.props.apiId,o=null===(t=this.props.model)||void 0===t?void 0:t.id;return(0,b.duplicateCollectionInAPI)(e,{type:"api",id:i,apiVersionId:o,relation:"unclassified"},{origin:"api-overview",openCollectionInTabOptions:{tabOptions:{forceNew:!0}},suffix:""})}async handleAddCollectionsToAPI(){const e=_.get(this.state,"selectedCollections.value"),t=(await(0,v.getAPI)(this.props.apiId)).version.apiRepositoryStore;if(!t.canEditAPISource.allowed)return this.props.toggleShowAddCollectionsModal(),void t.openEditDisabledModal();this.setState({isCreatingCollections:!0});try{E.default.addEventV2({category:"builder"===_.get(this.props,"mode.name")?"collection-non-git-linked":"collection-git-linked",action:"copy-collection-to-api",entityId:_.get(this.state,"selectedCollections.value")})}catch(e){pm.logger.error("AddCollectionToAPI~handleAddCollectionsToAPI Error while sending analytics events",e)}if(this.props.isAPISidebarMode){try{await this.props.onAddExistingCollectionToAPI(_.get(this.state,"selectedCollections.value"))}catch(e){pm.logger.error("AddCollectionToAPI~handleAddCollectionsToAPI Error while adding collection to API",e)}this.setState({isCreatingCollections:!1})}else try{const t=_.get(this.props.model,"apiMode.name")===g.BRANCH_VIEW,i=_.get(this.props.model,"apiMode.name")===g.BUILDER_VIEW;t&&await this.addExistingCollectionInBranch(e),i&&await this.addExistingCollectionInAPIWorkbench(e)}catch(e){(0,h.handleError)(e)}finally{this.setState({isCreatingCollections:!1,selectedCollections:null}),this.props.toggleShowAddCollectionsModal()}}render(){const e=!this.state.isFetchingCollections&&!this.state.errorFetchingCollections;return o.createElement(r.Modal,{isOpen:this.props.showAddCollectionsModal,size:"small",onClose:()=>this.props.toggleShowAddCollectionsModal()},o.createElement(r.ModalHeader,{heading:"Copy an existing collection to this API"}),o.createElement(r.ModalContent,null,this.state.isFetchingCollections&&o.createElement("div",{className:"add-collection-to-api__loader"},o.createElement(I.default,null)),this.state.errorFetchingCollections&&o.createElement(n.default,{direction:"column",gap:"spacing-m",alignItems:"center"},o.createElement(a.default,null),o.createElement(l.default,{type:"primary",text:"Try again",onClick:()=>this.fetchCollectionsInWorkspace()})),e&&o.createElement(d.default,{onChange:this.handleCollectionSelection,options:this.state.collections,value:this.state.selectedCollections,customOptionComponent:A,label:"Collection",placeholder:"Select collection",isSearchable:!0,menuPlacement:"bottom-start",menuMaxHeight:240,isClearable:!0,viaPortal:!0})),o.createElement(r.ModalFooter,null,o.createElement(n.default,{justifyContent:"flex-end",grow:1,shrink:1,gap:"spacing-s"},o.createElement(l.default,{type:"secondary",text:"Cancel",onClick:()=>this.props.toggleShowAddCollectionsModal()}),o.createElement(l.default,{type:"primary",text:"Copy Collection",isLoading:this.state.isCreatingCollections,isDisabled:_.isNull(this.state.selectedCollections),onClick:()=>this.handleAddCollectionsToAPI()}))))}}},"./api-dev/constants/APIActionsConstants.js":function(e,t,i){i.r(t),i.d(t,{ACTION_TYPE_ADD_COLLECTION:function(){return m},ACTION_TYPE_COMMENTS:function(){return s},ACTION_TYPE_COPY_EXISTING_COLLECTION:function(){return h},ACTION_TYPE_CREATE:function(){return u},ACTION_TYPE_CREATE_NEW_COLLECTION:function(){return I},ACTION_TYPE_CREATE_VERSION:function(){return p},ACTION_TYPE_DELETE:function(){return c},ACTION_TYPE_DUPLICATE:function(){return d},ACTION_TYPE_GENERATE_COLLECTION_FROM_DEFINITION:function(){return f},ACTION_TYPE_MANAGE_ROLES:function(){return a},ACTION_TYPE_MOVE:function(){return n},ACTION_TYPE_RENAME:function(){return l},ACTION_TYPE_REPORTS:function(){return r},ACTION_TYPE_SHARE:function(){return o},AUTHOR_DEFINITION_FROM_SCRATCH:function(){return E},IMPORT_DEFINITION_FILES:function(){return v}});const o="share",n="move",s="comment",r="reports",a="manage",l="rename",d="duplicate",c="delete",u="create",p="create-version",m="add-collection",h="copy-existing-collection",I="create-new-collection",f="generate-collection-from-definition",E="author-definition-from-scratch",v="import-definition-files"},"./api-dev/constants/APITooltips.js":function(e,t,i){i.r(t),i.d(t,{ACTIVE_API_VERSION_DELETED_TEXT:function(){return n},API_ALREADY_CREATING:function(){return a},API_DELETED_TEXT:function(){return s},CANNOT_MOVE_API_RELATION_TEXT:function(){return r},IS_OFFLINE_TOOLTIP_MSG:function(){return o},NO_COLLECTIONS_IN_WORKSPACE_TO_COPY:function(){return l}});const o="You can take this action once you're back online",n="You can not perform this action as this API version is deleted",s="You can not perform this action as this API is deleted",r="You cannot move individual elements of an API. Move API to move its elements together.",a="Creating API",l="There are no collections in this workspace to copy."},"./api-dev/tools/generate-collection/GenerateCollection/GenerateCollection.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return C}});var o,n=i("../../node_modules/react/index.js"),s=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=i("../../node_modules/mobx/lib/mobx.module.js"),a=i("./node_modules/rxjs/_esm5/internal/operators/share.js"),l=i("./js/modules/services/AnalyticsService.js"),d=i("../../packages/api-design/schema-service/index.js"),c=i("./api-dev/util/getConfigurationOptions.js"),u=i("./api-dev/tools/generate-collection/GenerateCollectionModal/GenerateCollectionModal.js"),p=i("./js/stores/StoreManager.js"),m=i("./js/stores/CurrentUserStore.js"),h=i("../../packages/api-design/schema-editor/index.js"),I=i("./schema/services/CollectionGenerationService/index.js"),f=i("./api-dev/interfaces/APIInterface.js"),E=i("./api-dev/constants/APITabModes.js"),v=i("./runtime-repl/collection/_api/CollectionInterface.js"),b=i("./runtime-repl/collection/_api/CollectionInterfaceV2.ts"),g=i("./api-dev/tools/interfaces.ts"),_=i("./js/stores/ActiveWorkspaceStore.js"),A=i("../../packages/api-design/api-definition-store/index.js"),T=i("./node_modules/lodash/lodash.js");let C=(0,s.observer)(o=class extends n.Component{constructor(e){super(e),this.triggerCollectionValidation=async e=>{var t;const i=await(0,f.getAPI)(this.props.schemaStore.apiId),o=null==i||null===(t=i.version)||void 0===t?void 0:t.schemaValidator,n=this.props.schemaStore.type,s=A.APIDefinitionTypeService.isFeatureEnabled(n,A.TYPE_FEATURES_CONFIG.COLLECTION_SYNC);!0===this.state.optionsPreferences[g.UPDATE_SYNC_CONFIG_NAME]&&s&&o.addNewCollection(e)},this.state={isModalOpen:!1,collectionName:"",collectionNameError:!1,isLoading:!1,isConfigVisible:!1,schemaFormat:"",generationOptions:[],optionsPreferences:{}},this.hydrateConfigOptions=this.hydrateConfigOptions.bind(this),this.openGenerateCollectionModal=this.openGenerateCollectionModal.bind(this),this.closeGenerateCollectionModal=this.closeGenerateCollectionModal.bind(this),this.hydrateConfigOptions=this.hydrateConfigOptions.bind(this),this.handleGenerate=this.handleGenerate.bind(this),this.handleCollectionNameChange=this.handleCollectionNameChange.bind(this),this.generateCollectionFromSchema=this.generateCollectionFromSchema.bind(this),this.handleOptionsChange=this.handleOptionsChange.bind(this),this.handleConfigToggle=this.handleConfigToggle.bind(this),this.subscribeToAPIVersionEvents=this.subscribeToAPIVersionEvents.bind(this),this.triggerCollectionValidation=this.triggerCollectionValidation.bind(this)}componentDidMount(){this.openGenerateCollectionModal()}openGenerateCollectionModal(){if(!(0,p.resolveStoreInstance)(m.default).isLoggedIn)return pm.mediator.trigger("showSignInModal",{type:"generateCollection",origin:"api_builder_generate_collection_button",continueUrl:new URL(window.location.href)});(0,f.migrateAPI)(this.props.schemaStore.apiId,this.props.schemaStore.versionId).then((({migratedAPIId:e,apiVersionId:t})=>{l.default.addEventV2({category:"api",entityId:e,entityType:"api",action:"generate-collection",label:"open"}),this.hydrateConfigOptions(),this.setState({isModalOpen:!0,collectionName:"",collectionNameError:!1})})).catch(T.noop)}closeGenerateCollectionModal(){this.props.onCloseModal(),this.setState({isModalOpen:!1,isConfigVisible:!1,schemaFormat:"",generationOptions:[]})}hydrateConfigOptions(){let e=T.get(this.props.schemaStore,"schemaFormat"),t=T.get(this.props.schemaStore,"advancedOptions");e&&!T.isEmpty(t)&&(t=(0,c.checkAndOverrideDefaultValue)(e,t),this.setState({schemaFormat:e.id,generationOptions:t,optionsPreferences:{...pm.settings.getSetting(`import.options.${e.id}`)||{},[g.UPDATE_SYNC_CONFIG_NAME]:!0}}))}handleOptionsChange(e){this.setState({optionsPreferences:e}),pm.settings.setSetting(`import.options.${this.state.schemaFormat}`,e)}handleCollectionNameChange(e){this.setState({collectionName:e,collectionNameError:T.isEmpty(e.trim())})}handleConfigToggle(e){this.setState({isConfigVisible:e})}async handleGenerate(){var e,t;l.default.addEventV2({category:"api",entityId:this.props.schemaStore.apiId,action:"confirm_generate_collection",label:`collection_from_${this.props.schemaStore.type}`,value:1}),this.setState({isLoading:!0});const i=(await(0,f.getAPI)(this.props.schemaStore.apiId)).version.apiRepositoryStore;if(!i.canEditAPISource.allowed)return this.closeGenerateCollectionModal(),i.openEditDisabledModal(),void this.setState({isLoading:!1});const o=T.reduce(this.state.generationOptions,((e,t)=>(e[t.id]=t.default,e)),{}),n=T.assign({},o,this.state.optionsPreferences);n.parametersResolution&&(n.requestParametersResolution=n.parametersResolution,n.exampleParametersResolution=n.parametersResolution);const s={type:"unclassified",configurations:{collection:{name:this.state.collectionName},converter:n}};T.get(this.props,"promoteTab")&&T.isFunction(this.props.promoteTab)&&this.props.promoteTab();const r=await this.generateCollectionFromSchema(s),a=null===(e=this.props.model)||void 0===e?void 0:e.apiMode;let d=null;var c,u;"branch"===(null==a?void 0:a.name)?(d=null==r?void 0:r.modelId,this.triggerCollectionValidation(d)):d=null==r||null===(c=r.body)||void 0===c||null===(u=c.data)||void 0===u?void 0:u.modelId;const p={};return"branch"===(null==a?void 0:a.name)&&(p.branch=null==a?void 0:a.value,p.collection=d),(0,v.openCollectionInTab)(d,{tabOptions:{forceNew:!0}},{id:null===(t=this.props.schemaStore)||void 0===t?void 0:t.apiId,type:"api"},p)}async generateCollectionFromSchema(e){T.get(this.props.model,"schema.isSchema")?Object.assign(e,{schemaId:T.get(this.props.schemaStore,"schemaId")}):Object.assign(e,{apiDefinitionId:T.get(this.props.schemaStore,"apiDefinitionId")});if(T.get(this.props,"model.apiMode.name")===E.BRANCH_VIEW)return await this.generateCollectionOnFeatureBranch(e);const t=T.get(this.props.schemaStore,"apiId"),i=T.get(this.props.schemaStore,"apiVersionId")||T.get(this.props.schemaStore,"versionId"),o=(0,p.resolveStoreInstance)(_.default).id;return this.props.schemaStore.generateCollectionFromSchema(e).then((({data:n})=>{this.setState({isLoading:!1,isModalOpen:!1,isConfigVisible:!1,schemaFormat:"",generationOptions:[]});const s={...e.configurations.collection,id:n.asyncFlow.relationId},{onCreate:r,onError:a}=(0,b.greedyCollectionCreate)(s,o,{apiId:t});this.subscribeToAPIVersionEvents({apiId:t,apiVersionId:i,jobId:n.jobId,apiName:this.props.schemaStore.apiName||this.props.schemaStore.name,onComplete:r,onError:a}),T.get(this.props,"promoteTab")&&T.isFunction(this.props.promoteTab)&&this.props.promoteTab(),this.props.onCloseModal()})).catch((e=>(this.setState({isLoading:!1}),Promise.reject(e))))}async generateCollectionOnFeatureBranch(e){var t;const i={name:this.state.collectionName,options:(null==e||null===(t=e.configurations)||void 0===t?void 0:t.converter)||(0,r.toJS)(this.state.optionsPreferences)};try{const e=await(0,I.generateCollectionFromDefinition)(T.pick(this.props.schemaStore,["isSchema","type"]),T.get(this.props.schemaStore,"content"),i),t=await(0,f.addCollectionOnBranch)(T.get(this.props.schemaStore,"apiId"),"unclassified",e);return this.setState({isLoading:!1,isModalOpen:!1,isConfigVisible:!1,schemaFormat:"",generationOptions:[]}),this.props.onCloseModal(),await(0,f.setEntityFileConfigData)(this.props.schemaStore.apiId,"collections",t.modelId,{generateCollectionPreferences:JSON.stringify(i.options)}),t}catch(e){throw"failedToSetConfigData"===e.name&&pm.logger.error("GenerateCollection~generateCollectionOnFeatureBranch: Error while updating api config",e),this.setState({isLoading:!1}),e}}async subscribeToAPIVersionEvents({apiId:e,apiVersionId:t,jobId:i,apiName:o,onComplete:n,onError:s}){this.apiVersionEventSubscription=(0,d.getAPIVersionRealtimeEvents)(e,t).pipe((0,a.share)()),this.apiVersionEventSubscription.subscribe((async e=>{var t;if((null==e||null===(t=e.data)||void 0===t?void 0:t.jobId)===i){var r,a;const t=null==e||null===(r=e.data)||void 0===r?void 0:r.status;if("completed"===t){var l,d;n&&n();const t=null==e||null===(l=e.data)||void 0===l||null===(d=l.destination)||void 0===d?void 0:d.modelId;this.triggerCollectionValidation(t)}else"failed"===t&&(s&&s(),pm.toasts.error(`Something went wrong while generating collection for ${o} API. Try generating again.`,{title:"Unable to generate collection",persist:!0,iconName:"icon-state-error-stroke",iconColor:"content-color-error"}));return(null===(a=this.apiVersionEventSubscription)||void 0===a?void 0:a.unsubscribe)&&this.apiVersionEventSubscription.unsubscribe(),void(this.apiVersionEventSubscription=null)}}))}render(){const e=T.get(this.props,"schemaStore.apiId"),t=this.props.schemaStore.type,i=!T.includes(h.GENERATE_COLLECTION_DISABLED_FORMATS,t);return n.createElement(n.Fragment,null,i&&n.createElement(n.Fragment,null,n.createElement(u.default,{apiId:e,type:t,isOpen:this.state.isModalOpen,isLoading:this.state.isLoading,isConfigVisible:this.state.isConfigVisible,collectionName:this.state.collectionName,collectionNameError:this.state.collectionNameError,generationOptions:this.state.generationOptions,optionsPreferences:this.state.optionsPreferences,onClose:this.closeGenerateCollectionModal,onGenerateCollection:this.handleGenerate,onCollectionNameChange:this.handleCollectionNameChange,onOptionsChange:this.handleOptionsChange,onConfigToggle:this.handleConfigToggle})))}})||o},"./api-dev/tools/generate-collection/GenerateCollectionModal/GenerateCollectionModal.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return T}});var o,n=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),s=i("../../node_modules/react/index.js"),r=i("./js/components/import/ConfigurationsComponent.js"),a=i("../../node_modules/@postman/aether/esmLib/src/components/Modal/Modal.js"),l=i("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),d=i("../../node_modules/@postman/aether/esmLib/src/components/TextInput/TextInput.js"),c=i("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),u=i("../../node_modules/@postman/aether/esmLib/src/components/CheckBox/Checkbox.js"),p=i("../../node_modules/@postman/aether/esmLib/src/components/Tooltip/Tooltip.js"),m=i("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),h=i("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),I=i("./js/stores/StoreManager.js"),f=i("./js/stores/SyncStatusStore.js"),E=i("../../packages/api-design/api-design-analytics/index.js"),v=i("./api-dev/constants/APITooltips.js"),b=i("./api-dev/tools/interfaces.ts"),g=i("./js/modules/services/AnalyticsService.js"),_=i("../../packages/api-design/api-definition-store/index.js"),A=i("./node_modules/lodash/lodash.js");let T=(0,n.observer)(o=class extends s.Component{constructor(e){super(e),this.handleCollectionNameChange=this.handleCollectionNameChange.bind(this),this.handleGenerate=this.handleGenerate.bind(this),this.handleClose=this.handleClose.bind(this),this.handleSubmitOptions=this.handleSubmitOptions.bind(this),this.handleConfigToggle=this.handleConfigToggle.bind(this)}componentDidMount(){var e,t;this.focusInput(),(0,E.logApiDesignAnalytics)({category:E.EVENT_CATEGORIES.DEFINITION,action:E.EVENT_ACTIONS.INITIATE_GC,label:null===(e=this.props)||void 0===e?void 0:e.schemaFormat,entityType:E.EVENT_ENTITY_TYPES.API_DEFINITION,entityId:null===(t=this.props)||void 0===t?void 0:t.definitionId})}componentDidUpdate(e){this.props.isOpen&&this.props.isOpen!==e.isOpen&&this.focusInput()}focusInput(){A.invoke(this.refs,"collectionName.focus")}handleClose(e=!1){var t;(0,E.logApiDesignAnalytics)({category:E.EVENT_CATEGORIES.DEFINITION,action:e?E.EVENT_ACTIONS.CANCEL_GC:E.EVENT_ACTIONS.GC_X,entityType:E.EVENT_ENTITY_TYPES.API_DEFINITION,entityId:null===(t=this.props)||void 0===t?void 0:t.definitionId}),A.invoke(this.props,"onClose")}handleCollectionNameChange(e){this.props.onCollectionNameChange&&this.props.onCollectionNameChange(e)}handleGenerate(){var e;(0,E.logApiDesignAnalytics)({category:E.EVENT_CATEGORIES.DEFINITION,action:E.EVENT_ACTIONS.CONFIRM_GC,entityType:E.EVENT_ENTITY_TYPES.API_DEFINITION,entityId:null===(e=this.props)||void 0===e?void 0:e.definitionId}),this.props.onGenerateCollection&&this.props.onGenerateCollection()}handleSubmitOptions(e){this.props.onOptionsChange&&this.props.onOptionsChange({...this.props.optionsPreferences,...e})}handleConfigToggle(e){this.props.onConfigToggle&&this.props.onConfigToggle(e)}getCustomStyles(){let e=0;return e=A.isEmpty(this.props.generationOptions)?64:68,{margin:"auto",height:this.props.isConfigVisible?"80vh":`${e}vh`,maxHeight:this.props.isConfigVisible?"780px":"460px",width:"464px"}}getPrimaryActionTooltip(e){return e?v.IS_OFFLINE_TOOLTIP_MSG:this.props.collectionName?void 0:"Please name your collection to continue"}render(){const e=!(0,I.resolveStoreInstance)(f.default).isSocketConnected,t=e||!this.props.collectionName||this.props.isLoading,i=t&&this.getPrimaryActionTooltip(e),o=!_.APIDefinitionTypeService.isFeatureEnabled(this.props.type,_.TYPE_FEATURES_CONFIG.COLLECTION_SYNC),n=s.createRef(),E=_.APIDefinitionTypeService.getSupportedTypesForFeature(_.TYPE_FEATURES_CONFIG.COLLECTION_SYNC).map((e=>_.APIDefinitionTypeService.getLabelForType(e))),v=new Intl.ListFormat("en",{style:"long",type:"conjunction"});return s.createElement(a.Modal,{className:"generate-collection-modal",isOpen:this.props.isOpen,onClose:this.handleClose,size:"medium"},s.createElement(a.ModalHeader,{heading:"Generate collection from definition"}),s.createElement(a.ModalContent,null,s.createElement("div",{className:"generate-collection-content-container"},s.createElement(l.default,{direction:"column",gap:"spacing-l",padding:{paddingBottom:"spacing-xxl"}},s.createElement(d.default,{"data-testid":"collection-name-input",placeholder:"e.g. Payment API Documentation",value:this.props.collectionName,onChange:e=>this.handleCollectionNameChange(e.target.value),validationStatus:this.props.collectionNameError?"error":null,validationMessage:"Please enter a collection name",label:s.createElement(c.default,{text:"Name your collection"})}),s.createElement(u.default,{ref:n,"data-testid":"update-sync-collection-checkbox",label:"Suggest updates to collection when definition changes",isChecked:!o&&this.props.optionsPreferences[b.UPDATE_SYNC_CONFIG_NAME],isDisabled:o,onChange:e=>{this.handleSubmitOptions({[b.UPDATE_SYNC_CONFIG_NAME]:e}),g.default.addEventV2({category:"api",action:"generate-collection",label:e?"update-sync-enabled":"update-sync-disabled",value:1,entityType:"api",entityId:this.props.apiId})}}),o&&s.createElement(p.default,{content:`This is only supported for ${v.format(E)} definition types.`,placement:"bottom-start",triggerRef:n})),!A.isEmpty(this.props.generationOptions)&&s.createElement("div",{className:"generation-config-options-container"},s.createElement(m.default,{type:"h6",color:"content-color-secondary",text:"Settings",hasBottomSpacing:!0}),s.createElement("div",{className:"generation-config-options-wrapper"},s.createElement(r.default,{optionsArray:this.props.generationOptions,optionsPreference:this.props.optionsPreferences,onSubmit:this.handleSubmitOptions}))))),s.createElement(a.ModalFooter,null,s.createElement(l.default,{grow:1,shrink:1,justifyContent:"flex-end",gap:"spacing-s"},s.createElement(h.default,{className:"action-button__cancel",type:"secondary",text:"Cancel",size:"medium",onClick:()=>{this.handleClose(!0)}}),s.createElement(h.default,{className:"action-button__generate",type:"primary",size:"medium",onClick:this.handleGenerate,isDisabled:t,tooltip:i,isLoading:this.props.isLoading,text:"Generate Collection"}))))}})||o},"./api-dev/util/TooltipText.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return l}});var o=i("./js/stores/CurrentUserStore.js"),n=i("./js/stores/StoreManager.js"),s=i("./js/stores/SyncStatusStore.js"),r=i("./api-dev/constants/APITooltips.js"),a=i("./api-dev/constants/Permissions.js");function l(e,t,i){const l=!(0,n.resolveStoreInstance)(s.default).isSocketConnected;if((0,n.resolveStoreInstance)(o.default).isLoggedIn&&e)return l?r.IS_OFFLINE_TOOLTIP_MSG:i||(t?a.API_PERMISSION_ERROR:void 0)}},"./js/components/base/FolderButton.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return d}});var o=i("../../node_modules/react/index.js"),n=i("./js/components/base/Tooltips.js"),s=i("./node_modules/prop-types/index.js"),r=i.n(s),a=i("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js");function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},l.apply(this,arguments)}class d extends o.Component{constructor(e){super(e),this.state={isTooltipVisible:!1},this.showTooltip=this.showTooltip.bind(this),this.hideTooltip=this.hideTooltip.bind(this)}showTooltip(e=this.state.isTooltipVisible){this.setState({isTooltipVisible:!0})}hideTooltip(e){this.setState({isTooltipVisible:!1})}render(){return o.createElement("div",{className:"folder-button"},o.createElement("div",{className:"folder-button__icon",ref:"tooltipTarget",onMouseOver:this.showTooltip,onMouseOut:this.hideTooltip},o.createElement(a.default,l({name:"icon-entity-folder-stroke"},this.props))),o.createElement(n.Tooltip,{show:this.state.isTooltipVisible&&!this.props.disabled,target:this.refs.tooltipTarget,placement:this.props.placement,immediate:!0},o.createElement(n.TooltipBody,null,this.props.tooltip)))}}d.propTypes={tooltip:r().node},d.defaultProps={tooltip:"Folder",placement:"right",disabled:!1}},"./js/components/base/Icons/MenuIcon.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return a}});var o=i("../../node_modules/react/index.js"),n=i("./js/components/base/Icons/Icon.js");function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},s.apply(this,arguments)}const r=o.createElement("svg",{width:"16",height:"13",viewBox:"0 0 16 16"},o.createElement("defs",null,o.createElement("path",{id:"menu",d:"M1.182 12.636h13.636a1.182 1.182 0 0 1 0 2.364H1.182a1.182 1.182 0 1 1 0-2.364zm0-5.318h13.636a1.182 1.182 0 1 1 0 2.364H1.182a1.182 1.182 0 1 1 0-2.364zm0-5.318h13.636a1.182 1.182 0 1 1 0 2.364H1.182a1.182 1.182 0 1 1 0-2.364z"})),o.createElement("use",{fill:"#A9A9A9",fillRule:"evenodd",xlinkHref:"#menu"}));function a(e){return o.createElement(n.default,s({},e,{icon:r}))}},"./js/containers/apps/requester/sidebar/SidebarFilter.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return d}});var o,n=i("../../node_modules/react/index.js"),s=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=i("./js/components/base/XPaths/XPath.js"),a=i("./js/components/base/Inputs.js"),l=i("./node_modules/lodash/lodash.js");let d=(0,s.observer)(o=class extends n.Component{constructor(e){super(e),this.handleSearchChange=this.handleSearchChange.bind(this),this.handleSearchCancel=this.handleSearchCancel.bind(this),this.focusSearchBox=this.focusSearchBox.bind(this)}UNSAFE_componentWillMount(){pm.mediator.on("focusSearchBox",this.focusSearchBox)}componentWillUnmount(){pm.mediator.off("focusSearchBox",this.focusSearchBox)}focusSearchBox(){l.invoke(this,"refs.filter.focus")}handleSearchChange(e){this.props.onSearch&&this.props.onSearch(e)}handleSearchCancel(){this.props.onSearch&&this.props.onSearch("")}render(){return n.createElement(r.default,{identifier:"filter"},n.createElement(a.Input,{icon:"icon-action-filter-stroke",ref:"filter",inputStyle:"search",onChange:this.handleSearchChange,onCancel:this.handleSearchCancel,query:this.props.searchQuery,className:this.props.className}))}})||o},"./js/containers/apps/requester/sidebar/SidebarListActions.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return h}});var o,n=i("../../node_modules/react/index.js"),s=i("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),r=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-add-stroke.js"),a=i("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),l=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),d=i("./js/containers/apps/requester/sidebar/SidebarFilter.js"),c=i("./js/components/base/Buttons.js"),u=i("./js/components/base/Dropdowns.js"),p=i("./js/components/base/XPaths/XPath.js"),m=i("./collaboration/utils/workspace.js");let h=(0,l.observer)(o=class extends n.Component{constructor(e){super(e),this.handleDropdownSelect=this.handleDropdownSelect.bind(this)}handleDropdownSelect(e){this.props.onActionsDropdownSelect&&this.props.onActionsDropdownSelect(e)}getCreateNewButton(e){if(!e)return null;const t=n.createElement(s.default,{className:"create-new__btn",onClick:e.onCreate,tooltip:e.tooltip,isDisabled:e.disabled,icon:n.createElement(r.default,null),type:"tertiary",size:"small"});return e.xPathIdentifier?n.createElement(p.default,{identifier:e.xPathIdentifier},t):t}render(){return n.createElement("div",{className:"requester-left-sidebar__actions-container"},this.getCreateNewButton(this.props.createNewConfig),n.createElement(d.default,{onSearch:this.props.onSearch,className:this.props.className,searchQuery:this.props.searchQuery}),!this.props.rightMetaContainer&&!this.props.moreActions||(0,m.shouldShowForGuestUser)()?"":n.createElement("div",{className:"secondary-actions-container"},this.props.rightMetaContainer,this.props.moreActions?n.createElement(u.Dropdown,{ref:"menu",onSelect:this.handleDropdownSelect,className:"actions-dropdown"},n.createElement(u.DropdownButton,{dropdownStyle:"nocaret",type:"custom"},n.createElement(c.Button,{tooltip:"View more actions"},n.createElement(a.default,{name:"icon-action-options-stroke",className:"dropdown-action-button pm-icon pm-icon-normal"}))),this.props.moreActions):null))}})||o},"./runtime-repl/collection/modals/AddCollectionToAPIContainer.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return g}});var o,n=i("../../node_modules/react/index.js"),s=i("./api-dev/interfaces/APIInterface.js"),r=i("./node_modules/lodash/lodash.js"),a=i.n(r),l=i("./js/utils/util.js"),d=i("./js/stores/ActiveWorkspaceStore.js"),c=i("./js/stores/StoreManager.js"),u=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),p=i("./api-dev/util/error.js"),m=i("./runtime-repl/collection/_api/CollectionStoreV2.js"),h=i("./js/services/NavigationService.js"),I=i("./runtime-repl/_common/NavigationConstants.js"),f=i("./runtime-repl/collection/_api/CollectionInterface.js"),E=i("./api-dev/components/api/AddCollectionToAPI/AddCollectionToAPI.js"),v=i("./api-dev/tools/generate-collection/GenerateCollection/GenerateCollection.js"),b=i("./api-dev/constants/APIActionsConstants.js");let g=(0,u.observer)(o=class extends n.Component{constructor(e){super(e),this.state={showAddCollectionsModal:!1,showGenerateCollectionModal:!1},this.toggleShowAddCollectionsModal=this.toggleShowAddCollectionsModal.bind(this),this.handleOpen=this.handleOpen.bind(this),this.handleAddExistingCollectionToAPI=this.handleAddExistingCollectionToAPI.bind(this),this.addExistingCollectionInBranch=this.addExistingCollectionInBranch.bind(this),this.addExistingCollectionInAPIWorkbench=this.addExistingCollectionInAPIWorkbench.bind(this),this.navigateToNewCollection=this.navigateToNewCollection.bind(this),this.openGenerateCollectionModal=this.openGenerateCollectionModal.bind(this),this.handleAddNewCollectionToAPI=this.handleAddNewCollectionToAPI.bind(this),this.addNewCollectionInBranch=this.addNewCollectionInBranch.bind(this),this.addNewCollectionInAPI=this.addNewCollectionInAPI.bind(this),this.addNewCollectionInBranch=this.addNewCollectionInBranch.bind(this)}UNSAFE_componentWillMount(){pm.mediator.on("showAddCollectionToAPIModal",this.handleOpen)}componentWillUnmount(){pm.mediator.off("showAddCollectionToAPIModal",this.handleOpen)}addNewCollectionInAPI(e,t){return(0,f.createCollectionInAPI)({openInTab:!0,tabOptions:{forceNew:!0}},{type:"api",id:e,versionId:t,relation:"unclassified",workspaceId:(0,c.resolveStoreInstance)(d.default).id})}addNewCollectionInBranch(e){const t={name:"New Collection",id:l.default.guid()};return(0,s.addCollectionOnBranch)(e,"unclassified",t).then((t=>this.navigateToNewCollection(t,e)))}async handleAddNewCollectionToAPI(e,t){var i;const o="branch"===(null===(i=this.apiMode)||void 0===i?void 0:i.name);try{o?await this.addNewCollectionInBranch(e):await this.addNewCollectionInAPI(e,t)}catch(e){(0,p.handleError)(e,"There was an unexpected error adding this collection to the API. Please try again.")}}handleOpen(e,t,i,o){switch(this.apiId=t,this.apiMode=i,o.definitionModel&&(this.apiDefinitionModel=o.definitionModel),o.apiVersionId&&(this.apiVersionId=o.apiVersionId),e){case b.ACTION_TYPE_GENERATE_COLLECTION_FROM_DEFINITION:return this.openGenerateCollectionModal();case b.ACTION_TYPE_CREATE_NEW_COLLECTION:if(!this.apiId||!this.apiMode)return;return(0,s.migrateAPI)(this.apiId,this.apiVersionId).then((async({migratedAPIId:e,apiVersionId:t})=>{this.handleAddNewCollectionToAPI(e,t)})).catch((e=>{throw pm.logger.error("APISidebarListItem~handleAddCollection Error occurred",e),new Error("APISidebarListItem~handleAddCollection Error occurred",{cause:e})}));case b.ACTION_TYPE_COPY_EXISTING_COLLECTION:return this.toggleShowAddCollectionsModal();default:return pm.logger.error("AddCollectionToAPIContainer~handleOpen: Unsupported action called",e),new TypeError("action not supported")}}openGenerateCollectionModal(){this.setState({showGenerateCollectionModal:!0})}navigateToNewCollection(e,t){var i,o,n;const s="branch"===this.apiMode.name?null===(i=this.apiMode)||void 0===i?void 0:i.value:"",r="version"===(null===(o=this.apiMode)||void 0===o?void 0:o.name)?null===(n=this.apiMode)||void 0===n?void 0:n.value:"",a={};s?(a.collection=e.uid||e.id,a.branch=s):r&&(a.collection=e.uid||e.id,a.version=r);const l={apiId:t,cid:e.uid||e.id},d=I.WORKFLOW_IDENTIFIER.OPEN_COLLECTION_IN_API_CONTEXT;return h.default.transitionTo(d,l,a,{tabOptions:{forceNew:!0}})}async addExistingCollectionInBranch(e){const t=await(0,m.cloneCollection)(e,{format:"2.1.0"});return(0,s.addCollectionOnBranch)(this.apiId,"unclassified",t).then((e=>this.navigateToNewCollection(e,this.apiId)))}async addExistingCollectionInAPIWorkbench(e){return(0,f.duplicateCollectionInAPI)(e,{type:"api",id:this.apiId,apiVersionId:this.apiVersionId,relation:"unclassified"},{openCollectionInTabOptions:{tabOptions:{forceNew:!0}},suffix:""})}async handleAddExistingCollectionToAPI(e){var t;const i="branch"===(null===(t=this.apiMode)||void 0===t?void 0:t.name);try{i?await this.addExistingCollectionInBranch(e):await this.addExistingCollectionInAPIWorkbench(e)}catch(e){(0,p.handleError)(e,"There was an unexpected error adding this collection to the API. Please try again.")}finally{this.toggleShowAddCollectionsModal()}}toggleShowAddCollectionsModal(){(0,s.migrateAPI)(this.apiId,this.apiVersionId).then((()=>{this.setState((e=>({...e,showAddCollectionsModal:!e.showAddCollectionsModal})))})).catch(a().noop)}render(){var e;return n.createElement(n.Fragment,null,n.createElement(E.default,{showAddCollectionsModal:this.state.showAddCollectionsModal,toggleShowAddCollectionsModal:this.toggleShowAddCollectionsModal,apiId:this.apiId,isAPISidebarMode:!0,onAddExistingCollectionToAPI:this.handleAddExistingCollectionToAPI,mode:this.apiMode}),this.state.showGenerateCollectionModal&&n.createElement(v.default,{isModalOpen:this.state.showGenerateCollectionModal,onCloseModal:()=>this.setState({showGenerateCollectionModal:!1}),model:{apiMode:this.apiMode,schema:{model:this.apiDefinitionModel,isSchema:null===(e=this.apiDefinitionModel)||void 0===e?void 0:e.isSchema}},schemaStore:this.apiDefinitionModel}))}})||o},"./runtime-repl/collection/sidebar/CollectionSidebarItemIcons.jsx":function(e,t,i){i.r(t),i.d(t,{BetaCollectionForkLabel:function(){return c},CollectionForkLabel:function(){return u},CollectionLockedIcon:function(){return l}});var o=i("../../node_modules/react/index.js"),n=i("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),s=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-state-locked-stroke.js"),r=i("../../packages/version-control/change-management/index.ts"),a=i("./version-control/common/ForkLabel.js");function l(){return o.createElement(s.default,{color:"content-color-tertiary",size:"small",title:"Read only"})}const d=n.default.div`
  margin-right: var(--spacing-xs);
`;function c({forkDetails:e}){return()=>o.createElement(d,null,o.createElement(r.ForkLabel,{forkDetails:e}))}function u({forkedEntity:e,baseEntity:t,forkInfo:i}){return()=>o.createElement(a.default,{className:"collection-meta-icon fork-label",forkedEntity:e,baseEntity:t,label:null==i?void 0:i.forkLabel,showForkLabel:!0})}},"./runtime-repl/runner/workbench/CollectionRunCreate/RunCustomizer/RunnerRunsCustomizerListItem.js":function(e,t,i){i.r(t),i.d(t,{default:function(){return A}});var o,n=i("../../node_modules/react/index.js"),s=i("./node_modules/react-dnd/lib/index.js"),r=i("../../node_modules/react-dom/index.js"),a=i("./node_modules/classnames/index.js"),l=i.n(a),d=i("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),c=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),u=i("../../node_modules/@postman/aether/esmLib/src/components/Tag/Tag.js"),p=i("../../node_modules/@postman/aether/esmLib/src/components/CheckBox/Checkbox.js"),m=i("../../node_modules/@postman/aether-icons/esmLib/src/Icon/Icon.js"),h=i("./runtime-repl/request-http/RequestMethodHelper.js"),I=i("./js/components/base/Icons/MenuIcon.js"),f=i("./js/components/base/FolderButton.js"),E=i("./node_modules/lodash/lodash.js");const v=({id:e,type:t})=>{const[i,o]=n.useState(!1);return n.createElement(d.default,{alignItems:"center",justifyContent:"flex-start",gap:"spacing-s"},n.createElement(c.default,{color:"content-color-secondary"},"Not Found."),n.createElement(c.default,{color:"content-color-secondary"},i?e:n.createElement("div",{onClick:()=>o(!0)},`Show ${t} ID`)))},b={canDrag:e=>!e.disabled,beginDrag:e=>({index:e.index,id:e.item.id,type:e.item.type}),endDrag(e,t){const i=t.getItem().index,{dropIndex:o,position:n}=t.getDropResult()||{};i===o||E.isUndefined(o)||e.onDragDrop(i,o,n)}},g=e=>{const t=(0,r.findDOMNode)(e).getBoundingClientRect();return t.top+t.height/2},_={hover(e,t,i){t.getItem().index!==e.index&&(t.getClientOffset().y>g(i)?i.getDecoratedComponentInstance().scheduleHoverUpdate("bottom"):i.getDecoratedComponentInstance().scheduleHoverUpdate("top"))},drop:(e,t,i)=>({dropIndex:e.index,position:t.getClientOffset().y>g(i)?"after":"before"})};let A=(0,s.DropTarget)("runner-customizer-list-request",_,((e,t)=>({connectDropTarget:e.dropTarget(),isDragOver:t.isOver({shallow:!0})})))(o=(0,s.DragSource)("runner-customizer-list-request",b,((e,t)=>({connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging()})))(o=class extends n.PureComponent{constructor(e){super(e),this.state={dropHoverBottom:!1,dropHoverTop:!1},this.handleToggle=this.handleToggle.bind(this),this.setDropHoverTop=this.setDropHoverTop.bind(this),this.setDropHoverBottom=this.setDropHoverBottom.bind(this)}componentDidMount(){!this.props.item&&!this.props.disabled&&this.props.onInconsistency()}componentWillUnmount(){cancelAnimationFrame(this.requestedFrame)}setDropHoverTop(){!this.state.dropHoverTop&&this.setState({dropHoverBottom:!1,dropHoverTop:!0})}setDropHoverBottom(){!this.state.dropHoverBottom&&this.setState({dropHoverBottom:!0,dropHoverTop:!1})}getMethodIcon(e="GET"){const t=`customizer__row_request-icon request-method--${e=e.toUpperCase()}`;return n.createElement("div",{className:t},h.default.getMethodAbbreviation(e))}getClasses(){return l()({"runner-runs-customizer__list-item__row":!0,"is-dragged":this.props.isDragging,"is-drop-hovered-top":this.state.dropHoverTop&&this.props.isDragOver,"is-drop-hovered-bottom":this.state.dropHoverBottom&&this.props.isDragOver})}getSortIconClasses(){return l()({"customizer__sort-icon":!0,"is-disabled":this.props.disabled})}scheduleHoverUpdate(e){const t="bottom"===e?this.setDropHoverBottom:this.setDropHoverTop;this.requestedFrame||(this.requestedFrame=requestAnimationFrame((()=>{try{t&&t()}finally{this.requestedFrame=null}})))}handleToggle(){this.props.onItemToggle(this.props.index)}render(){const{connectDragSource:e,connectDragPreview:t,connectDropTarget:i,item:o}=this.props;return o&&t(i(n.createElement("div",{className:"runner-runs-customizer__list-item","data-testid":null==o?void 0:o.id},n.createElement("div",{className:this.getClasses()},e(n.createElement("div",{className:this.getSortIconClasses(),"data-testid":"drag-icon"},n.createElement(I.default,{size:"xs"}))),n.createElement(p.default,{className:"customizer__row_check",isChecked:o.checked,onChange:this.handleToggle,isDisabled:this.props.disabled}),!E.isEmpty(o.parents)&&n.createElement("div",{className:"customizer__row__parents"},E.map(o.parents,((e,t)=>n.createElement("div",{key:t,className:"customizer__row_icons"},n.createElement(f.default,{className:"customizer__row_folder-icon",placement:"bottom",tooltip:e.name,disabled:this.props.disabled}),n.createElement(m.default,{name:"icon-direction-right"}))))),o.method&&this.getMethodIcon(o.method),n.createElement("span",{className:"customizer__row_name"},n.createElement(c.default,{type:"body-medium",color:"content-color-primary"},o.status?(({status:e,name:t,id:i,type:o})=>{let s,r,a=t;switch(e){case"deleted":s="orange",r="DELETED",a=n.createElement(v,{id:i,type:o});break;case"new":s="blue",r="NEW REQUEST"}return n.createElement(d.default,{grow:1,shrink:1,justifyContent:"space-between",alignItems:"center",direction:"row",gap:"spacing-m"},a,n.createElement(d.default,null,n.createElement(u.default,{text:r,color:s})))})(o):o.name))))))}})||o)||o},"./schema/services/CollectionGenerationService/index.js":function(e,t,i){i.r(t),i.d(t,{generateCollectionFromDefinition:function(){return r}});var o=i("./js/services/conversion/formats/index.js"),n=i("./js/services/conversion/util.js"),s=i("./node_modules/lodash/lodash.js");async function r(e,t,i){const r=s.find(o.default,(t=>e.isSchema?t.api_type===e.type:t.apiDefinitionType===e.type));if(!r||!r.convert)return new Error(`Collection generation is not supported for provided definition type: ${e.type}`);const{collections:a}=await r.convert(t,i.options,"2.1.0",(0,n.getConverterVersion)("generate-collection"));let l=s.head(a);return s.isString(i.name)&&s.set(l,"info.name",i.name),l}},"./api-dev/components/api-sidebar/APISidebarBulkActions/index.ts":function(e,t,i){i.r(t),i.d(t,{allowedActions:function(){return E},allowedItems:function(){return h},handleAction:function(){return v},shouldClearPreviousSelection:function(){return f}});var o=i("./runtime-repl/collection/sidebar/CollectionSidebarItem.ts"),n=i("./runtime-repl/folder/sidebar/FolderSidebarItem.ts"),s=i("./runtime-repl/request-http/sidebar/RequestSidebarItem.ts"),r=i("./runtime-repl/request-http/sidebar/GitLinkedRequestSidebarItem.ts"),a=i("./runtime-repl/example/sidebar/ResponseSidebarItem.ts"),l=i("./runtime-repl/collection/sidebar/GitLinkedCollectionSidebarItem.ts"),d=i("./runtime-repl/collection/_api/CollectionInterfaceV2.ts"),c=i("./runtime-repl/folder/sidebar/GitLinkedFolderSidebarItem.ts"),u=i("./runtime-repl/example/sidebar/GitLinkedResponseSidebarItem.ts"),p=i("./runtime-repl/transient-collection/_api/TransientCollectionPatchHandler.ts"),m=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((o=o.apply(e,t||[])).next())}))};const h=[o.default,n.default,s.default,a.default,l.default,c.default,r.default,u.default];function I(e){return h.some((t=>e instanceof t))}function f(e,t){return t.every((t=>{var i,o;return(null===(i=t._context)||void 0===i?void 0:i.apiId)===(null===(o=e._context)||void 0===o?void 0:o.apiId)}))}function E(e){if(!Array.isArray(e))throw new TypeError("Expected an array of selected items");if(!e.length)return[];if(!e.every(I))return[];let t=[];return e.some((e=>e instanceof o.default||e instanceof l.default))||t.push({name:"Copy",handler:()=>{},isDestructive:!1,isEnabled:!0,shortcut:"copy"},{name:"Cut",handler:()=>{},isDestructive:!1,isEnabled:!0,shortcut:"cut"},{name:"Duplicate",handler:()=>{},isDestructive:!1,isEnabled:!0,shortcut:"duplicate"}),t.push({name:"Delete",handler:()=>{},isDestructive:!0,isEnabled:!0,shortcut:"delete"}),t}function v(e){return m(this,void 0,void 0,(function*(){if(!Array.isArray(e)||!e.length)return;if((0,p.isGitLinkedCollectionAction)(e))return(0,p.handleGitLinkedAction)(e);if(!Array.isArray(e))throw new TypeError("Expected an array of patches");if(!e.length)return;const t=e.map((e=>{const t=e.path.clone();if(t.shift(),"from"in e){const i=e.from.clone();return i.shift(),{op:e.op,from:i.minimized().toString(),path:t.minimized({withPosition:!0}).toString({withPosition:!0})}}return{op:e.op,path:t.minimized().toString()}}));yield(0,d.handleCollectionsPatch)(t)}))}},"./api-dev/components/api-sidebar/APISidebarListItemEmpty/APISidebarListItemEmpty.tsx":function(e,t,i){i.r(t);var o=i("../../node_modules/react/index.js"),n=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js");t.default=()=>o.createElement("div",{className:"api-sidebar-list__item-empty-state"},o.createElement(n.default,{type:"body-medium",color:"content-color-secondary"},"No versions published"))},"./api-dev/components/api-sidebar/APISidebarListItemEmpty/APISidebarListItemGitError.tsx":function(e,t,i){i.r(t),i.d(t,{default:function(){return s}});var o=i("../../node_modules/react/index.js"),n=i("./integrations/git/constants.js");function s(e){var t,i,s,r,a,l,d,c,u;const p=o.useRef(null),{item:m}=e,h=m.parent,I=h.id,f=null===(i=null===(t=h._item.computedVersion)||void 0===t?void 0:t.apiRepositoryStore)||void 0===i?void 0:i.branch,E=null===(a=null===(r=null===(s=h._item.computedVersion)||void 0===s?void 0:s.apiRepositoryStore)||void 0===r?void 0:r.apiVersionRepositoryInterface)||void 0===a?void 0:a.configuredService,v=n.SERVICE_LABELS[E],b=null===(u=null===(c=null===(d=null===(l=h._item.computedVersion)||void 0===l?void 0:l.apiRepositoryStore)||void 0===d?void 0:d.canEditAPISource)||void 0===c?void 0:c.reason)||void 0===u?void 0:u.richText,g=null==b?void 0:b(I,f,v);return o.useEffect((()=>(e.observeSizeChange&&e.observeSizeChange(p.current),()=>e.unobserveSizeChange&&e.unobserveSizeChange(p.current,e.index))),[p.current]),o.createElement("div",{className:"api-sidebar-list__item-empty-state",ref:p,"data-index":e.index},g)}},"./api-dev/components/api-sidebar/APISidebarView.tsx":function(e,t,i){i.r(t);var o=i("./runtime-repl/collection/_api/CollectionInterfaceV2.ts"),n=i("../../packages/api-design/api-definition-ui/index.js"),s=i("./runtime-repl/sidebar-core/index.ts"),r=i("../../node_modules/react/index.js"),a=i("../../node_modules/mobx/lib/mobx.module.js"),l=i("./js/stores/SyncStatusStore.js"),d=i("./api-dev/components/api-sidebar/APISidebarListEmptyItem/APISidebarListEmptyItem.js"),c=i("./api-dev/stores/APIListStore.js"),u=i("./js/stores/StoreManager.js"),p=i("./api-dev/components/api-sidebar/APISidebarMenuGenericSidebar/APISidebarMenu.js"),m=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),h=i("./appsdk/sidebar/SidebarLoadingState/SidebarLoadingState.js"),I=i("../../node_modules/@postman/aether/esmLib/src/components/Illustration/illustrations/InternalServerError.js"),f=i("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),E=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),v=i("./js/constants/ResourceAnalyticsConstant.js"),b=i("./js/utils/client-load-analytics.js"),g=i("./api-dev/util/newrelicHelper.js"),_=i("./js/components/base/Buttons.js"),A=i("./runtime-repl/collection/modals/AddCollectionToAPIContainer.js"),T=i("./runtime-repl/collection/sidebar/CollectionSidebarItem.ts"),C=i("./runtime-repl/collection/sidebar/GitLinkedCollectionSidebarItem.ts"),S=i("./runtime-repl/folder/sidebar/FolderSidebarItem.ts"),y=i("./runtime-repl/folder/sidebar/GitLinkedFolderSidebarItem.ts"),P=i("./runtime-repl/request-http/sidebar/RequestSidebarItem.ts"),O=i("./runtime-repl/request-http/sidebar/GitLinkedRequestSidebarItem.ts"),N=i("./api-dev/components/api-sidebar/APISidebarBulkActions/index.ts"),L=i("./node_modules/lodash/lodash.js"),D=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},j=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((o=o.apply(e,t||[])).next())}))};let w=class extends r.PureComponent{constructor(e){super(e),this.state={searchQuery:L.get(e,"controller.sidebarModel.searchQuery","")},this.apiListStore=(0,u.resolveStoreInstance)(c.default),this.setQueryText=this.setQueryText.bind(this),this.setTrackerForNewSidebar=this.setTrackerForNewSidebar.bind(this)}setQueryText(e){this.setState({searchQuery:e})}componentDidMount(){this.setTrackerForNewSidebar()}componentWillUnmount(){this.analyticsReactionDisposer&&this.analyticsReactionDisposer()}setTrackerForNewSidebar(){this.props.controller._apiSidebarAnalyticsSent||(performance.mark(v.PERF_MARK_NAMES.API_SIDEBAR_LOAD_START),this.analyticsReactionDisposer=(0,a.reaction)((()=>[this.apiListStore.isStoreHydrating,this.apiListStore.isLoaded,this.apiListStore.isErrorFetchingAPIs]),(([e,t,i],o)=>{this.sendComponentPerfAnalytics({isStoreHydrating:e,isLoaded:t,hasError:i},o)}),{fireImmediately:!0}))}getLoadingState(e,t){return e||!t}sendComponentPerfAnalytics({isStoreHydrating:e,isLoaded:t,hasError:i},o){var n,s,r;const a=this.getLoadingState(e,t);if(!this.props.controller._apiSidebarAnalyticsSent&&a&&!i){try{const e=performance.measure(v.PERF_MEASURE_NAMES.API_SIDEBAR_LOAD_TIME,v.PERF_MARK_NAMES.API_SIDEBAR_LOAD_START);(0,b.sendMeasureAnalytics)(e),(0,g.newrelicPageAction)(v.NEWRELIC_ACTION_NAME,{action:e.name,startTime:e.startTime,duration:e.duration?e.duration:0,apiCount:null===(r=null===(s=null===(n=this.props.controller)||void 0===n?void 0:n.baseItems)||void 0===s?void 0:s.get())||void 0===r?void 0:r.length,hasError:!!i})}catch(e){pm.logger.error("Failed to get API Sidebar load perf measure",e)}this.props.controller._apiSidebarAnalyticsSent=!0,(null==o?void 0:o.dispose)&&o.dispose()}}render(){var e;const t=(0,u.resolveStoreInstance)(l.default).isSocketConnected,{baseItems:i,fetchAPIs:o,sidebarModel:n}=this.props.controller,a=!!n;return this.apiListStore.isErrorFetchingAPIs&&t?r.createElement("div",{className:"api-sidebar"},r.createElement(p.default,{handleSearchChange:this.setQueryText,searchQuery:this.state.searchQuery}),r.createElement("div",{className:"sidebar-error-view","data-testId":"test-sidebar-error-view"},r.createElement("div",{className:"sidebar-error-view__illustration"},r.createElement(I.default,null)),r.createElement("div",{className:"sidebar-error-view__head-and-body"},r.createElement("div",{className:"sidebar-error-view__title"},r.createElement(f.default,{type:"h4",color:"content-color-secondary",text:"Couldnt fetch your data"})),r.createElement("div",{className:"sidebar-error-view__description"},r.createElement(E.default,{type:"body-medium",color:"content-color-secondary"},"Just a faulty wire. Your data is safely synced to Postmans servers."))),r.createElement("div",{className:"sidebar-error-view__cta"},r.createElement(_.Button,{type:"text",onClick:()=>this.apiListStore.refresh()},"Refresh")))):this.apiListStore.isStoreHydrating||!this.apiListStore.isLoaded&&!this.apiListStore.isErrorFetchingAPIs||!a?r.createElement("div",{className:"api-sidebar"},r.createElement(p.default,{handleSearchChange:this.setQueryText,searchQuery:this.state.searchQuery}),r.createElement("div",{className:"api-sidebar-list is-empty","data-testId":"test-api-sidebar-list-loading"},r.createElement(h.default,null))):(null===(e=null==i?void 0:i.get())||void 0===e?void 0:e.length)?r.createElement("div",{className:"api-sidebar"},r.createElement(A.default,null),r.createElement(p.default,{handleSearchChange:this.setQueryText,searchQuery:this.state.searchQuery}),r.createElement(s.SidebarView,{searchQuery:this.state.searchQuery,bulkActionsConfig:{enabled:!0,onBulkAction:N.handleAction,allowedItems:N.allowedItems,allowedActions:N.allowedActions,shouldClearPreviousSelection:N.shouldClearPreviousSelection,analyticsEventCategory:"api-sidebar-bulk-actions"},onDrop:R,controller:this.props.controller})):r.createElement("div",{className:"api-sidebar"},r.createElement(p.default,{handleSearchChange:this.setQueryText,searchQuery:this.state.searchQuery}),r.createElement(d.default,{apiListStore:(0,u.resolveStoreInstance)(c.default)}))}};function R(e,t){return j(this,void 0,void 0,(function*(){if(null==t?void 0:t.item)return t.item instanceof T.default||t.item instanceof C.default||t.item instanceof S.default||t.item instanceof y.default||t.item instanceof P.default||t.item instanceof O.default?(0,o.handleMove)(e,t):t.item instanceof n.DefinitionFolder?(0,n.handleMove)(e,t):void 0}))}w=D([m.observer],w),t.default=w},"./api-dev/controllers/APISidebarController.ts":function(e,t,i){i.r(t),i.d(t,{default:function(){return A}});var o=i("./api-dev/interfaces/APIInterface.js"),n=i("../../node_modules/mobx/lib/mobx.module.js"),s=i("./runtime-repl/sidebar-core/index.ts"),r=i("../../packages/api-design/api-definition-ui/index.js"),a=i("./api-dev/sidebar/APISidebarItem.ts"),l=i("./api-dev/sidebar/GitLinkedAPISidebarItem.ts"),d=i("./api-dev/sidebar/VersionViewAPISidebarItem.ts"),c=i("./js/stores/StoreManager.js"),u=i("./api-dev/stores/APISidebarStore.js"),p=i("./api-dev/stores/APIListStore.js"),m=i("./js/services/NavigationService.js"),h=i("../../packages/api-security/postman-entities-validator/index.ts"),I=i("./node_modules/lodash/lodash.js"),f=i.n(I),E=i("./api-dev/sidebar/UnmigratedGitLinkedAPISidebarItem.ts"),v=i("./api-dev/sidebar/UnmigratedVersionViewAPISidebarItem.ts"),b=i("./api-dev/sidebar/UnmigratedAPISidebarItem.ts"),g=i("./api-dev/sidebar/MigratingStateAPISidebarItem.ts"),_=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((o=o.apply(e,t||[])).next())}))};class A extends s.BaseSidebarController{constructor(){super(...arguments),this._apiSidebarAnalyticsSent=!1,this.baseItems=(0,n.computed)((()=>[]))}getPartialPathToActiveItem(){var e,t,i;return _(this,void 0,void 0,(function*(){const{apiId:o,cid:n,fid:s,eid:a,rid:l,collectionUid:d,versionId:u}=m.default.getCurrentRouteParams(),h=(0,r.definitionActiveItemIds)();if(!o)return pm.logger.info("APISidebarController~getPartialPathToActiveItem: Did not find API ID in URL"),[];if(h.length)return h.filter(Boolean);if(d)return[o,d];if(!(n||s||l))try{const{searchParams:e}=new URL(m.default.getCurrentURL(),m.default.getBaseURL());if(e.has("collection"))return[]}catch(e){}if(u)return[u].filter(Boolean);const I=(0,c.resolveStoreInstance)(p.default).find(o);if(!I)return[];if(I.isMigrated)return[o,a,n,s,l].filter(Boolean);return[new Set(null===(i=null===(t=null===(e=I.childEntities)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map)||void 0===i?void 0:i.call(t,(e=>e.id))),a,n,s,l].filter(Boolean)}))}fetchAPIs(){return _(this,void 0,void 0,(function*(){try{const e=yield(0,o.getAllAPIsComputed)(),t=(0,n.computed)((()=>e.get().reduce(((e,t)=>{if(t)return t.isMigrated?e.push(t):e.push(...t.childEntities.values),e}),[]))),i=e=>{var t,i,n;if(!e)return;const s=(0,c.resolveStoreInstance)(p.default),r="apiVersion"===e.type?s.find(e.parentEntityId):e;if(r){if(null==r?void 0:r.isMigrating)return new g.default(e,r);if(!r.isMigrated)return(0,o.isV9GitConnected)(r.id,e.id)?new E.default(e,r):"version"===e.mode.name?new v.default(e,r):new b.default(e,r);switch(null===(i=null===(t=e.computedVersion)||void 0===t?void 0:t.mode)||void 0===i?void 0:i.name){case"branch":return new l.default(e);case"builder":return new a.default(e);case"version":return new d.default(e);default:return pm.logger.warn("APISidebarView~fetchAPIs: unknown api mode",null===(n=null==e?void 0:e.computedVersion)||void 0===n?void 0:n.mode),new a.default(e)}}},r=(e,t)=>{var i,o,n,s,r,a,l,d,u,m;if(e&&t._item&&e!==t._item)return!0;const h=(0,c.resolveStoreInstance)(p.default),I="apiVersion"===e.type?h.find(e.parentEntityId):e;if(I.isMigrating!==t.storeItemCachedProperties.isMigrating)return!0;if(I.isMigrating)return!1;if(I.isMigrated!==t.storeItemCachedProperties.isMigrated)return!0;const f={name:"",value:""};return I.isMigrated?(f.name=(null===(o=null===(i=e.computedVersion)||void 0===i?void 0:i.mode)||void 0===o?void 0:o.name)||"",f.value=(null===(s=null===(n=e.computedVersion)||void 0===n?void 0:n.mode)||void 0===s?void 0:s.value)||""):(f.name=(null===(a=null===(r=e.apiRepositoryStore)||void 0===r?void 0:r.apiVersionRepositoryInterface)||void 0===a?void 0:a.remoteGitConfigured)?"branch":(null===(l=null==e?void 0:e.mode)||void 0===l?void 0:l.name)||"",f.value=null===(d=e.mode)||void 0===d?void 0:d.value),f.name!==(null===(u=null==t?void 0:t.storeItemCachedProperties)||void 0===u?void 0:u.modeName)||f.value!==(null===(m=null==t?void 0:t.storeItemCachedProperties)||void 0===m?void 0:m.modeValue)},u=(e,t)=>{var i,o;return Object.assign(Object.assign({},t.nrLogPayload),{newModeName:null===(i=e.mode)||void 0===i?void 0:i.name,newModeValue:null===(o=e.mode)||void 0===o?void 0:o.value})},m=25,h=1e4,I=50,_=(0,s.computedArray)(t,i,r,{analyticsPayloadGenerator:u,NRThresholdCount:m,windowDuration:h,circuitBreakerThreshold:I});this.baseItems=(0,n.computed)((()=>f().sortBy(_.get(),(e=>[f().toLower(f().get(e,"name")),f().get(e,"_.item.createdAt")]))))}catch(e){pm.logger.error("APISidebarController~fetchAPIs: Failed to load apis",e)}}))}didCreate(){return _(this,void 0,void 0,(function*(){const e=(0,c.resolveStoreInstance)(p.default);!1===e.hasHydratedAtleastOnce&&e.init(),this.store=(0,c.resolveStoreInstance)(u.default),this.store.setSearchQuery(""),this.fetchAPIs().then((()=>{this.initSidebarModel(this.baseItems,{expansionReactionConfig:{getPartialPathToActiveItem:this.getPartialPathToActiveItem,shouldExpandActiveEditorEntity:!0}})}))}))}beforeDestroy(){var e;null===(e=this.sidebarEnableAutorun)||void 0===e||e.call(this);(0,c.resolveStoreInstance)(p.default).dispose(),this.store=null,this.disposeSidebarModel(),h.default.clearRulesCache()}}},"./api-dev/sidebar/APISidebarItem.ts":function(e,t,i){i.r(t),i.d(t,{default:function(){return j}});var o=i("./runtime-repl/sidebar-core/index.ts"),n=i("../../node_modules/mobx/lib/mobx.module.js"),s=i("./js/stores/StoreManager.js"),r=i("./api-dev/interfaces/APIInterface.js"),a=i("../../packages/api-design/api-definition-store/index.js"),l=i("../../packages/api-design/api-definition-ui/index.js"),d=i("./api-dev/stores/APIListStore.js"),c=i("./appsdk/workbench/WorkbenchService.js"),u=i("./api-dev/services/APIPermissionService.js"),p=i("./js/modules/services/ShareModalService.js"),m=i("./js/modules/services/ManageRolesModalService.js"),h=i("./js/services/NavigationService.js"),I=i("./js/stores/CurrentUserStore.js"),f=i("./collaboration/utils/workspace.js"),E=i("./js/stores/SyncStatusStore.js"),v=i("./runtime-repl/collection/_api/CollectionSidebarStore.ts"),b=i("./api-dev/sidebar/APISidebarListItemEmptyEditable.tsx"),g=i("./api-dev/constants/APIActionsConstants.js"),_=i("./collaboration/workspace/model/ActiveWorkspaceBaseStore.ts"),A=i("./api-dev/sidebar/APISidebarItemIcons.tsx"),T=i("./api-dev/constants/Permissions.js"),C=i("./js/utils/TabOpeningUtil.js"),S=i("./api-dev/sidebar/APISidebarListItemEmpty.tsx"),y=i("./api-dev/sidebar/BaseAPISidebarItem.ts"),P=i("./runtime-repl/environment/_api/EnvironmentSidebarStore.ts"),O=i("./runtime-repl/collection/_api/CollectionStoreV2.js"),N=i("./api-dev/constants/APITooltips.js"),L=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},D=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((o=o.apply(e,t||[])).next())}))};class j extends y.default{constructor(e){var t,i,o,r,d;super(e),this.definitionReaction=null,this.dataTestIdSuffix="api",this.analyticsEventCategory="api-item-builder-mode",this.collectionStore=null,this.apiDefinitionModel=void 0,this.isDefinitionLoaded=!1,this.onDropdownOpen=()=>D(this,void 0,void 0,(function*(){var e;const t=(0,s.resolveStoreInstance)(a.APIDefinitionStore),i=yield t.getDefinitionFromAPI(this.id,null===(e=this._item.computedVersion)||void 0===e?void 0:e.mode),o=(0,s.resolveStoreInstance)(_.default).id,r=yield(0,O.subscribeMeta)(o);i&&i.getFileContent({fileId:i.mainNodeId}),(0,n.runInAction)((()=>{this.isDefinitionLoaded=!0,this.apiDefinitionModel=i,this.collectionStore=r}))})),this.getChildren=()=>D(this,void 0,void 0,(function*(){this.registerDefinitionRelationReaction();const e=yield(0,v.getCollections)(this),t=yield(0,P.getEnvironments)(this);yield(0,n.when)((()=>void 0!==this.apiDefinitionModel),{timeout:5e3});let i=yield(0,l.getDefinitionItems)(this);return(0,n.computed)((()=>this.isEditable?[...i.get(),...e.get(),...t.get()]:[]))})),this.getApiVersionId=()=>{var e;return null===(e=this._item.computedVersion)||void 0===e?void 0:e.id},this.onClick=()=>{h.default.transitionTo("build.api",{apiId:this.id})},this.allowedDropTargets=[],this.userCanExpand=!0,this.setContext({apiId:this._item.id,api:e,apiMode:null===(t=e.computedVersion)||void 0===t?void 0:t.mode,isApiMigrated:!0}),this.onDropdownOpen=this.onDropdownOpen.bind(this),this.apiMode={name:null===(o=null===(i=e.computedVersion)||void 0===i?void 0:i.mode)||void 0===o?void 0:o.name,value:null===(d=null===(r=e.computedVersion)||void 0===r?void 0:r.mode)||void 0===d?void 0:d.value}}get name(){return this._item.parentEntityName||this._item.name}get id(){return this._item.id}get isPendingCreate(){return!1}registerDefinitionRelationReaction(){var e;this.definitionReaction||(0,l.definitionReactionInBuilder)({apiVersionId:null===(e=this._item.computedVersion)||void 0===e?void 0:e.id,apiId:this.id},(e=>{(0,n.runInAction)((()=>{this.isDefinitionLoaded=!0,this.apiDefinitionModel=e}))})).then((e=>{this.definitionReaction=e}))}onDispose(){var e,t;null===(e=this.definitionReaction)||void 0===e||e.call(this),null===(t=this.collectionStore)||void 0===t||t.unsubscribe()}getSidebarRouteConfig(){var e;return{routeIdentifier:"build.apiVersion",routeParams:{apiId:this.id,versionId:null===(e=this._item.computedVersion)||void 0===e?void 0:e.id},isNonLink:!0}}getActions(){var e,t,i,n,a;const h=this.id;let v=!(0,s.resolveStoreInstance)(E.default).isSocketConnected;const b=(0,s.resolveStoreInstance)(d.default).permissions,_=(0,s.resolveStoreInstance)(I.default),A=_.isCurrentUserGuest,S=!!_.team,y=this.isEditable,P=S&&!(0,f.isPublicUserForWorkspace)()&&!(0,s.resolveStoreInstance)(I.default).isCurrentUserPartner&&!A,O=this._item.isMigrating,L=u.default.hasPermission(b,"renameAPIVersion","api",h),D=u.default.hasPermission(b,"delete","api",h),j=O&&T.API_MIGRATION_DISABLED_TEXT||!y&&T.API_PERMISSION_ERROR,w=O&&T.API_MIGRATION_DISABLED_TEXT||!v&&!S&&T.MANAGE_ROLES_DISABLED_TEXT||!y&&T.API_PERMISSION_ERROR,{generateCollectionDisabledMsg:R,isGenerateCollectionButtonDisabled:x}=(0,l.getGenerateCollectionIsDisabledAndMsg)(this.apiDefinitionModel),M=this.collectionStore?this.collectionStore.list.length:0,k=!this.apiDefinitionModel||(null===(e=this.apiDefinitionModel)||void 0===e?void 0:e.isEmpty),F=this.isDefinitionLoaded&&(!this.apiDefinitionModel||this.apiDefinitionModel.hasFileTreeLoaded),B=!(!y||v||O)&&F&&k,V=k?!j:F?l.DEFINITION_AVAILABLE_TEXT:"";return[c.default.isUseBrowserTabsActive()&&{name:"Open In New Tab",shortcut:"openInNewBrowserTab",isEnabled:!(v||O),tooltip:j,handler:()=>{const{routeIdentifier:e,routeParams:t}=this.getSidebarRouteConfig();(0,C.openInNewBrowserTab)(e,t)}},{name:"Share",isEnabled:!v,handler:()=>{(0,p.shareAPI)(this.id,{origin:"sidebar"})}},{name:"Move",isEnabled:!(!y||v||O||(0,s.resolveStoreInstance)(I.default).isCurrentUserPartner),tooltip:j,handler:()=>{(0,p.moveAPI)(this.id,this.name,{origin:"sidebar"})}},{name:"Manage roles",isEnabled:!(!y||v||O||!P),tooltip:w,handler:()=>{(0,m.manageRolesOnAPI)(this.id,{origin:"sidebar"})}},"version"!==(null===(i=null===(t=this._item.computedVersion)||void 0===t?void 0:t.mode)||void 0===i?void 0:i.name)&&y&&{name:"Add definition",isEnabled:B,tooltip:V,subMenu:!O&&B&&[{name:"Import files",isEnabled:!0,handler:()=>{(0,l.navigateToImportDefinition)({apiId:this.id},"api-sidebar-option")}},{name:"Author from scratch",isEnabled:!0,tooltip:j,handler:()=>{(0,l.navigateToAuthorFromScratch)({apiId:this.id},"api-sidebar-option")}}]},"version"!==(null===(a=null===(n=this._item.computedVersion)||void 0===n?void 0:n.mode)||void 0===a?void 0:a.name)&&y&&{name:"Add collection",isEnabled:!(!y||v||O),tooltip:j,subMenu:!O&&[{name:"Copy existing collection",isEnabled:!v&&M>0,tooltip:M>0?null:N.NO_COLLECTIONS_IN_WORKSPACE_TO_COPY,handler:()=>{var e;const t={apiVersionId:this.getApiVersionId()};pm.mediator.trigger("showAddCollectionToAPIModal",g.ACTION_TYPE_COPY_EXISTING_COLLECTION,this.id,null===(e=this._item.computedVersion)||void 0===e?void 0:e.mode,t)}},{type:g.ACTION_TYPE_GENERATE_COLLECTION_FROM_DEFINITION,name:"Generate from definition",isEnabled:!(v||x),tooltip:R,handler:()=>{var e;const t={definitionModel:this.apiDefinitionModel};pm.mediator.trigger("showAddCollectionToAPIModal",g.ACTION_TYPE_GENERATE_COLLECTION_FROM_DEFINITION,this.id,null===(e=this._item.computedVersion)||void 0===e?void 0:e.mode,t)}},{name:"Create new collection",isEnabled:!v,handler:()=>{var e;const t={apiVersionId:this.getApiVersionId()};pm.mediator.trigger("showAddCollectionToAPIModal",g.ACTION_TYPE_CREATE_NEW_COLLECTION,this.id,null===(e=this._item.computedVersion)||void 0===e?void 0:e.mode,t)}}]},(0,o.generateDefaultSidebarAction)({identifier:o.DEFAULT_ACTIONS.RENAME,isEnabled:!(!y||v||!L||O),tooltip:j,handler:e=>{(0,r.migrateAPI)(this.id).then((({migratedAPIId:t})=>{var i,o;return null===(o=null===(i=(0,s.resolveStoreInstance)(d.default))||void 0===i?void 0:i.rename)||void 0===o?void 0:o.call(i,t,e)}))}}),(0,o.generateDefaultSidebarAction)({identifier:o.DEFAULT_ACTIONS.DELETE,isEnabled:!(!y||v||!D||O),tooltip:j,handler:()=>pm.mediator.trigger("showAPIDeleteModal",this.id)})].filter(Boolean)}get actions(){return this.getActions()}get emptyState(){return this.isEditable?{height:y.EMPTY_STATE_HEIGHT.EDITABLE,view:b.default}:{height:y.EMPTY_STATE_HEIGHT.NON_EDITABLE,view:S.default}}get isEditable(){return this._item.isEditable||void 0===this._item.isEditable}get isLoading(){return!this._item.isLoaded}get meta(){var e,t;const i=[],o=(0,s.resolveStoreInstance)(_.default),n=o.isPublicWorkspace,r=o.isPartnerWorkspace,a=o.isTeamWorkspace||o.isPrivateWorkspace,l="apiVersion"===this._item.type&&"private"===this._item.visibility&&!(null===(e=this._item)||void 0===e?void 0:e.isMigrated),d=!this._item.isPublic&&Boolean(null===(t=this._item)||void 0===t?void 0:t.team)&&!a&&!r;return this.isEditable||i.push(A.ReadOnlyIcon),this._item.isPublic&&!n&&i.push(A.PublicIcon),d&&i.push(A.TeamIcon),l&&i.push(A.PrivateVersionIcon),{iconsAfterText:i}}}L([n.observable],j.prototype,"collectionStore",void 0),L([n.observable],j.prototype,"apiDefinitionModel",void 0),L([n.observable],j.prototype,"isDefinitionLoaded",void 0),L([n.computed],j.prototype,"name",null),L([n.computed],j.prototype,"id",null),L([n.computed],j.prototype,"isPendingCreate",null),L([n.computed],j.prototype,"emptyState",null),L([n.computed],j.prototype,"isEditable",null),L([n.computed],j.prototype,"isLoading",null),L([n.computed],j.prototype,"meta",null)},"./api-dev/sidebar/APISidebarItemIcons.tsx":function(e,t,i){i.r(t),i.d(t,{BranchName:function(){return b},PrivateVersionIcon:function(){return h},PublicIcon:function(){return E},ReadOnlyIcon:function(){return f},TeamIcon:function(){return I},VersionName:function(){return v}});var o=i("../../node_modules/react/index.js"),n=i("../../node_modules/@postman/aether/esmLib/src/components/Tooltip/Tooltip.js"),s=i("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),r=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),a=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-hide-stroke-small.js"),l=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-descriptive-team-stroke.js"),d=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-state-locked-stroke.js"),c=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-state-published-stroke.js"),u=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-descriptive-branch-stroke-small.js"),p=i("./node_modules/lodash/lodash.js"),m=i.n(p);function h(){return o.createElement(n.default,{content:"Only visible to editors",placement:"bottom-start"},o.createElement(a.default,{className:"hide-icon",color:"content-color-tertiary",size:"small"}))}function I(){return o.createElement(l.default,{color:"content-color-tertiary",size:"small",title:"Shared with team"})}function f(){return o.createElement(d.default,{color:"content-color-tertiary",size:"small",title:"Read only"})}function E(){return o.createElement(c.default,{color:"content-color-tertiary",size:"small",title:"Read only"})}function v(e){return()=>o.createElement(s.default,{direction:"row",alignItems:"center",gap:"spacing-xs"},o.createElement(r.default,{color:"content-color-secondary",isTruncated:!0},o.createElement("div",{title:e},e)))}function b(e){return()=>o.createElement(s.default,{alignItems:"center","data-testid":"branch-icon"},m().isEmpty(e)?o.createElement(u.default,{color:"content-color-tertiary"}):o.createElement(n.default,{content:e,placement:"right"},o.createElement(u.default,{color:"content-color-tertiary"})))}},"./api-dev/sidebar/APISidebarListItemEmpty.tsx":function(e,t,i){i.r(t);var o=i("../../node_modules/react/index.js"),n=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js");t.default=e=>{const t=o.useRef(null);return o.useEffect((()=>(e.observeSizeChange&&e.observeSizeChange(t.current),()=>e.unobserveSizeChange&&e.unobserveSizeChange(t.current,e.index))),[t.current]),o.createElement("div",{className:"api-sidebar-list__item-empty-state",ref:t,"data-index":e.index},o.createElement(n.default,{type:"body-medium",color:"content-color-secondary"},"No versions published"))}},"./api-dev/sidebar/APISidebarListItemEmptyEditable.tsx":function(e,t,i){i.r(t);var o=i("../../node_modules/react/index.js"),n=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),s=i("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),r=i("../../packages/api-design/api-definition-ui/index.js");t.default=({item:e})=>o.createElement(n.default,{type:"para",className:"api-sidebar-list__empty-item__content","data-testid":"create-definition"},o.createElement(s.default,{type:"plain","data-testid":"create-definition-import",onClick:()=>{let t=e.parent.id;(0,r.navigateToImportDefinition)({apiId:t},"api-empty-state")},text:"Import"})," ","or"," ",o.createElement(s.default,{type:"plain",className:"learn-more-link","data-testId":"create-definition-scratch",onClick:()=>{let t=e.parent.id;(0,r.navigateToAuthorFromScratch)({apiId:t},"api-empty-state")},text:"create"})," ","a new definition file to get started.")},"./api-dev/sidebar/APISidebarListItemEmptyUnMigrated.tsx":function(e,t,i){i.r(t);var o=i("../../node_modules/react/index.js"),n=i("./js/components/base/Buttons.js"),s=i("../../packages/api-design/api-definition-ui/index.js"),r=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((o=o.apply(e,t||[])).next())}))};t.default=({item:e})=>o.createElement("span",{className:"api-sidebar-list__empty-item__content","data-testId":"create-definition"},o.createElement(n.Button,{type:"text",className:"learn-more-link","data-testId":"create-definition-import",onClick:()=>r(void 0,void 0,void 0,(function*(){yield(0,s.navigateToImportDefinition)({apiId:e.parent.parentAPI.id,apiVersionId:e.parent.id},"api-empty-state")}))},"Import")," ","or"," ",o.createElement(n.Button,{type:"text",className:"learn-more-link","data-testId":"create-definition-scratch",onClick:()=>r(void 0,void 0,void 0,(function*(){yield(0,s.navigateToAuthorFromScratch)({apiId:e.parent.parentAPI.id,apiVersionId:e.parent.id},"api-empty-state")}))},"create")," ","a new definition file to get started.")},"./api-dev/sidebar/BaseAPISidebarItem.ts":function(e,t,i){i.r(t),i.d(t,{BaseUnmigratedAPISidebarItem:function(){return a},EMPTY_STATE_HEIGHT:function(){return r},default:function(){return l}});var o=i("./runtime-repl/sidebar-core/index.ts"),n=i("../../node_modules/mobx/lib/mobx.module.js"),s=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r};const r={EDITABLE:52,NON_EDITABLE:32};class a extends o.SidebarItem{constructor(e){var t,i,o,n;super(),this.dataTestIdSuffix="api",this.allowedDropTargets=[],this.userCanExpand=!0,this._item=e,this.storeItemCachedProperties={modeName:(null===(i=null===(t=e.apiRepositoryStore)||void 0===t?void 0:t.apiVersionRepositoryInterface)||void 0===i?void 0:i.remoteGitConfigured)?"branch":(null===(o=null==e?void 0:e.mode)||void 0===o?void 0:o.name)||"",modeValue:(null===(n=null==e?void 0:e.mode)||void 0===n?void 0:n.value)||"",isMigrated:!1,isMigrating:!1,id:e.id,itemType:"api"},this.nrLogPayload=this.storeItemCachedProperties}get id(){return this._item.id}}s([n.computed],a.prototype,"id",null);class l extends o.SidebarItem{constructor(e){var t,i,o,n;super(),this.dataTestIdSuffix="api",this.allowedDropTargets=[],this.userCanExpand=!0,this._item=e,this.storeItemCachedProperties={modeName:(null===(i=null===(t=e.computedVersion)||void 0===t?void 0:t.mode)||void 0===i?void 0:i.name)||"",modeValue:(null===(n=null===(o=e.computedVersion)||void 0===o?void 0:o.mode)||void 0===n?void 0:n.value)||"",isMigrated:!0,isMigrating:!1,id:e.id,itemType:"api"},this.nrLogPayload=this.storeItemCachedProperties}get id(){return this._item.id}}s([n.computed],l.prototype,"id",null)},"./api-dev/sidebar/GitLinkedAPISidebarItem.ts":function(e,t,i){i.r(t),i.d(t,{default:function(){return x}});var o=i("./runtime-repl/sidebar-core/index.ts"),n=i("./runtime-repl/sidebar-core/src/view/SidebarItemLoadingState.tsx"),s=i("./node_modules/lodash/lodash.js"),r=i.n(s),a=i("../../node_modules/mobx/lib/mobx.module.js"),l=i("./js/stores/StoreManager.js"),d=i("./api-dev/constants/Permissions.js"),c=i("../../packages/api-design/api-definition-ui/index.js"),u=i("./api-dev/interfaces/APIInterface.js"),p=i("./api-dev/stores/APIListStore.js"),m=i("./appsdk/workbench/WorkbenchService.js"),h=i("./api-dev/services/APIPermissionService.js"),I=i("./js/modules/services/ShareModalService.js"),f=i("./js/modules/services/ManageRolesModalService.js"),E=i("./js/services/NavigationService.js"),v=i("./js/stores/CurrentUserStore.js"),b=i("./collaboration/utils/workspace.js"),g=i("./js/stores/SyncStatusStore.js"),_=i("./runtime-repl/collection/_api/CollectionSidebarStore.ts"),A=i("./api-dev/constants/APIActionsConstants.js"),T=i("./collaboration/workspace/model/ActiveWorkspaceBaseStore.ts"),C=i("./api-dev/sidebar/APISidebarItemIcons.tsx"),S=i("./js/utils/TabOpeningUtil.js"),y=i("./api-dev/components/api-sidebar/APISidebarListItemEmpty/APISidebarListItemEmpty.tsx"),P=i("./api-dev/components/api-sidebar/APISidebarListItemEmpty/APISidebarListItemGitError.tsx"),O=i("./api-dev/sidebar/BaseAPISidebarItem.ts"),N=i("./runtime-repl/collection/_api/CollectionStoreV2.js"),L=i("./api-dev/constants/APITooltips.js"),D=i("./api-dev/sidebar/APISidebarListItemEmptyEditable.tsx"),j=i("./integrations/git/constants.js"),w=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},R=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((o=o.apply(e,t||[])).next())}))};class x extends O.default{constructor(e){var t,i,o,n,s;super(e),this.dataTestIdSuffix="api",this.analyticsEventCategory="api-item-branch-mode",this.collectionStore=null,this.apiDefinitionModel=void 0,this.onDropdownOpen=()=>R(this,void 0,void 0,(function*(){const e=r().get(this._item.computedVersion,"apiRepositoryStore.entityHandlers.schemas.store");null==e||e.getFileContent({fileId:e.mainNodeId});const t=(0,l.resolveStoreInstance)(T.default).id,i=yield(0,N.subscribeMeta)(t);(0,a.runInAction)((()=>{this.collectionStore=i}))})),this.getChildren=()=>R(this,void 0,void 0,(function*(){var e,t;this.registerDefinitionRelationReaction(),yield null===(t=null===(e=this._item.computedVersion)||void 0===e?void 0:e.consumerViewModel)||void 0===t?void 0:t.populateReleaseStore();const i=yield(0,_.getCollections)(this);yield(0,a.when)((()=>{var e,t,i,o;return null===(o=null===(i=null===(t=null===(e=this._item.computedVersion)||void 0===e?void 0:e.apiRepositoryStore)||void 0===t?void 0:t.entityHandlers)||void 0===i?void 0:i.schemas)||void 0===o?void 0:o.store}));const o=yield(0,c.getDefinitionItems)(this);return this._item.computedVersion.schemaValidator.trigger(),(0,a.computed)((()=>this.isChildrenRenderingAllowed?[...o.get(),...i.get()]:[]))})),this.getApiVersionId=()=>{var e;return null===(e=this._item.computedVersion)||void 0===e?void 0:e.id},this.onClick=()=>{E.default.transitionTo("build.api",{apiId:this.id})},this.allowedDropTargets=[],this.userCanExpand=!0,this.setContext({apiId:this._item.id,api:e,apiMode:null===(t=e.computedVersion)||void 0===t?void 0:t.mode,isApiMigrated:!0}),this.init(),this.apiMode={name:null===(o=null===(i=e.computedVersion)||void 0===i?void 0:i.mode)||void 0===o?void 0:o.name,value:null===(s=null===(n=e.computedVersion)||void 0===n?void 0:n.mode)||void 0===s?void 0:s.value}}init(){return R(this,void 0,void 0,(function*(){this.onDropdownOpen=this.onDropdownOpen.bind(this)}))}registerDefinitionRelationReaction(){var e;this.definitionReaction||(0,c.definitionReactionInGit)({apiVersionId:null===(e=this._item.computedVersion)||void 0===e?void 0:e.id,apiId:this.id},(e=>{(0,a.runInAction)((()=>{this.apiDefinitionModel=e}))})).then((e=>{this.definitionReaction=e}))}onDispose(){var e,t;null===(e=this.definitionReaction)||void 0===e||e.call(this),null===(t=this.collectionStore)||void 0===t||t.unsubscribe()}get name(){return this._item.name}get id(){return this._item.id}get isPendingCreate(){return!1}get isChildrenRenderingAllowed(){var e,t,i;return null===(i=null===(t=null===(e=this._item.computedVersion)||void 0===e?void 0:e.apiRepositoryStore)||void 0===t?void 0:t.canEditAPISource)||void 0===i?void 0:i.allowed}get isChildSidebarLoading(){var e,t;return null===(t=null===(e=this._item.computedVersion)||void 0===e?void 0:e.apiRepositoryStore)||void 0===t?void 0:t.isSideBarLoading}getSidebarRouteConfig(){var e;return{routeIdentifier:"build.apiVersion",routeParams:{apiId:this.id,versionId:null===(e=this._item.computedVersion)||void 0===e?void 0:e.id},isNonLink:!0}}getMenuOptionDisabledTexts(e){var t;const i=this.parent?this.parent.id:null,o=r().get(this._item.computedVersion,"apiRepositoryStore.entityHandlers.schemas.store"),{generateCollectionDisabledMsg:n}=(0,c.getGenerateCollectionIsDisabledAndMsg)(o),s=this.collectionStore?this.collectionStore.list.length:0,a=r().get(this._item.computedVersion,"apiRepositoryStore"),l=(null==a?void 0:a.canEditAPISource)||{},u=l.allowed,p=r().get(a,"branch"),m=r().get(a,["apiVersionRepositoryInterface","configuredService"]),h=r().get(j.SERVICE_LABELS,m),I=this._item.isMigrating,f=this.isEditable,E=I&&d.API_MIGRATION_DISABLED_TEXT||!f&&d.API_PERMISSION_ERROR;if(!u){const e=null===(t=null==l?void 0:l.reason)||void 0===t?void 0:t.plainText;return r().isFunction(e)?e(i,p,h):void 0}switch(e){case A.ACTION_TYPE_COPY_EXISTING_COLLECTION:return s>0?null:L.NO_COLLECTIONS_IN_WORKSPACE_TO_COPY;case A.ACTION_TYPE_GENERATE_COLLECTION_FROM_DEFINITION:return n;case A.AUTHOR_DEFINITION_FROM_SCRATCH:return E;case A.ACTION_TYPE_CREATE_NEW_COLLECTION:return}}getActions(){const e=this.parent?this.parent.id:null;let t=!(0,l.resolveStoreInstance)(g.default).isSocketConnected;const i=(0,l.resolveStoreInstance)(p.default).permissions,n=(0,l.resolveStoreInstance)(v.default),s=!!n.team,a=s&&!(0,b.isPublicUserForWorkspace)()&&!n.isCurrentUserPartner&&!n.isCurrentUserGuest,E=this._item.isMigrating,_=h.default.hasPermission(i,"renameAPIVersion","api",e),T=h.default.hasPermission(i,"delete","api",e),C=this.isEditable,y=E&&d.API_MIGRATION_DISABLED_TEXT||!C&&d.API_PERMISSION_ERROR,P=E&&d.API_MIGRATION_DISABLED_TEXT||!t&&!s&&d.MANAGE_ROLES_DISABLED_TEXT||!C&&d.API_PERMISSION_ERROR,O=r().get(this._item.computedVersion,"apiRepositoryStore.entityHandlers.schemas.store"),{isGenerateCollectionButtonDisabled:N}=(0,c.getGenerateCollectionIsDisabledAndMsg)(O),L=this.collectionStore?this.collectionStore.list.length:0,D=!O||(null==O?void 0:O.isEmpty),j=!(!C||t||E)&&D,w=r().get(this._item.computedVersion,"apiRepositoryStore"),R=((null==w?void 0:w.canEditAPISource)||{}).allowed;return[m.default.isUseBrowserTabsActive()&&{name:"Open In New Tab",shortcut:"openInNewBrowserTab",isEnabled:!(t||E),tooltip:y,handler:()=>{const{routeIdentifier:e,routeParams:t}=this.getSidebarRouteConfig();(0,S.openInNewBrowserTab)(e,t)}},{name:"Share",isEnabled:!t,handler:()=>{(0,I.shareAPI)(this.id,{origin:"sidebar"})}},{name:"Move",isEnabled:!(t||E||(0,l.resolveStoreInstance)(v.default).isCurrentUserPartner),tooltip:y,handler:()=>{(0,I.moveAPI)(this.id,this.name,{origin:"sidebar"})}},{name:"Manage roles",isEnabled:!(t||E||!a),tooltip:P,handler:()=>{(0,f.manageRolesOnAPI)(this.id,{origin:"sidebar"})}},"version"!==r().get(this._item,"mode.name")&&C&&{name:"Add definition",isEnabled:j,tooltip:D?!y:c.DEFINITION_AVAILABLE_TEXT,subMenu:!E&&D&&[{type:A.IMPORT_DEFINITION_FILES,name:"Import files",isEnabled:R,tooltip:this.getMenuOptionDisabledTexts(A.IMPORT_DEFINITION_FILES),handler:()=>{(0,c.navigateToImportDefinition)({apiId:this.id},"api-sidebar-option")}},{type:A.AUTHOR_DEFINITION_FROM_SCRATCH,name:"Author from scratch",isEnabled:R,tooltip:this.getMenuOptionDisabledTexts(A.AUTHOR_DEFINITION_FROM_SCRATCH),handler:()=>{(0,c.navigateToAuthorFromScratch)({apiId:this.id},"api-sidebar-option")}}]},"version"!==r().get(this._item,"mode.name")&&C&&{name:"Add collection",isEnabled:!(t||E),tooltip:y,subMenu:!E&&[{type:A.ACTION_TYPE_COPY_EXISTING_COLLECTION,name:"Copy existing collection",isEnabled:!t&&L>0&&R,tooltip:this.getMenuOptionDisabledTexts(A.ACTION_TYPE_COPY_EXISTING_COLLECTION),handler:()=>{var e;const t={apiVersionId:this.getApiVersionId()};pm.mediator.trigger("showAddCollectionToAPIModal",A.ACTION_TYPE_COPY_EXISTING_COLLECTION,this.id,null===(e=this._item.computedVersion)||void 0===e?void 0:e.mode,t)}},{type:A.ACTION_TYPE_GENERATE_COLLECTION_FROM_DEFINITION,name:"Generate from definition",isEnabled:!(t||N)&&R,tooltip:this.getMenuOptionDisabledTexts(A.ACTION_TYPE_GENERATE_COLLECTION_FROM_DEFINITION),handler:()=>{var e;const t={definitionModel:O};pm.mediator.trigger("showAddCollectionToAPIModal",A.ACTION_TYPE_GENERATE_COLLECTION_FROM_DEFINITION,this.id,null===(e=this._item.computedVersion)||void 0===e?void 0:e.mode,t)}},{type:A.ACTION_TYPE_CREATE_NEW_COLLECTION,name:"Create new collection",isEnabled:!t&&R,tooltip:this.getMenuOptionDisabledTexts(A.ACTION_TYPE_CREATE_NEW_COLLECTION),handler:()=>{var e,t;const i={apiVersionId:this.getApiVersionId()};pm.mediator.trigger("showAddCollectionToAPIModal",A.ACTION_TYPE_CREATE_NEW_COLLECTION,this.context.apiId,null===(t=null===(e=this.context.api)||void 0===e?void 0:e.computedVersion)||void 0===t?void 0:t.mode,i)}}]},(0,o.generateDefaultSidebarAction)({identifier:o.DEFAULT_ACTIONS.RENAME,isEnabled:!(t||!_||E),tooltip:y,handler:e=>{(0,u.migrateAPI)(this.id).then((({migratedAPIId:t})=>{var i,o;return null===(o=null===(i=(0,l.resolveStoreInstance)(p.default))||void 0===i?void 0:i.rename)||void 0===o?void 0:o.call(i,t,e)}))}}),(0,o.generateDefaultSidebarAction)({identifier:o.DEFAULT_ACTIONS.DELETE,isEnabled:!(t||!T||E),tooltip:y,handler:()=>pm.mediator.trigger("showAPIDeleteModal",this.id)})].filter(Boolean)}get emptyState(){return this.isEditable?this.isChildSidebarLoading?{height:O.EMPTY_STATE_HEIGHT.EDITABLE,view:n.GenericSidebarItemLoadingState}:{height:O.EMPTY_STATE_HEIGHT.EDITABLE,view:this.isChildrenRenderingAllowed?D.default:P.default}:{height:O.EMPTY_STATE_HEIGHT.NON_EDITABLE,view:y.default}}get actions(){return this.getActions()}get isEditable(){return!1!==this._item.isEditable}get isLoading(){return!this._item.isLoaded}get meta(){var e,t,i,o,n,s;const r=[],a=(0,l.resolveStoreInstance)(T.default),d=a.isPublicWorkspace,c=a.isPartnerWorkspace,u=a.isTeamWorkspace||a.isPrivateWorkspace,p=!this._item.isPublic&&Boolean(null===(e=this._item)||void 0===e?void 0:e.team)&&!u&&!c,m=(null===(i=null===(t=this._item.computedVersion)||void 0===t?void 0:t.apiRepositoryStore)||void 0===i?void 0:i.branch)||"";return(null===(s=null===(n=null===(o=this._item.computedVersion)||void 0===o?void 0:o.apiRepositoryStore)||void 0===n?void 0:n.apiVersionRepositoryInterface)||void 0===s?void 0:s.remoteGitConfigured)&&r.push((0,C.BranchName)(m)),this.isEditable||r.push(C.ReadOnlyIcon),this._item.isPublic&&!d&&r.push(C.PublicIcon),p&&r.push(C.TeamIcon),{iconsAfterText:r}}}w([a.observable],x.prototype,"collectionStore",void 0),w([a.observable],x.prototype,"apiDefinitionModel",void 0),w([a.computed],x.prototype,"name",null),w([a.computed],x.prototype,"id",null),w([a.computed],x.prototype,"isPendingCreate",null),w([a.computed],x.prototype,"isChildrenRenderingAllowed",null),w([a.computed],x.prototype,"isChildSidebarLoading",null),w([a.computed],x.prototype,"emptyState",null),w([a.computed],x.prototype,"isEditable",null),w([a.computed],x.prototype,"isLoading",null),w([a.computed],x.prototype,"meta",null)},"./api-dev/sidebar/MigratingStateAPISidebarItem.ts":function(e,t,i){i.r(t),i.d(t,{default:function(){return u}});var o=i("../../node_modules/mobx/lib/mobx.module.js"),n=i("./js/stores/StoreManager.js"),s=i("./api-dev/stores/APISidebarStore.js"),r=i("./api-dev/sidebar/BaseAPISidebarItem.ts"),a=i("./node_modules/lodash/lodash.js"),l=i.n(a),d=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},c=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((o=o.apply(e,t||[])).next())}))};class u extends r.BaseUnmigratedAPISidebarItem{constructor(e,t){var i,r;super(e),this.definitionReaction=null,this.dataTestIdSuffix="api",this.isMigrated=!1,this.apiDefinitionModel=void 0,this.getChildren=()=>c(this,void 0,void 0,(function*(){return(0,o.computed)((()=>[]))})),this.onClick=()=>{(0,n.resolveStoreInstance)(s.default).handleNavigationToAPI(this.id,this._item)},this.allowedDropTargets=[],this.userCanExpand=!1,this.parentAPI=t,this.apiMode={name:null===(i=e.mode)||void 0===i?void 0:i.name,value:null===(r=null==e?void 0:e.mode)||void 0===r?void 0:r.value},this.storeItemCachedProperties.isMigrating=!0,this.storeItemCachedProperties.isMigrated=!0}get name(){return`${l().get(this.parentAPI,"name")}: ${this._item.name}`}get id(){return this._item.id}get actions(){return[]}get isEditable(){return!1}get isLoading(){return this._item.isMigrating}}d([o.observable],u.prototype,"apiDefinitionModel",void 0),d([o.computed],u.prototype,"name",null),d([o.computed],u.prototype,"id",null),d([o.computed],u.prototype,"actions",null),d([o.computed],u.prototype,"isEditable",null),d([o.computed],u.prototype,"isLoading",null)},"./api-dev/sidebar/UnmigratedAPISidebarItem.ts":function(e,t,i){i.r(t),i.d(t,{default:function(){return R}});var o=i("./runtime-repl/sidebar-core/index.ts"),n=i("./node_modules/lodash/lodash.js"),s=i.n(n),r=i("../../node_modules/mobx/lib/mobx.module.js"),a=i("./js/stores/StoreManager.js"),l=i("./api-dev/interfaces/APIInterface.js"),d=i("../../packages/api-design/api-definition-store/index.js"),c=i("../../packages/api-design/api-definition-ui/index.js"),u=i("./api-dev/sidebar/APISidebarListItemEmptyUnMigrated.tsx"),p=i("./api-dev/stores/APIListStore.js"),m=i("./appsdk/workbench/WorkbenchService.js"),h=i("./api-dev/services/APIPermissionService.js"),I=i("./js/modules/services/ShareModalService.js"),f=i("./js/modules/services/ManageRolesModalService.js"),E=i("./js/stores/CurrentUserStore.js"),v=i("./collaboration/utils/workspace.js"),b=i("./js/stores/SyncStatusStore.js"),g=i("./runtime-repl/collection/_api/CollectionSidebarStore.ts"),_=i("./runtime-repl/collection/_api/CollectionStoreV2.js"),A=i("./api-dev/constants/APITooltips.js"),T=i("./api-dev/constants/APIActionsConstants.js"),C=i("./collaboration/workspace/model/ActiveWorkspaceBaseStore.ts"),S=i("./api-dev/sidebar/APISidebarItemIcons.tsx"),y=i("./api-dev/constants/Permissions.js"),P=i("./js/utils/TabOpeningUtil.js"),O=i("./api-dev/sidebar/APISidebarListItemEmpty.tsx"),N=i("./api-dev/stores/APISidebarStore.js"),L=i("./runtime-repl/environment/_api/EnvironmentSidebarStore.ts"),D=i("./api-dev/sidebar/BaseAPISidebarItem.ts"),j=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},w=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((o=o.apply(e,t||[])).next())}))};class R extends D.BaseUnmigratedAPISidebarItem{constructor(e,t){var i,o;super(e),this.definitionReaction=null,this.dataTestIdSuffix="api",this.isMigrated=!1,this.analyticsEventCategory="unmigratedApi-item-builder-mode",this.collectionStore=null,this.apiDefinitionModel=void 0,this.isDefinitionLoaded=!1,this.onDropdownOpen=()=>w(this,void 0,void 0,(function*(){const e=(0,a.resolveStoreInstance)(d.APIDefinitionStore),t=yield e.getDefinitionFromAPI(this._item.parentEntityId,this._item.mode,this._item.id);t&&t.getFileContent({fileId:t.mainNodeId}),(0,r.runInAction)((()=>{this.isDefinitionLoaded=!0,this.apiDefinitionModel=t}));const i=(0,a.resolveStoreInstance)(C.default).id;this.collectionStore=yield(0,_.subscribeMeta)(i)})),this.getChildren=()=>w(this,void 0,void 0,(function*(){this.registerDefinitionRelationReaction(),yield(0,r.when)((()=>this._item.isLoaded));const e=yield(0,g.getUnmigratedCollections)(this),t=yield(0,L.getEnvironments)(this);yield(0,r.when)((()=>void 0!==this.apiDefinitionModel));const i=yield(0,c.getDefinitionItemsUnmigrated)(this);return(0,r.computed)((()=>[...i.get(),...e.get(),...t.get()]))})),this.getApiVersionId=()=>this._item.id,this.onClick=()=>{(0,a.resolveStoreInstance)(N.default).handleNavigationToAPI(this._item.id,this._item)},this.allowedDropTargets=[],this.userCanExpand=!0,this.parentAPI=t,this.setContext({apiId:this._item.parentEntityId,apiVersion:e,apiVersionId:this._item.id,apiMode:null==e?void 0:e.mode,isApiMigrated:!1}),this.onDropdownOpen=this.onDropdownOpen.bind(this),this.apiMode={name:null===(i=e.mode)||void 0===i?void 0:i.name,value:null===(o=null==e?void 0:e.mode)||void 0===o?void 0:o.value},this.storeItemCachedProperties.isMigrated=!1}get name(){var e;return 1===s().get(this.parentAPI,"childEntities.values.length")?null===(e=this.parentAPI)||void 0===e?void 0:e.name:`${s().get(this.parentAPI,"name")}: ${this._item.name}`}get id(){return this._item.id}get isPendingCreate(){return!1}registerDefinitionRelationReaction(){if(this.definitionReaction)return;const e=(0,a.resolveStoreInstance)(d.APIDefinitionStore);this.definitionReaction=(0,r.reaction)((()=>{var e,t,i,o,n,s;return(null===(i=null===(t=null===(e=this._item)||void 0===e?void 0:e.relationsStore)||void 0===t?void 0:t.relations)||void 0===i?void 0:i.schema)||(null===(s=null===(n=null===(o=this._item)||void 0===o?void 0:o.relationsStore)||void 0===n?void 0:n.relations)||void 0===s?void 0:s.apiDefinition)}),(()=>w(this,void 0,void 0,(function*(){var t;const i=yield e.getDefinitionFromAPI(this._item.parentEntityId,null===(t=this._item)||void 0===t?void 0:t.mode,this._item.id);(0,r.runInAction)((()=>{this.isDefinitionLoaded=!0,this.apiDefinitionModel=i}))}))),{fireImmediately:!0})}onDispose(){var e,t;null===(e=this.definitionReaction)||void 0===e||e.call(this),null===(t=this.collectionStore)||void 0===t||t.unsubscribe()}getSidebarRouteConfig(){var e,t;return{routeIdentifier:"build.apiVersion",routeParams:{apiId:null===(e=this.context)||void 0===e?void 0:e.apiId,versionId:null===(t=this._item)||void 0===t?void 0:t.id},isNonLink:!0}}getActions(){var e;const t=this.parent?this.parent.id:null;let i=!(0,a.resolveStoreInstance)(b.default).isSocketConnected;const n=(0,a.resolveStoreInstance)(p.default).permissions,r=(0,a.resolveStoreInstance)(E.default),d=!!r.team,u=this.isEditable,g=d&&!(0,v.isPublicUserForWorkspace)()&&!r.isCurrentUserPartner&&!r.isCurrentUserGuest,_=this._item.isMigrating,C=h.default.hasPermission(n,"renameAPIVersion","api",t),S=h.default.hasPermission(n,"delete","api",t),O=_&&y.API_MIGRATION_DISABLED_TEXT||!u&&y.API_PERMISSION_ERROR,N=_&&y.API_MIGRATION_DISABLED_TEXT||!i&&!d&&y.MANAGE_ROLES_DISABLED_TEXT||!u&&y.API_PERMISSION_ERROR,{generateCollectionDisabledMsg:L,isGenerateCollectionButtonDisabled:D}=(0,c.getGenerateCollectionIsDisabledAndMsg)(this.apiDefinitionModel),j=this.collectionStore?this.collectionStore.list.length:0,R=this.isDefinitionLoaded&&(!this.apiDefinitionModel||this.apiDefinitionModel.hasFileTreeLoaded),x=!this.apiDefinitionModel||(null===(e=this.apiDefinitionModel)||void 0===e?void 0:e.isEmpty),M=!(!u||i||_)&&R&&x,k=x?!O:R?c.DEFINITION_AVAILABLE_TEXT:"";return[m.default.isUseBrowserTabsActive()&&{name:"Open In New Tab",shortcut:"openInNewBrowserTab",isEnabled:!(i||_),tooltip:O,handler:()=>{const{routeIdentifier:e,routeParams:t}=this.getSidebarRouteConfig();(0,P.openInNewBrowserTab)(e,t)}},{name:"Share",isEnabled:!i,handler:()=>{(0,I.shareAPI)(this._item.parentEntityId,{origin:"sidebar"})}},{name:"Move",isEnabled:!(!u||i||_||(0,a.resolveStoreInstance)(E.default).isCurrentUserPartner),tooltip:O,handler:()=>{(0,I.moveAPI)(this._item.parentEntityId,this.name,{origin:"sidebar"})}},{name:"Manage roles",isEnabled:!(!u||i||_||!g),tooltip:N,handler:()=>{(0,f.manageRolesOnAPI)(this._item.parentEntityId,{origin:"sidebar"})}},"version"!==s().get(this._item,"mode.name")&&u&&{name:"Add definition",isEnabled:M,tooltip:k,subMenu:!_&&M&&[{name:"Import files",isEnabled:!0,handler:()=>w(this,void 0,void 0,(function*(){yield(0,c.navigateToImportDefinition)({apiId:this._item.parentEntityId,apiVersionId:this._item.id},"api-sidebar-option")}))},{name:"Author from scratch",isEnabled:!0,tooltip:O,handler:()=>w(this,void 0,void 0,(function*(){yield(0,c.navigateToAuthorFromScratch)({apiId:this._item.parentEntityId,apiVersionId:this._item.id},"api-sidebar-option")}))}]},"version"!==s().get(this._item,"mode.name")&&u&&{name:"Add collection",isEnabled:!(!u||i||_),tooltip:O,subMenu:!_&&[{name:"Copy existing collection",isEnabled:!i&&j>0,tooltip:j>0?null:A.NO_COLLECTIONS_IN_WORKSPACE_TO_COPY,handler:()=>w(this,void 0,void 0,(function*(){var e,t;const{migratedAPIId:i,apiVersionId:o}=yield(0,l.migrateAPI)(this._item.parentEntityId,this._item.id),n={apiVersionId:o};pm.mediator.trigger("showAddCollectionToAPIModal",T.ACTION_TYPE_COPY_EXISTING_COLLECTION,i,null===(t=null===(e=this.context.api)||void 0===e?void 0:e.version)||void 0===t?void 0:t.mode,n)}))},{type:T.ACTION_TYPE_GENERATE_COLLECTION_FROM_DEFINITION,name:"Generate from definition",isEnabled:!(i||D),tooltip:L,handler:()=>w(this,void 0,void 0,(function*(){var e,t;const{migratedAPIId:i,apiVersionId:o}=yield(0,l.migrateAPI)(this._item.parentEntityId,this._item.id),n={definitionModel:this.apiDefinitionModel,apiVersionId:o};pm.mediator.trigger("showAddCollectionToAPIModal",T.ACTION_TYPE_GENERATE_COLLECTION_FROM_DEFINITION,i,null===(t=null===(e=this.context.api)||void 0===e?void 0:e.version)||void 0===t?void 0:t.mode,n)}))},{name:"Create new collection",isEnabled:!i,handler:()=>w(this,void 0,void 0,(function*(){var e,t;const{migratedAPIId:i,apiVersionId:o}=yield(0,l.migrateAPI)(this._item.parentEntityId,this._item.id),n={apiVersionId:o};pm.mediator.trigger("showAddCollectionToAPIModal",T.ACTION_TYPE_CREATE_NEW_COLLECTION,i,null===(t=null===(e=this.context.api)||void 0===e?void 0:e.version)||void 0===t?void 0:t.mode,n)}))}]},(0,o.generateDefaultSidebarAction)({identifier:o.DEFAULT_ACTIONS.RENAME,isEnabled:!(!u||i||!C||_),tooltip:O,handler:e=>{(0,l.migrateAPI)(this._item.parentEntityId,this._item.id).then((({migratedAPIId:t})=>{var i,o;return null===(o=null===(i=(0,a.resolveStoreInstance)(p.default))||void 0===i?void 0:i.rename)||void 0===o?void 0:o.call(i,t,e)}))}}),(0,o.generateDefaultSidebarAction)({identifier:o.DEFAULT_ACTIONS.DELETE,isEnabled:!(!u||i||!S||_),tooltip:O,handler:()=>pm.mediator.trigger("showAPIVersionDeleteModal",this._item)})].filter(Boolean)}get actions(){return this.getActions()}get emptyState(){return this.isEditable?{height:D.EMPTY_STATE_HEIGHT.EDITABLE,view:u.default}:{height:D.EMPTY_STATE_HEIGHT.NON_EDITABLE,view:O.default}}get isEditable(){var e;return!1!==(null===(e=this.parentAPI)||void 0===e?void 0:e.isEditable)}get isLoading(){return!1}get meta(){var e;const t=[],i=(0,a.resolveStoreInstance)(C.default),o=i.isPublicWorkspace,n=i.isPartnerWorkspace,r=i.isTeamWorkspace||i.isPrivateWorkspace,l=(0,a.resolveStoreInstance)(p.default).find(s().get(this._item,"parentEntityId")),d="apiVersion"===this._item.type&&"private"===this._item.visibility&&!(null==l?void 0:l.isMigrated),c=!this._item.isPublic&&Boolean(null===(e=this._item)||void 0===e?void 0:e.team)&&!r&&!n;return this.isEditable||t.push(S.ReadOnlyIcon),this._item.isPublic&&!o&&t.push(S.PublicIcon),c&&t.push(S.TeamIcon),d&&t.push(S.PrivateVersionIcon),{iconsAfterText:t}}}j([r.observable],R.prototype,"apiDefinitionModel",void 0),j([r.observable],R.prototype,"isDefinitionLoaded",void 0),j([r.computed],R.prototype,"name",null),j([r.computed],R.prototype,"id",null),j([r.computed],R.prototype,"isPendingCreate",null),j([r.computed],R.prototype,"actions",null),j([r.computed],R.prototype,"emptyState",null),j([r.computed],R.prototype,"isEditable",null),j([r.computed],R.prototype,"isLoading",null),j([r.computed],R.prototype,"meta",null)},"./api-dev/sidebar/UnmigratedGitLinkedAPISidebarItem.ts":function(e,t,i){i.r(t),i.d(t,{default:function(){return N}});var o=i("./runtime-repl/sidebar-core/index.ts"),n=i("./node_modules/lodash/lodash.js"),s=i.n(n),r=i("../../node_modules/mobx/lib/mobx.module.js"),a=i("./js/stores/StoreManager.js"),l=i("./api-dev/constants/Permissions.js"),d=i("../../packages/api-design/api-definition-ui/index.js"),c=i("./api-dev/interfaces/APIInterface.js"),u=i("./api-dev/stores/APIListStore.js"),p=i("./api-dev/stores/APISidebarStore.js"),m=i("./appsdk/workbench/WorkbenchService.js"),h=i("./api-dev/services/APIPermissionService.js"),I=i("./js/modules/services/ShareModalService.js"),f=i("./js/modules/services/ManageRolesModalService.js"),E=i("./js/stores/CurrentUserStore.js"),v=i("./collaboration/utils/workspace.js"),b=i("./js/stores/SyncStatusStore.js"),g=i("./api-dev/constants/APIActionsConstants.js"),_=i("./collaboration/workspace/model/ActiveWorkspaceBaseStore.ts"),A=i("./api-dev/sidebar/APISidebarItemIcons.tsx"),T=i("./js/utils/TabOpeningUtil.js"),C=i("./api-dev/sidebar/BaseAPISidebarItem.ts"),S=i("./runtime-repl/collection/_api/CollectionStoreV2.js"),y=i("./api-dev/constants/APITooltips.js"),P=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},O=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((o=o.apply(e,t||[])).next())}))};class N extends C.BaseUnmigratedAPISidebarItem{constructor(e,t){var i,o;super(e),this.dataTestIdSuffix="api",this.isMigrated=!1,this.analyticsEventCategory="unmigratedApi-item-branch-mode",this.collectionStore=null,this.onDropdownOpen=()=>O(this,void 0,void 0,(function*(){const e=s().get(this._item,"apiRepositoryStore.entityHandlers.schemas.store");null==e||e.getFileContent({fileId:e.mainNodeId});const t=(0,a.resolveStoreInstance)(_.default).id;this.collectionStore=yield(0,S.subscribeMeta)(t)})),this.getChildren=()=>O(this,void 0,void 0,(function*(){return(0,r.computed)((()=>[]))})),this.getApiVersionId=()=>O(this,void 0,void 0,(function*(){return this._item.id})),this.onClick=()=>{(0,a.resolveStoreInstance)(p.default).handleNavigationToAPI(this._item.id,this._item)},this.allowedDropTargets=[],this.userCanExpand=!1,this._item=e,this.parentAPI=t,this.setContext({apiId:this._item.id,api:e,apiMode:null==e?void 0:e.mode,isApiMigrated:!1}),this.apiMode={name:null===(i=null==e?void 0:e.mode)||void 0===i?void 0:i.name,value:null===(o=null==e?void 0:e.mode)||void 0===o?void 0:o.value},this.storeItemCachedProperties.isMigrated=!1,this.onDropdownOpen=this.onDropdownOpen.bind(this)}onDispose(){var e;null===(e=this.collectionStore)||void 0===e||e.unsubscribe()}get name(){var e;return 1===s().get(this.parentAPI,"childEntities.values.length")?null===(e=this.parentAPI)||void 0===e?void 0:e.name:`${s().get(this.parentAPI,"name")}: ${this._item.name}`}get id(){return this._item.id}get isPendingCreate(){return!1}get isChildrenRenderingAllowed(){var e,t;return null===(t=null===(e=this._item.apiRepositoryStore)||void 0===e?void 0:e.canEditAPISource)||void 0===t?void 0:t.allowed}getSidebarRouteConfig(){return{routeIdentifier:"build.apiVersion",routeParams:{apiId:this._item.id,versionId:this._item.id},isNonLink:!0}}getActions(){const e=this.parent?this.parent.id:null;let t=!(0,a.resolveStoreInstance)(b.default).isSocketConnected;const i=(0,a.resolveStoreInstance)(u.default).permissions,n=(0,a.resolveStoreInstance)(E.default),r=!!n.team,p=r&&!(0,v.isPublicUserForWorkspace)()&&!n.isCurrentUserPartner&&!n.isCurrentUserGuest,_=this._item.isMigrating,A=h.default.hasPermission(i,"renameAPIVersion","api",e),C=h.default.hasPermission(i,"delete","api",e),S=this.isEditable,P=_&&l.API_MIGRATION_DISABLED_TEXT||!S&&l.API_PERMISSION_ERROR,N=_&&l.API_MIGRATION_DISABLED_TEXT||!t&&!r&&l.MANAGE_ROLES_DISABLED_TEXT||!S&&l.API_PERMISSION_ERROR,L=s().get(this._item,"apiRepositoryStore.entityHandlers.schemas.store"),{generateCollectionDisabledMsg:D,isGenerateCollectionButtonDisabled:j}=(0,d.getGenerateCollectionIsDisabledAndMsg)(L),w=this.collectionStore?this.collectionStore.list.length:0,R=!L||(null==L?void 0:L.isEmpty),x=!(!S||t||_)&&R;return[m.default.isUseBrowserTabsActive()&&{name:"Open In New Tab",shortcut:"openInNewBrowserTab",isEnabled:!(t||_),tooltip:P,handler:()=>{const{routeIdentifier:e,routeParams:t}=this.getSidebarRouteConfig();(0,T.openInNewBrowserTab)(e,t)}},{name:"Share",isEnabled:!t,handler:()=>{(0,I.shareAPI)(this._item.parentEntityId,{origin:"sidebar"})}},{name:"Move",isEnabled:!(t||_||(0,a.resolveStoreInstance)(E.default).isCurrentUserPartner),tooltip:P,handler:()=>{(0,I.moveAPI)(this._item.parentEntityId,this.name,{origin:"sidebar"})}},{name:"Manage roles",isEnabled:!(t||_||!p),tooltip:N,handler:()=>{(0,f.manageRolesOnAPI)(this._item.parentEntityId,{origin:"sidebar"})}},"version"!==s().get(this._item,"mode.name")&&S&&{name:"Add definition",isEnabled:x,tooltip:R?!P:d.DEFINITION_AVAILABLE_TEXT,subMenu:!_&&R&&[{name:"Import files",isEnabled:!0,handler:()=>{(0,d.navigateToImportDefinition)({apiId:this._item.parentEntityId,apiVersionId:this._item.id},"api-sidebar-option")}},{name:"Author from scratch",isEnabled:!0,tooltip:P,handler:()=>{(0,d.navigateToAuthorFromScratch)({apiId:this._item.parentEntityId,apiVersionId:this._item.id},"api-sidebar-option")}}]},"version"!==s().get(this._item,"mode.name")&&S&&{name:"Add collection",isEnabled:!(t||_),tooltip:P,subMenu:!_&&[{name:"Copy existing collection",isEnabled:!t&&w>0,tooltip:w>0?null:y.NO_COLLECTIONS_IN_WORKSPACE_TO_COPY,handler:()=>O(this,void 0,void 0,(function*(){var e;const{migratedAPIId:t,apiVersionId:i}=yield(0,c.migrateAPI)(this._item.parentEntityId,this._item.id),o={apiVersionId:i};pm.mediator.trigger("showAddCollectionToAPIModal",g.ACTION_TYPE_COPY_EXISTING_COLLECTION,t,null===(e=this._item)||void 0===e?void 0:e.mode,o)}))},{type:g.ACTION_TYPE_GENERATE_COLLECTION_FROM_DEFINITION,name:"Generate from definition",isEnabled:!(t||j),tooltip:D,handler:()=>O(this,void 0,void 0,(function*(){var e;const{migratedAPIId:t,apiVersionId:i}=yield(0,c.migrateAPI)(this._item.parentEntityId,this._item.id),o={definitionModel:L,apiVersionId:i};pm.mediator.trigger("showAddCollectionToAPIModal",g.ACTION_TYPE_GENERATE_COLLECTION_FROM_DEFINITION,t,null===(e=this._item)||void 0===e?void 0:e.mode,o)}))},{name:"Create new collection",isEnabled:!t,handler:()=>O(this,void 0,void 0,(function*(){var e;const{migratedAPIId:t,apiVersionId:i}=yield(0,c.migrateAPI)(this._item.parentEntityId,this._item.id),o={apiVersionId:i};pm.mediator.trigger("showAddCollectionToAPIModal",g.ACTION_TYPE_CREATE_NEW_COLLECTION,t,null===(e=this._item)||void 0===e?void 0:e.mode,o)}))}]},(0,o.generateDefaultSidebarAction)({identifier:o.DEFAULT_ACTIONS.RENAME,isEnabled:!(t||!A||_),tooltip:P,handler:e=>{(0,c.migrateAPI)(this._item.parentEntityId,this._item.id).then((({migratedAPIId:t})=>{var i,o;return null===(o=null===(i=(0,a.resolveStoreInstance)(u.default))||void 0===i?void 0:i.rename)||void 0===o?void 0:o.call(i,t,e)}))}}),(0,o.generateDefaultSidebarAction)({identifier:o.DEFAULT_ACTIONS.DELETE,isEnabled:!(t||!C||_),tooltip:P,handler:()=>pm.mediator.trigger("showAPIVersionDeleteModal",this._item)})].filter(Boolean)}get emptyState(){return null}get actions(){return this.getActions()}get isEditable(){var e;return!1!==(null===(e=this.parentAPI)||void 0===e?void 0:e.isEditable)}get isLoading(){return!1}get meta(){var e,t,i;const o=[],n=(0,a.resolveStoreInstance)(_.default),s=n.isPublicWorkspace,r=n.isPartnerWorkspace,l=n.isTeamWorkspace||n.isPrivateWorkspace,d=!this._item.isPublic&&Boolean(null===(e=this._item)||void 0===e?void 0:e.team)&&!l&&!r,c=null===(i=null===(t=this._item)||void 0===t?void 0:t.apiRepositoryStore)||void 0===i?void 0:i.branch;return c&&o.push((0,A.BranchName)(c)),this.isEditable||o.push(A.ReadOnlyIcon),this._item.isPublic&&!s&&o.push(A.PublicIcon),d&&o.push(A.TeamIcon),{iconsAfterText:o}}}P([r.computed],N.prototype,"name",null),P([r.computed],N.prototype,"id",null),P([r.computed],N.prototype,"isPendingCreate",null),P([r.computed],N.prototype,"isChildrenRenderingAllowed",null),P([r.computed],N.prototype,"emptyState",null),P([r.computed],N.prototype,"isEditable",null),P([r.computed],N.prototype,"isLoading",null),P([r.computed],N.prototype,"meta",null)},"./api-dev/sidebar/UnmigratedVersionViewAPISidebarItem.ts":function(e,t,i){i.r(t),i.d(t,{default:function(){return N}});var o=i("./runtime-repl/sidebar-core/index.ts"),n=i("./node_modules/lodash/lodash.js"),s=i.n(n),r=i("../../node_modules/mobx/lib/mobx.module.js"),a=i("./js/stores/StoreManager.js"),l=i("../../packages/api-design/api-definition-store/index.js"),d=i("./api-dev/util/navigationHelper.js"),c=i("../../packages/api-design/api-definition-ui/index.js"),u=i("./api-dev/interfaces/APIInterface.js"),p=i("./api-dev/stores/APIListStore.js"),m=i("./appsdk/workbench/WorkbenchService.js"),h=i("./api-dev/services/APIPermissionService.js"),I=i("./js/modules/services/ShareModalService.js"),f=i("./js/modules/services/ManageRolesModalService.js"),E=i("./js/stores/CurrentUserStore.js"),v=i("./collaboration/utils/workspace.js"),b=i("./js/stores/SyncStatusStore.js"),g=i("./runtime-repl/collection/_api/CollectionSidebarStore.ts"),_=i("./collaboration/workspace/model/ActiveWorkspaceBaseStore.ts"),A=i("./api-dev/sidebar/APISidebarItemIcons.tsx"),T=i("./js/utils/TabOpeningUtil.js"),C=i("./api-dev/components/api-sidebar/APISidebarListItemEmpty/APISidebarListItemEmpty.tsx"),S=i("./api-dev/constants/Permissions.js"),y=i("./api-dev/sidebar/BaseAPISidebarItem.ts"),P=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},O=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((o=o.apply(e,t||[])).next())}))};class N extends y.BaseUnmigratedAPISidebarItem{constructor(e,t){var i,o;super(e),this.definitionReactionDisposer=null,this.dataTestIdSuffix="api",this.isMigrated=!1,this.apiDefinitionModel=void 0,this.analyticsEventCategory="unmigratedApi-item-version-mode",this.getChildren=()=>O(this,void 0,void 0,(function*(){var e,t;yield null===(t=null===(e=this._item)||void 0===e?void 0:e.consumerViewModel)||void 0===t?void 0:t.populateReleaseStore(),yield(0,r.when)((()=>{var e;return Boolean(null===(e=this._item)||void 0===e?void 0:e.consumerViewModel)&&!this._item.consumerViewModel.isSwitchingRelease})),this.registerDefinitionRelationReaction();const i=yield(0,g.getUnmigratedCollections)(this);yield(0,r.when)((()=>void 0!==this.apiDefinitionModel));const o=yield(0,c.getDefinitionItemsUnmigrated)(this);return(0,r.computed)((()=>[...o.get(),...i.get()]))})),this.getApiVersionId=()=>O(this,void 0,void 0,(function*(){return this._item.id})),this.onClick=()=>{const e=s().get(this._item,"consumerViewModel.activeRelease.id");return(0,d.transitionToVersion)({apiId:this._item.parentEntityId,apiVersionId:this._item.id,releaseId:e})},this.allowedDropTargets=[],this.userCanExpand=!0,this.parentAPI=t,this.setContext({apiVersionId:this._item.id,apiId:this._item.parentEntityId,apiMode:this._item.mode,apiVersion:e,isApiMigrated:!1}),this.apiMode={name:null===(i=e.mode)||void 0===i?void 0:i.name,value:null===(o=e.mode)||void 0===o?void 0:o.value},this.storeItemCachedProperties.isMigrated=!1}get name(){var e;return 1===s().get(this.parentAPI,"childEntities.values.length")?null===(e=this.parentAPI)||void 0===e?void 0:e.name:`${s().get(this.parentAPI,"name")}: ${this._item.name}`}get id(){return this._item.id}get isPendingCreate(){return!1}registerDefinitionRelationReaction(){if(this.definitionReactionDisposer)return;const e=(0,a.resolveStoreInstance)(l.APIDefinitionStore);this.definitionReactionDisposer=(0,r.reaction)((()=>{var e,t,i;return null===(i=null===(t=null===(e=this._item)||void 0===e?void 0:e.consumerViewModel)||void 0===t?void 0:t.activeRelease)||void 0===i?void 0:i.id}),(()=>O(this,void 0,void 0,(function*(){var t,i,o;yield(0,r.when)((()=>{var e;return Boolean(null===(e=this._item)||void 0===e?void 0:e.consumerViewModel)&&!this._item.consumerViewModel.isSwitchingRelease}));const n=s().get(this._item,"consumerViewModel.activeRelease.entities.schemas.0.entityId"),a=yield e.getModelForReleaseId({apiId:this._item.parentEntityId,apiVersionId:this._item.id,releaseId:null===(o=null===(i=null===(t=this._item)||void 0===t?void 0:t.consumerViewModel)||void 0===i?void 0:i.activeRelease)||void 0===o?void 0:o.id,apiDefinitionId:n});(0,r.runInAction)((()=>this.apiDefinitionModel=a))}))),{fireImmediately:!0})}onDispose(){var e;null===(e=this.definitionReactionDisposer)||void 0===e||e.call(this)}getSidebarRouteConfig(){return{routeIdentifier:"build.apiVersion",routeParams:{apiId:this._item.parentEntityId,versionId:this._item.id},isNonLink:!0}}getActions(){let e=!(0,a.resolveStoreInstance)(b.default).isSocketConnected;const t=this._item.id,i=(0,a.resolveStoreInstance)(p.default).permissions,n=(0,a.resolveStoreInstance)(E.default),s=!!n.team,r=this.isEditable,l=s&&!(0,v.isPublicUserForWorkspace)()&&!n.isCurrentUserPartner&&!n.isCurrentUserGuest,d=this._item.isMigrating,c=d&&S.API_MIGRATION_DISABLED_TEXT||!r&&S.API_PERMISSION_ERROR,g=h.default.hasPermission(i,"renameAPIVersion","api",t),_=h.default.hasPermission(i,"delete","api",t),A=d&&S.API_MIGRATION_DISABLED_TEXT||!e&&!s&&S.MANAGE_ROLES_DISABLED_TEXT||!r&&S.API_PERMISSION_ERROR;return[m.default.isUseBrowserTabsActive()&&{name:"Open In New Tab",shortcut:"openInNewBrowserTab",isEnabled:!e&&!d,tooltip:c,handler:()=>{const{routeIdentifier:e,routeParams:t}=this.getSidebarRouteConfig();(0,T.openInNewBrowserTab)(e,t)}},{name:"Share",isEnabled:!e,handler:()=>{(0,I.shareAPI)(this._item.parentEntityId,{origin:"sidebar"})}},{name:"Move",isEnabled:this.isEditable&&!e&&!d&&!(0,a.resolveStoreInstance)(E.default).isCurrentUserPartner,tooltip:c,handler:()=>{(0,I.moveAPI)(this._item.parentEntityId,this.name,{origin:"sidebar"})}},{name:"Manage roles",isEnabled:this.isEditable&&!e&&!d&&l,tooltip:A,handler:()=>{(0,f.manageRolesOnAPI)(this._item.parentEntityId,{origin:"sidebar"})}},(0,o.generateDefaultSidebarAction)({identifier:o.DEFAULT_ACTIONS.RENAME,isEnabled:this.isEditable&&!e&&g&&!d,tooltip:c,handler:e=>{(0,u.migrateAPI)(this._item.parentEntityId,this._item.id).then((({migratedAPIId:t})=>{var i,o;return null===(o=null===(i=(0,a.resolveStoreInstance)(p.default))||void 0===i?void 0:i.rename)||void 0===o?void 0:o.call(i,t,e)}))}}),(0,o.generateDefaultSidebarAction)({identifier:o.DEFAULT_ACTIONS.DELETE,isEnabled:this.isEditable&&!e&&_&&!d,tooltip:c,handler:()=>pm.mediator.trigger("showAPIVersionDeleteModal",this._item)})].filter(Boolean)}get actions(){return this.getActions()}get emptyState(){return this.isEditable?null:{height:y.EMPTY_STATE_HEIGHT.NON_EDITABLE,view:C.default}}get isEditable(){var e;return!1!==(null===(e=this.parentAPI)||void 0===e?void 0:e.isEditable)}get isLoading(){return!this._item.isLoaded}get meta(){var e,t,i,o;const n=[],s=(0,a.resolveStoreInstance)(_.default),r=s.isPublicWorkspace,l=s.isPartnerWorkspace,d=s.isTeamWorkspace||s.isPrivateWorkspace,c="apiVersion"===this._item.type&&"private"===this._item.visibility,u=!this._item.isPublic&&Boolean(null===(e=this._item)||void 0===e?void 0:e.team)&&!d&&!l,p=null===(o=null===(i=null===(t=this._item)||void 0===t?void 0:t.consumerViewModel)||void 0===i?void 0:i.activeRelease)||void 0===o?void 0:o.name;return p&&n.push((0,A.VersionName)(p)),this.isEditable||n.push(A.ReadOnlyIcon),this._item.isPublic&&!r&&n.push(A.PublicIcon),u&&n.push(A.TeamIcon),c&&n.push(A.PrivateVersionIcon),{iconsAfterText:n}}}P([r.observable],N.prototype,"apiDefinitionModel",void 0),P([r.computed],N.prototype,"name",null),P([r.computed],N.prototype,"id",null),P([r.computed],N.prototype,"isPendingCreate",null),P([r.computed],N.prototype,"emptyState",null),P([r.computed],N.prototype,"isEditable",null),P([r.computed],N.prototype,"isLoading",null),P([r.computed],N.prototype,"meta",null)},"./api-dev/sidebar/VersionViewAPISidebarItem.ts":function(e,t,i){i.r(t),i.d(t,{default:function(){return O}});var o=i("./runtime-repl/sidebar-core/index.ts"),n=i("./node_modules/lodash/lodash.js"),s=i.n(n),r=i("../../node_modules/mobx/lib/mobx.module.js"),a=i("./js/stores/StoreManager.js"),l=i("./api-dev/util/navigationHelper.js"),d=i("../../packages/api-design/api-definition-ui/index.js"),c=i("./api-dev/interfaces/APIInterface.js"),u=i("./api-dev/stores/APIListStore.js"),p=i("./appsdk/workbench/WorkbenchService.js"),m=i("./api-dev/services/APIPermissionService.js"),h=i("./js/modules/services/ShareModalService.js"),I=i("./js/modules/services/ManageRolesModalService.js"),f=i("./js/stores/CurrentUserStore.js"),E=i("./collaboration/utils/workspace.js"),v=i("./js/stores/SyncStatusStore.js"),b=i("./runtime-repl/collection/_api/CollectionSidebarStore.ts"),g=i("./collaboration/workspace/model/ActiveWorkspaceBaseStore.ts"),_=i("./api-dev/sidebar/APISidebarItemIcons.tsx"),A=i("./js/utils/TabOpeningUtil.js"),T=i("./api-dev/components/api-sidebar/APISidebarListItemEmpty/APISidebarListItemEmpty.tsx"),C=i("./api-dev/constants/Permissions.js"),S=i("./api-dev/sidebar/BaseAPISidebarItem.ts"),y=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},P=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((o=o.apply(e,t||[])).next())}))};class O extends S.default{constructor(e,t){var i,o,n,a,c,u;super(e),this.definitionReactionDisposer=null,this.dataTestIdSuffix="api",this.apiDefinitionModel=void 0,this.analyticsEventCategory="api-item-version-mode",this.getChildren=()=>P(this,void 0,void 0,(function*(){var e,t,i;yield null===(i=null===(t=null===(e=this._item)||void 0===e?void 0:e.computedVersion)||void 0===t?void 0:t.consumerViewModel)||void 0===i?void 0:i.populateReleaseStore(),yield(0,r.when)((()=>{var e,t;return!(!(null===(t=null===(e=this._item)||void 0===e?void 0:e.computedVersion)||void 0===t?void 0:t.consumerViewModel)||this._item.computedVersion.consumerViewModel.isSwitchingRelease)}),{timeout:5e3}),this.registerDefinitionRelationReaction();const o=yield(0,b.getCollections)(this);yield(0,r.when)((()=>void 0!==this.apiDefinitionModel),{timeout:5e3});const n=yield(0,d.getDefinitionItems)(this);return(0,r.computed)((()=>[...n.get(),...o.get()]))})),this.getApiVersionId=()=>{var e;return null===(e=this._item.computedVersion)||void 0===e?void 0:e.id},this.onClick=()=>{var e;const t=s().get(this._item.computedVersion,"consumerViewModel.activeRelease.id");return(0,l.transitionToVersion)({apiId:this.id,apiVersionId:null===(e=this._item.computedVersion)||void 0===e?void 0:e.id,releaseId:t})},this.allowedDropTargets=[],this.userCanExpand=!0,this.setContext({api:e,apiId:this._item.id,apiMode:null===(o=null===(i=this._item)||void 0===i?void 0:i.computedVersion)||void 0===o?void 0:o.mode,isApiMigrated:!0}),this.apiMode={name:null===(a=null===(n=e.computedVersion)||void 0===n?void 0:n.mode)||void 0===a?void 0:a.name,value:null===(u=null===(c=e.computedVersion)||void 0===c?void 0:c.mode)||void 0===u?void 0:u.value}}get name(){return this._item.name}get id(){return this._item.id}get isPendingCreate(){return!1}registerDefinitionRelationReaction(){var e;this.definitionReactionDisposer||(0,d.definitionReactionInVersion)({apiVersionId:null===(e=this._item.computedVersion)||void 0===e?void 0:e.id,apiId:this.id},(e=>{(0,r.runInAction)((()=>{this.apiDefinitionModel=e}))})).then((e=>{this.definitionReactionDisposer=e}))}onDispose(){var e;null===(e=this.definitionReactionDisposer)||void 0===e||e.call(this)}getSidebarRouteConfig(){var e;return{routeIdentifier:"build.apiVersion",routeParams:{apiId:this.id,versionId:null===(e=this._item.computedVersion)||void 0===e?void 0:e.id},isNonLink:!0}}getActions(){let e=!(0,a.resolveStoreInstance)(v.default).isSocketConnected;const t=this.id,i=(0,a.resolveStoreInstance)(u.default).permissions,n=(0,a.resolveStoreInstance)(f.default),s=!!n.team,r=this.isEditable,l=s&&!(0,E.isPublicUserForWorkspace)()&&!n.isCurrentUserPartner&&!n.isCurrentUserGuest,d=this._item.isMigrating,b=d&&C.API_MIGRATION_DISABLED_TEXT||!r&&C.API_PERMISSION_ERROR,g=m.default.hasPermission(i,"renameAPIVersion","api",t),_=m.default.hasPermission(i,"delete","api",t),T=d&&C.API_MIGRATION_DISABLED_TEXT||!e&&!s&&C.MANAGE_ROLES_DISABLED_TEXT||!r&&C.API_PERMISSION_ERROR;return[p.default.isUseBrowserTabsActive()&&{name:"Open In New Tab",shortcut:"openInNewBrowserTab",isEnabled:!e&&!d,tooltip:b,handler:()=>{const{routeIdentifier:e,routeParams:t}=this.getSidebarRouteConfig();(0,A.openInNewBrowserTab)(e,t)}},{name:"Share",isEnabled:!e,handler:()=>{(0,h.shareAPI)(this.id,{origin:"sidebar"})}},{name:"Move",isEnabled:this.isEditable&&!e&&!d&&!(0,a.resolveStoreInstance)(f.default).isCurrentUserPartner,tooltip:b,handler:()=>{(0,h.moveAPI)(this.id,this.name,{origin:"sidebar"})}},{name:"Manage roles",isEnabled:this.isEditable&&!e&&!d&&l,tooltip:T,handler:()=>{(0,I.manageRolesOnAPI)(this.id,{origin:"sidebar"})}},(0,o.generateDefaultSidebarAction)({identifier:o.DEFAULT_ACTIONS.RENAME,isEnabled:this.isEditable&&!e&&g&&!d,tooltip:b,handler:e=>{(0,c.migrateAPI)(this.id).then((({migratedAPIId:t})=>{var i,o;return null===(o=null===(i=(0,a.resolveStoreInstance)(u.default))||void 0===i?void 0:i.rename)||void 0===o?void 0:o.call(i,t,e)}))}}),(0,o.generateDefaultSidebarAction)({identifier:o.DEFAULT_ACTIONS.DELETE,isEnabled:this.isEditable&&!e&&_&&!d,tooltip:b,handler:()=>pm.mediator.trigger("showAPIDeleteModal",this.id)})].filter(Boolean)}get actions(){return this.getActions()}get emptyState(){return this.isEditable?null:{height:S.EMPTY_STATE_HEIGHT.NON_EDITABLE,view:T.default}}get isEditable(){return!1!==this._item.isEditable}get isLoading(){return!this._item.isLoaded}get meta(){var e,t,i,o,n;const s=[],r=(0,a.resolveStoreInstance)(g.default),l=r.isPublicWorkspace,d=r.isPartnerWorkspace,c=r.isTeamWorkspace||r.isPrivateWorkspace,u="apiVersion"===this._item.type&&"private"===this._item.visibility&&!this._item.isMigrated,p=!this._item.isPublic&&Boolean(null===(e=this._item)||void 0===e?void 0:e.team)&&!c&&!d,m=null===(n=null===(o=null===(i=null===(t=this._item)||void 0===t?void 0:t.computedVersion)||void 0===i?void 0:i.consumerViewModel)||void 0===o?void 0:o.activeRelease)||void 0===n?void 0:n.name;return m&&s.push((0,_.VersionName)(m)),this.isEditable||s.push(_.ReadOnlyIcon),this._item.isPublic&&!l&&s.push(_.PublicIcon),p&&s.push(_.TeamIcon),u&&s.push(_.PrivateVersionIcon),{iconsAfterText:s}}}y([r.observable],O.prototype,"apiDefinitionModel",void 0),y([r.computed],O.prototype,"name",null),y([r.computed],O.prototype,"id",null),y([r.computed],O.prototype,"isPendingCreate",null),y([r.computed],O.prototype,"emptyState",null),y([r.computed],O.prototype,"isEditable",null),y([r.computed],O.prototype,"isLoading",null),y([r.computed],O.prototype,"meta",null)},"./api-dev/tools/collection-schema-sync/CollectionSidebarSyncMetaIcon/CollectionSidebarSyncMetaIcon.tsx":function(e,t,i){i.r(t);var o=i("../../node_modules/react/index.js"),n=i("./api-dev/tools/collection-schema-sync/CollectionSidebarSyncMetaIcon/UpdateCollectionIcon/UpdateCollectionIcon.tsx");t.default=function(e,t){return()=>o.createElement(n.default,{showProgress:!0,apiId:e,collectionId:t,size:"small",tooltip:"Updates from definition available.",source:"collection-sidebar"})}},"./runtime-repl/collection/_api/CollectionSidebarStore.ts":function(e,t,i){i.r(t),i.d(t,{getCollections:function(){return j},getFolders:function(){return R},getRequests:function(){return x},getResponses:function(){return M},getUnmigratedCollections:function(){return w},isItemCollectionObject:function(){return B},isItemFolderObject:function(){return F},isItemRequestObject:function(){return k}});var o=i("./runtime-repl/collection/_api/CollectionStoreV2.js"),n=i("../../node_modules/mobx/lib/mobx.module.js"),s=i("./node_modules/lodash/lodash.js"),r=i.n(s),a=i("./runtime-repl/folder/sidebar/FolderSidebarItem.ts"),l=i("./runtime-repl/folder/sidebar/VersionViewFolderSidebarItem.ts"),d=i("./api-dev/sidebar/APISidebarItem.ts"),c=i("./api-dev/sidebar/GitLinkedAPISidebarItem.ts"),u=i("./api-dev/sidebar/VersionViewAPISidebarItem.ts"),p=i("./runtime-repl/folder/sidebar/GitLinkedFolderSidebarItem.ts"),m=i("./runtime-repl/transient-collection/datastores/stores/TransientFolderStore.ts"),h=i("./runtime-repl/request-http/sidebar/RequestSidebarItem.ts"),I=i("./runtime-repl/request-http/sidebar/GitLinkedRequestSidebarItem.ts"),f=i("./runtime-repl/request-http/sidebar/VersionViewRequestSidebarItem.ts"),E=i("./runtime-repl/transient-collection/datastores/stores/TransientRequestStore.ts"),v=i("./runtime-repl/example/sidebar/ResponseSidebarItem.ts"),b=i("./runtime-repl/example/sidebar/GitLinkedResponseSidebarItem.ts"),g=i("./runtime-repl/example/sidebar/VersionViewResponseSidebarItem.ts"),_=i("./runtime-repl/transient-collection/datastores/stores/TransientExampleStore.ts"),A=i("./runtime-repl/transient-collection/datastores/stores/TransientCollectionStore.ts"),T=i("./js/stores/StoreManager.js"),C=i("./collaboration/workspace/model/ActiveWorkspaceBaseStore.ts"),S=i("./runtime-repl/collection/CollectionSorter.js"),y=i("./runtime-repl/sidebar-core/index.ts"),P=i("./runtime-repl/collection/sidebar/UnmigratedCollectionSidebarItem.ts"),O=i("./runtime-repl/collection/sidebar/CollectionSidebarItem.ts"),N=i("./runtime-repl/collection/sidebar/GitLinkedCollectionSidebarItem.ts"),L=i("./runtime-repl/collection/sidebar/VersionViewCollectionSidebarItem.ts"),D=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((o=o.apply(e,t||[])).next())}))};function j(e){return D(this,void 0,void 0,(function*(){if(!e)return(0,n.computed)((()=>[]));if(e instanceof d.default){let t;try{const i=yield(0,o.subscribePartialForAPI)(null==e?void 0:e.id);t=(0,n.computed)((()=>{const e=i.list.filter((e=>!e.isDeleting));return(0,S.sortCollections)(e)}))}catch(e){t=(0,n.computed)((()=>[]))}return(0,y.computedArray)(t,(t=>new O.default(t,e)),(()=>!1))}return e instanceof c.default?function(e){return D(this,void 0,void 0,(function*(){const t=e._item;if(!t)throw pm.logger.error("getAPILinkedCollections~ invalid api item passed"),new TypeError("Invalid argument");const i=(0,n.computed)((()=>{var e,i,o,n;const s=r().get(t,"computedVersion.apiRepositoryStore.entityHandlers.collections.transientCollectionStores")&&(null===(n=null===(o=null===(i=null===(e=t.computedVersion)||void 0===e?void 0:e.apiRepositoryStore)||void 0===i?void 0:i.entityHandlers)||void 0===o?void 0:o.collections)||void 0===n?void 0:n.collectionsOnBranch())||[];return(0,S.sortCollections)(s).map((e=>e.model))})),o=({id:t})=>{const i=A.default.find(t);if(i)return new N.default(i,e)},s=()=>!1;return(0,y.computedArray)(i,o,s)}))}(e):e instanceof u.default?function(e){return D(this,void 0,void 0,(function*(){const t=e._item;if(!t)throw pm.logger.error("getAPILinkedCollections~ invalid api item passed"),new TypeError("Invalid argument");const i=(0,n.computed)((()=>{const e=r().get(t,"computedVersion.consumerViewModel.collections",[]);return(0,S.sortCollections)(e).map((e=>({id:e.modelId})))})),o=({id:t})=>{const i=A.default.find(t);if(i)return new L.default(i,e)},s=()=>!1;return(0,y.computedArray)(i,o,s)}))}(e):(0,n.computed)((()=>[]))}))}function w(e){var t;return D(this,void 0,void 0,(function*(){if(!(null===(t=null==e?void 0:e._item)||void 0===t?void 0:t.parentEntityId))return(0,n.computed)((()=>[]));yield(0,n.when)((()=>(0,T.resolveStoreInstance)(C.default).isWorkspaceLoaded));const i=(0,T.resolveStoreInstance)(C.default).id,s=yield(0,o.subscribePartial)(i),a=(0,n.computed)((()=>{var t,i,o,n,a,l,d,c,u;const p=Object.values((null===(o=null===(i=null===(t=e._item)||void 0===t?void 0:t.relationsStore)||void 0===i?void 0:i.relations)||void 0===o?void 0:o.documentation)||{}),m=Object.values((null===(l=null===(a=null===(n=e._item)||void 0===n?void 0:n.relationsStore)||void 0===a?void 0:a.relations)||void 0===l?void 0:l.test)||{}),h=Object.values((null===(u=null===(c=null===(d=e._item)||void 0===d?void 0:d.relationsStore)||void 0===c?void 0:c.relations)||void 0===u?void 0:u.unclassified)||{}),I=r().reduce([...p,...m,...h],((e,t)=>((null==t?void 0:t.modelId)&&e.add(t.modelId),e)),new Set),f=s.list.filter((e=>I.has(e.id)&&!e.isDeleting));return(0,S.sortCollections)(f)}));return(0,y.computedArray)(a,(t=>new P.default(t,e)),(()=>!1))}))}function R(e){return D(this,void 0,void 0,(function*(){return e instanceof N.default||e instanceof p.default?(0,y.computedArray)((0,n.computed)((()=>e._item.model.ownFolders)),(t=>{const i=m.default.find(t.id);if(i)return new p.default(i,e)}),(()=>!1)):e instanceof L.default||e instanceof l.default?(0,y.computedArray)((0,n.computed)((()=>e._item.model.ownFolders)),(t=>{const i=m.default.find(t.id);if(i)return new l.default(i,e)}),(()=>!1)):(0,y.computedArray)((0,n.computed)((()=>{var t;return null===(t=null==e?void 0:e._item)||void 0===t?void 0:t.folders})),(t=>new a.default(t,e)),(()=>!1))}))}function x(e){return D(this,void 0,void 0,(function*(){if(e instanceof N.default||e instanceof p.default){const t=(0,n.computed)((()=>e._item.model.ownRequests)),i=t=>{const i=E.default.find(t.id);if(i)return new I.default(i,e)},o=()=>!1;return(0,y.computedArray)(t,i,o)}if(e instanceof L.default||e instanceof l.default){const t=(0,n.computed)((()=>e._item.model.ownRequests)),i=t=>{const i=E.default.find(t.id);if(i)return new f.default(i,e)},o=()=>!1;return(0,y.computedArray)(t,i,o)}const t=(0,n.computed)((()=>e._item.requests));return(0,y.computedArray)(t,(t=>new h.default(t,e)),(()=>!1))}))}function M(e){return D(this,void 0,void 0,(function*(){if(e instanceof I.default){const t=(0,n.computed)((()=>e._item.model.ownResponses)),i=t=>{const i=_.default.find(t.id);if(i)return new b.default(i,e)},o=()=>!1;return(0,y.computedArray)(t,i,o)}if(e instanceof f.default){const t=(0,n.computed)((()=>e._item.model.ownResponses)),i=t=>{const i=_.default.find(t.id);if(i)return new g.default(i,e)},o=()=>!1;return(0,y.computedArray)(t,i,o)}const t=(0,n.computed)((()=>e._item.responses));return(0,y.computedArray)(t,(t=>new v.default(t,e)),(()=>!1))}))}function k(e){return e instanceof h.default||e instanceof I.default||e instanceof f.default}function F(e){return e instanceof a.default||e instanceof p.default||e instanceof l.default}function B(e){return e instanceof O.default||e instanceof N.default||e instanceof L.default}},"./runtime-repl/collection/sidebar/BaseCollectionSidebarItem.ts":function(e,t,i){i.r(t),i.d(t,{EMPTY_STATE_HEIGHT:function(){return o}});const o={EDITABLE:52,NON_EDITABLE:32}},"./runtime-repl/collection/sidebar/CollectionSidebarEmptyItem.tsx":function(e,t,i){i.r(t),i.d(t,{default:function(){return l}});var o=i("../../node_modules/react/index.js"),n=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),s=i("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),r=i("./runtime-repl/collection/_api/CollectionInterface.js"),a=i("./runtime-repl/collection/CollectionActionsConstants.js");class l extends o.Component{render(){const{item:e}=this.props;if(!e.parent)return pm.logger.error("CollectionSidebarEmptyItem- Parent of item is undefined"),null;return o.createElement("div",{className:"collection-sidebar-list__empty-item__content"},o.createElement(n.default,{type:"para"},"This collection is empty",e.parent.isEditable&&o.createElement("div",null,o.createElement(s.default,{type:"plain",text:"Add a request",onClick:()=>{if(!e.parent)return pm.logger.error("CollectionSidebarEmptyItem~handleClick- Parent of item is undefined"),null;e.parent.isEditable&&(0,r.collectionActions)(e.parent.id,a.ACTION_TYPE_ADD_REQUEST,{},{origin:"sidebar",canPerform:()=>e.parent.isEditable,collectionId:e.parent.id,collectionName:e.parent.name,apiId:e.context.apiId},(()=>{}))}})," ","to start working.")))}}},"./runtime-repl/collection/sidebar/CollectionSidebarItem.ts":function(e,t,i){i.r(t),i.d(t,{default:function(){return H}});var o=i("./runtime-repl/sidebar-core/index.ts"),n=i("../../node_modules/mobx/lib/mobx.module.js"),s=i("./node_modules/lodash/lodash.js"),r=i.n(s),a=i("./runtime-repl/collection/sidebar/BaseCollectionSidebarItem.ts"),l=i("./collaboration/workspace/model/ActiveWorkspacePermissionStore.ts"),d=i("./collaboration/workspace/types/PermissionTypes.ts"),c=i("./appsdk/sidebar/SidebarService.ts"),u=i("./runtime-repl/collection/manifest.js"),p=i("./runtime-repl/collection/_api/CollectionInterface.js"),m=i("./runtime-repl/folder/_api/FolderInterface.js"),h=i("./runtime-repl/request-http/_api/RequestInterface.js"),I=i("./appsdk/workbench/WorkbenchService.js"),f=i("./js/stores/StoreManager.js"),E=i("./api-dev/stores/APIListStore.js"),v=i("./api-dev/services/APIPermissionService.js"),b=i("./api-dev/interfaces/APIInterface.js"),g=i("./api-dev/tools/collection-schema-sync/CollectionSidebarSyncMetaIcon/CollectionSidebarSyncMetaIcon.tsx"),_=i("../../packages/api-design/api-definition-ui/index.js"),A=i("./js/services/SingleTabWorkbenchService.js"),T=i("./runtime-repl/_common/NavigationConstants.js"),C=i("./js/modules/services/AnalyticsService.js"),S=i("./js/services/NavigationService.js"),y=i("./js/stores/CurrentUserStore.js"),P=i("./js/utils/TabOpeningUtil.js"),O=i("./js/stores/OnlineStatusStore.js"),N=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-entity-collection-stroke.js"),L=i("./runtime-repl/extensible-collection/api/ExtensibleCollectionAPI.ts"),D=i("./runtime-repl/_common/DisabledTooltipConstants.js"),j=i("./runtime-repl/utils/EntityMetaTransformer.js"),w=i("./version-control/services/VersionControlCollectionActions.js"),R=i("./js/utils/EntityNameResolver.js"),x=i("./runtime-repl/runner/workbench/CollectionRunCreate/RunCustomizer/RunnerRunsCustomizerListItem.js"),M=i("../../node_modules/@postman/aether/esmLib/src/components/Toast/ToastManager.js"),k=i("./runtime-repl/collection/sidebar/CollectionSidebarItemIcons.jsx"),F=i("./runtime-repl/collection/sidebar/CollectionSidebarEmptyItem.tsx"),B=i("./runtime-repl/runner/RunnerHelper.js"),V=i("./runtime-repl/_common/ToastHelpers.js"),U=i("./runtime-repl/collection/CollectionActionsConstants.js"),G=i("./runtime-repl/collection/_api/CollectionSidebarStore.ts"),W=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},Y=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((o=o.apply(e,t||[])).next())}))};class H extends o.SidebarItem{constructor(e,t){super(t),this.dataTestIdSuffix="collection",this.type="collection",this.analyticsEventCategory="collection-item-builder-mode",this.onClick=()=>this.parent&&(0,p.openCollectionInTab)(this.id,{},{type:"api",id:this.parent.id}),this.getChildren=()=>Y(this,void 0,void 0,(function*(){const e=yield(0,G.getFolders)(this),t=yield(0,G.getRequests)(this);return Promise.resolve((0,n.computed)((()=>[...e.get(),...t.get()])))})),this.userCanExpand=!0,this.allowedDropTargets=[x.default],this.isChildrenReorderingEnabled=!0,this._item=e,this.apiStore=(0,f.resolveStoreInstance)(E.default)}get isPendingCreate(){return Boolean(this._item.isPending)}get name(){return this._item.name}get id(){return this._item.id}hasPermissionOnAPI(e){var t;return v.default.hasPermission(this.apiStore.permissions,e,"api",null===(t=this.parent)||void 0===t?void 0:t.id)}showCollectionNotAForkToast(){pm.toasts.error("Collection is not a fork.",{dedupeId:"collection-sidebar-model-error"})}showPermissionErrorToast(){pm.toasts.error("You do not have permissions to perform this action",{dedupeId:"collection-sidebar-model-permission-error"})}getForkInfo(){return this._item&&this._item.isForked?{id:this._item.baseCollectionUid,forkId:this._item.id,forkLabel:this._item.forkLabel,baseCollectionUid:this._item.baseCollectionUid}:{}}showErrorToast(e,t){pm.toasts.error(`Could not ${e} ${r().capitalize(t)} successfully`,{dedupeId:"collection-sidebar-model-error"})}get emptyState(){return this.isEditable?{height:a.EMPTY_STATE_HEIGHT.EDITABLE,view:F.default}:{height:a.EMPTY_STATE_HEIGHT.NON_EDITABLE,view:F.default}}get actions(){var e,t;const{userCanSave:i,userCanSaveAndSync:n}=(0,f.resolveStoreInstance)(O.default),s=(0,f.resolveStoreInstance)(y.default).isLoggedIn,a=r().get(this._item,"permissions.edit",!0),E=r().get(this._item,"permissions.delete",!0),v=(0,f.resolveStoreInstance)(l.default),g=v&&v.permissions,N=!(!this._item||!this._item.isForked);return[I.default.isUseBrowserTabsActive()&&{name:U.ACTION_LABELS.OPEN_IN_NEW_TAB,shortcut:"openInNewBrowserTab",isEnabled:i,handler:()=>{var e;(0,P.openInNewBrowserTab)(T.WORKFLOW_IDENTIFIER.OPEN_COLLECTION_IN_API_CONTEXT,{cid:this.id,apiId:null===(e=this.parent)||void 0===e?void 0:e.id},{})}},{name:U.ACTION_LABELS.RUN_COLLECTION,isEnabled:(0,B.canRunCollection)(),xpathLabel:"runCollection",handler:()=>{var e;(0,p.collectionActions)(this.id,U.ACTION_TYPE_RUN,{},{origin:"sidebar",canPerform:()=>!0,collectionId:this.id,collectionName:this.name,flags:{isArchived:this._item.isArchived,isFavorite:this._item.isFavorite},apiId:null===(e=this.parent)||void 0===e?void 0:e.id},(()=>{}))}},{name:i&&a?U.ACTION_LABELS.EDIT:U.ACTION_LABELS.VIEW_DETAILS,isEnabled:!0,handler:()=>{(0,p.openCollectionInTab)(this.id,{focusContext:"info"})}},{name:U.ACTION_LABELS.ADD_REQUEST,isEnabled:i&&a,shouldExpandItem:!0,handler:()=>{if(!i)return(0,V.showOfflineActionDisabledToast)();A.default.didUserCancelDiscard()||(0,h.createRequest)({collection:this.id},{openInTab:!1}).then((e=>{S.default.transitionTo(T.WORKFLOW_IDENTIFIER.OPEN_REQUEST_IN_API_CONTEXT,{rid:e.uid,apiId:this.context.apiId},{},{tabOptions:{preview:!1,forceNew:!0},additionalContext:{editorState:{rename:!0},parentCollectionUID:this.id}})}))}},{name:U.ACTION_LABELS.ADD_FOLDER,isEnabled:i&&a,xpathLabel:"addFolder",shouldExpandItem:!0,handler:()=>{if(!i)return(0,V.showOfflineActionDisabledToast)();A.default.didUserCancelDiscard()||(0,m.createFolder)({model:this.type,uid:this.id},{openInTab:!1}).then((e=>{S.default.transitionTo(T.WORKFLOW_IDENTIFIER.OPEN_FOLDER_IN_API_CONTEXT,{fid:e.uid,apiId:this.context.apiId},{},{additionalContext:{rename:!0,parentCollectionUID:this.id}})}))}},{name:o.DEFAULT_ACTIONS.FORK,shortcut:"fork",isEnabled:s&&n,tooltip:(0,w.getDisabledText)(U.ACTION_TYPE_FORK,{}),handler:()=>{var e;(0,p.collectionActions)(this._item.id,U.ACTION_TYPE_FORK,{},{origin:"sidebar",canPerform:()=>!0,collectionId:this._item.id,collectionName:this.name,flags:{isArchived:this._item.isArchived,isFavorite:this._item.isFavorite},apiId:null===(e=this.parent)||void 0===e?void 0:e.id},(()=>{}))}},{name:U.ACTION_LABELS.PULL_REQUEST,isEnabled:s&&n&&N,tooltip:(0,w.getDisabledText)(U.ACTION_TYPE_PULL_REQUEST,{isFork:N}),handler:()=>n?N?(C.default.addEventV2({category:"pullrequest",action:"initiate_create",entityType:"collection",label:"sidebar",entityId:this.id}),(0,p.createPullRequest)(this.id,{id:this._item.baseCollectionUid,forkId:this.id})):this.showPermissionErrorToast():(0,V.showOfflineActionDisabledToast)()},{name:U.ACTION_LABELS.MERGE,isEnabled:s&&n&&N,tooltip:(0,w.getDisabledText)(U.ACTION_TYPE_MERGE,{isFork:N}),handler:()=>n?N?(0,p.mergeChanges)(this.id,{id:this._item.baseCollectionUid,forkId:this.id}):this.showPermissionErrorToast():(0,V.showOfflineActionDisabledToast)()},{name:U.ACTION_LABELS.PULL,isEnabled:s&&n&&N,tooltip:(0,w.getDisabledText)(U.ACTION_TYPE_PULL_CHANGES,{userCanPullChanges:!0,isFork:N}),handler:()=>n?N?(C.default.addEventV2({category:"collection",action:"initiate_pull_changes",label:"sidebar",entityType:"collection",entityId:this.id}),void S.default.transitionTo("build.merge",{toId:this.getForkInfo().forkId,entityType:"collection"},{"pull-changes":!0,workflow:"sync",source:this.getForkInfo().baseCollectionUid})):this.showCollectionNotAForkToast():(0,V.showOfflineActionDisabledToast)()},{name:U.ACTION_LABELS.VIEW_CHANGELOG,isEnabled:n,handler:()=>{var e;C.default.addEventV2({category:"collection",action:"view_changelog",label:"sidebar",entityType:"collection",entityId:this._item.id});return S.default.transitionTo(T.WORKFLOW_IDENTIFIER.OPEN_COLLECTION_IN_API_CONTEXT,{cid:this.id,apiId:null===(e=this.parent)||void 0===e?void 0:e.id},{ctx:"changelog"})}},{name:U.ACTION_LABELS.VIEW_DOCUMENTATION,isEnabled:!0,handler:()=>{var e;(0,p.collectionActions)(this._item.id,U.ACTION_VIEW_DOCUMENTATION,{},{origin:"sidebar",canPerform:()=>!0,collectionId:this._item.id,collectionName:this.name,flags:{isArchived:this._item.isArchived,isFavorite:this._item.isFavorite},apiId:null===(e=this.parent)||void 0===e?void 0:e.id},(()=>{}))}},(0,o.generateDefaultSidebarAction)({identifier:o.DEFAULT_ACTIONS.RENAME,isEnabled:this._item.isEditable&&(null===(e=(0,f.resolveStoreInstance)(O.default))||void 0===e?void 0:e.userCanSave),handler:e=>(0,p.renameCollection)(this.id,e)}),(0,o.generateDefaultSidebarAction)({identifier:o.DEFAULT_ACTIONS.DUPLICATE,isEnabled:i&&(null===(t=this.hasPermissionOnAPI)||void 0===t?void 0:t.call(this,"addCollection")),handler:()=>Y(this,void 0,void 0,(function*(){var e,t;if(!i)return(0,V.showOfflineActionDisabledToast)();if(!a)return this.showPermissionErrorToast();if(A.default.didUserCancelDiscard())return;const o=yield(0,_.getAPIVersionId)(this.parent.id),n={origin:"sidebar",name:this.name,apiVersionId:o,apiId:this.context.apiId};if(null===(e=this.parent)||void 0===e?void 0:e.id){if(!o)return void pm.logger.error("CollectionSidebarModel~handleAction: API version ID not found for apiId");const e=null===(t=this.parent)||void 0===t?void 0:t.id;if(!e)return;try{const t=yield(0,b.getAPI)(e);if(!t)return void pm.logger.error(`CollectionSidebarModel~handleAction: API not found for apiId ${e}`);if(!t.isMigrated)return void(0,b.migrateAPI)(e,o).catch(r().noop)}catch(e){pm.logger.error("CollectionSidebarModel-CollectionModel~handleAction: Error while getting API",e)}try{return(0,p.duplicateCollectionInAPI)(this.id,{type:"api",id:e,apiVersionId:o,relation:"unclassified"},{silent:!0,currentName:(0,R.getDuplicatedEntityName)([this.name],this.name)})}catch(e){pm.logger.error("CollectionSidebarModel-CollectionModel~handleAction: Error while getting relation data",e)}}return(0,p.duplicateCollection)(this.id,n,{silent:!0}).catch((()=>{this.showErrorToast("duplicate","collection")}))}))}),{type:U.ACTION_TYPE_COPY_TO_COLLECTIONS,name:U.ACTION_LABELS.COPY_TO_COLLECTIONS,isEnabled:r().get(g,d.WORKSPACE_PERMISSIONS.ADD_COLLECTION_TO_WORKSPACE,!0),tooltip:D.DISABLED_TOOLTIP_NO_PERMISSION,handler:()=>{const e=(0,p.duplicateCollection)(this.id,{},{currentName:this.name,suffix:""});return c.default.setActiveTab(u.SIDEBAR_COLLECTION),e.then((()=>{(0,M.toast)({status:"success",description:"Copied to collections in the sidebar."})})).catch((e=>{pm.logger.error("CollectionSidebarItem~get actions: error occurred in copy to collections",e),(0,M.toast)({status:"error",description:"Could not copy to collections in the sidebar."})}))}},{name:U.ACTION_LABELS.PASTE,shortcut:"paste",isEnabled:i&&a,tooltip:D.DISABLED_TOOLTIP_NO_PERMISSION,handler:()=>{}},(0,o.generateDefaultSidebarAction)({identifier:o.DEFAULT_ACTIONS.DELETE,isEnabled:i&&E,handler:()=>Y(this,void 0,void 0,(function*(){var e,t,o,n;if(!i)return(0,V.showOfflineActionDisabledToast)();if(!E)return this.showPermissionErrorToast();try{if(!(null===(e=this.parent)||void 0===e?void 0:e.id))return void pm.logger.error("CollectionSidebarModel~handleAction: API ID not found for apiId");const i=yield(0,b.getAPI)(this.parent.id);if(!i)return void pm.logger.error(`CollectionSidebarModel~handleAction: API not found for apiId ${null===(t=this.parent)||void 0===t?void 0:t.id}`);if(!i.isMigrated){const e=yield(0,_.getAPIVersionId)(null===(o=this.parent)||void 0===o?void 0:o.id);return(0,b.migrateAPI)(null===(n=this.parent)||void 0===n?void 0:n.id,e).catch(r().noop)}}catch(e){return void pm.logger.error("Error while checking if API is migrated",e)}let s;return N&&(s={forkModel:"collection",isForked:!0,forkLabel:this.getForkInfo().forkLabel,baseCollectionUid:this.getForkInfo().baseCollectionUid}),(0,p.deleteCollection)(this._item.id,{name:this._item.name,forkInfo:s,isAPIExclusive:!!this.parent.id}).catch((e=>{pm.logger.error("CollectionSidebarModel~handleAction - ",e)}))}))})].filter(Boolean)}get isEditable(){return this._item.isEditable}get isLoading(){return Boolean(this._item.isPending)}get meta(){const e=[],t=this.id;let i=null;if(L.default.isBetaCollection(t)){const e=r().get(L.default.cacheAPI.get(t),"forkDetails");e&&(i=(0,k.BetaCollectionForkLabel)({forkDetails:e}))}else{const e=r().get(this._item,"isForked"),t=(0,j.default)(this._item,"collection"),o={id:r().get(t,"forkId"),forkLabel:r().get(t,"forkLabel"),model:"collection"},n={id:r().get(t,"id"),model:"collection"};e&&(i=(0,k.CollectionForkLabel)({forkedEntity:o,baseEntity:n,forkInfo:t}))}return i&&e.push(i),e.push((0,g.default)(this.parent.id,t)),{iconsAfterText:e,iconBeforeText:N.default}}toString(){return"collection"}}W([n.computed],H.prototype,"isPendingCreate",null),W([n.computed],H.prototype,"name",null),W([n.computed],H.prototype,"id",null),W([n.computed],H.prototype,"emptyState",null),W([n.computed],H.prototype,"actions",null),W([n.computed],H.prototype,"isEditable",null),W([n.computed],H.prototype,"isLoading",null),W([n.computed],H.prototype,"meta",null)},"./runtime-repl/collection/sidebar/GitLinkedCollectionSidebarItem.ts":function(e,t,i){i.r(t),i.d(t,{default:function(){return y}});var o=i("./runtime-repl/sidebar-core/index.ts"),n=i("../../node_modules/mobx/lib/mobx.module.js"),s=i("./node_modules/lodash/lodash.js"),r=i.n(s),a=i("./js/stores/StoreManager.js"),l=i("./runtime-repl/collection/sidebar/BaseCollectionSidebarItem.ts"),d=i("./runtime-repl/_common/DisabledTooltipConstants.js"),c=i("./collaboration/workspace/model/ActiveWorkspacePermissionStore.ts"),u=i("./api-dev/stores/APIListStore.js"),p=i("./api-dev/tools/collection-schema-sync/CollectionSidebarSyncMetaIcon/CollectionSidebarSyncMetaIcon.tsx"),m=i("./collaboration/workspace/types/PermissionTypes.ts"),h=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-entity-collection-stroke.js"),I=i("./runtime-repl/extensible-collection/api/ExtensibleCollectionAPI.ts"),f=i("./runtime-repl/utils/EntityMetaTransformer.js"),E=i("./runtime-repl/transient-collection/_api/TransientCollectionPatchHandler.ts"),v=i("./runtime-repl/runner/workbench/CollectionRunCreate/RunCustomizer/RunnerRunsCustomizerListItem.js"),b=i("../../node_modules/@postman/aether/esmLib/src/components/Toast/ToastManager.js"),g=i("./runtime-repl/collection/sidebar/GitLinkedSidebarEmptyItem.tsx"),_=i("./runtime-repl/collection/_api/CollectionSidebarStore.ts"),A=i("./runtime-repl/collection/sidebar/CollectionSidebarItemIcons.jsx"),T=i("./runtime-repl/collection/CollectionActionsConstants.js"),C=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},S=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((o=o.apply(e,t||[])).next())}))};class y extends o.SidebarItem{constructor(e,t){super(t),this.dataTestIdSuffix="collection",this.analyticsEventCategory="collection-item-branch-mode",this.onClick=()=>{this._item.openInWorkbench()},this.type=E.BULK_ACTIONS_TYPE_STRINGS.GIT_LINKED_COLLECTION,this.getChildren=()=>S(this,void 0,void 0,(function*(){const e=yield(0,_.getFolders)(this),t=yield(0,_.getRequests)(this);return Promise.resolve((0,n.computed)((()=>[...e.get(),...t.get()])))})),this.userCanExpand=!0,this.allowedDropTargets=[v.default],this.isChildrenReorderingEnabled=!0,this._item=e,this.apiStore=(0,a.resolveStoreInstance)(u.default),this.onClick=this.onClick.bind(this)}get isPendingCreate(){return!1}get name(){return this._item.model.name}get id(){return this._item.model.uid}showCollectionNotAForkToast(){pm.toasts.error("Collection is not a fork.",{dedupeId:"collection-sidebar-model-error"})}showPermissionErrorToast(){pm.toasts.error("You do not have permissions to perform this action",{dedupeId:"collection-sidebar-model-permission-error"})}showErrorToast(e,t){pm.toasts.error(`Could not ${e} ${r().capitalize(t)} successfully`,{dedupeId:"collection-sidebar-model-error"})}get emptyState(){return this.isEditable?{height:l.EMPTY_STATE_HEIGHT.EDITABLE,view:g.default}:{height:l.EMPTY_STATE_HEIGHT.NON_EDITABLE,view:g.default}}handleAction(e,t){switch(e){case T.ACTION_LABELS.OPEN:return this._item.openInWorkbench();case T.ACTION_LABELS.RENAME:return(null==t?void 0:t.newName)&&this._item.model.update({name:t.newName});case T.ACTION_LABELS.ADD_REQUEST:return this._item.addRequest();case T.ACTION_LABELS.ADD_FOLDER:return this._item.addFolder();case T.ACTION_LABELS.RUN_COLLECTION:return this._item.run();case T.ACTION_LABELS.DUPLICATE:return this._item.duplicate();case T.ACTION_LABELS.PASTE:return()=>{};case T.ACTION_LABELS.DELETE:return this._item.delete({shouldShowConfirmationModal:!0});case T.ACTION_LABELS.VIEW_DOCUMENTATION:return this._item.viewDocumentation();case T.ACTION_LABELS.COPY_TO_COLLECTIONS:return this._item.copyToWorkspace().then((()=>{(0,b.toast)({status:"success",description:"Copied to collections in the sidebar."})})).catch((e=>{pm.logger.error("GitLinkedCollectionSidebarItem~handleAction - Could not copy collection to workspace ",e),(0,b.toast)({status:"error",description:"Could not copy to collections in the sidebar."})}));default:pm.logger.warn("GitLinkedCollectionSidebarItem~handleAction: Unhandled action",e)}}get actions(){const e=(0,a.resolveStoreInstance)(c.default),t=e&&e.permissions,i=r().get(t,m.WORKSPACE_PERMISSIONS.ADD_COLLECTION_TO_WORKSPACE,!0);return[{name:T.ACTION_LABELS.RUN_COLLECTION,isEnabled:!0,handler:()=>this.handleAction(T.ACTION_LABELS.RUN_COLLECTION)},{name:this.isEditable?T.ACTION_LABELS.EDIT:T.ACTION_LABELS.VIEW_DETAILS,isEnabled:!0,handler:()=>this.handleAction(T.ACTION_LABELS.OPEN)},{name:T.ACTION_LABELS.VIEW_DOCUMENTATION,isEnabled:!0,handler:()=>this.handleAction(T.ACTION_LABELS.VIEW_DOCUMENTATION)},{name:T.ACTION_LABELS.ADD_REQUEST,isEnabled:this.isEditable,handler:()=>this.handleAction(T.ACTION_LABELS.ADD_REQUEST)},{name:T.ACTION_LABELS.ADD_FOLDER,isEnabled:this.isEditable,handler:()=>this.handleAction(T.ACTION_LABELS.ADD_FOLDER)},(0,o.generateDefaultSidebarAction)({identifier:T.ACTION_LABELS.RENAME,isEnabled:this.isEditable,handler:e=>this.handleAction(T.ACTION_LABELS.RENAME,{newName:e})}),(0,o.generateDefaultSidebarAction)({identifier:T.ACTION_LABELS.DUPLICATE,isEnabled:this.isEditable,handler:()=>this.handleAction(T.ACTION_LABELS.DUPLICATE)}),{name:T.ACTION_LABELS.COPY_TO_COLLECTIONS,isEnabled:i,tooltip:d.DISABLED_TOOLTIP_NO_PERMISSION,handler:()=>this.handleAction(T.ACTION_LABELS.COPY_TO_COLLECTIONS)},{name:T.ACTION_LABELS.PASTE,isEnabled:this.isEditable,handler:()=>this.handleAction(T.ACTION_LABELS.PASTE)},(0,o.generateDefaultSidebarAction)({identifier:T.ACTION_LABELS.DELETE,isEnabled:this.isEditable,handler:()=>this.handleAction(T.ACTION_LABELS.DELETE)})]}get isEditable(){return this._item.model.isEditable}get meta(){const e=[],t=this.id;let i=null;if(I.default.isBetaCollection(t)){const e=r().get(I.default.cacheAPI.get(t),"forkDetails");e&&(i=(0,A.BetaCollectionForkLabel)({forkDetails:e}))}else{const e=r().get(this._item,"isForked"),t=(0,f.default)(this._item,"collection"),o={id:r().get(t,"forkId"),forkLabel:r().get(t,"forkLabel"),model:"collection"},n={id:r().get(t,"id"),model:"collection"};e&&(i=(0,A.CollectionForkLabel)({forkedEntity:o,baseEntity:n,forkInfo:t}))}return i&&e.push(i),e.push((0,p.default)(this.parent.id,t)),{iconsAfterText:e,iconBeforeText:h.default}}toString(){return"collection"}}C([n.computed],y.prototype,"isPendingCreate",null),C([n.computed],y.prototype,"name",null),C([n.computed],y.prototype,"id",null),C([n.computed],y.prototype,"emptyState",null),C([n.action],y.prototype,"handleAction",null),C([n.computed],y.prototype,"actions",null),C([n.computed],y.prototype,"isEditable",null),C([n.computed],y.prototype,"meta",null)},"./runtime-repl/collection/sidebar/GitLinkedSidebarEmptyItem.tsx":function(e,t,i){i.r(t),i.d(t,{default:function(){return r}});var o=i("../../node_modules/react/index.js"),n=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),s=i("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js");class r extends o.Component{render(){const{item:e}=this.props;if(!e.parent)return pm.logger.error("GitLinkedCollectionSidebarEmptyItem- Parent of item is undefined"),null;return o.createElement("div",{className:"collection-sidebar-list__empty-item__content"},o.createElement(n.default,{type:"para"},"This collection is empty",e.parent.isEditable&&o.createElement("div",null,o.createElement(s.default,{type:"plain",text:"Add a request",onClick:()=>{var t,i,o;return e.parent?e.parent.isEditable&&(null===(o=null===(i=null===(t=e.parent)||void 0===t?void 0:t._item)||void 0===i?void 0:i.addRequest)||void 0===o?void 0:o.call(i)):(pm.logger.error("GitLinkedCollectionSidebarEmptyItem~handleClick- Parent of item is undefined"),null)}})," ","to start working.")))}}},"./runtime-repl/collection/sidebar/UnmigratedCollectionSidebarItem.ts":function(e,t,i){i.r(t),i.d(t,{default:function(){return W}});var o=i("./runtime-repl/sidebar-core/index.ts"),n=i("../../node_modules/mobx/lib/mobx.module.js"),s=i("./node_modules/lodash/lodash.js"),r=i.n(s),a=i("./collaboration/workspace/model/ActiveWorkspacePermissionStore.ts"),l=i("./collaboration/workspace/types/PermissionTypes.ts"),d=i("./appsdk/sidebar/SidebarService.ts"),c=i("./runtime-repl/collection/manifest.js"),u=i("./runtime-repl/collection/_api/CollectionInterface.js"),p=i("./runtime-repl/folder/_api/FolderInterface.js"),m=i("./runtime-repl/request-http/_api/RequestInterface.js"),h=i("./appsdk/workbench/WorkbenchService.js"),I=i("./js/stores/StoreManager.js"),f=i("./api-dev/stores/APIListStore.js"),E=i("./api-dev/services/APIPermissionService.js"),v=i("./api-dev/interfaces/APIInterface.js"),b=i("./js/services/SingleTabWorkbenchService.js"),g=i("./runtime-repl/_common/NavigationConstants.js"),_=i("./js/modules/services/AnalyticsService.js"),A=i("./js/services/NavigationService.js"),T=i("./js/stores/CurrentUserStore.js"),C=i("./js/utils/TabOpeningUtil.js"),S=i("./js/stores/OnlineStatusStore.js"),y=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-entity-collection-stroke.js"),P=i("./runtime-repl/extensible-collection/api/ExtensibleCollectionAPI.ts"),O=i("./runtime-repl/_common/DisabledTooltipConstants.js"),N=i("./runtime-repl/utils/EntityMetaTransformer.js"),L=i("./version-control/services/VersionControlCollectionActions.js"),D=i("./js/utils/EntityNameResolver.js"),j=i("./runtime-repl/runner/workbench/CollectionRunCreate/RunCustomizer/RunnerRunsCustomizerListItem.js"),w=i("../../node_modules/@postman/aether/esmLib/src/components/Toast/ToastManager.js"),R=i("./runtime-repl/collection/sidebar/BaseCollectionSidebarItem.ts"),x=i("./runtime-repl/collection/sidebar/CollectionSidebarItemIcons.jsx"),M=i("./runtime-repl/collection/sidebar/CollectionSidebarEmptyItem.tsx"),k=i("./runtime-repl/runner/RunnerHelper.js"),F=i("./runtime-repl/_common/ToastHelpers.js"),B=i("./runtime-repl/collection/CollectionActionsConstants.js"),V=i("./runtime-repl/collection/_api/CollectionSidebarStore.ts"),U=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},G=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((o=o.apply(e,t||[])).next())}))};class W extends o.SidebarItem{constructor(e,t){super(t),this.isMigrated=!0,this.dataTestIdSuffix="collection",this.type="collection",this.analyticsEventCategory="unmigratedCollection-item-builder-mode",this.onClick=()=>this.parent&&(0,u.openCollectionInTab)(this.id,{},{type:"api",id:this.parentAPIId}),this.getChildren=()=>G(this,void 0,void 0,(function*(){const e=yield(0,V.getFolders)(this),t=yield(0,V.getRequests)(this);return(0,n.computed)((()=>[...e.get(),...t.get()]))})),this.userCanExpand=!0,this.allowedDropTargets=[j.default],this.isChildrenReorderingEnabled=!0,this._item=e,this.apiStore=(0,I.resolveStoreInstance)(f.default)}get isPendingCreate(){return Boolean(this._item.isPending)}get name(){return this._item.name}get id(){return this._item.id}get parentAPIId(){var e,t;return null===(t=null===(e=this.parent)||void 0===e?void 0:e._item)||void 0===t?void 0:t.parentEntityId}hasPermissionOnAPI(e){return E.default.hasPermission(this.apiStore.permissions,e,"api",this.parentAPIId)}showCollectionNotAForkToast(){pm.toasts.error("Collection is not a fork.",{dedupeId:"collection-sidebar-model-error"})}showPermissionErrorToast(){pm.toasts.error("You do not have permissions to perform this action",{dedupeId:"collection-sidebar-model-permission-error"})}getForkInfo(){return this._item&&this._item.isForked?{id:this._item.baseCollectionUid,forkId:this._item.id,forkLabel:this._item.forkLabel,baseCollectionUid:this._item.baseCollectionUid}:{}}showErrorToast(e,t){pm.toasts.error(`Could not ${e} ${r().capitalize(t)} successfully`,{dedupeId:"collection-sidebar-model-error"})}get emptyState(){return this.isEditable?{height:R.EMPTY_STATE_HEIGHT.EDITABLE,view:M.default}:{height:R.EMPTY_STATE_HEIGHT.NON_EDITABLE,view:M.default}}get actions(){var e,t;const{userCanSave:i,userCanSaveAndSync:n}=(0,I.resolveStoreInstance)(S.default),s=(0,I.resolveStoreInstance)(T.default).isLoggedIn,f=r().get(this._item,"permissions.edit",!0),E=r().get(this._item,"permissions.delete",!0),y=(0,I.resolveStoreInstance)(a.default),P=y&&y.permissions,N=!(!this._item||!this._item.isForked),j=!this.context.isApiMigrated&&"version"===this.context.apiMode.name;return[h.default.isUseBrowserTabsActive()&&{name:B.ACTION_LABELS.OPEN_IN_NEW_TAB,shortcut:"openInNewBrowserTab",isEnabled:i,handler:()=>{(0,C.openInNewBrowserTab)(g.WORKFLOW_IDENTIFIER.OPEN_COLLECTION_IN_API_CONTEXT,{cid:this.id,apiId:this.parentAPIId},{})}},{name:B.ACTION_LABELS.RUN_COLLECTION,isEnabled:(0,k.canRunCollection)(),xpathLabel:"runCollection",handler:()=>{(0,u.collectionActions)(this.id,B.ACTION_TYPE_RUN,{},{origin:"sidebar",canPerform:()=>!0,collectionId:this.id,collectionName:this.name,flags:{isArchived:this._item.isArchived,isFavorite:this._item.isFavorite},apiId:this.parentAPIId},(()=>{}))}},!j&&{name:i&&f?B.ACTION_LABELS.EDIT:B.ACTION_LABELS.VIEW_DETAILS,isEnabled:!0,handler:()=>{(0,u.openCollectionInTab)(this.id,{focusContext:"info"})}},!j&&{name:B.ACTION_LABELS.ADD_REQUEST,isEnabled:i&&f,shouldExpandItem:!0,handler:()=>{if(!i)return(0,F.showOfflineActionDisabledToast)();b.default.didUserCancelDiscard()||(0,m.createRequest)({collection:this.id},{openInTab:!1}).then((e=>{A.default.transitionTo(g.WORKFLOW_IDENTIFIER.OPEN_REQUEST_IN_API_CONTEXT,{rid:e.uid,apiId:this.context.apiId},{},{tabOptions:{preview:!1,forceNew:!0},additionalContext:{editorState:{rename:!0},parentCollectionUID:this.id}})}))}},!j&&{name:B.ACTION_LABELS.ADD_FOLDER,isEnabled:i&&f,xpathLabel:"addFolder",shouldExpandItem:!0,handler:()=>{if(!i)return(0,F.showOfflineActionDisabledToast)();b.default.didUserCancelDiscard()||(0,p.createFolder)({model:this.type,uid:this.id},{openInTab:!1}).then((e=>{A.default.transitionTo(g.WORKFLOW_IDENTIFIER.OPEN_FOLDER_IN_API_CONTEXT,{fid:e.uid,apiId:this.context.apiId},{},{additionalContext:{rename:!0,parentCollectionUID:this.id}})}))}},{name:o.DEFAULT_ACTIONS.FORK,shortcut:"fork",isEnabled:s&&n,tooltip:(0,L.getDisabledText)(B.ACTION_TYPE_FORK,{}),handler:()=>{(0,u.collectionActions)(this._item.id,B.ACTION_TYPE_FORK,{},{origin:"sidebar",canPerform:()=>!0,collectionId:this._item.id,collectionName:this.name,flags:{isArchived:this._item.isArchived,isFavorite:this._item.isFavorite},apiId:this.parentAPIId},(()=>{}))}},!j&&{name:B.ACTION_LABELS.PULL_REQUEST,isEnabled:s&&n&&N,tooltip:(0,L.getDisabledText)(B.ACTION_TYPE_PULL_REQUEST,{isFork:N}),handler:()=>n?N?(_.default.addEventV2({category:"pullrequest",action:"initiate_create",entityType:"collection",label:"sidebar",entityId:this.id}),(0,u.createPullRequest)(this.id,{id:this._item.baseCollectionUid,forkId:this.id})):this.showPermissionErrorToast():(0,F.showOfflineActionDisabledToast)()},!j&&{name:B.ACTION_LABELS.MERGE,isEnabled:s&&n&&N,tooltip:(0,L.getDisabledText)(B.ACTION_TYPE_MERGE,{isFork:N}),handler:()=>n?N?(0,u.mergeChanges)(this.id,{id:this._item.baseCollectionUid,forkId:this.id}):this.showPermissionErrorToast():(0,F.showOfflineActionDisabledToast)()},!j&&{name:B.ACTION_LABELS.PULL,isEnabled:s&&n&&N,tooltip:(0,L.getDisabledText)(B.ACTION_TYPE_PULL_CHANGES,{userCanPullChanges:!0,isFork:N}),handler:()=>n?N?(_.default.addEventV2({category:"collection",action:"initiate_pull_changes",label:"sidebar",entityType:"collection",entityId:this.id}),void A.default.transitionTo("build.merge",{toId:this.getForkInfo().forkId,entityType:"collection"},{"pull-changes":!0,workflow:"sync",source:this.getForkInfo().baseCollectionUid})):this.showCollectionNotAForkToast():(0,F.showOfflineActionDisabledToast)()},{name:B.ACTION_LABELS.VIEW_CHANGELOG,isEnabled:n,handler:()=>{_.default.addEventV2({category:"collection",action:"view_changelog",label:"sidebar",entityType:"collection",entityId:this._item.id});return A.default.transitionTo(g.WORKFLOW_IDENTIFIER.OPEN_COLLECTION_IN_API_CONTEXT,{cid:this.id,apiId:this.parentAPIId},{ctx:"changelog"})}},{name:B.ACTION_LABELS.VIEW_DOCUMENTATION,isEnabled:!0,handler:()=>{(0,u.collectionActions)(this._item.id,B.ACTION_VIEW_DOCUMENTATION,{},{origin:"sidebar",canPerform:()=>!0,collectionId:this._item.id,collectionName:this.name,flags:{isArchived:this._item.isArchived,isFavorite:this._item.isFavorite},apiId:this.parentAPIId},(()=>{}))}},!j&&(0,o.generateDefaultSidebarAction)({identifier:o.DEFAULT_ACTIONS.RENAME,isEnabled:this._item.isEditable&&(null===(e=(0,I.resolveStoreInstance)(S.default))||void 0===e?void 0:e.userCanSave),handler:e=>(0,u.renameCollection)(this.id,e)}),!j&&(0,o.generateDefaultSidebarAction)({identifier:o.DEFAULT_ACTIONS.DUPLICATE,isEnabled:i&&(null===(t=this.hasPermissionOnAPI)||void 0===t?void 0:t.call(this,"addCollection")),handler:()=>G(this,void 0,void 0,(function*(){var e,t;if(!i)return(0,F.showOfflineActionDisabledToast)();if(!f)return this.showPermissionErrorToast();if(b.default.didUserCancelDiscard())return;const o=this.parentAPIId,n={origin:"sidebar",name:this.name,apiVersionId:o,apiId:this.context.apiId};if(null===(e=this.parent)||void 0===e?void 0:e._item.parentEntityId){if(!o)return void pm.logger.error("CollectionSidebarModel~handleAction: API version ID not found for apiId");const e=null===(t=this.parent)||void 0===t?void 0:t._item.parentEntityId;if(!e)return;try{const t=yield(0,v.getAPI)(e);if(!t)return void pm.logger.error(`CollectionSidebarModel~handleAction: API not found for apiId ${e}`);if(!t.isMigrated)return void(0,v.migrateAPI)(e,this.parent._item.id).catch(r().noop)}catch(e){pm.logger.error("CollectionSidebarModel-CollectionModel~handleAction: Error while getting API",e)}try{return(0,u.duplicateCollectionInAPI)(this.id,{type:"api",id:e,apiVersionId:o,relation:"unclassified"},{silent:!0,currentName:(0,D.getDuplicatedEntityName)([this.name],this.name)})}catch(e){pm.logger.error("CollectionSidebarModel-CollectionModel~handleAction: Error while getting relation data",e)}}return(0,u.duplicateCollection)(this.id,n,{silent:!0}).catch((()=>{this.showErrorToast("duplicate","collection")}))}))}),!j&&{type:B.ACTION_TYPE_COPY_TO_COLLECTIONS,name:B.ACTION_LABELS.COPY_TO_COLLECTIONS,isEnabled:r().get(P,l.WORKSPACE_PERMISSIONS.ADD_COLLECTION_TO_WORKSPACE,!0),tooltip:O.DISABLED_TOOLTIP_NO_PERMISSION,handler:()=>{const e=(0,u.duplicateCollection)(this.id,{},{currentName:this.name,suffix:""});return d.default.setActiveTab(c.SIDEBAR_COLLECTION),e.then((()=>{(0,w.toast)({status:"success",description:"Copied to collections in the sidebar."})})).catch((e=>{pm.logger.error("CollectionSidebarItem~get actions: error occurred in copy to collections",e),(0,w.toast)({status:"error",description:"Could not copy to collections in the sidebar."})}))}},!j&&{name:B.ACTION_LABELS.PASTE,shortcut:"paste",isEnabled:i&&f,tooltip:O.DISABLED_TOOLTIP_NO_PERMISSION,handler:()=>{}},!j&&(0,o.generateDefaultSidebarAction)({identifier:o.DEFAULT_ACTIONS.DELETE,isEnabled:i&&E,handler:()=>G(this,void 0,void 0,(function*(){var e,t;if(!i)return(0,F.showOfflineActionDisabledToast)();if(!E)return this.showPermissionErrorToast();try{if(!(null===(e=this.parent)||void 0===e?void 0:e._item.parentEntityId))return void pm.logger.error("CollectionSidebarModel~handleAction: API ID not found for apiId");const i=yield(0,v.getAPI)(this.parent._item.parentEntityId);if(!i)return void pm.logger.error(`CollectionSidebarModel~handleAction: API not found for apiId ${this.parent._item.parentEntityId}`);if(!i.isMigrated){const e=null===(t=this.parent)||void 0===t?void 0:t.id;return(0,v.migrateAPI)(i.id,e).catch(r().noop)}}catch(e){return void pm.logger.error("Error while checking if API is migrated",e)}let o;return N&&(o={forkModel:"collection",isForked:!0,forkLabel:this.getForkInfo().forkLabel,baseCollectionUid:this.getForkInfo().baseCollectionUid}),(0,u.deleteCollection)(this._item.id,{name:this._item.name,forkInfo:o,isAPIExclusive:!!this.parentAPIId}).catch((e=>{pm.logger.error("CollectionSidebarModel~handleAction - ",e)}))}))})].filter(Boolean)}get isEditable(){return this._item.isEditable}get isLoading(){return Boolean(this._item.isPending)}get meta(){const e=[],t=this.id;let i=null;if(P.default.isBetaCollection(t)){const e=r().get(P.default.cacheAPI.get(t),"forkDetails");e&&(i=(0,x.BetaCollectionForkLabel)({forkDetails:e}))}else{const e=r().get(this._item,"isForked"),t=(0,N.default)(this._item,"collection"),o={id:r().get(t,"forkId"),forkLabel:r().get(t,"forkLabel"),model:"collection"},n={id:r().get(t,"id"),model:"collection"};e&&(i=(0,x.CollectionForkLabel)({forkedEntity:o,baseEntity:n,forkInfo:t}))}return i&&e.push(i),{iconsAfterText:e,iconBeforeText:y.default}}toString(){return"collection"}}U([n.computed],W.prototype,"isPendingCreate",null),U([n.computed],W.prototype,"name",null),U([n.computed],W.prototype,"id",null),U([n.computed],W.prototype,"parentAPIId",null),U([n.computed],W.prototype,"emptyState",null),U([n.computed],W.prototype,"actions",null),U([n.computed],W.prototype,"isEditable",null),U([n.computed],W.prototype,"isLoading",null),U([n.computed],W.prototype,"meta",null)},"./runtime-repl/collection/sidebar/VersionViewCollectionSidebarItem.ts":function(e,t,i){i.r(t),i.d(t,{default:function(){return A}});var o=i("./runtime-repl/sidebar-core/index.ts"),n=i("../../node_modules/mobx/lib/mobx.module.js"),s=i("./node_modules/lodash/lodash.js"),r=i.n(s),a=i("./js/stores/StoreManager.js"),l=i("./api-dev/stores/APIListStore.js"),d=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-entity-collection-stroke.js"),c=i("./runtime-repl/collection/sidebar/BaseCollectionSidebarItem.ts"),u=i("./runtime-repl/extensible-collection/api/ExtensibleCollectionAPI.ts"),p=i("./runtime-repl/utils/EntityMetaTransformer.js"),m=i("./version-control/services/VersionControlCollectionActions.js"),h=i("./api-dev/interfaces/APIInterface.js"),I=i("./runtime-repl/runner/workbench/CollectionRunCreate/RunCustomizer/RunnerRunsCustomizerListItem.js"),f=i("./runtime-repl/collection/sidebar/GitLinkedSidebarEmptyItem.tsx"),E=i("./runtime-repl/collection/_api/CollectionSidebarStore.ts"),v=i("./runtime-repl/collection/sidebar/CollectionSidebarItemIcons.jsx"),b=i("./runtime-repl/collection/CollectionActionsConstants.js"),g=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},_=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((o=o.apply(e,t||[])).next())}))};class A extends o.SidebarItem{constructor(e,t){super(t),this.dataTestIdSuffix="collection",this.latestRelease=!1,this.analyticsEventCategory="collection-item-version-mode",this.onClick=()=>{this._item.openInWorkbench()},this.getChildren=()=>_(this,void 0,void 0,(function*(){const e=yield(0,E.getFolders)(this),t=yield(0,E.getRequests)(this);return Promise.resolve((0,n.computed)((()=>[...e.get(),...t.get()])))})),this.userCanExpand=!0,this.allowedDropTargets=[I.default],this._item=e,this.apiStore=(0,a.resolveStoreInstance)(l.default),this.onClick=this.onClick.bind(this),this.fetchLatestRelease()}setLatestRelease(e){this.latestRelease=e}fetchLatestRelease(){return _(this,void 0,void 0,(function*(){const e=this.context.apiId||null;e&&this.setLatestRelease(yield(0,h.isLatestReleaseActive)(e))}))}get isPendingCreate(){return!1}get name(){return this._item.model.name}get id(){return this._item.model.uid}showCollectionNotAForkToast(){pm.toasts.error("Collection is not a fork.",{dedupeId:"collection-sidebar-model-error"})}showPermissionErrorToast(){pm.toasts.error("You do not have permissions to perform this action",{dedupeId:"collection-sidebar-model-permission-error"})}showErrorToast(e,t){pm.toasts.error(`Could not ${e} ${r().capitalize(t)} successfully`,{dedupeId:"collection-sidebar-model-error"})}get emptyState(){return this.isEditable?{height:c.EMPTY_STATE_HEIGHT.EDITABLE,view:f.default}:{height:c.EMPTY_STATE_HEIGHT.NON_EDITABLE,view:f.default}}handleAction(e){switch(e){case b.ACTION_LABELS.RUN_COLLECTION:return this._item.run();case b.ACTION_LABELS.VIEW_DOCUMENTATION:return this._item.viewDocumentation();case b.ACTION_LABELS.VIEW_CHANGELOG:return this._item.viewChangelog();case o.DEFAULT_ACTIONS.FORK:return this._item.fork();default:pm.logger.warn("VersionViewCollectionSidebarItem~handleAction: Unhandled action",e)}}get actions(){return[{name:b.ACTION_LABELS.RUN_COLLECTION,isEnabled:!0,handler:()=>this.handleAction(b.ACTION_LABELS.RUN_COLLECTION)},{name:o.DEFAULT_ACTIONS.FORK,isEnabled:!0,shortcut:"fork",tooltip:(0,m.getDisabledText)(b.ACTION_TYPE_FORK,{isLatestRelease:this.latestRelease}),handler:()=>this.handleAction(b.ACTION_LABELS.FORK)},{name:b.ACTION_LABELS.VIEW_CHANGELOG,isEnabled:!0,handler:()=>this.handleAction(b.ACTION_LABELS.VIEW_CHANGELOG)},{name:b.ACTION_LABELS.VIEW_DOCUMENTATION,isEnabled:!0,handler:()=>this.handleAction(b.ACTION_LABELS.VIEW_DOCUMENTATION)}]}get isEditable(){return!1}get meta(){const e=[],t=this.id;let i=null;if(u.default.isBetaCollection(t)){const e=r().get(u.default.cacheAPI.get(t),"forkDetails");e&&(i=(0,v.BetaCollectionForkLabel)({forkDetails:e}))}else{const e=r().get(this._item,"isForked"),t=(0,p.default)(this._item,"collection"),o={id:r().get(t,"forkId"),forkLabel:r().get(t,"forkLabel"),model:"collection"},n={id:r().get(t,"id"),model:"collection"};e&&(i=(0,v.CollectionForkLabel)({forkedEntity:o,baseEntity:n,forkInfo:t}))}return i&&e.push(i),{iconsAfterText:e,iconBeforeText:d.default}}}g([n.observable],A.prototype,"latestRelease",void 0),g([n.action],A.prototype,"setLatestRelease",null),g([n.computed],A.prototype,"isPendingCreate",null),g([n.computed],A.prototype,"name",null),g([n.computed],A.prototype,"id",null),g([n.computed],A.prototype,"emptyState",null),g([n.action],A.prototype,"handleAction",null),g([n.computed],A.prototype,"actions",null),g([n.computed],A.prototype,"isEditable",null),g([n.computed],A.prototype,"meta",null)},"./runtime-repl/environment/_api/EnvironmentSidebarStore.ts":function(e,t,i){i.r(t),i.d(t,{getEnvironments:function(){return p}});var o=i("../../node_modules/mobx/lib/mobx.module.js"),n=i("./api-dev/sidebar/APISidebarItem.ts"),s=i("./runtime-repl/environment/_api/EnvironmentStoreV2.js"),r=i("./runtime-repl/sidebar-core/index.ts"),a=i("./api-dev/sidebar/UnmigratedAPISidebarItem.ts"),l=i("./runtime-repl/environment/sidebar/EnvironmentSidebarItem.ts"),d=i("./js/stores/StoreManager.js"),c=i("./collaboration/workspace/model/ActiveWorkspaceBaseStore.ts"),u=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((o=o.apply(e,t||[])).next())}))};function p(e){return u(this,void 0,void 0,(function*(){if(!e)return(0,o.computed)((()=>[]));const t=(0,d.resolveStoreInstance)(c.default).id,i=yield(0,s.subscribeMeta)(t,{parent:["api","workspace"]});if(e instanceof n.default){const t=(0,o.computed)((()=>{var t,o,n,s;const r=new Set(Object.values((null===(s=null===(n=null===(o=null===(t=e._item)||void 0===t?void 0:t.computedVersion)||void 0===o?void 0:o.relationsStore)||void 0===n?void 0:n.relations)||void 0===s?void 0:s.environment)||{}).map((e=>e.modelId)));return i.list.filter((e=>r.has(e.id)&&!e.isDeleting))}));return(0,r.computedArray)(t,(t=>new l.default(t,e)),(()=>!1))}if(e instanceof a.default){const t=(0,o.computed)((()=>{var t,o,n;const s=new Set(Object.values((null===(n=null===(o=null===(t=e._item)||void 0===t?void 0:t.relationsStore)||void 0===o?void 0:o.relations)||void 0===n?void 0:n.environment)||{}).map((e=>e.modelId)));return i.list.filter((e=>s.has(e.id)&&!e.isDeleting))}));return(0,r.computedArray)(t,(t=>new l.default(t,e)),(()=>!1))}return(0,o.computed)((()=>[]))}))}},"./runtime-repl/environment/sidebar/EnvironmentSidebarItem.ts":function(e,t,i){i.r(t),i.d(t,{default:function(){return p}});var o=i("./runtime-repl/sidebar-core/index.ts"),n=i("../../node_modules/mobx/lib/mobx.module.js"),s=i("./js/stores/StoreManager.js"),r=i("./runtime-repl/environment/_api/EnvironmentInterface.js"),a=i("./api-dev/stores/APIListStore.js"),l=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-entity-environment-stroke.js"),d=i("./api-dev/interfaces/APIInterface.js"),c=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},u=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((o=o.apply(e,t||[])).next())}))};class p extends o.SidebarItem{constructor(e,t){super(t),this.dataTestIdSuffix="environment",this.onClick=()=>{var e,t;(0,r.openEnvironmentInTab)(this.id,{},{type:"api",id:(null===(t=null===(e=this.parent)||void 0===e?void 0:e.parentAPI)||void 0===t?void 0:t.id)||this.context.apiId})},this.getChildren=()=>u(this,void 0,void 0,(function*(){return Promise.resolve((0,n.computed)((()=>[])))})),this.userCanExpand=!1,this.allowedDropTargets=[],this._item=e,this.apiStore=(0,s.resolveStoreInstance)(a.default),this.onClick=this.onClick.bind(this)}get isPendingCreate(){return!1}get name(){return this._item.name}get id(){return this._item.id}get actions(){return[(0,o.generateDefaultSidebarAction)({identifier:o.DEFAULT_ACTIONS.RENAME,isEnabled:this.isEditable,handler:e=>(0,r.renameEnvironment)(this.id,e)}),(0,o.generateDefaultSidebarAction)({identifier:o.DEFAULT_ACTIONS.DELETE,isEnabled:this.isEditable,handler:()=>u(this,void 0,void 0,(function*(){var e,t;let i;yield(0,d.migrateAPI)(null===(e=this.parent)||void 0===e?void 0:e._item.parentEntityId,null===(t=this.parent)||void 0===t?void 0:t.id),this._item.forkLabel&&(i={isForked:!!this._item.forkLabel,forkLabel:this._item.forkLabel,baseEnvironmentUid:this._item.baseEnvironmentUid}),yield(0,r.deleteEnvironment)(this.id,{name:this._item.name,forkInfo:i})}))})]}get isEditable(){return this._item.isEditable}get meta(){return{iconBeforeText:l.default}}toString(){return"environment"}}c([n.computed],p.prototype,"isPendingCreate",null),c([n.computed],p.prototype,"name",null),c([n.computed],p.prototype,"id",null),c([n.computed],p.prototype,"actions",null),c([n.computed],p.prototype,"isEditable",null),c([n.computed],p.prototype,"meta",null)},"./runtime-repl/example/sidebar/GitLinkedResponseSidebarItem.ts":function(e,t,i){i.r(t),i.d(t,{default:function(){return p}});var o=i("./runtime-repl/sidebar-core/index.ts"),n=i("../../node_modules/mobx/lib/mobx.module.js"),s=i("./runtime-repl/request-http/sidebar/GitLinkedRequestSidebarItem.ts"),r=i("./node_modules/lodash/lodash.js"),a=i.n(r),l=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-entity-example-stroke.js"),d=i("./runtime-repl/transient-collection/_api/TransientCollectionPatchHandler.ts"),c=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r};const u={EDIT:"Edit",VIEW_DETAILS:"View details",RENAME:o.DEFAULT_ACTIONS.RENAME,DUPLICATE:o.DEFAULT_ACTIONS.DUPLICATE,DELETE:o.DEFAULT_ACTIONS.DELETE,OPEN:"Open"};class p extends o.SidebarItem{constructor(e,t){super(t),this.dataTestIdSuffix="response",this.analyticsEventCategory="response-item-branch-mode",this.onClick=()=>this._item.openInWorkbench(),this.type=d.BULK_ACTIONS_TYPE_STRINGS.GIT_LINKED_EXAMPLE,this.getChildren=()=>Promise.resolve((0,n.computed)((()=>[]))),this._responsesList=[],this.allowedDropTargets=[s.default],this._item=e}get name(){return this._item.model.name}get id(){return this._item.model.uid}get isPendingCreate(){return!1}showPermissionErrorToast(){pm.toasts.error("You do not have permissions to perform this action",{dedupeId:"collection-sidebar-model-permission-error"})}showErrorToast(e,t){pm.toasts.error(`Could not ${e} ${a().capitalize(t)} successfully`,{dedupeId:"collection-sidebar-model-error"})}get actions(){return[{name:this.isEditable?u.EDIT:u.VIEW_DETAILS,isEnabled:!0,handler:()=>this.handleAction(u.OPEN)},(0,o.generateDefaultSidebarAction)({identifier:u.RENAME,isEnabled:this.isEditable,handler:e=>this.handleAction(u.RENAME,{newName:e})}),(0,o.generateSidebarBulkAction)({identifier:o.BULK_ACTIONS.DUPLICATE,isEnabled:this.isEditable}),(0,o.generateDefaultSidebarAction)({identifier:u.DELETE,isEnabled:this.isEditable,handler:()=>this.handleAction(u.DELETE)})]}handleAction(e,t){switch(e){case u.OPEN:return this._item.openInWorkbench();case u.RENAME:return(null==t?void 0:t.newName)&&this._item.model.update({name:t.newName});case u.DUPLICATE:return this._item.duplicate();case u.DELETE:return this._item.delete({shouldShowConfirmationModal:!0});default:pm.logger.warn("GitLinkedExampleSidebarItem~handleAction: Unhandled action",e)}}get isEditable(){return this._item.model.isEditable}toString(){return"example"}get meta(){return{iconBeforeText:l.default}}}c([n.computed],p.prototype,"name",null),c([n.computed],p.prototype,"id",null),c([n.computed],p.prototype,"isPendingCreate",null),c([n.computed],p.prototype,"actions",null),c([n.computed],p.prototype,"isEditable",null),c([n.computed],p.prototype,"meta",null)},"./runtime-repl/example/sidebar/ResponseSidebarItem.ts":function(e,t,i){i.r(t),i.d(t,{default:function(){return E}});var o=i("./runtime-repl/sidebar-core/index.ts"),n=i("../../node_modules/mobx/lib/mobx.module.js"),s=i("./runtime-repl/request-http/sidebar/RequestSidebarItem.ts"),r=i("./appsdk/workbench/WorkbenchService.js"),a=i("./js/constants/TabOpeningConstants.js"),l=i("./runtime-repl/_common/NavigationConstants.js"),d=i("./js/utils/TabOpeningUtil.js"),c=i("./runtime-repl/example/_api/ExampleInterface.js"),u=i("./js/stores/StoreManager.js"),p=i("./js/stores/OnlineStatusStore.js"),m=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-entity-example-stroke.js"),h=i("./js/services/NavigationService.js"),I=i("./runtime-repl/_common/ToastHelpers.js"),f=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r};class E extends o.SidebarItem{constructor(e,t){super(t),this.dataTestIdSuffix="response",this.type="response",this.analyticsEventCategory="response-item-builder-mode",this.onClick=()=>{if(this.parent||pm.logger.error("FolderSidebarItem~parent not found"),this.context.apiId)return h.default.transitionTo(l.WORKFLOW_IDENTIFIER.OPEN_EXAMPLE_IN_API_CONTEXT,{fid:this.id,apiId:this.context.apiId},{});(0,c.openExampleInTab)(this.id,{preview:!0,collectionId:this._item.collection})},this.getChildren=()=>Promise.resolve((0,n.computed)((()=>[]))),this.allowedDropTargets=[s.default],this._item=e}toString(){return"example"}get name(){return this._item.name}get id(){return this._item.id}get isPendingCreate(){return!1}showPermissionErrorToast(){pm.toasts.error("You do not have permissions to perform this action",{dedupeId:"collection-sidebar-model-permission-error"})}get actions(){var e;const{userCanSave:t}=(0,u.resolveStoreInstance)(p.default),i=!this.context.isApiMigrated&&"version"===this.context.apiMode.name;return[r.default.isUseBrowserTabsActive()&&{type:a.ACTION_OPEN_IN_NEW_BROWSER_TAB,name:"Open In New Tab",shortcut:"openInNewBrowserTab",isEnabled:t,handler:()=>(0,d.openInNewBrowserTab)(l.WORKFLOW_IDENTIFIER.OPEN_EXAMPLE_IN_API_CONTEXT,{fid:this.id,apiId:this.context.apiId})},!i&&(0,o.generateDefaultSidebarAction)({identifier:o.DEFAULT_ACTIONS.RENAME,isEnabled:this._item.isEditable&&(null===(e=(0,u.resolveStoreInstance)(p.default))||void 0===e?void 0:e.userCanSave),handler:e=>(0,c.renameExample)(this.id,null,e)}),!i&&(0,o.generateSidebarBulkAction)({identifier:o.BULK_ACTIONS.DUPLICATE,isEnabled:t&&this._item.isEditable}),!i&&(0,o.generateDefaultSidebarAction)({identifier:o.DEFAULT_ACTIONS.DELETE,isEnabled:t&&this._item.isEditable,handler:()=>t?this._item.isEditable?(0,c.deleteExample)(this.id,{name:this.name,collectionId:this._item.collection}).catch((e=>{pm.logger.error("ResponseSidebarItem~handleAction - ",e)})):this.showPermissionErrorToast():(0,I.showOfflineActionDisabledToast)()})].filter(Boolean)}get isEditable(){return this._item.isEditable}get isLoading(){return Boolean(this._item.isPending)}get meta(){return{iconBeforeText:m.default}}}f([n.computed],E.prototype,"name",null),f([n.computed],E.prototype,"id",null),f([n.computed],E.prototype,"isPendingCreate",null),f([n.computed],E.prototype,"isEditable",null),f([n.computed],E.prototype,"isLoading",null),f([n.computed],E.prototype,"meta",null)},"./runtime-repl/example/sidebar/VersionViewResponseSidebarItem.ts":function(e,t,i){i.r(t),i.d(t,{default:function(){return d}});var o=i("./runtime-repl/sidebar-core/index.ts"),n=i("../../node_modules/mobx/lib/mobx.module.js"),s=i("./node_modules/lodash/lodash.js"),r=i.n(s),a=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-entity-example-stroke.js"),l=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r};class d extends o.SidebarItem{constructor(e,t){super(t),this.dataTestIdSuffix="response",this.analyticsEventCategory="response-item-version-mode",this.onClick=()=>this._item.openInWorkbench(),this.getChildren=()=>Promise.resolve((0,n.computed)((()=>[]))),this._responsesList=[],this.allowedDropTargets=[],this._item=e}get name(){return this._item.model.name}get id(){return this._item.model.uid}get isPendingCreate(){return!1}showPermissionErrorToast(){pm.toasts.error("You do not have permissions to perform this action",{dedupeId:"collection-sidebar-model-permission-error"})}showErrorToast(e,t){pm.toasts.error(`Could not ${e} ${r().capitalize(t)} successfully`,{dedupeId:"collection-sidebar-model-error"})}get actions(){return[]}get isEditable(){return this._item.model.isEditable}get meta(){return{iconBeforeText:a.default}}}l([n.computed],d.prototype,"name",null),l([n.computed],d.prototype,"id",null),l([n.computed],d.prototype,"isPendingCreate",null),l([n.computed],d.prototype,"actions",null),l([n.computed],d.prototype,"isEditable",null),l([n.computed],d.prototype,"meta",null)},"./runtime-repl/folder/sidebar/FolderSidebarEmptyItem.tsx":function(e,t,i){i.r(t),i.d(t,{default:function(){return c}});var o=i("../../node_modules/react/index.js"),n=i("./runtime-repl/collection/CollectionActionsConstants.js"),s=i("./node_modules/lodash/lodash.js"),r=i.n(s),a=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),l=i("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),d=i("./runtime-repl/folder/_api/FolderInterface.js");function c(e){const{item:t}=e,i=o.useRef(null);if(o.useEffect((()=>(e.observeSizeChange&&e.observeSizeChange(i.current),()=>e.unobserveSizeChange&&e.unobserveSizeChange(i.current,e.index))),[i.current]),!t.parent)return pm.logger.error("FolderSidebarEmptyItem- Parent of item is undefined"),null;return o.createElement("div",{className:"collection-sidebar-list__empty-item__content",ref:i,"data-index":e.index},o.createElement(a.default,{type:"para"},"This folder is empty",t.parent.isEditable&&o.createElement("div",null,o.createElement(l.default,{type:"plain",text:"Add a request",onClick:()=>{if(!t.parent)return pm.logger.error("FolderSidebarEmptyItem~handleClick- Parent of item is undefined"),null;(0,d.folderActions)(t.parent.id,t.parent,n.ACTION_TYPE_ADD_REQUEST,{},{origin:"sidebar",canPerform:()=>t.parent.isEditable,collectionId:t.parent._item.collection},(()=>{r().noop()}))}})," ","to start working.")))}},"./runtime-repl/folder/sidebar/FolderSidebarItem.ts":function(e,t,i){i.r(t),i.d(t,{default:function(){return N}});var o=i("./runtime-repl/sidebar-core/index.ts"),n=i("../../node_modules/mobx/lib/mobx.module.js"),s=i("./node_modules/lodash/lodash.js"),r=i.n(s),a=i("./js/services/NavigationService.js"),l=i("./runtime-repl/_common/NavigationConstants.js"),d=i("./js/constants/TabOpeningConstants.js"),c=i("./appsdk/workbench/WorkbenchService.js"),u=i("./runtime-repl/_common/ToastHelpers.js"),p=i("./js/services/SingleTabWorkbenchService.js"),m=i("./js/utils/TabOpeningUtil.js"),h=i("./runtime-repl/folder/_api/FolderInterface.js"),I=i("./js/stores/StoreManager.js"),f=i("./js/stores/OnlineStatusStore.js"),E=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-entity-folder-stroke.js"),v=i("./runtime-repl/collection/_api/CollectionSidebarStore.ts"),b=i("./runtime-repl/request-http/_api/RequestInterface.js"),g=i("./runtime-repl/_common/DisabledTooltipConstants.js"),_=i("./runtime-repl/collection/sidebar/UnmigratedCollectionSidebarItem.ts"),A=i("./runtime-repl/collection/sidebar/CollectionSidebarItem.ts"),T=i("./runtime-repl/collection/CollectionActionsConstants.js"),C=i("./runtime-repl/runner/RunnerHelper.js"),S=i("./runtime-repl/folder/sidebar/FolderSidebarEmptyItem.tsx"),y=i("./runtime-repl/collection/sidebar/BaseCollectionSidebarItem.ts"),P=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},O=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((o=o.apply(e,t||[])).next())}))};class N extends o.SidebarItem{constructor(e,t){super(t),this.dataTestIdSuffix="folder",this.type="folder",this.analyticsEventCategory="folder-item-builder-mode",this.getChildren=()=>O(this,void 0,void 0,(function*(){const e=yield(0,v.getFolders)(this),t=yield(0,v.getRequests)(this);return(0,n.computed)((()=>[...e.get(),...t.get()]))})),this.onClick=()=>{if(this.parent)return this.context.apiId?a.default.transitionTo(l.WORKFLOW_IDENTIFIER.OPEN_FOLDER_IN_API_CONTEXT,{fid:this.id,apiId:this.context.apiId},{},{additionalContext:{parentCollectionUID:this._item.collection}}):void(0,h.openFolderInTab)(this.id,this._item.collection);pm.logger.error("FolderSidebarItem~parent not found")},this.allowedDropTargets=[N,A.default,_.default],this.isChildrenReorderingEnabled=!0,this._item=e}get name(){return this._item.name}get id(){return this._item.id}get isPendingCreate(){return!1}get emptyState(){return this.isEditable?{height:y.EMPTY_STATE_HEIGHT.EDITABLE,view:S.default}:{height:y.EMPTY_STATE_HEIGHT.NON_EDITABLE,view:S.default}}get actions(){var e,t;const{userCanSave:i}=(0,I.resolveStoreInstance)(f.default),n=!this.context.isApiMigrated&&"version"===this.context.apiMode.name;return[c.default.isUseBrowserTabsActive()&&{type:d.ACTION_OPEN_IN_NEW_BROWSER_TAB,name:"Open In New Tab",shortcut:"openInNewBrowserTab",isEnabled:i,handler:()=>(0,m.openInNewBrowserTab)(l.WORKFLOW_IDENTIFIER.OPEN_FOLDER_IN_API_CONTEXT,{fid:this.id,apiId:this.context.apiId})},!n&&{type:T.ACTION_TYPE_OPEN,name:this._item.isEditable?"Edit":"View details",isEnabled:!0,xpathname:"edit",handler:()=>{(0,h.openFolderInTab)(this.id,this._item.collection,{focusContext:"info"})}},!n&&{type:T.ACTION_TYPE_ADD_REQUEST,name:"Add request",isEnabled:i&&this._item.isEditable,shouldExpandItem:!0,handler:()=>{if(!i)return(0,u.showOfflineActionDisabledToast)();p.default.didUserCancelDiscard()||(0,b.createRequest)({collection:this._item.collection,folder:this.id},{openInTab:!1}).then((e=>{a.default.transitionTo(l.WORKFLOW_IDENTIFIER.OPEN_REQUEST_IN_API_CONTEXT,{rid:e.uid,apiId:this.context.apiId},{},{tabOptions:{preview:!1,forceNew:!0},additionalContext:{editorState:{rename:!0},parentCollectionUID:this._item.collection}})}))}},!n&&{type:T.ACTION_TYPE_ADD_FOLDER,name:"Add folder",isEnabled:i&&this._item.isEditable,shouldExpandItem:!0,handler:()=>{if(!i)return(0,u.showOfflineActionDisabledToast)();p.default.didUserCancelDiscard()||(0,h.createFolder)({model:this.type,uid:this.id,parentCollectionUid:this._item.collection},{openInTab:!1}).then((e=>{a.default.transitionTo(l.WORKFLOW_IDENTIFIER.OPEN_FOLDER_IN_API_CONTEXT,{fid:e.uid,apiId:this.context.apiId},{},{additionalContext:{rename:!0,parentCollectionUID:this._item.collection}})}))}},!n&&{type:T.ACTION_TYPE_RUN,name:"Run folder",isEnabled:(0,C.canRunCollection)(),xpathname:"runFolder",handler:()=>{(0,h.folderActions)(this.id,this._item,T.ACTION_TYPE_RUN,{},{origin:"sidebar",canPerform:()=>!0,collectionId:this._item.collection,apiId:this.context.apiId},(()=>{r().noop()}))}},{type:T.ACTION_VIEW_DOCUMENTATION,name:"View documentation",isEnabled:!0,handler:()=>{(0,h.folderActions)(this.id,this._item,T.ACTION_VIEW_DOCUMENTATION,{},{origin:"sidebar",canPerform:()=>!0,collectionId:this._item.collection,apiId:this.context.apiId},(()=>{r().noop()}))}},!n&&(0,o.generateDefaultSidebarAction)({identifier:o.DEFAULT_ACTIONS.RENAME,isEnabled:this._item.isEditable&&(null===(e=(0,I.resolveStoreInstance)(f.default))||void 0===e?void 0:e.userCanSave),handler:e=>(0,h.renameFolder)(this.id,null,e)}),!n&&(0,o.generateSidebarBulkAction)({identifier:o.BULK_ACTIONS.DUPLICATE,isEnabled:i&&this._item.isEditable}),!n&&{type:T.ACTION_TYPE_PASTE,name:"Paste",shortcut:"paste",handler:()=>{},isEnabled:this._item.isEditable&&(null===(t=(0,I.resolveStoreInstance)(f.default))||void 0===t?void 0:t.userCanSave),tooltip:g.DISABLED_TOOLTIP_NO_PERMISSION},!n&&(0,o.generateDefaultSidebarAction)({identifier:o.DEFAULT_ACTIONS.DELETE,isEnabled:i&&this._item.isEditable,handler:()=>{if(i&&this._item.isEditable)return(0,h.deleteFolder)(this.id,{name:this.name,collectionId:this._item.collection}).catch((e=>{pm.logger.error("CollectionSidebarModel~handleAction - ",e)}))}})].filter(Boolean)}get isEditable(){return this._item.isEditable}get isLoading(){return Boolean(this._item.isPending)}toString(){return"folder"}get meta(){return{iconBeforeText:E.default}}}P([n.computed],N.prototype,"name",null),P([n.computed],N.prototype,"id",null),P([n.computed],N.prototype,"isPendingCreate",null),P([n.computed],N.prototype,"emptyState",null),P([n.computed],N.prototype,"isEditable",null),P([n.computed],N.prototype,"isLoading",null),P([n.computed],N.prototype,"meta",null)},"./runtime-repl/folder/sidebar/GitLinkedFolderSidebarEmptyItem.tsx":function(e,t,i){i.r(t),i.d(t,{default:function(){return r}});var o=i("../../node_modules/react/index.js"),n=i("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),s=i("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js");function r(e){const{item:t}=e,i=o.useRef(null);if(o.useEffect((()=>(e.observeSizeChange&&e.observeSizeChange(i.current),()=>e.unobserveSizeChange&&e.unobserveSizeChange(i.current,e.index))),[i.current]),!t.parent)return pm.logger.error("GitLinkedFolderSidebarEmptyItem- Parent of item is undefined"),null;return o.createElement("div",{className:"collection-sidebar-list__empty-item__content",ref:i,"data-index":e.index},o.createElement(n.default,{type:"para"},"This folder is empty",t.parent.isEditable&&o.createElement("div",null,o.createElement(s.default,{type:"plain",text:"Add a request",onClick:()=>{var e,i,o;if(!t.parent)return pm.logger.error("GitLinkedFolderSidebarEmptyItem~handleClick- Parent of item is undefined"),null;null===(o=null===(i=null===(e=t.parent)||void 0===e?void 0:e._item)||void 0===i?void 0:i.addRequest)||void 0===o||o.call(i)}})," ","to start working.")))}},"./runtime-repl/folder/sidebar/GitLinkedFolderSidebarItem.ts":function(e,t,i){i.r(t),i.d(t,{default:function(){return h}});var o=i("./runtime-repl/sidebar-core/index.ts"),n=i("../../node_modules/mobx/lib/mobx.module.js"),s=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-entity-folder-stroke.js"),r=i("./runtime-repl/collection/sidebar/GitLinkedCollectionSidebarItem.ts"),a=i("./runtime-repl/collection/_api/CollectionSidebarStore.ts"),l=i("./runtime-repl/transient-collection/_api/TransientCollectionPatchHandler.ts"),d=i("./runtime-repl/folder/sidebar/GitLinkedFolderSidebarEmptyItem.tsx"),c=i("./runtime-repl/collection/sidebar/BaseCollectionSidebarItem.ts"),u=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},p=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((o=o.apply(e,t||[])).next())}))};const m={EDIT:"Edit",VIEW_DETAILS:"View details",VIEW_DOCUMENTATION:"View documentation",ADD_REQUEST:"Add request",ADD_FOLDER:"Add folder",RENAME:o.DEFAULT_ACTIONS.RENAME,DUPLICATE:o.DEFAULT_ACTIONS.DUPLICATE,PASTE:"Paste",DELETE:o.DEFAULT_ACTIONS.DELETE,OPEN:"Open"};class h extends o.SidebarItem{constructor(e,t){super(t),this.dataTestIdSuffix="folder",this.analyticsEventCategory="folder-item-branch-mode",this.onClick=()=>this._item.openInWorkbench(),this.type=l.BULK_ACTIONS_TYPE_STRINGS.GIT_LINKED_FOLDER,this.getChildren=()=>p(this,void 0,void 0,(function*(){const e=yield(0,a.getFolders)(this),t=yield(0,a.getRequests)(this);return Promise.resolve((0,n.computed)((()=>[...e.get(),...t.get()])))})),this.allowedDropTargets=[h,r.default],this.isChildrenReorderingEnabled=!0,this.userCanExpand=!0,this._item=e}get name(){return this._item.model.name}get id(){return this._item.model.uid}get isPendingCreate(){return!1}get emptyState(){return this.isEditable?{height:c.EMPTY_STATE_HEIGHT.EDITABLE,view:d.default}:{height:c.EMPTY_STATE_HEIGHT.NON_EDITABLE,view:d.default}}get actions(){return[{name:this.isEditable?m.EDIT:m.VIEW_DETAILS,isEnabled:!0,handler:()=>this.handleAction(m.OPEN)},{name:m.VIEW_DOCUMENTATION,isEnabled:!0,handler:()=>this.handleAction(m.VIEW_DOCUMENTATION)},{name:m.ADD_REQUEST,isEnabled:this.isEditable,handler:()=>this.handleAction(m.ADD_REQUEST)},{name:m.ADD_FOLDER,isEnabled:this.isEditable,handler:()=>this.handleAction(m.ADD_FOLDER)},(0,o.generateDefaultSidebarAction)({identifier:m.RENAME,isEnabled:this.isEditable,handler:e=>this.handleAction(m.RENAME,{newName:e})}),(0,o.generateSidebarBulkAction)({identifier:o.BULK_ACTIONS.DUPLICATE,isEnabled:this.isEditable}),{name:m.PASTE,isEnabled:this.isEditable,handler:()=>this.handleAction(m.PASTE)},(0,o.generateDefaultSidebarAction)({identifier:m.DELETE,isEnabled:this.isEditable,handler:()=>this.handleAction(m.DELETE)})]}handleAction(e,t){switch(e){case m.OPEN:return this._item.openInWorkbench();case m.RENAME:return(null==t?void 0:t.newName)&&this._item.model.update({name:t.newName});case m.ADD_REQUEST:return this._item.addRequest();case m.ADD_FOLDER:return this._item.addFolder();case m.DUPLICATE:return this._item.duplicate();case m.PASTE:return()=>{};case m.DELETE:return this._item.delete({shouldShowConfirmationModal:!0});case m.VIEW_DOCUMENTATION:return this._item.viewDocumentation();default:pm.logger.warn("GitLinkedFolderSidebarItem~handleAction: Unhandled action",e)}}get isEditable(){return!!this._item.model.isEditable}get meta(){return{iconBeforeText:s.default}}toString(){return"folder"}}u([n.computed],h.prototype,"name",null),u([n.computed],h.prototype,"id",null),u([n.computed],h.prototype,"isPendingCreate",null),u([n.computed],h.prototype,"emptyState",null),u([n.computed],h.prototype,"actions",null),u([n.computed],h.prototype,"isEditable",null),u([n.computed],h.prototype,"meta",null)},"./runtime-repl/folder/sidebar/VersionViewFolderSidebarItem.ts":function(e,t,i){i.r(t),i.d(t,{default:function(){return m}});var o=i("./runtime-repl/sidebar-core/index.ts"),n=i("../../node_modules/mobx/lib/mobx.module.js"),s=i("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-entity-folder-stroke.js"),r=i("./runtime-repl/collection/_api/CollectionSidebarStore.ts"),a=i("./runtime-repl/folder/sidebar/GitLinkedFolderSidebarEmptyItem.tsx"),l=i("./runtime-repl/collection/sidebar/BaseCollectionSidebarItem.ts"),d=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},c=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((o=o.apply(e,t||[])).next())}))};const u="View documentation",p="Run Folder";class m extends o.SidebarItem{constructor(e,t){super(t),this.dataTestIdSuffix="folder",this.analyticsEventCategory="folder-item-version-mode",this.onClick=()=>this._item.openInWorkbench(),this.getChildren=()=>c(this,void 0,void 0,(function*(){const e=yield(0,r.getFolders)(this),t=yield(0,r.getRequests)(this);return Promise.resolve((0,n.computed)((()=>[...e.get(),...t.get()])))})),this.allowedDropTargets=[],this.userCanExpand=!0,this._item=e}get name(){return this._item.model.name}get id(){return this._item.model.uid}get isPendingCreate(){return!1}get actions(){return[{name:p,isEnabled:!0,handler:()=>this.handleAction(p)},{name:u,isEnabled:!0,handler:()=>this.handleAction(u)}]}get emptyState(){return this.isEditable?{height:l.EMPTY_STATE_HEIGHT.EDITABLE,view:a.default}:{height:l.EMPTY_STATE_HEIGHT.NON_EDITABLE,view:a.default}}handleAction(e){switch(e){case p:return this._item.run();case u:return this._item.viewDocumentation();default:pm.logger.warn("VersionViewFolderSidebarItem~handleAction: Unhandled action",e)}}get isEditable(){return!!this._item.model.isEditable}get meta(){return{iconBeforeText:s.default}}toString(){return"folder"}}d([n.computed],m.prototype,"name",null),d([n.computed],m.prototype,"id",null),d([n.computed],m.prototype,"isPendingCreate",null),d([n.computed],m.prototype,"actions",null),d([n.computed],m.prototype,"emptyState",null),d([n.computed],m.prototype,"isEditable",null),d([n.computed],m.prototype,"meta",null)},"./runtime-repl/request-http/sidebar/GitLinkedRequestSidebarItem.ts":function(e,t,i){i.r(t),i.d(t,{default:function(){return E}});var o=i("../../node_modules/react/index.js"),n=i("./runtime-repl/sidebar-core/index.ts"),s=i("./node_modules/lodash/lodash.js"),r=i.n(s),a=i("../../node_modules/mobx/lib/mobx.module.js"),l=i("./runtime-repl/request-http/RequestIcon.js"),d=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),c=i("./runtime-repl/collection/_api/CollectionSidebarStore.ts"),u=i("./runtime-repl/folder/sidebar/GitLinkedFolderSidebarItem.ts"),p=i("./runtime-repl/collection/sidebar/GitLinkedCollectionSidebarItem.ts"),m=i("./runtime-repl/transient-collection/_api/TransientCollectionPatchHandler.ts"),h=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},I=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((o=o.apply(e,t||[])).next())}))};const f={EDIT:"Edit",VIEW_DETAILS:"View details",VIEW_DOCUMENTATION:"View documentation",ADD_EXAMPLE:"Add example",RENAME:n.DEFAULT_ACTIONS.RENAME,DUPLICATE:n.DEFAULT_ACTIONS.DUPLICATE,PASTE:"Paste",DELETE:n.DEFAULT_ACTIONS.DELETE,OPEN:"Open"};class E extends n.SidebarItem{constructor(e,t){super(t),this.shouldExpandOnClick=!1,this.dataTestIdSuffix="request",this.analyticsEventCategory="request-item-branch-mode",this.type=m.BULK_ACTIONS_TYPE_STRINGS.GIT_LINKED_REQUEST,this.onClick=()=>this._item.openInWorkbench(),this.getChildren=()=>I(this,void 0,void 0,(function*(){return(0,c.getResponses)(this)})),this.allowedDropTargets=[p.default,u.default],this.isChildrenReorderingEnabled=!0,this._item=e,this.init()}init(){return I(this,void 0,void 0,(function*(){yield this.getChildren()}))}get name(){return this._item.model.name}get id(){return this._item.model.uid}get isPendingCreate(){return!1}showPermissionErrorToast(){pm.toasts.error("You do not have permissions to perform this action",{dedupeId:"collection-sidebar-model-permission-error"})}showErrorToast(e,t){pm.toasts.error(`Could not ${e} ${r().capitalize(t)} successfully`,{dedupeId:"collection-sidebar-model-error"})}get actions(){return[{name:this.isEditable?f.EDIT:f.VIEW_DETAILS,isEnabled:!0,handler:()=>this.handleAction(f.OPEN)},{name:f.VIEW_DOCUMENTATION,isEnabled:!0,handler:()=>this.handleAction(f.VIEW_DOCUMENTATION)},{name:f.ADD_EXAMPLE,isEnabled:this.isEditable,handler:()=>this.handleAction(f.ADD_EXAMPLE)},(0,n.generateDefaultSidebarAction)({identifier:f.RENAME,isEnabled:this.isEditable,handler:e=>this.handleAction(f.RENAME,{newName:e})}),(0,n.generateSidebarBulkAction)({identifier:n.BULK_ACTIONS.DUPLICATE,isEnabled:this.isEditable}),{name:f.PASTE,isEnabled:this.isEditable,handler:()=>this.handleAction(f.PASTE)},(0,n.generateDefaultSidebarAction)({identifier:f.DELETE,isEnabled:this.isEditable,handler:()=>this.handleAction(f.DELETE)})]}handleAction(e,t){switch(e){case f.OPEN:return this._item.openInWorkbench();case f.RENAME:return(null==t?void 0:t.newName)&&this._item.model.update({name:t.newName});case f.ADD_EXAMPLE:return this._item.addExample();case f.DUPLICATE:return this._item.duplicate();case f.PASTE:return()=>{};case f.DELETE:return this._item.delete({shouldShowConfirmationModal:!0});case f.VIEW_DOCUMENTATION:return this._item.viewDocumentation();default:pm.logger.warn("GitLinkedRequestSidebarItem~handleAction: Unhandled action",e)}}get isEditable(){return this._item.model.isEditable}get meta(){return{iconBeforeText:(0,d.observer)((()=>o.createElement(l.default,{method:this._item.model.method})))}}toString(){return"request"}}h([a.computed],E.prototype,"name",null),h([a.computed],E.prototype,"id",null),h([a.computed],E.prototype,"isPendingCreate",null),h([a.computed],E.prototype,"actions",null),h([a.computed],E.prototype,"isEditable",null),h([a.computed],E.prototype,"meta",null)},"./runtime-repl/request-http/sidebar/RequestSidebarItem.ts":function(e,t,i){i.r(t),i.d(t,{default:function(){return N}});var o=i("../../node_modules/react/index.js"),n=i("./runtime-repl/sidebar-core/index.ts"),s=i("./node_modules/lodash/lodash.js"),r=i.n(s),a=i("../../node_modules/mobx/lib/mobx.module.js"),l=i("./runtime-repl/collection/sidebar/CollectionSidebarItem.ts"),d=i("./runtime-repl/folder/sidebar/FolderSidebarItem.ts"),c=i("./js/constants/TabOpeningConstants.js"),u=i("./appsdk/workbench/WorkbenchService.js"),p=i("./js/services/SingleTabWorkbenchService.js"),m=i("./js/utils/TabOpeningUtil.js"),h=i("./runtime-repl/_common/NavigationConstants.js"),I=i("./js/services/NavigationService.js"),f=i("./runtime-repl/request-http/_api/RequestInterface.js"),E=i("./runtime-repl/request-http/RequestIcon.js"),v=i("./js/stores/StoreManager.js"),b=i("./js/stores/OnlineStatusStore.js"),g=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),_=i("./runtime-repl/collection/_api/CollectionSidebarStore.ts"),A=i("./runtime-repl/example/_api/ExampleInterface.js"),T=i("./runtime-repl/_common/DisabledTooltipConstants.js"),C=i("./runtime-repl/collection/sidebar/UnmigratedCollectionSidebarItem.ts"),S=i("./runtime-repl/_common/ToastHelpers.js"),y=i("./runtime-repl/collection/CollectionActionsConstants.js"),P=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},O=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((o=o.apply(e,t||[])).next())}))};class N extends n.SidebarItem{constructor(e,t){super(t),this.shouldExpandOnClick=!1,this.dataTestIdSuffix="request",this.type="request",this.analyticsEventCategory="request-item-builder-mode",this.onClick=()=>{if(this.parent||pm.logger.error("FolderSidebarItem~parent not found"),this.context.apiId)return I.default.transitionTo(h.WORKFLOW_IDENTIFIER.OPEN_REQUEST_IN_API_CONTEXT,{rid:this.id,apiId:this.context.apiId},{});(0,f.openRequestInTab)(this.id,{preview:!0,collectionId:this._item.collection})},this.getChildren=()=>O(this,void 0,void 0,(function*(){return(0,_.getResponses)(this)})),this.allowedDropTargets=[d.default,l.default,C.default],this.isChildrenReorderingEnabled=!0,this._item=e}get name(){return this._item.name}get id(){return this._item.id}get isPendingCreate(){return!1}showPermissionErrorToast(){pm.toasts.error("You do not have permissions to perform this action",{dedupeId:"collection-sidebar-model-permission-error"})}showErrorToast(e,t){pm.toasts.error(`Could not ${e} ${r().capitalize(t)} successfully`,{dedupeId:"collection-sidebar-model-error"})}get actions(){var e,t;const{userCanSave:i}=(0,v.resolveStoreInstance)(b.default),o=!this.context.isApiMigrated&&"version"===this.context.apiMode.name;return[u.default.isUseBrowserTabsActive()&&{type:c.ACTION_OPEN_IN_NEW_BROWSER_TAB,name:"Open In New Tab",shortcut:"openInNewBrowserTab",isEnabled:i,handler:()=>(0,m.openInNewBrowserTab)(h.WORKFLOW_IDENTIFIER.OPEN_REQUEST_IN_API_CONTEXT,{rid:this.id,apiId:this.context.apiId},{})},!u.default.isUseBrowserTabsActive()&&{type:y.ACTION_TYPE_OPEN_IN_NEW_TAB,name:"Open in Tab",isEnabled:!0,xpathname:y.ACTION_TYPE_OPEN_IN_NEW_TAB,handler:()=>{(0,f.openRequestInTab)(this.id,{preview:!1,collectionId:this._item.collection})}},!o&&{type:y.ACTION_TYPE_ADD_EXAMPLE,name:"Add example",isEnabled:i&&this._item.isEditable,xpathname:y.ACTION_TYPE_ADD_EXAMPLE,shouldExpandItem:!0,handler:()=>{p.default.didUserCancelDiscard()||(0,A.createExample)(this.id,{collectionId:this._item.collection,shouldNotOpenInTab:!0}).then((e=>{I.default.transitionTo(h.WORKFLOW_IDENTIFIER.OPEN_EXAMPLE_IN_API_CONTEXT,{fid:e.uid,apiId:this.context.apiId},{},{tabOptions:{forceNew:!0},additionalContext:{editorState:{rename:!0},parentCollectionUID:this._item.collection}})}))}},{type:y.ACTION_VIEW_DOCUMENTATION,name:"View Documentation",isEnabled:!0,xpathname:y.ACTION_VIEW_DOCUMENTATION,handler:()=>{(0,f.requestActions)(this.id,this._item,y.ACTION_VIEW_DOCUMENTATION,{},{origin:"sidebar",collectionId:this._item.collection,canPerform:()=>!0,apiId:this.context.apiId},(()=>{}))}},!o&&(0,n.generateDefaultSidebarAction)({identifier:n.DEFAULT_ACTIONS.RENAME,isEnabled:this._item.isEditable&&(null===(e=(0,v.resolveStoreInstance)(b.default))||void 0===e?void 0:e.userCanSave),handler:e=>(0,f.renameRequest)(this.id,null,e)}),!o&&(0,n.generateSidebarBulkAction)({identifier:n.BULK_ACTIONS.DUPLICATE,isEnabled:i&&this._item.isEditable}),!o&&{type:y.ACTION_TYPE_PASTE,name:"Paste",shortcut:"paste",isEnabled:this._item.isEditable&&(null===(t=(0,v.resolveStoreInstance)(b.default))||void 0===t?void 0:t.userCanSave),tooltip:T.DISABLED_TOOLTIP_NO_PERMISSION,handler:()=>{}},!o&&(0,n.generateDefaultSidebarAction)({identifier:n.DEFAULT_ACTIONS.DELETE,isEnabled:i&&this._item.isEditable,handler:()=>i?this._item.isEditable?(0,f.deleteRequest)(this.id,{name:this.name,collectionId:this._item.collection}).catch((e=>{pm.logger.error("CollectionSidebarModel~handleAction - ",e)})):this.showPermissionErrorToast():(0,S.showOfflineActionDisabledToast)()})].filter(Boolean)}get isEditable(){return this._item.isEditable}get isLoading(){return Boolean(this._item.isPending)}toString(){return"request"}get meta(){return{iconBeforeText:(0,g.observer)((()=>o.createElement(E.default,{method:this._item.method})))}}}P([a.computed],N.prototype,"name",null),P([a.computed],N.prototype,"id",null),P([a.computed],N.prototype,"isPendingCreate",null),P([a.computed],N.prototype,"isEditable",null),P([a.computed],N.prototype,"isLoading",null),P([a.computed],N.prototype,"meta",null)},"./runtime-repl/request-http/sidebar/VersionViewRequestSidebarItem.ts":function(e,t,i){i.r(t),i.d(t,{default:function(){return h}});var o=i("../../node_modules/react/index.js"),n=i("./runtime-repl/sidebar-core/index.ts"),s=i("./node_modules/lodash/lodash.js"),r=i.n(s),a=i("../../node_modules/mobx/lib/mobx.module.js"),l=i("./runtime-repl/request-http/RequestIcon.js"),d=i("../../node_modules/mobx-react/dist/mobx-react.module.js"),c=i("./runtime-repl/collection/_api/CollectionSidebarStore.ts"),u=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},p=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((o=o.apply(e,t||[])).next())}))};const m="View documentation";class h extends n.SidebarItem{constructor(e,t){super(t),this.shouldExpandOnClick=!1,this.dataTestIdSuffix="request",this.analyticsEventCategory="request-item-version-mode",this.onClick=()=>this._item.openInWorkbench(),this.getChildren=()=>p(this,void 0,void 0,(function*(){return(0,c.getResponses)(this)})),this.allowedDropTargets=[],this._item=e,this.init()}init(){return p(this,void 0,void 0,(function*(){yield this.getChildren()}))}get name(){return this._item.model.name}get id(){return this._item.model.uid}get isPendingCreate(){return!1}showPermissionErrorToast(){pm.toasts.error("You do not have permissions to perform this action",{dedupeId:"collection-sidebar-model-permission-error"})}showErrorToast(e,t){pm.toasts.error(`Could not ${e} ${r().capitalize(t)} successfully`,{dedupeId:"collection-sidebar-model-error"})}get actions(){return[{name:m,isEnabled:!0,handler:()=>this.handleAction(m)}]}handleAction(e){if(e===m)return this._item.viewDocumentation();pm.logger.warn("VersionViewRequestSidebarItem~handleAction: Unhandled action",e)}get isEditable(){return this._item.model.isEditable}get meta(){return{iconBeforeText:(0,d.observer)((()=>o.createElement(l.default,{method:this._item.model.method})))}}toString(){return"request"}}u([a.computed],h.prototype,"name",null),u([a.computed],h.prototype,"id",null),u([a.computed],h.prototype,"isPendingCreate",null),u([a.computed],h.prototype,"actions",null),u([a.computed],h.prototype,"isEditable",null),u([a.computed],h.prototype,"meta",null)},"./runtime-repl/transient-collection/_api/TransientCollectionPatchHandler.ts":function(e,t,i){i.r(t),i.d(t,{BULK_ACTIONS_TYPE_STRINGS:function(){return c},handleGitLinkedAction:function(){return p},isGitLinkedCollectionAction:function(){return u}});var o=i("./runtime-repl/transient-collection/datastores/stores/TransientRequestStore.ts"),n=i("./runtime-repl/transient-collection/datastores/stores/TransientFolderStore.ts"),s=i("./runtime-repl/transient-collection/datastores/stores/TransientCollectionStore.ts"),r=i("./runtime-repl/transient-collection/datastores/stores/TransientExampleStore.ts"),a=i("./runtime-repl/_common/uid-helper.ts"),l=i("../../node_modules/mobx/lib/mobx.module.js"),d=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((o=o.apply(e,t||[])).next())}))};const c={GIT_LINKED_REQUEST:"request",GIT_LINKED_FOLDER:"folder",GIT_LINKED_EXAMPLE:"example",GIT_LINKED_COLLECTION:"collection"};function u(e){const t=e[0],i=t.from?t.from:t.path;try{return m(i.seek()),!0}catch(e){return!1}}function p(e){return d(this,void 0,void 0,(function*(){const t=new Set;yield Promise.all(e.map((e=>d(this,void 0,void 0,(function*(){switch(e.op){case"remove":return function(e){return d(this,void 0,void 0,(function*(){const t=m(e.path.seek());return yield null==t?void 0:t.delete(),[]}))}(e);case"copy":return(yield function(e){return d(this,void 0,void 0,(function*(){const t=e.from,i=e.path,o=t.seek(),{id:n,position:s}=i.seek(),r=i.seekLastParent(),l=m(o),d=m(r);return yield d.addChildren({id:l.model.id,type:l.model.type},s,{operation:"copy",silent:!0,newId:(0,a.decomposeUID)(n).modelId}),[d]}))}(e)).forEach((e=>t.add(e)));case"move":return Promise.resolve((0,l.runInAction)((()=>function(e){var t,i,o,n,s,r;const a=e.from,d=e.path,u=a.seek(),{id:p,position:h}=d.seek(),I=d.seekLastParent(),f=m(u),E=m(I),v=f.model.parentController;let b=h;const g=v===E,_=f.model.index;if(g&&_===b)return pm.logger.info("handleMoveAction: Item moved to same position"),[];g&&"number"==typeof b&&"number"==typeof _&&_<b&&b&&b--;switch((0,l.runInAction)((()=>{null==v||v.removeChildren({id:f.model.id,type:f.model.type}),E.addChildren({id:f.model.id,type:f.model.type},b,{operation:"move"})})),E.model.type){case c.GIT_LINKED_COLLECTION:null===(i=null===(t=null==f?void 0:f.model)||void 0===t?void 0:t.updateModel)||void 0===i||i.call(t,{collection:E.model.id,folder:void 0},{silent:!0});break;case c.GIT_LINKED_FOLDER:null===(n=null===(o=f.model)||void 0===o?void 0:o.updateModel)||void 0===n||n.call(o,{folder:E.model.id,collection:void 0},{silent:!0});break;case c.GIT_LINKED_REQUEST:null===(r=null===(s=null==f?void 0:f.model)||void 0===s?void 0:s.updateModel)||void 0===r||r.call(s,{request:E.model.id},{silent:!0})}return[v,E]}(e).forEach((e=>t.add(e))))))}}))))),t.forEach((e=>e.triggerUpdateEvent()))}))}function m({id:e,model:t}){let i;switch(t){case c.GIT_LINKED_REQUEST:i=o.default.find(e);break;case c.GIT_LINKED_FOLDER:i=n.default.find(e);break;case c.GIT_LINKED_COLLECTION:i=s.default.find(e);break;case c.GIT_LINKED_EXAMPLE:i=r.default.find(e);break;default:throw new TypeError("Model type not supported")}if(!i)throw new Error("Not found in store");return i}}}]);