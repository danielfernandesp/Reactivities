"use strict";(self.webpackChunk_postman_app_renderer=self.webpackChunk_postman_app_renderer||[]).push([[145],{"./iam/src/TeamSettings/pages/AuthenticationMethods/ConfigureAuthenticationMethods/EditAuthMethod.js":function(e,t,n){n.r(t);var o=n("../../node_modules/react/index.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Toast/ToastManager.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/ResponsiveContainer/ResponsiveContainer.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Breadcrumb/Breadcrumb.js"),d=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Dropdown/SingleSelect/SingleSelect.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/TextInput/TextInput.js"),m=n("../../node_modules/@postman/aether/esmLib/src/components/Label/Label.js"),u=n("../../node_modules/@postman/aether/esmLib/src/components/ButtonGroup/ButtonGroup.js"),p=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),h=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),E=n("./js/services/NavigationService.js"),g=n("./iam/src/common/RouteIdentifierConfig.js"),f=n("./iam/src/common/styled-components/StyledLoader.js"),T=n("./iam/src/TeamSettings/services/TeamAPIService.js"),y=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),I=n("./node_modules/lodash/lodash.js");const _=y.default.div`
  border-bottom: var(--border-width-default) var(--border-style-solid) var(--border-color-default);
  width: 100%;
`,b=[{id:g.AUTHENTICATION_ROUTE_IDENTIFIER,name:"Authentication"},{id:g.EDIT_AUTHENTICATION_METHOD_ROUTE_IDENTIFIER,name:"Edit authentication method"}];t.default=()=>{const[e,t]=(0,o.useState)([]),[n,y]=(0,o.useState)(!0),[S,v]=(0,o.useState)(!1),[w,j]=(0,o.useState)(!1),[A,C]=(0,o.useState)(),[L,D]=(0,o.useState)(""),[x,N]=(0,o.useState)({}),{addToast:R}=(0,a.default)(),O=E.default.getCurrentRouteParams().uid;(0,o.useEffect)((()=>{!async function(){try{const e=await Promise.all([(0,T.getSSOProviders)(),(0,T.authSchemes)("GET",O)]);t(I.get(e[0],"body.providers")),D(I.get(e,"1.body.auth.name")),N(I.get(e,"1.body.auth")),I.forEach(I.get(e[0],"body.providers"),(t=>{I.get(t,"value")===I.get(e,"1.body.auth.type")&&C(t)})),y(!1)}catch(e){y(!1),R({status:"error",title:"Something went wrong",description:I.get(e,"error.message","An error occurred while fetching the auth scheme. Try again after some time.")})}}()}),[]);return n?o.createElement(f.default,null):o.createElement(s.default,{type:"row",overflow:"visible",padding:"spacing-xxl spacing-zero"},o.createElement(s.default,{span:4,overflow:"unset"}," ",o.createElement("div",null)),o.createElement(s.default,{type:"column",span:4,maxWidth:"500px",overflow:"unset"},o.createElement(r.default,{direction:"column",gap:"spacing-xl"},o.createElement(r.default,{width:"100%",padding:{paddingBottom:"spacing-s"}},o.createElement(i.Breadcrumb,{onItemClick:e=>{E.default.transitionTo(e.id)}},b.map((e=>o.createElement(i.BreadcrumbItem,{itemData:e,key:e.id},e.name))))),o.createElement(d.default,{type:"h1",isTruncated:!0,text:"Edit authentication method",tooltip:"Edit authentication method"}),o.createElement(l.default,{onChange:()=>{},isLoading:n,value:A,options:e,label:"Authentication type",isDisabled:!0}),o.createElement(c.default,{placeholder:"Enter a name",value:L,onChange:e=>D(e.target.value),label:o.createElement(m.default,{text:"Authentication name"}),helperText:"Enter a user friendly name for this authentication method."}),o.createElement(u.default,null,o.createElement(p.default,{isDisabled:!L,isLoading:S,type:"primary",onClick:()=>{if(L===I.get(x,"name"))return E.default.transitionTo(g.EDIT_AUTHENTICATION_METHOD_DETAILS_ROUTE_IDENTIFIER,{uid:O});const e={name:L,idpIssuer:I.get(x,"config.identityProvider.issuer"),idpURL:I.get(x,"config.identityProvider.url"),idpCertificate:I.get(x,"config.identityProvider.certificate"),allowSignUp:I.get(x,"allowSignUp")};v(!0),(0,T.authSchemes)("PUT",O,e).then((()=>{E.default.transitionTo(g.EDIT_AUTHENTICATION_METHOD_DETAILS_ROUTE_IDENTIFIER,{uid:O})})).catch((e=>{v(!1),R({status:"error",title:"Something went wrong",description:I.get(e,"error.message","An error occurred while updating the auth scheme. Try again after some time.")})})).finally((()=>{v(!1)}))},text:"Continue"}),o.createElement(p.default,{type:"secondary",onClick:()=>{E.default.transitionTo(g.AUTHENTICATION_ROUTE_IDENTIFIER)},text:"Cancel"})),o.createElement(r.default,{direction:"column",justifyContent:"space-between",gap:"spacing-l"},o.createElement(_,null),o.createElement(r.default,{justifyContent:"space-between"},o.createElement(r.default,{direction:"column"},o.createElement(d.default,{type:"h4",isTruncated:!0,text:"Delete authentication method",tooltip:"Delete authentication method"}),o.createElement(h.default,{color:"content-color-secondary"},"Permanently delete authentication method.")),o.createElement(p.default,{isLoading:w,type:"secondary",onClick:()=>{j(!0),(0,T.authSchemes)("DELETE",O).then((()=>{E.default.transitionTo(g.AUTHENTICATION_ROUTE_IDENTIFIER)})).catch((e=>{R({status:"error",title:"Something went wrong",description:I.get(e,"error.message","An error occurred while deleting the auth scheme. Try again after some time.")})}))},text:"Delete"})),o.createElement(_,null)))))}},"./iam/src/common/styled-components/StyledLoader.js":function(e,t,n){n.r(t);var o=n("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),a=n("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js");const s=(0,o.default)(a.default)`
  height: 90vh;
  display: grid;
  place-content: center;
`;t.default=s}}]);