"use strict";(self.webpackChunk_postman_app_renderer=self.webpackChunk_postman_app_renderer||[]).push([[152],{"./iam/src/TeamSettings/pages/UnclaimedAccounts/EmptyUnclaimedAccountsList.js":function(e,t,n){n.r(t);var a=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/BlankState/BlankState.js"),o=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/Illustration.js");t.default=()=>a.createElement(s.default,{title:"No unclaimed accounts",description:"Your search returned 0 results"},a.createElement(o.default,{name:"illustration-no-activity"}))},"./iam/src/TeamSettings/pages/UnclaimedAccounts/NoUnclaimedAccountsSection.js":function(e,t,n){n.r(t);var a=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/BlankState/BlankState.js"),o=n("../../node_modules/@postman/aether/esmLib/src/components/Illustration/Illustration.js");t.default=({domain:e})=>a.createElement(s.default,{title:"There are no unclaimed accounts",description:`All accounts made with @${e} are currently part of your team.`},a.createElement(o.default,{name:"illustration-no-activity"}))},"./iam/src/TeamSettings/pages/UnclaimedAccounts/UnclaimedAccountListItem.js":function(e,t,n){n.r(t);var a=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),o=n("../../node_modules/@postman/aether/esmLib/src/components/Avatar/Avatar.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js");t.default=({id:e,email:t})=>a.createElement(s.default,{direction:"row",gap:"spacing-s",border:{borderBottom:"border-width-default"},padding:{paddingTop:"spacing-l",paddingBottom:"spacing-l"},alignItems:"center",key:e},a.createElement(o.default,{userId:e,linkProfile:!1,className:"avatar"}),a.createElement(i.default,null,t))},"./iam/src/TeamSettings/pages/UnclaimedAccounts/UnclaimedAccountsContainer.js":function(e,t,n){n.r(t);var a=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/ResponsiveContainer/ResponsiveContainer.js"),o=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Heading/Heading.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),c=n("../../node_modules/@postman/aether/esmLib/src/components/TextInput/TextInput.js"),r=n("../../node_modules/@postman/aether/esmLib/src/components/Pagination/Pagination.js"),m=n("../../node_modules/@postman/aether-icons/esmLib/src/design-system-icons/icon-action-search-stroke.js"),d=n("./iam/src/common/api/IAMservice.js"),u=n("./js/services/NavigationService.js"),p=n("./iam/src/common/components/CenteredLoader.js"),f=n("./iam/src/common/hooks/usePostmanGatewayService.js"),h=n("./iam/src/common/components/DomainDetailsBreadCrumbs.js"),g=n("./iam/src/common/components/RequestToClaimModal.js"),E=n("./iam/src/common/components/ExportUnclaimedAccountsCsvButton.js"),j=n("./iam/src/common/components/RequestToClaimDomainSuccessModal.js"),v=n("./iam/src/TeamSettings/pages/UnclaimedAccounts/UnclaimedAccountsList.js"),_=n("./iam/src/TeamSettings/pages/UnclaimedAccounts/NoUnclaimedAccountsSection.js"),y=n("./node_modules/lodash/lodash.js");t.default=()=>{var e,t;const[n,S]=(0,a.useState)(""),[b,C]=(0,a.useState)(!1),[I,T]=(0,a.useState)([]),[x,L]=(0,a.useState)(1),R=null===(e=u.default.getCurrentRouteParams())||void 0===e?void 0:e.id,[A,w]=(0,a.useState)(0),[U,k]=(0,a.useState)(!1),[D,P]=(0,a.useState)(!1),[B,N]=(0,a.useReducer)(((e,t)=>{switch(t.type){case"set_initial_count":return{...e,totalCount:t.value};case"set_status":return{...e,status:t.value};default:return e}}),{status:"pending",totalCount:0}),F=({offset:e,limit:t,searchValue:n="",populateTotalCount:a=!1,isInitial:s=!1})=>{C(!0),(0,d.getUnclaimedUsersForDomain)(R,{offset:e,limit:t,searchValue:n,populateTotalCount:a}).then((e=>{var t,n;(T((null==e?void 0:e.users)||[]),a)&&w(parseInt(null==e||null===(t=e.meta)||void 0===t?void 0:t.total)||0);s&&(N({type:"set_status",value:"done"}),N({type:"set_initial_count",value:parseInt(null==e||null===(n=e.meta)||void 0===n?void 0:n.total)||0}))})).finally((()=>C(!1)))},{serviceStatus:M,serviceResponse:O}=(0,f.default)({path:R&&`/api/domains/${R}`,service:"identity",rawResponse:!1,parsedResponse:!0,fireImmediately:!0,onSuccess:()=>{F({offset:0,limit:8,searchValue:"",populateTotalCount:!0,isInitial:!0})}}),q=(0,a.useCallback)(y.debounce(F,1e3),[]),G=e=>{S(e),q({offset:8*(x-1),limit:8,searchValue:e,populateTotalCount:!0})},V=null==O||null===(t=O.body)||void 0===t?void 0:t.domain;return(0,a.useEffect)((()=>{P(null==V?void 0:V.claimRequestRaised)}),[null==V?void 0:V.claimRequestRaised]),M===f.default.serviceStatus.pending||"pending"===B.status?a.createElement(p.default,null):a.createElement(s.default,{type:"row"},a.createElement(s.default,{type:"column",computer:4}),a.createElement(s.default,{type:"column",computer:4,padding:{paddingTop:"spacing-xl"}},a.createElement(h.default,{domainId:R,domainName:null==V?void 0:V.domain}),a.createElement(o.default,{justifyContent:"space-between",alignItems:"center"},a.createElement(i.default,{type:"h1",text:"Unclaimed accounts"}),a.createElement(g.default,{isDisabled:D,disabledReason:"You have already raised a request to claim this domain",domainId:R,onSuccess:()=>{P(!0),k(!0)}})),a.createElement(o.default,null,a.createElement(l.default,{type:"lead"},"View accounts made with @",null==V?void 0:V.domain," that are not part of your team.")),U&&a.createElement(j.default,{onDismiss:()=>k(!1)}),0===B.totalCount?a.createElement(_.default,{domain:null==V?void 0:V.domain}):a.createElement(a.Fragment,null,a.createElement(o.default,null,a.createElement(c.default,{prefix:a.createElement(m.default,null),placeholder:"Search by email",width:"50%",value:n,onClear:()=>G(""),onChange:e=>G(e.target.value)})),a.createElement(o.default,{justifyContent:"space-between",alignItems:"center"},a.createElement(i.default,{type:"h4",text:"Accounts "+(A>0?`(${A})`:"")}),a.createElement(E.default,{domainId:R})),a.createElement(v.default,{height:"512px",unclaimedAccountsList:I,isLoading:b}),a.createElement(o.default,null,a.createElement(r.default,{itemsPerPage:[8],onChange:e=>{L(e),F({offset:8*(e-1),limit:8,searchValue:n})},dataLength:A,initialPageSize:8,currentPage:x})))))}},"./iam/src/TeamSettings/pages/UnclaimedAccounts/UnclaimedAccountsList.js":function(e,t,n){n.r(t);var a=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),o=n("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js"),i=n("./iam/src/TeamSettings/pages/UnclaimedAccounts/UnclaimedAccountListItem.js"),l=n("./iam/src/TeamSettings/pages/UnclaimedAccounts/EmptyUnclaimedAccountsList.js"),c=n("./node_modules/lodash/lodash.js");t.default=({isLoading:e,height:t,unclaimedAccountsList:n})=>e?a.createElement(s.default,{direction:"column",height:t},a.createElement(s.default,{width:"100%",justifyContent:"center",alignItems:"center",padding:"spacing-xxl"},a.createElement(o.default,{size:"small"}))):a.createElement(s.default,{direction:"column",height:t},Array.isArray(n)&&0===n.length?a.createElement(l.default,null):c.map(n,(e=>a.createElement(i.default,{id:e.id,email:e.email}))))},"./iam/src/common/components/CenteredLoader.js":function(e,t,n){n.r(t);var a=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/ResponsiveContainer/ResponsiveContainer.js"),o=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Spinner/Spinner.js");t.default=({minHeight:e,size:t="small"})=>a.createElement(s.default,{type:"row"},a.createElement(s.default,{type:"column",span:12,minHeight:e||"100vh"},a.createElement(o.default,{width:"100%",justifyContent:"center",alignItems:"center",padding:"spacing-xxl"},a.createElement(i.default,{size:t}))))},"./iam/src/common/components/DomainDetailsBreadCrumbs.js":function(e,t,n){n.r(t);var a=n("../../node_modules/react/index.js"),s=n("./js/services/NavigationService.js"),o=n("../../node_modules/@postman/aether/esmLib/src/components/Breadcrumb/Breadcrumb.js"),i=n("./iam/src/common/RouteIdentifierConfig.js");t.default=({domainId:e,domainName:t})=>a.createElement(o.Breadcrumb,{onItemClick:({pathIdentifier:e,routeParams:t={}})=>s.default.transitionTo(e,t)},a.createElement(o.BreadcrumbItem,{itemData:{pathIdentifier:i.AUTHENTICATION_ROUTE_IDENTIFIER}},"Authentication"),a.createElement(o.BreadcrumbItem,{itemData:{pathIdentifier:i.DOMAIN_CAPTURE_ROUTE_IDENTIFIER}},"Domains"),a.createElement(o.BreadcrumbItem,{itemData:{pathIdentifier:i.DOMAIN_UNCLAIMED_ACCOUNTS_ROUTE_IDENTIFIER,routeParams:{id:e}}},t))},"./iam/src/common/components/ExportUnclaimedAccountsCsvButton.js":function(e,t,n){n.r(t);var a=n("../../node_modules/react/index.js"),s=n("./iam/src/common/hooks/usePostmanGatewayService.js"),o=n("../../node_modules/@postman/aether/esmLib/src/components/Toast/ToastManager.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),l=n("./node_modules/lodash/lodash.js");t.default=({domainId:e})=>{const{addToast:t}=(0,o.default)(),{serviceStatus:n,callServiceUsingPostmanGateway:c}=(0,s.default)({rawResponse:!1,parsedResponse:!0,fireImmediately:!1,onSuccess:e=>{const n=l.get(e,"body.message");t({status:"info",description:n})}});return a.createElement(i.default,{type:"secondary",text:"Export CSV",isLoading:n===s.default.serviceStatus.pending,onClick:()=>{c({path:e&&`/api/domains/${e}/export_unclaimed_accounts`,service:"identity",method:"POST"})}})}},"./iam/src/common/components/RequestToClaimDomainSuccessModal.js":function(e,t,n){n.r(t);var a=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),o=n("../../node_modules/@postman/aether/esmLib/src/components/Banner/Banner.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),l=n("./appsdk/components/link/Link.js"),c=n("./iam/constants.js");t.default=({onDismiss:e})=>a.createElement(s.default,null,a.createElement(o.default,{status:"info",title:"Request to claim accounts sent!",onDismiss:e},a.createElement(i.default,null,"Our support team will reach out to you soon. Learn more about claiming accounts ",a.createElement(l.default,{to:c.DOMAIN_CAPTURE_LEARNING_CENTER_DOCS,target:"_blank"}," ",a.createElement(i.default,{type:"link-default"}," here ")," "),".")))},"./iam/src/common/components/RequestToClaimModal.js":function(e,t,n){n.r(t);var a=n("../../node_modules/react/index.js"),s=n("../../node_modules/@postman/aether/esmLib/src/components/Button/Button.js"),o=n("../../node_modules/@postman/aether/esmLib/src/components/Modal/Modal.js"),i=n("../../node_modules/@postman/aether/esmLib/src/components/Flex/Flex.js"),l=n("../../node_modules/@postman/aether/esmLib/src/components/Text/Text.js"),c=n("./iam/src/common/hooks/usePostmanGatewayService.js");t.default=({domainId:e,disabledReason:t,isDisabled:n=!1,onSuccess:r=(()=>{})})=>{const[m,d]=(0,a.useState)(!1),{serviceStatus:u,callServiceUsingPostmanGateway:p}=(0,c.default)({rawResponse:!1,parsedResponse:!0,onSuccess:()=>{d(!1),r()},onError:e=>{400===(null==e?void 0:e.status)&&"DomainCaptureError"===(null==e?void 0:e.error.name)&&(d(!1),r())}});return a.createElement(a.Fragment,null,a.createElement(s.default,{isDisabled:n,tooltip:n&&t,type:"primary",text:"Request To Claim",onClick:()=>d(!0)}),m&&a.createElement(o.Modal,{isOpen:m,size:"small",onClose:()=>d(!1)},a.createElement(o.ModalHeader,{heading:"Manage unclaimed accounts"}),a.createElement(o.ModalContent,null,a.createElement(i.default,{direction:"column",gap:"spacing-s"},a.createElement(l.default,null,"Our customer support team will help you find the best solution to claim relevant accounts into your team. This ensures we transition the accounts and their data in a safe and secure way."))),a.createElement(o.ModalFooter,null,a.createElement(i.default,{grow:1,justifyContent:"flex-end",gap:"spacing-m"},a.createElement(s.default,{type:"secondary",text:"Cancel",onClick:()=>d(!1)}),a.createElement(s.default,{isLoading:u===c.default.serviceStatus.pending,type:"primary",text:"Send Request",onClick:()=>p({path:`/api/domains/${e}/request_to_claim`,method:"POST",service:"identity"})})))))}},"./iam/src/common/hooks/usePostmanGatewayService.js":function(e,t,n){n.r(t);var a=n("../../node_modules/react/index.js"),s=n("./js/utils/PostmanGatewayService.js");const o={idle:"idle",pending:"pending",done:"done",error:"error"},i={"Content-Type":"application/json"},l=({method:e="GET",path:t,body:n,service:l,rawResponse:c=!1,transform:r=(e=>e),fireImmediately:m=!1,onSuccess:d=(e=>e),parsedResponse:u=!1,onError:p=(e=>e)})=>{const[f,h]=(0,a.useState)(null),[g,E]=(0,a.useState)(null),[j,v]=(0,a.useState)(m?o.pending:o.idle),_=({service:e,method:t,path:n,body:a})=>{v(o.pending);let l=!1;return e&&n?s.default.request("/ws/proxy",{method:"post",headers:i,body:JSON.stringify({service:e,method:t,path:n,body:a})},{returnRawResponse:c,parsedResponse:u}).then((e=>(l=!c||e.ok,e))).then(r).then((e=>{if(!l)throw e;h(e),v(o.done),d(e)})).catch((e=>{E(e),p(e),v(o.error)})):Promise.reject("path or service not supplied")};return(0,a.useEffect)((()=>{m&&_({service:l,method:e,path:t,body:n})}),[m]),{serviceStatus:j,serviceResponse:f,serviceError:g,callServiceUsingPostmanGateway:_}};l.serviceStatus=o,t.default=l}}]);